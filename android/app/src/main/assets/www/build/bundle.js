var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function o(){return Object.create(null)}function i(e){e.forEach(n)}function r(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let s;function a(e,t){return s||(s=document.createElement("a")),s.href=t,e===s.href}function c(t,n,o){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function u(e,t,n,o){return e[1]&&o?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](o(t))):n.ctx}function d(e){return null==e?"":e}function f(e,t,n){return e.set(n),t}function p(e){const t="string"==typeof e&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const m="undefined"!=typeof window;let h=m?()=>window.performance.now():()=>Date.now(),y=m?e=>requestAnimationFrame(e):e;const g=new Set;function w(e){g.forEach((t=>{t.c(e)||(g.delete(t),t.f())})),0!==g.size&&y(w)}function v(e){let t;return 0===g.size&&y(w),{promise:new Promise((n=>{g.add(t={c:e,f:n})})),abort(){g.delete(t)}}}function b(e,t){e.appendChild(t)}function k(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function S(e){const t=N("style");return function(e,t){b(e.head||e,t),t.sheet}(k(e),t),t.sheet}function x(e,t,n){e.insertBefore(t,n||null)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function A(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function N(e){return document.createElement(e)}function T(e){return document.createTextNode(e)}function I(){return T(" ")}function C(){return T("")}function $(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function L(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function j(e,t){t=""+t,e.data!==t&&(e.data=t)}function P(e,t){e.value=null==t?"":t}function q(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function F(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,o,t),i}const D=new Map;let M,U=0;function O(e,t,n,o,i,r,l,s=0){const a=16.666/o;let c="{\n";for(let e=0;e<=1;e+=a){const o=t+(n-t)*r(e);c+=100*e+`%{${l(o,1-o)}}\n`}const u=c+`100% {${l(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${s}`,f=k(e),{stylesheet:p,rules:m}=D.get(f)||function(e,t){const n={stylesheet:S(t),rules:{}};return D.set(e,n),n}(f,e);m[d]||(m[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${d} ${o}ms linear ${i}ms 1 both`,U+=1,d}function _(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-o.length;i&&(e.style.animation=o.join(", "),U-=i,U||y((()=>{U||(D.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&E(t)})),D.clear())})))}function V(e){M=e}function B(){if(!M)throw new Error("Function called outside component initialization");return M}function R(e){B().$$.on_mount.push(e)}const W=[],H=[];let Y=[];const K=[],J=Promise.resolve();let X=!1;function G(){X||(X=!0,J.then(ne))}function z(){return G(),J}function Q(e){Y.push(e)}const Z=new Set;let ee,te=0;function ne(){if(0!==te)return;const e=M;do{try{for(;te<W.length;){const e=W[te];te++,V(e),oe(e.$$)}}catch(e){throw W.length=0,te=0,e}for(V(null),W.length=0,te=0;H.length;)H.pop()();for(let e=0;e<Y.length;e+=1){const t=Y[e];Z.has(t)||(Z.add(t),t())}Y.length=0}while(W.length);for(;K.length;)K.pop()();X=!1,Z.clear(),V(e)}function oe(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Q)}}function ie(){return ee||(ee=Promise.resolve(),ee.then((()=>{ee=null}))),ee}function re(e,t,n){e.dispatchEvent(F(`${t?"intro":"outro"}${n}`))}const le=new Set;let se;function ae(){se={r:0,c:[],p:se}}function ce(){se.r||i(se.c),se=se.p}function ue(e,t){e&&e.i&&(le.delete(e),e.i(t))}function de(e,t,n,o){if(e&&e.o){if(le.has(e))return;le.add(e),se.c.push((()=>{le.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}const fe={duration:0};function pe(n,o,l,s){const a={direction:"both"};let c=o(n,l,a),u=s?0:1,d=null,f=null,p=null;function m(){p&&_(n,p)}function y(e,t){const n=e.b-u;return t*=Math.abs(n),{a:u,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function g(o){const{delay:r=0,duration:l=300,easing:s=t,tick:a=e,css:g}=c||fe,w={start:h()+r,b:o};o||(w.group=se,se.r+=1),d||f?f=w:(g&&(m(),p=O(n,u,o,l,r,s,g)),o&&a(0,1),d=y(w,l),Q((()=>re(n,o,"start"))),v((e=>{if(f&&e>f.start&&(d=y(f,l),f=null,re(n,d.b,"start"),g&&(m(),p=O(n,u,d.b,d.duration,0,s,c.css))),d)if(e>=d.end)a(u=d.b,1-u),re(n,d.b,"end"),f||(d.b?m():--d.group.r||i(d.group.c)),d=null;else if(e>=d.start){const t=e-d.start;u=d.a+d.d*s(t/d.duration),a(u,1-u)}return!(!d&&!f)})))}return{run(e){r(c)?ie().then((()=>{c=c(a),g(e)})):g(e)},end(){m(),d=f=null}}}function me(e,t){e.d(1),t.delete(e.key)}function he(e,t){de(e,1,1,(()=>{t.delete(e.key)}))}function ye(e,t,n,o,r,l,s,a,c,u,d,f){let p=e.length,m=l.length,h=p;const y={};for(;h--;)y[e[h].key]=h;const g=[],w=new Map,v=new Map,b=[];for(h=m;h--;){const e=f(r,l,h),i=n(e);let a=s.get(i);a?o&&b.push((()=>a.p(e,t))):(a=u(i,e),a.c()),w.set(i,g[h]=a),i in y&&v.set(i,Math.abs(h-y[i]))}const k=new Set,S=new Set;function x(e){ue(e,1),e.m(a,d),s.set(e.key,e),d=e.first,m--}for(;p&&m;){const t=g[m-1],n=e[p-1],o=t.key,i=n.key;t===n?(d=t.first,p--,m--):w.has(i)?!s.has(o)||k.has(o)?x(t):S.has(i)?p--:v.get(o)>v.get(i)?(S.add(o),x(t)):(k.add(i),p--):(c(n,s),p--)}for(;p--;){const t=e[p];w.has(t.key)||c(t,s)}for(;m;)x(g[m-1]);return i(b),g}function ge(e){e&&e.c()}function we(e,t,o,l){const{fragment:s,after_update:a}=e.$$;s&&s.m(t,o),l||Q((()=>{const t=e.$$.on_mount.map(n).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...t):i(t),e.$$.on_mount=[]})),a.forEach(Q)}function ve(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];Y.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),Y=t}(n.after_update),i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function be(t,n,r,l,s,a,c,u=[-1]){const d=M;V(t);const f=t.$$={fragment:null,ctx:[],props:a,update:e,not_equal:s,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(f.root);let p=!1;if(f.ctx=r?r(t,n.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return f.ctx&&s(f.ctx[e],f.ctx[e]=i)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](i),p&&function(e,t){-1===e.$$.dirty[0]&&(W.push(e),G(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],f.update(),p=!0,i(f.before_update),f.fragment=!!l&&l(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(E)}else f.fragment&&f.fragment.c();n.intro&&ue(t.$$.fragment),we(t,n.target,n.anchor,n.customElement),ne()}V(d)}class ke{$destroy(){ve(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Se=[];function xe(t,n=e){let o;const i=new Set;function r(e){if(l(t,e)&&(t=e,o)){const e=!Se.length;for(const e of i)e[1](),Se.push(e,t);if(e){for(let e=0;e<Se.length;e+=2)Se[e][0](Se[e+1]);Se.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(l,s=e){const a=[l,s];return i.add(a),1===i.size&&(o=n(r)||e),l(t),()=>{i.delete(a),0===i.size&&o&&(o(),o=null)}}}}const Ee=xe(17),Ae=xe(null),Ne=xe(!0),Te=xe(null),Ie=xe(null),Ce=xe(null),$e=xe(null),Le=xe(null),je=xe(null),Pe=xe(null),qe=xe(null),Fe=xe(null),De=xe(null),Me=xe(null),Ue=xe(null),Oe=xe(null),_e=xe(null),Ve=xe([]),Be=xe(null),Re=xe(!0),We=xe(null),He=xe(null),Ye=xe(!1),Ke=xe(""),Je=xe(null),Xe=xe(!1),Ge=xe(!1),ze=xe(null),Qe=xe(!1),Ze=xe(null),et=xe(!0),tt=xe(!1),nt=xe(null),ot=xe(null),it=xe(null),rt=xe(null),lt=xe(null),st=xe(null),at=xe(null),ct=xe(null),ut=xe(null),dt=xe(null),ft=xe(null),pt=e=>"[object Object]"===Object.prototype.toString.call(e),mt=e=>{for(const t in e)return!1;return!0};function ht(e,t,n=.5){try{if(!t.length)return null;let i=null;var o=0;let r=e.getBoundingClientRect();return t instanceof HTMLCollection&&(t=Array.from(t)),t?.forEach?.((e=>{let t=e.getBoundingClientRect();var l=(Math.min(t.bottom,r.bottom)-Math.max(t.top,r.top))/t.height;l>o&&(0===n&&l>n||l>=n)&&(o=l,i=e)})),i}catch(e){return}}const yt=(e,t)=>{try{return Array.from(e.parentElement.children).indexOf(e)}catch(e){return}},gt=(e,t,n="top",o,i=0)=>{try{let r;if("string"==typeof t&&(t=document.querySelector(t)),e===window){const e=t.getBoundingClientRect(),o=window.scrollY;r="bottom"===n?e.bottom+o-window.innerHeight:"center"===n?e.top+o-window.innerHeight/2:e.top+o}else if("string"==typeof e&&(e=document.querySelector(e)),"bottom"===n)r=t.offsetTop+t.offsetHeight-e.offsetHeight;else if("center"===n){let n=t.getBoundingClientRect(),o=e.getBoundingClientRect();r=n.top+n.height/2-(o.top+o.height/2)+e.scrollTop-o.height/2}else{let n=t.getBoundingClientRect(),o=e.getBoundingClientRect();r=n.top-o.top+e.scrollTop}e===window?"smooth"===o?window.scrollTo({top:r+i,behavior:"smooth"}):window.scrollTo({top:r+i}):"smooth"===o?e.scrollBy({top:r+i,behavior:"smooth"}):e.scrollTop=r+i}catch(e){return}},wt=(e,t=2)=>{if("number"==typeof e){const n=new Intl.NumberFormat("en-US",{maximumFractionDigits:t,minimumFractionDigits:0,notation:"compact",compactDisplay:"short"});return Math.abs(e)>=1e3?n.format(e):Math.abs(e)<.01?e.toExponential(0):e.toFixed(t)||e.toLocaleString("en-US",{maximumFractionDigits:t})}return null},vt=(e,t)=>"string"==typeof e&&"string"==typeof t&&e.toLowerCase()===t.toLowerCase(),bt=(e,t)=>{let n=Math.max(e.selectionStart-1||0,0);e.value=t,e.setSelectionRange(n,n)},kt=()=>{try{return JSBridge.exportJSON,!0}catch(e){return!1}};let St;const xt=(e,t)=>{e?.classList?.add?.(t)},Et=(e,t)=>{e?.classList?.remove?.(t)};let At={};const Nt=e=>new Promise((t=>{kt()?t(e):At[e]?t(At[e]):fetch(e,{headers:{"Cache-Control":"max-age=31536000, immutable"}}).then((e=>e.blob())).then((n=>{let o=URL.createObjectURL(n);At[e]=o,t(o)})).catch((async()=>{t(e)}))}));let Tt,It=1e3,Ct=!1,$t=!1,Lt=!1;const jt=e=>new Promise(((t,n)=>{Lt||$t||(Ct=!0,Nt("./webapi/worker/animeLoader.js").then((o=>{let i=new Worker(o);i.postMessage(e),i.onmessage=({data:e})=>{e.init?(Tt&&Tt.terminate(),Tt=i,i=null):void 0!==e?.status?(Ct=!0,Pe.set(e.status)):e?.isNew&&(Ct=!1,Tt.onmessage=null,t(Object.assign({},e,{animeLoaderWorker:Tt})))},i.onerror=e=>{n(e)}})).catch((e=>{on(),n(e)})))}));let Pt,qt;const Ft=e=>new Promise(((t,n)=>{Lt||$t||(Ct=!0,qt&&qt.terminate(),Nt("./webapi/worker/processRecommendedAnimeList.js").then((o=>{qt=new Worker(o),Pt&&clearTimeout(Pt),qt.postMessage(e),qt.onmessage=({data:e})=>{void 0!==e?.status?(Ct=!0,Pe.set(e.status)):(Ct=!1,Pt=setTimeout((()=>{qt.terminate()}),It),t())},qt.onerror=e=>{n(e)}})).catch((e=>{on(),n(e)})))}));let Dt,Mt;const Ut=e=>new Promise(((t,n)=>{Lt||$t||(Mt&&Mt.terminate(),Nt("./webapi/worker/requestAnimeEntries.js").then((o=>{Mt=new Worker(o),Dt&&clearTimeout(Dt),Mt.postMessage(e),Mt.onmessage=({data:e})=>{void 0!==e?.status?Ct||Pe.set(e.status):void 0!==e?.updateRecommendationList?ct.update((e=>!e)):e?.lastRunnedAutoUpdateDate instanceof Date&&!isNaN(e?.lastRunnedAutoUpdateDate)?De.set(e.lastRunnedAutoUpdateDate):(void 0!==e?.errorDuringInit||(Dt=setTimeout((()=>{Mt.terminate()}),It)),t(e))},Mt.onerror=e=>{n(e)}})).catch((e=>{on(),n(e)})))}));let Ot,_t;const Vt=e=>new Promise(((t,n)=>{Lt||$t||(_t&&_t.terminate(),Nt("./webapi/worker/requestUserEntries.js").then((o=>{_t=new Worker(o),Ot&&clearTimeout(Ot),_t.postMessage(e),_t.onmessage=({data:e})=>{void 0!==e?.status?Ct||(Pe.set(e.status),"User not found"===e.status&&(dt.update((e=>!e)),window.confirmPromise({isAlert:!0,text:"User is not found, you may want to try again..."}),Ot=setTimeout((()=>{_t.terminate()}),It),n(e))):e?.error?(dt.update((e=>!e)),Ot=setTimeout((()=>{_t.terminate()}),It),n(e)):void 0!==e?.updateRecommendationList?ct.update((e=>!e)):(Ot=setTimeout((()=>{_t.terminate()}),It),t(e))},_t.onerror=e=>{dt.update((e=>!e)),Ot=setTimeout((()=>{_t.terminate()}),It),n(e)}})).catch((e=>{dt.update((e=>!e)),on(),n(e)})))}));let Bt;const Rt=e=>new Promise(((e,t)=>{$t||(Lt=!0,nn(),Bt&&Bt.terminate(),Nt("./webapi/worker/exportUserData.js").then((n=>{Bt=new Worker(n),kt()?Bt.postMessage("android"):Bt.postMessage("browser"),Bt.onmessage=({data:t})=>{if(void 0!==t?.status)Ct=!0,Pe.set(t.status);else if(kt()){Ct=!1;let n=t.chunk,o=t.state;if(0===o)JSBridge.exportJSON("",0,"");else if(1===o)JSBridge.exportJSON(n,1,"");else if(2===o){let o=t.username??null;JSBridge.exportJSON(n,2,`Kanshi.${o?.toLowerCase()||"Backup"}.json`),Bt.terminate(),Lt=!1,e(t)}}else{Ct=!1;let n=t.username??null;((e,t)=>{St&&setTimeout((()=>URL.revokeObjectURL(St)),0),St=e;const n=document.createElement("a");n.href=e,n.download=t,n.click()})(t.url,`Kanshi.${n?.toLowerCase()||"Backup"}.json`),Lt=!1,e(t)}},Bt.onerror=e=>{Lt=!1,window.confirmPromise?.({isAlert:!0,title:"Export Failed",text:"Data is not exported, please try again in a later time."}),t(e)}})).catch((e=>{Lt=!1,on(),t(e)})))}));let Wt,Ht;const Yt=e=>new Promise(((t,n)=>{Nt("./webapi/worker/getIDBdata.js").then((o=>{let i=new Worker(o);i.postMessage({name:e}),i.onmessage=({data:e})=>{void 0!==e?.status?Pe.set(e.status):(i.terminate(),t(e))},i.onerror=e=>{n(e)}})).catch((()=>{on(),n(error)}))})),Kt=(e,t)=>new Promise(((n,o)=>{Lt||$t||Nt("./webapi/worker/saveIDBdata.js").then((i=>{let r=new Worker(i);r.onmessage=({data:e})=>{void 0!==e?.status?Pe.set(e.status):(setTimeout((()=>{r.terminate(),r=null}),It),n())},r.onerror=e=>{o(e)},r.postMessage({data:e,name:t})})).catch((e=>{on(),o(e)}))}));let Jt,Xt;let Gt,zt;let Qt,Zt,en;const tn=e=>{if(!Lt&&!$t)return new Promise(((t,n)=>{Zt=setInterval((()=>{Xt||zt||Pe.set("Getting Filters")}),300),Nt("./webapi/worker/getFilterOptions.js").then((o=>{Zt&&(clearInterval(Zt),Zt=null),en&&en.terminate(),en=new Worker(o),Qt&&clearTimeout(Qt),en.postMessage(e),en.onmessage=({data:e})=>{void 0!==e?.status?(Ct=!0,Pe.set(e.status)):(Ct=!1,Qt=setTimeout((()=>{en.terminate()}),It),t(e))},en.onerror=e=>{n(e)}})).catch((e=>{Zt&&(clearInterval(Zt),Zt=null),Pe.set(null),on(),n(e)}))}))};function nn(){Tt?.terminate?.(),qt?.terminate?.(),Mt?.terminate?.(),_t?.terminate?.(),Bt?.terminate?.(),Ht?.terminate?.(),en?.terminate?.()}function on(){kt()?window.confirmPromise?.({isAlert:!0,title:"Something Went Wrong",text:"App may not be working properly, you may want to restart and make sure you're running the latest version."}):window.confirmPromise?.({isAlert:!0,title:"Something Went Wrong",text:"App may not be working properly, you may want to refresh the page, or if not clear the cookies but backup your data first."})}function rn(e,t,n){const o=e.slice();return o[35]=t[n],o}function ln(e,t,n){const o=e.slice();return o[35]=t[n],o}function sn(e,t,n){const o=e.slice();return o[38]=t[n],o[39]=t,o[40]=n,o}function an(t){let n;return{c(){n=N("div"),n.textContent="No Results",L(n,"class","empty svelte-sktprc")},m(e,t){x(e,n,t)},p:e,d(e){e&&E(n)}}}function cn(t){let n,o=Array(10),i=[];for(let e=0;e<o.length;e+=1)i[e]=dn(rn(t,o,e));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();n=C()},m(e,t){for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(e,t);x(e,n,t)},p:e,d(e){A(i,e),e&&E(n)}}}function un(e){let t,n,o=[],i=new Map,r=e[4]||[];const l=e=>e[38].id;for(let t=0;t<r.length;t+=1){let n=sn(e,r,t),s=l(n);i.set(s,o[t]=mn(s,n))}let s=Array(6),a=[];for(let t=0;t<s.length;t+=1)a[t]=hn(ln(e,s,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=I();for(let e=0;e<a.length;e+=1)a[e].c();n=C()},m(e,i){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,i);x(e,t,i);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(e,i);x(e,n,i)},p(e,c){if(4052&c[0]&&(r=e[4]||[],o=ye(o,c,l,1,e,r,i,t.parentNode,me,mn,t,sn)),26&c[0]){let t;for(s=Array(6),t=0;t<s.length;t+=1){const o=ln(e,s,t);a[t]?a[t].p(o,c):(a[t]=hn(o),a[t].c(),a[t].m(n.parentNode,n))}for(;t<a.length;t+=1)a[t].d(1);a.length=s.length}},d(e){for(let t=0;t<o.length;t+=1)o[t].d(e);e&&E(t),A(a,e),e&&E(n)}}}function dn(t){let n;return{c(){n=N("div"),n.innerHTML='<div class="shimmer svelte-sktprc"></div> \n                    <span class="image-grid__card-title svelte-sktprc"><span class="title skeleton shimmer svelte-sktprc"></span> \n                        <span class="brief-info skeleton shimmer svelte-sktprc"></span></span> \n                ',L(n,"class","image-grid__card skeleton svelte-sktprc")},m(e,t){x(e,n,t)},p:e,d(e){e&&E(n)}}}function fn(e){let t,n=(wt(e[38].weightedScore)||"N/A")+"";return{c(){t=T(n)},m(e,n){x(e,t,n)},p(e,o){16&o[0]&&n!==(n=(wt(e[38].weightedScore)||"N/A")+"")&&j(t,n)},d(e){e&&E(t)}}}function pn(e){let t,n=(e[10](e[38])||"N/A")+"";return{c(){t=T(n)},m(e,n){x(e,t,n)},p(e,o){16&o[0]&&n!==(n=(e[10](e[38])||"N/A")+"")&&j(t,n)},d(e){e&&E(t)}}}function mn(e,t){let n,o,l,s,c,u,f,p,m,h,y,g,w,v,k,S,A,C,P,q,F,D,M,U,O=(t[38].title||"N/A")+"",_=`${t[38].format||"N/A"}${t[38].episodes?" ["+t[38].episodes+"]":""}`,V=t[39],B=t[40];function R(...e){return t[13](t[40],...e)}function W(e,t){return e[2]?pn:fn}let H=W(t),Y=H(t);const K=()=>t[14](n,V,B),J=()=>t[14](null,V,B);return{key:e,first:null,c(){n=N("div"),o=N("div"),l=N("img"),c=I(),u=N("span"),f=N("span"),p=T(O),m=I(),h=N("span"),y=N("div"),g=N("i"),v=I(),k=T(_),S=I(),A=N("div"),C=N("i"),q=I(),Y.c(),L(l,"loading","lazy"),L(l,"class","image-grid__card-thumb fade-out svelte-sktprc"),L(l,"alt","anime-cover"),a(l.src,s=t[38].coverImageUrl||"")||L(l,"src",s),L(o,"class","shimmer svelte-sktprc"),L(f,"class","title svelte-sktprc"),L(g,"class",w=d(`${t[11](t[38].userStatus)}-color fa-solid fa-circle`)+" svelte-sktprc"),L(y,"class","brief-info svelte-sktprc"),L(C,"class",P=d(`${gn(t[38])}-color fa-solid fa-star`)+" svelte-sktprc"),L(A,"class","brief-info svelte-sktprc"),L(h,"class","brief-info-wrapper svelte-sktprc"),L(u,"class","image-grid__card-title copy svelte-sktprc"),L(u,"copy-value",F=t[38].title||""),L(n,"class","image-grid__card svelte-sktprc"),L(n,"title",D=t[9](t[38])),this.first=n},m(e,i){x(e,n,i),b(n,o),b(o,l),b(n,c),b(n,u),b(u,f),b(f,p),b(u,m),b(u,h),b(h,y),b(y,g),b(y,v),b(y,k),b(h,S),b(h,A),b(A,C),b(A,q),Y.m(A,null),K(),M||(U=[$(l,"load",t[12]),$(l,"click",(function(){r(t[6](t[40]))&&t[6](t[40]).apply(this,arguments)})),$(l,"pointerdown",(function(){r(t[7](t[40]))&&t[7](t[40]).apply(this,arguments)})),$(l,"pointerup",t[8]),$(l,"pointercancel",t[8]),$(l,"keydown",R)],M=!0)},p(e,o){t=e,16&o[0]&&!a(l.src,s=t[38].coverImageUrl||"")&&L(l,"src",s),16&o[0]&&O!==(O=(t[38].title||"N/A")+"")&&j(p,O),16&o[0]&&w!==(w=d(`${t[11](t[38].userStatus)}-color fa-solid fa-circle`)+" svelte-sktprc")&&L(g,"class",w),16&o[0]&&_!==(_=`${t[38].format||"N/A"}${t[38].episodes?" ["+t[38].episodes+"]":""}`)&&j(k,_),16&o[0]&&P!==(P=d(`${gn(t[38])}-color fa-solid fa-star`)+" svelte-sktprc")&&L(C,"class",P),H===(H=W(t))&&Y?Y.p(t,o):(Y.d(1),Y=H(t),Y&&(Y.c(),Y.m(A,null))),16&o[0]&&F!==(F=t[38].title||"")&&L(u,"copy-value",F),16&o[0]&&D!==(D=t[9](t[38]))&&L(n,"title",D),V===t[39]&&B===t[40]||(J(),V=t[39],B=t[40],K())},d(e){e&&E(n),Y.d(),J(),M=!1,i(U)}}}function hn(e){let t,n,o,i,r,l;return{c(){t=N("div"),n=N("div"),o=I(),i=N("span"),i.innerHTML='<span class="title skeleton shimmer svelte-sktprc"></span> \n                        <span class="brief-info skeleton shimmer svelte-sktprc"></span>',r=I(),L(n,"class","shimmer svelte-sktprc"),L(i,"class","image-grid__card-title svelte-sktprc"),L(t,"class",l=d("image-grid__card skeleton anime-loaded-padding "+(e[4]?.length&&!e[3]&&e[1]?"":"disable-interaction"))+" svelte-sktprc")},m(e,l){x(e,t,l),b(t,n),b(t,o),b(t,i),b(t,r)},p(e,n){26&n[0]&&l!==(l=d("image-grid__card skeleton anime-loaded-padding "+(e[4]?.length&&!e[3]&&e[1]?"":"disable-interaction"))+" svelte-sktprc")&&L(t,"class",l)},d(e){e&&E(t)}}}function yn(t){let n,o;function i(e,t){return e[4]?.length?un:!e[4]||e[5]?cn:an}let r=i(t),l=r(t);return{c(){n=N("main"),o=N("div"),l.c(),L(o,"id","anime-grid"),L(o,"class","image-grid svelte-sktprc"),L(n,"class","svelte-sktprc")},m(e,i){x(e,n,i),b(n,o),l.m(o,null),t[15](o)},p(e,t){r===(r=i(e))&&l?l.p(e,t):(l.d(1),l=r(e),l&&(l.c(),l.m(o,null)))},i:e,o:e,d(e){e&&E(n),l.d(),t[15](null)}}}function gn({contentCaution:e,meanScoreAll:t,meanScoreAbove:n,score:o}){return e?.caution?.length?"red":o<t?"purple":o<n?"orange":e?.semiCaution?.length?"teal":"green"}function wn(e,t,n){let o,i,r,l,s,a,u,d,p,m,h,y,g,w,v,b,k,S,x,E;c(e,Ce,(e=>n(2,o=e))),c(e,Ge,(e=>n(19,i=e))),c(e,ze,(e=>n(20,r=e))),c(e,Qe,(e=>n(21,l=e))),c(e,Ze,(e=>n(22,s=e))),c(e,je,(e=>n(23,a=e))),c(e,Ye,(e=>n(3,u=e))),c(e,it,(e=>n(24,d=e))),c(e,We,(e=>n(25,p=e))),c(e,Le,(e=>n(4,m=e))),c(e,Je,(e=>n(26,h=e))),c(e,Ae,(e=>n(27,y=e))),c(e,Pe,(e=>n(28,g=e))),c(e,Ie,(e=>n(29,w=e))),c(e,Ke,(e=>n(30,v=e))),c(e,Re,(e=>n(5,b=e))),c(e,He,(e=>n(31,k=e))),c(e,dt,(e=>n(32,S=e)));let A=!1;R((()=>{n(0,x=x||document.getElementById("anime-grid"))}));let N,T=!1;function I(e){f(Ze,s=e,s),f(Qe,l=!0,l)}je.subscribe((e=>{e instanceof Worker&&(e.onmessage=async({data:e})=>{if(await z(),void 0!==e?.status)f(Pe,g=e.status,g);else if(e.finalAnimeList instanceof Array)!0===e?.reload?(f(Le,m=e.finalAnimeList,m),T=!0):!0===e.isNew?f(Le,m=e.finalAnimeList,m):!1===e.isNew&&m instanceof Array&&(f(Le,m=m.concat(e.finalAnimeList),m),e.isLast&&(f(Ye,u=!0,u),p instanceof IntersectionObserver&&(p.disconnect(),f(We,p=null,p))));else if(!0===e.isRemoved&&"number"==typeof e.removedID){let t=Math.max(m.length-2,0),n=m[t].gridElement||x.children?.[t];p instanceof IntersectionObserver&&n instanceof Element&&p.observe(n);let o=m.findIndex((({id:t})=>t===e.removedID));f(Le,m=m.filter((({id:t})=>t!==e.removedID)),m),o>=0&&f(He,k=o,k)}n(1,A=!1)},e.onerror=e=>{f(Pe,g="Something went wrong...",g),console.error(e)})})),window.checkAnimeLoader=()=>{p instanceof IntersectionObserver&&a instanceof Worker&&"function"==typeof a?.onmessage&&"function"==typeof a?.postMessage||!y||b||(f(Le,m=null,m),jt().then((async e=>{f(je,a=e.animeLoaderWorker,a),f(Ke,v="",v),e?.isNew&&(f(Le,m=e.finalAnimeList,m),f(Ie,w=e.hiddenEntries,w)),f(Pe,g=null,g)})).catch((e=>{h?.(y?{isAlert:!0,title:"Something Went Wrong",text:"App may not be working properly, you may want to restart and make sure you're running the latest version."}:{isAlert:!0,title:"Something Went Wrong",text:"App may not be working properly, you may want to refresh the page, or if not clear the cookies but backup your data first."})})))},Le.subscribe((async e=>{if(e instanceof Array&&e.length){u&&f(Ye,u=!1,u),p&&(p.disconnect(),f(We,p=null,p)),await z(),E=!1,f(We,p=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){if(n(1,A=!0),E)return;E=!0,setTimeout((()=>{a instanceof Worker?a.postMessage({loadMore:!0}):f(dt,S=!S,S),E=!1}),1e3)}}))}),{root:null,rootMargin:"100%",threshold:[0,1]}),p);let e=m.length-1,t=m[e].gridElement||x.children?.[e];p instanceof IntersectionObserver&&(t instanceof Element&&p.observe(t),document.querySelectorAll(".anime-loaded-padding").forEach((e=>{p.observe(e)}))),T&&(f(it,d=!d,d),T=!1)}else p&&(p?.disconnect?.(),f(We,p=null,p)),T&&(f(it,d=!d,d),T=!1)})),Ke.subscribe((async e=>{"string"==typeof e&&a instanceof Worker&&(f(Ye,u=!1,u),a.postMessage({filterKeyword:e}))}));return[x,A,o,u,m,b,I,function(e){N&&clearTimeout(N),N=setTimeout((()=>{f(ze,r=e,r),f(Ge,i=!0,i)}),500)},function(){N&&clearTimeout(N)},function({contentCaution:e,sortedFavoriteContents:t,meanScoreAll:n,meanScoreAbove:o,score:i}){let r=[];t?.forEach((e=>{"string"==typeof e&&r.push(e)}));let l=[];i<n?l.push(`Very Low Score (mean: ${wt(n)})`):i<o&&l.push(`Low Score (mean: ${wt(o)})`),l=l.concat(e?.caution||[]).concat(e?.semiCaution||[]);let s="";return r.length&&(s+="Favorite Contents: "+r.join(", ")||""),l.length&&(s+="\n\nContent Cautions: "+l.join(", ")),s},function({weightedScore:e,score:t,averageScore:n,userScore:i}){let r=o?.sortFilter.filter((({sortType:e})=>"none"!==e))?.[0]?.sortName;return"score"===r?wt(t):"user score"===r?i:"average score"===r?n:wt(e)},function(e){return vt(e,"completed")?"green":vt(e,"current")||vt(e,"repeating")?"blue":vt(e,"planning")?"orange":vt(e,"paused")?"peach":vt(e,"dropped")?"red":"lightgrey"},e=>Et(e.target,"fade-out"),(e,t)=>"Enter"===t.key&&I(e),function(e,t,n){H[e?"unshift":"push"]((()=>{t[n].gridElement=e}))},function(e){H[e?"unshift":"push"]((()=>{x=e,n(0,x)}))}]}function vn(e){const t=e-1;return t*t*t+1}function bn(e,{delay:n=0,duration:o=400,easing:i=t}={}){const r=+getComputedStyle(e).opacity;return{delay:n,duration:o,easing:i,css:e=>"opacity: "+e*r}}function kn(e,{delay:t=0,duration:n=400,easing:o=vn,x:i=0,y:r=0,opacity:l=0}={}){const s=getComputedStyle(e),a=+s.opacity,c="none"===s.transform?"":s.transform,u=a*(1-l),[d,f]=p(i),[m,h]=p(r);return{delay:t,duration:n,easing:o,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*d}${f}, ${(1-e)*m}${h});\n\t\t\topacity: ${a-u*t}`}}function Sn(e,t){return new Promise((async(n,o)=>{await Kt(e,t).then((e=>{n(e)})).catch((e=>{o(e)}))}))}async function xn(e){return new Promise((async(t,n)=>{await Yt(e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}function En(e,t,n){const o=e.slice();return o[64]=t[n],o[65]=t,o[66]=n,o}function An(e,t,n){const o=e.slice();return o[67]=t[n].caution,o[68]=t[n].cautionColor,o}function Nn(e,t,n){const o=e.slice();return o[71]=t[n].tag,o[72]=t[n].tagColor,o}function Tn(e,t,n){const o=e.slice();return o[75]=t[n].genre,o[76]=t[n].genreColor,o}function In(e,t,n){const o=e.slice();return o[79]=t[n].studio,o[80]=t[n].studioColor,o}function Cn(e){let t,n,o,i=[],r=new Map,l=e[4]||[];const s=e=>e[64].id;for(let t=0;t<l.length;t+=1){let n=En(e,l,t),o=s(n);r.set(o,i[t]=Jn(o,n))}let a=e[4]?.length&&!e[7]&&Xn();return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=I(),a&&a.c(),n=C()},m(e,r){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,r);x(e,t,r),a&&a.m(e,r),x(e,n,r),o=!0},p(e,o){523900&o[0]&&(l=e[4]||[],ae(),i=ye(i,o,s,1,e,l,r,t.parentNode,he,Jn,t,En),ce()),e[4]?.length&&!e[7]?a||(a=Xn(),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i(e){if(!o){for(let e=0;e<l.length;e+=1)ue(i[e]);o=!0}},o(e){for(let e=0;e<i.length;e+=1)de(i[e]);o=!1},d(e){for(let t=0;t<i.length;t+=1)i[t].d(e);e&&E(t),a&&a.d(e),e&&E(n)}}}function $n(e){let t;return{c(){t=N("div"),L(t,"class","trailer display-none")},m(e,n){x(e,t,n)},d(e){e&&E(t)}}}function Ln(e){let t,n,o,i;return{c(){t=N("img"),L(t,"loading","lazy"),a(t.src,n=e[64].bannerImageUrl)||L(t,"src",n),L(t,"alt","bannerImg"),L(t,"class","bannerImg fade-out svelte-1k0t1sj")},m(n,r){x(n,t,r),o||(i=$(t,"load",e[19]),o=!0)},p(e,o){16&o[0]&&!a(t.src,n=e[64].bannerImageUrl)&&L(t,"src",n)},d(e){e&&E(t),o=!1,i()}}}function jn(e){let t;function n(e,t){return e[64].bannerImageUrl?qn:Pn}let o=n(e),i=o(e);return{c(){i.c(),t=C()},m(e,n){i.m(e,n),x(e,t,n)},p(e,r){o===(o=n(e))&&i?i.p(e,r):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&E(t)}}}function Pn(e){let t,n,o,i;return{c(){t=N("img"),L(t,"loading","lazy"),a(t.src,n=e[64].coverImageUrl)||L(t,"src",n),L(t,"alt","coverImg"),L(t,"class","coverImg fade-out svelte-1k0t1sj")},m(n,r){x(n,t,r),o||(i=$(t,"load",e[21]),o=!0)},p(e,o){16&o[0]&&!a(t.src,n=e[64].coverImageUrl)&&L(t,"src",n)},d(e){e&&E(t),o=!1,i()}}}function qn(e){let t,n,o,i;return{c(){t=N("img"),L(t,"loading","lazy"),a(t.src,n=e[64].coverImageUrl)||L(t,"src",n),L(t,"alt","coverImg"),L(t,"class","coverImg display-none fade-out svelte-1k0t1sj")},m(n,r){x(n,t,r),o||(i=$(t,"load",e[20]),o=!0)},p(e,o){16&o[0]&&!a(t.src,n=e[64].coverImageUrl)&&L(t,"src",n)},d(e){e&&E(t),o=!1,i()}}}function Fn(e){let t,n,o,r,l,s,a,c,u,d=e[2]>=350?"List Update Available":e[2]>=283?"Update Available":e[2]>=236?"Available":"";return{c(){t=N("div"),n=N("i"),o=I(),r=N("h3"),l=T(d),L(n,"class","list-update-icon fa-solid fa-arrows-rotate svelte-1k0t1sj"),L(r,"class","list-update-label svelte-1k0t1sj"),L(t,"class","list-update-container svelte-1k0t1sj")},m(i,s){x(i,t,s),b(t,n),b(t,o),b(t,r),b(r,l),a=!0,c||(u=[$(t,"click",e[13]),$(t,"keydown",e[23])],c=!0)},p(e,t){(!a||4&t[0])&&d!==(d=e[2]>=350?"List Update Available":e[2]>=283?"Update Available":e[2]>=236?"Available":"")&&j(l,d)},i(e){a||(Q((()=>{a&&(s||(s=pe(t,kn,{x:-50,duration:300},!0)),s.run(1))})),a=!0)},o(e){s||(s=pe(t,kn,{x:-50,duration:300},!1)),s.run(0),a=!1},d(e){e&&E(t),e&&s&&s.end(),c=!1,i(u)}}}function Dn(t){let n;return{c(){n=N("span"),n.textContent="N/A",L(n,"class","svelte-1k0t1sj")},m(e,t){x(e,n,t)},p:e,d(e){e&&E(n)}}}function Mn(e){let t,n=[],o=new Map,i=e[16](Object.entries(e[64].studios||{}),e[64]?.favoriteContents?.studios);const r=e=>e[79];for(let t=0;t<i.length;t+=1){let l=In(e,i,t),s=r(l);o.set(s,n[t]=Un(s,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=C()},m(e,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,o);x(e,t,o)},p(e,l){65552&l[0]&&(i=e[16](Object.entries(e[64].studios||{}),e[64]?.favoriteContents?.studios),n=ye(n,l,r,1,e,i,o,t.parentNode,me,Un,t,In))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&E(t)}}}function Un(e,t){let n,o,i,r,l,s,a,c=(t[79].studioName||"N/A")+"";return{key:e,first:null,c(){n=N("span"),o=N("a"),i=T(c),s=I(),L(o,"class",r=d(t[80]?`${t[80]}-color`:"")+" svelte-1k0t1sj"),L(o,"rel","noopener noreferrer"),L(o,"target","_blank"),L(o,"href",l=t[79].studioUrl||""),L(n,"class",d("copy")+" svelte-1k0t1sj"),L(n,"copy-value",a=t[79].studioName||""),this.first=n},m(e,t){x(e,n,t),b(n,o),b(o,i),b(n,s)},p(e,s){t=e,16&s[0]&&c!==(c=(t[79].studioName||"N/A")+"")&&j(i,c),16&s[0]&&r!==(r=d(t[80]?`${t[80]}-color`:"")+" svelte-1k0t1sj")&&L(o,"class",r),16&s[0]&&l!==(l=t[79].studioUrl||"")&&L(o,"href",l),16&s[0]&&a!==(a=t[79].studioName||"")&&L(n,"copy-value",a)},d(e){e&&E(n)}}}function On(t){let n;return{c(){n=N("span"),n.textContent="N/A",L(n,"class","svelte-1k0t1sj")},m(e,t){x(e,n,t)},p:e,d(e){e&&E(n)}}}function _n(e){let t,n=[],o=new Map,i=e[17](e[64].genres,e[64]?.favoriteContents?.genres,e[64].contentCaution);const r=e=>e[75];for(let t=0;t<i.length;t+=1){let l=Tn(e,i,t),s=r(l);o.set(s,n[t]=Vn(s,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=C()},m(e,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,o);x(e,t,o)},p(e,l){131088&l[0]&&(i=e[17](e[64].genres,e[64]?.favoriteContents?.genres,e[64].contentCaution),n=ye(n,l,r,1,e,i,o,t.parentNode,me,Vn,t,Tn))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&E(t)}}}function Vn(e,t){let n,o,i,r,l,s=(t[75]||"N/A")+"";return{key:e,first:null,c(){n=N("span"),o=T(s),i=I(),L(n,"class",r=d("copy "+(t[76]?`${t[76]}-color`:""))+" svelte-1k0t1sj"),L(n,"copy-value",l=t[75]||""),this.first=n},m(e,t){x(e,n,t),b(n,o),b(n,i)},p(e,i){t=e,16&i[0]&&s!==(s=(t[75]||"N/A")+"")&&j(o,s),16&i[0]&&r!==(r=d("copy "+(t[76]?`${t[76]}-color`:""))+" svelte-1k0t1sj")&&L(n,"class",r),16&i[0]&&l!==(l=t[75]||"")&&L(n,"copy-value",l)},d(e){e&&E(n)}}}function Bn(t){let n;return{c(){n=N("span"),n.textContent="N/A",L(n,"class","svelte-1k0t1sj")},m(e,t){x(e,n,t)},p:e,d(e){e&&E(n)}}}function Rn(e){let t,n=[],o=new Map,i=e[15](e[64].tags,e[64]?.favoriteContents?.tags,e[64].contentCaution);const r=e=>e[71];for(let t=0;t<i.length;t+=1){let l=Nn(e,i,t),s=r(l);o.set(s,n[t]=Wn(s,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=C()},m(e,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,o);x(e,t,o)},p(e,l){32784&l[0]&&(i=e[15](e[64].tags,e[64]?.favoriteContents?.tags,e[64].contentCaution),n=ye(n,l,r,1,e,i,o,t.parentNode,me,Wn,t,Nn))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&E(t)}}}function Wn(e,t){let n,o,i,r,l,s=(t[71]||"N/A")+"";return{key:e,first:null,c(){n=N("span"),o=T(s),i=I(),L(n,"class",r=d("copy "+(t[72]?`${t[72]}-color`:""))+" svelte-1k0t1sj"),L(n,"copy-value",l=t[71]||""),this.first=n},m(e,t){x(e,n,t),b(n,o),b(n,i)},p(e,i){t=e,16&i[0]&&s!==(s=(t[71]||"N/A")+"")&&j(o,s),16&i[0]&&r!==(r=d("copy "+(t[72]?`${t[72]}-color`:""))+" svelte-1k0t1sj")&&L(n,"class",r),16&i[0]&&l!==(l=t[71]||"")&&L(n,"copy-value",l)},d(e){e&&E(n)}}}function Hn(t){let n;return{c(){n=N("span"),n.textContent="N/A",L(n,"class","svelte-1k0t1sj")},m(e,t){x(e,n,t)},p:e,d(e){e&&E(n)}}}function Yn(e){let t,n=[],o=new Map,i=e[12](e[64]);const r=e=>e[67]+e[68];for(let t=0;t<i.length;t+=1){let l=An(e,i,t),s=r(l);o.set(s,n[t]=Kn(s,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=C()},m(e,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,o);x(e,t,o)},p(e,l){4112&l[0]&&(i=e[12](e[64]),n=ye(n,l,r,1,e,i,o,t.parentNode,me,Kn,t,An))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&E(t)}}}function Kn(e,t){let n,o,i,r,l,s=(t[67]||"N/A")+"";return{key:e,first:null,c(){n=N("span"),o=T(s),i=I(),L(n,"class",r=d(t[68]+"-color copy")+" svelte-1k0t1sj"),L(n,"copy-value",l=t[67]||""),this.first=n},m(e,t){x(e,n,t),b(n,o),b(n,i)},p(e,i){t=e,16&i[0]&&s!==(s=(t[67]||"N/A")+"")&&j(o,s),16&i[0]&&r!==(r=d(t[68]+"-color copy")+" svelte-1k0t1sj")&&L(n,"class",r),16&i[0]&&l!==(l=t[67]||"")&&L(n,"copy-value",l)},d(e){e&&E(n)}}}function Jn(e,t){let n,o,l,s,a,c,u,f,p,m,h,y,g,w,v,k,S,A,C,P,F,D,M,U,O,_,V,B,R,W,H,Y,K,J,X,G,z,Q,Z,ee,te,ne,oe,ie,re,le,se,fe,pe,me,he,ye,ge,we,ve,be,ke,Se,xe,Ee,Ae,Ne,Te,Ie,Ce,$e,Le,je,Pe,qe,Fe,De,Me,Ue,Oe,_e,Ve,Be,Re,We,He,Ye,Ke,Je,Xe,Ge,ze,Qe,Ze,et,tt,nt,ot,it,rt,lt,st,at,ct,ut,dt,ft,pt,mt,ht,yt,gt,vt,bt,kt,St,xt,Et,At,Nt,Tt,It,Ct,$t,Lt,jt,Pt,qt,Ft,Dt,Mt,Ut,Ot=t[65],_t=t[66],Vt=(t[64]?.title||"N/A")+"",Bt=(t[18](t[64])||"N/A")+"",Rt=(wt(t[64].score)??"N/A")+"",Wt=(t[64].userStatus||"N/A")+"",Ht=(t[64].status||"N/A")+"",Yt=(t[64].userScore??"N/A")+"",Kt=(`${t[64]?.season||""}${t[64]?.year?" "+t[64].year:""}`||"N/A")+"",Jt=(t[64].averageScore??"N/A")+"",Xt=(t[64].popularity||"N/A")+"",Gt="See "+(t[64].isSeenMore?"Less":"More"),zt=(t[9](t[64].id)||"N/A")+"",Qt=t[64].trailerID&&$n(),Zt=t[64].bannerImageUrl&&Ln(t),en=t[64].coverImageUrl&&jn(t);const tn=()=>t[22](l,Ot,_t),nn=()=>t[22](null,Ot,_t);let on=t[6]&&Fn(t);function rn(e,t){return 16&t[0]&&(ne=null),null==ne&&(ne=!!Object.entries(e[64]?.studios||{}).length),ne?Mn:Dn}let ln=rn(t,[-1,-1,-1]),sn=ln(t);function an(e,t){return e[64].genres.length?_n:On}let cn=an(t),un=cn(t);function dn(e,t){return e[64]?.tags?.length?Rn:Bn}let fn=dn(t),pn=fn(t);function mn(e,t){return 16&t[0]&&(xe=null),null==xe&&(xe=!!e[12](e[64]).length),xe?Yn:Hn}let hn=mn(t,[-1,-1,-1]),yn=hn(t);function gn(...e){return t[25](t[64],t[66],...e)}function wn(...e){return t[26](t[64],...e)}const vn=()=>t[27](n,Ot,_t),bn=()=>t[27](null,Ot,_t);return{key:e,first:null,c(){n=N("div"),o=N("div"),l=N("div"),s=N("div"),s.innerHTML='<i class="fa-solid fa-k fa-fade"></i>',a=I(),Qt&&Qt.c(),c=I(),u=N("div"),Zt&&Zt.c(),f=I(),en&&en.c(),m=I(),h=N("div"),on&&on.c(),y=I(),g=N("div"),w=N("h3"),w.textContent="Auto Play",v=I(),k=N("label"),S=N("input"),A=I(),C=N("span"),P=I(),F=N("div"),D=N("div"),M=N("a"),U=T(Vt),B=I(),R=N("div"),W=N("div"),H=N("div"),H.textContent="Format",Y=I(),K=N("div"),J=N("span"),X=T(Bt),z=I(),Q=N("div"),Z=N("div"),Z.textContent="Studio",ee=I(),te=N("div"),sn.c(),ie=I(),re=N("div"),le=N("div"),le.textContent="Genres",se=I(),fe=N("div"),un.c(),pe=I(),me=N("div"),he=N("div"),he.textContent="Tags",ye=I(),ge=N("div"),pn.c(),we=I(),ve=N("div"),be=N("div"),be.textContent="Content Cautions",ke=I(),Se=N("div"),yn.c(),Ee=I(),Ae=N("div"),Ne=N("div"),Ne.textContent="Score",Te=I(),Ie=N("div"),Ce=N("span"),$e=T(Rt),je=I(),Pe=N("div"),qe=N("div"),qe.textContent="User Status",Fe=I(),De=N("div"),Me=N("span"),Ue=T(Wt),Ve=I(),Be=N("div"),Re=N("div"),Re.textContent="Airing Status",We=I(),He=N("div"),Ye=N("span"),Ke=T(Ht),Xe=I(),Ge=N("div"),ze=N("div"),ze.textContent="User Score",Qe=I(),Ze=N("div"),et=N("span"),tt=T(Yt),ot=I(),it=N("div"),rt=N("div"),rt.textContent="Season Year",lt=I(),st=N("div"),at=N("span"),ct=T(Kt),dt=I(),ft=N("div"),pt=N("div"),pt.textContent="Average Score",mt=I(),ht=N("div"),yt=N("span"),gt=T(Jt),bt=I(),kt=N("div"),St=N("div"),St.textContent="Popularity",xt=I(),Et=N("div"),At=N("span"),Nt=T(Xt),Ct=I(),$t=N("div"),Lt=N("button"),jt=T(Gt),Pt=I(),qt=N("button"),Ft=T(zt),L(s,"class","popup-header-loading svelte-1k0t1sj"),L(u,"class","popup-img svelte-1k0t1sj"),L(l,"class",p=d("popup-header "+(t[64].trailerID?"loader":""))+" svelte-1k0t1sj"),L(w,"class","autoplay-label svelte-1k0t1sj"),L(S,"type","checkbox"),L(S,"class","autoplayToggle svelte-1k0t1sj"),L(C,"class","slider round svelte-1k0t1sj"),L(k,"class","switch svelte-1k0t1sj"),L(g,"class","autoPlay-container svelte-1k0t1sj"),L(h,"class","popup-controls svelte-1k0t1sj"),L(M,"rel","noopener noreferrer"),L(M,"target","_blank"),L(M,"href",O=t[64].animeUrl||""),L(M,"class",_=d(zn(t[64])+"-color anime-title copy")+" svelte-1k0t1sj"),L(M,"copy-value",V=t[64].title||""),L(D,"class","anime-title-container svelte-1k0t1sj"),L(H,"class","info-categ svelte-1k0t1sj"),L(J,"class","copy svelte-1k0t1sj"),L(J,"copy-value",G=t[18](t[64])||""),L(K,"class","format-popup info svelte-1k0t1sj"),L(Z,"class","info-categ svelte-1k0t1sj"),L(te,"class","studio-popup info svelte-1k0t1sj"),L(te,"title",oe=JSON.stringify(t[16](Object.entries(t[64].studios||{}),t[64]?.favoriteContents?.studios))),L(le,"class","info-categ svelte-1k0t1sj"),L(fe,"class","genres-popup info svelte-1k0t1sj"),L(he,"class","info-categ svelte-1k0t1sj"),L(ge,"class","tags-popup info svelte-1k0t1sj"),L(be,"class","info-categ svelte-1k0t1sj"),L(Se,"class","content-caution-popup info svelte-1k0t1sj"),L(Ne,"class","info-categ svelte-1k0t1sj"),L(Ce,"class","copy svelte-1k0t1sj"),L(Ce,"copy-value",Le=t[64].score??""),L(Ie,"class","score-popup info svelte-1k0t1sj"),L(qe,"class","info-categ svelte-1k0t1sj"),L(Me,"class",Oe=d("copy "+t[14](t[64].userStatus)+"-color")+" svelte-1k0t1sj"),L(Me,"copy-value",_e=t[64].userStatus||""),L(De,"class","user-status-popup info svelte-1k0t1sj"),L(Re,"class","info-categ svelte-1k0t1sj"),L(Ye,"class","copy svelte-1k0t1sj"),L(Ye,"copy-value",Je=t[64].status||""),L(He,"class","status-popup info svelte-1k0t1sj"),L(ze,"class","info-categ svelte-1k0t1sj"),L(et,"class","copy svelte-1k0t1sj"),L(et,"copy-value",nt=t[64].userScore??""),L(Ze,"class","user-score-popup info copy svelte-1k0t1sj"),L(rt,"class","info-categ svelte-1k0t1sj"),L(at,"class","copy svelte-1k0t1sj"),L(at,"copy-value",ut=`${t[64]?.season||""}${t[64]?.year?" "+t[64].year:""}`||""),L(st,"class","season-year-popup info svelte-1k0t1sj"),L(pt,"class","info-categ svelte-1k0t1sj"),L(yt,"class","copy svelte-1k0t1sj"),L(yt,"copy-value",vt=t[64].averageScore??""),L(ht,"class","average-score-popup info svelte-1k0t1sj"),L(St,"class","info-categ svelte-1k0t1sj"),L(At,"class","copy svelte-1k0t1sj"),L(At,"copy-value",Tt=t[64].popularity??""),L(Et,"class","popularity-popup info svelte-1k0t1sj"),L(R,"class",It=d("info-list "+(t[64].isSeenMore?"seenmore":""))+" svelte-1k0t1sj"),q(R,"--windowWidth",t[2]+"px"),q(R,"--windowHeight",t[3]+"px"),L(Lt,"class","seemoreless svelte-1k0t1sj"),L(qt,"class","hideshowbtn svelte-1k0t1sj"),L($t,"class","footer svelte-1k0t1sj"),L(F,"class","popup-body svelte-1k0t1sj"),L(o,"class","popup-main svelte-1k0t1sj"),L(n,"class","popup-content svelte-1k0t1sj"),this.first=n},m(e,i){x(e,n,i),b(n,o),b(o,l),b(l,s),b(l,a),Qt&&Qt.m(l,null),b(l,c),b(l,u),Zt&&Zt.m(u,null),b(u,f),en&&en.m(u,null),tn(),b(o,m),b(o,h),on&&on.m(h,null),b(h,y),b(h,g),b(g,w),b(g,v),b(g,k),b(k,S),S.checked=t[5],b(k,A),b(k,C),b(o,P),b(o,F),b(F,D),b(D,M),b(M,U),b(F,B),b(F,R),b(R,W),b(W,H),b(W,Y),b(W,K),b(K,J),b(J,X),b(R,z),b(R,Q),b(Q,Z),b(Q,ee),b(Q,te),sn.m(te,null),b(R,ie),b(R,re),b(re,le),b(re,se),b(re,fe),un.m(fe,null),b(R,pe),b(R,me),b(me,he),b(me,ye),b(me,ge),pn.m(ge,null),b(R,we),b(R,ve),b(ve,be),b(ve,ke),b(ve,Se),yn.m(Se,null),b(R,Ee),b(R,Ae),b(Ae,Ne),b(Ae,Te),b(Ae,Ie),b(Ie,Ce),b(Ce,$e),b(R,je),b(R,Pe),b(Pe,qe),b(Pe,Fe),b(Pe,De),b(De,Me),b(Me,Ue),b(R,Ve),b(R,Be),b(Be,Re),b(Be,We),b(Be,He),b(He,Ye),b(Ye,Ke),b(R,Xe),b(R,Ge),b(Ge,ze),b(Ge,Qe),b(Ge,Ze),b(Ze,et),b(et,tt),b(R,ot),b(R,it),b(it,rt),b(it,lt),b(it,st),b(st,at),b(at,ct),b(R,dt),b(R,ft),b(ft,pt),b(ft,mt),b(ft,ht),b(ht,yt),b(yt,gt),b(R,bt),b(R,kt),b(kt,St),b(kt,xt),b(kt,Et),b(Et,At),b(At,Nt),b(F,Ct),b(F,$t),b($t,Lt),b(Lt,jt),b($t,Pt),b($t,qt),b(qt,Ft),vn(),Dt=!0,Mt||(Ut=[$(S,"change",t[24]),$(Lt,"click",(function(){r(t[11](t[64],t[66]))&&t[11](t[64],t[66]).apply(this,arguments)})),$(Lt,"keydown",gn),$(qt,"click",(function(){r(t[10](t[64].id))&&t[10](t[64].id).apply(this,arguments)})),$(qt,"keydown",wn)],Mt=!0)},p(e,n){(t=e)[64].trailerID?Qt||(Qt=$n(),Qt.c(),Qt.m(l,c)):Qt&&(Qt.d(1),Qt=null),t[64].bannerImageUrl?Zt?Zt.p(t,n):(Zt=Ln(t),Zt.c(),Zt.m(u,f)):Zt&&(Zt.d(1),Zt=null),t[64].coverImageUrl?en?en.p(t,n):(en=jn(t),en.c(),en.m(u,null)):en&&(en.d(1),en=null),(!Dt||16&n[0]&&p!==(p=d("popup-header "+(t[64].trailerID?"loader":""))+" svelte-1k0t1sj"))&&L(l,"class",p),Ot===t[65]&&_t===t[66]||(nn(),Ot=t[65],_t=t[66],tn()),t[6]?on?(on.p(t,n),64&n[0]&&ue(on,1)):(on=Fn(t),on.c(),ue(on,1),on.m(h,y)):on&&(ae(),de(on,1,1,(()=>{on=null})),ce()),32&n[0]&&(S.checked=t[5]),(!Dt||16&n[0])&&Vt!==(Vt=(t[64]?.title||"N/A")+"")&&j(U,Vt),(!Dt||16&n[0]&&O!==(O=t[64].animeUrl||""))&&L(M,"href",O),(!Dt||16&n[0]&&_!==(_=d(zn(t[64])+"-color anime-title copy")+" svelte-1k0t1sj"))&&L(M,"class",_),(!Dt||16&n[0]&&V!==(V=t[64].title||""))&&L(M,"copy-value",V),(!Dt||16&n[0])&&Bt!==(Bt=(t[18](t[64])||"N/A")+"")&&j(X,Bt),(!Dt||16&n[0]&&G!==(G=t[18](t[64])||""))&&L(J,"copy-value",G),ln===(ln=rn(t,n))&&sn?sn.p(t,n):(sn.d(1),sn=ln(t),sn&&(sn.c(),sn.m(te,null))),(!Dt||16&n[0]&&oe!==(oe=JSON.stringify(t[16](Object.entries(t[64].studios||{}),t[64]?.favoriteContents?.studios))))&&L(te,"title",oe),cn===(cn=an(t))&&un?un.p(t,n):(un.d(1),un=cn(t),un&&(un.c(),un.m(fe,null))),fn===(fn=dn(t))&&pn?pn.p(t,n):(pn.d(1),pn=fn(t),pn&&(pn.c(),pn.m(ge,null))),hn===(hn=mn(t,n))&&yn?yn.p(t,n):(yn.d(1),yn=hn(t),yn&&(yn.c(),yn.m(Se,null))),(!Dt||16&n[0])&&Rt!==(Rt=(wt(t[64].score)??"N/A")+"")&&j($e,Rt),(!Dt||16&n[0]&&Le!==(Le=t[64].score??""))&&L(Ce,"copy-value",Le),(!Dt||16&n[0])&&Wt!==(Wt=(t[64].userStatus||"N/A")+"")&&j(Ue,Wt),(!Dt||16&n[0]&&Oe!==(Oe=d("copy "+t[14](t[64].userStatus)+"-color")+" svelte-1k0t1sj"))&&L(Me,"class",Oe),(!Dt||16&n[0]&&_e!==(_e=t[64].userStatus||""))&&L(Me,"copy-value",_e),(!Dt||16&n[0])&&Ht!==(Ht=(t[64].status||"N/A")+"")&&j(Ke,Ht),(!Dt||16&n[0]&&Je!==(Je=t[64].status||""))&&L(Ye,"copy-value",Je),(!Dt||16&n[0])&&Yt!==(Yt=(t[64].userScore??"N/A")+"")&&j(tt,Yt),(!Dt||16&n[0]&&nt!==(nt=t[64].userScore??""))&&L(et,"copy-value",nt),(!Dt||16&n[0])&&Kt!==(Kt=(`${t[64]?.season||""}${t[64]?.year?" "+t[64].year:""}`||"N/A")+"")&&j(ct,Kt),(!Dt||16&n[0]&&ut!==(ut=`${t[64]?.season||""}${t[64]?.year?" "+t[64].year:""}`||""))&&L(at,"copy-value",ut),(!Dt||16&n[0])&&Jt!==(Jt=(t[64].averageScore??"N/A")+"")&&j(gt,Jt),(!Dt||16&n[0]&&vt!==(vt=t[64].averageScore??""))&&L(yt,"copy-value",vt),(!Dt||16&n[0])&&Xt!==(Xt=(t[64].popularity||"N/A")+"")&&j(Nt,Xt),(!Dt||16&n[0]&&Tt!==(Tt=t[64].popularity??""))&&L(At,"copy-value",Tt),(!Dt||16&n[0]&&It!==(It=d("info-list "+(t[64].isSeenMore?"seenmore":""))+" svelte-1k0t1sj"))&&L(R,"class",It),4&n[0]&&q(R,"--windowWidth",t[2]+"px"),8&n[0]&&q(R,"--windowHeight",t[3]+"px"),(!Dt||16&n[0])&&Gt!==(Gt="See "+(t[64].isSeenMore?"Less":"More"))&&j(jt,Gt),(!Dt||16&n[0])&&zt!==(zt=(t[9](t[64].id)||"N/A")+"")&&j(Ft,zt),Ot===t[65]&&_t===t[66]||(bn(),Ot=t[65],_t=t[66],vn())},i(e){Dt||(ue(on),Dt=!0)},o(e){de(on),Dt=!1},d(e){e&&E(n),Qt&&Qt.d(),Zt&&Zt.d(),en&&en.d(),nn(),on&&on.d(),sn.d(),un.d(),pn.d(),yn.d(),bn(),Mt=!1,i(Ut)}}}function Xn(e){let t;return{c(){t=N("div"),t.innerHTML='<i class="popup-content-loading-icon fa-solid fa-k fa-fade svelte-1k0t1sj"></i>',L(t,"class","popup-content-loading svelte-1k0t1sj")},m(e,n){x(e,t,n)},d(e){e&&E(t)}}}function Gn(e){let t,n,o,r,l,s=e[4]?.length&&Cn(e);return{c(){t=N("div"),n=N("div"),s&&s.c(),L(n,"id","popup-container"),L(n,"class","popup-container hide svelte-1k0t1sj"),q(n,"--translateY",e[3]+"px"),L(t,"id","popup-wrapper"),L(t,"class","popup-wrapper svelte-1k0t1sj")},m(i,a){x(i,t,a),b(t,n),s&&s.m(n,null),e[28](n),e[30](t),o=!0,r||(l=[$(t,"click",e[8]),$(t,"keydown",e[29])],r=!0)},p(e,t){e[4]?.length?s?(s.p(e,t),16&t[0]&&ue(s,1)):(s=Cn(e),s.c(),ue(s,1),s.m(n,null)):s&&(ae(),de(s,1,1,(()=>{s=null})),ce()),8&t[0]&&q(n,"--translateY",e[3]+"px")},i(e){o||(ue(s),o=!0)},o(e){de(s),o=!1},d(n){n&&E(t),s&&s.d(),e[28](null),e[30](null),r=!1,i(l)}}}function zn({contentCaution:e,meanScoreAll:t,meanScoreAbove:n,score:o}){return e?.caution?.length?"red":o<t?"purple":o<n?"orange":e?.semiCaution?.length?"teal":"green"}function Qn(e,t,n){let o,i,r,l,s,a,u,d,p,m,h,y,g,w,v,b,k;c(e,Pe,(e=>n(44,o=e))),c(e,Ve,(e=>n(45,i=e))),c(e,ct,(e=>n(46,r=e))),c(e,Le,(e=>n(4,l=e))),c(e,Re,(e=>n(47,s=e))),c(e,Ae,(e=>n(48,a=e))),c(e,Be,(e=>n(5,u=e))),c(e,Ne,(e=>n(49,d=e))),c(e,Qe,(e=>n(50,p=e))),c(e,Ie,(e=>n(51,m=e))),c(e,Ke,(e=>n(52,h=e))),c(e,je,(e=>n(53,y=e))),c(e,tt,(e=>n(6,g=e))),c(e,Je,(e=>n(54,w=e))),c(e,We,(e=>n(55,v=e))),c(e,Ze,(e=>n(56,b=e))),c(e,Ye,(e=>n(7,k=e)));let S=window.navigator.onLine,x=50;(async()=>{x=await xn("savedYtVolume")||50})();let E,A,N,T,I,C,$,L,j,P=window.visualViewport.width,q=window.visualViewport.height;function F(e){let t=e.target,n=t.classList;t.closest(".popup-container")||n.contains("popup-container")||f(Qe,p=!1,p)}async function D(e){m[e]?await w("Are you sure you want to show the anime?")&&(delete m[e],Ie.set(m),l.length&&y instanceof Worker&&y.postMessage({removeID:e})):await w("Are you sure you want to hide the anime?")&&(f(Ie,m[e]=!0,m),l.length&&y instanceof Worker&&y.postMessage({removeID:e}))}async function M(e,t){if(l[t]){f(Le,l[t].isSeenMore=!l[t].isSeenMore,l),await z();let n=e.popupContent||C.children?.[t],o=n?.getElementsByClassName?.("popup-header")[0];n instanceof Element&&(gt(C,n,"bottom","instant"),A=o,U())}}async function U(){if(!p)return;await z();let e,t=A?.querySelector?.(".trailer"),n=yt(A?.closest?.(".popup-content"))??-1;if(L&&clearTimeout(L),L=setTimeout((()=>{if(!p)return;let e=l?.[n]?.gridElement||E.children?.[n];p&&e instanceof Element&&!function(e,t,n=0){try{var o=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=getComputedStyle(e).overflowX,l=getComputedStyle(e).overflowY;if("auto"===r||"scroll"===r||"auto"===l||"scroll"===l){var s=e.scrollLeft,a=e.scrollTop,c=o.top>=i.top&&o.left>=i.left&&o.bottom<=i.bottom&&o.right<=i.right;if(c||(c=(Math.max(o.top,i.top)-Math.min(o.bottom,i.bottom))*(Math.max(o.left,i.left)-Math.min(o.right,i.right))/(Math.min(o.height,window.innerHeight)*Math.min(o.width,window.innerWidth))>=n),!c)return!1;o={top:o.top-i.top+a,left:o.left-i.left+s,bottom:o.bottom-i.top+a,right:o.right-i.left+s,height:o.height,width:o.width}}var u=window.innerHeight||document.documentElement.clientHeight,d=window.innerWidth||document.documentElement.clientWidth;return o.top>=0&&o.left>=0&&o.bottom<=u&&o.right<=d}catch(e){return}}(E,e,.5)&&(window.scrollY=window.scrollY,window.scrollX=window.scrollX,e.scrollIntoView({behavior:"smooth",block:"nearest"}))}),300),t instanceof Element&&(e=i?.some((({ytPlayer:e})=>e.g===t))),e){if(n>=0){N=n;let e=[[l?.[n+1],n+1],[l?.[n-1],n-1]];j&&clearTimeout(j),j=setTimeout((async()=>{p&&e.forEach((([e,t])=>{e&&V(e,t)}))}),300)}for(let e=0;e<i.length;e++)i[e].ytPlayer.g===t&&1!==i[e].ytPlayer?.getPlayerState?.()&&u?(await z(),I?.classList?.contains?.("visible")&&d&&(B(i[e].ytPlayer),i[e].ytPlayer?.playVideo?.())):i[e].ytPlayer.g!==t&&i[e].ytPlayer?.pauseVideo?.()}else if(i?.forEach((({ytPlayer:e})=>e?.pauseVideo?.())),n>=0){N=n;let e=[[l?.[n],n],[l?.[n+1],n+1],[l?.[n-1],n-1]];j&&clearTimeout(j),j=setTimeout((async()=>{p&&e.forEach((([e,t])=>{e&&V(e,t)}))}),300)}}He.subscribe((async e=>{if(p&&e>=0){await z();let t=C?.children[e];t instanceof Element&&C instanceof Element&&gt(C,t,"top")}})),Ie.subscribe((async e=>{pt(e)&&await Sn(e,"hiddenEntries")})),Qe.subscribe((async e=>{if(I instanceof Element&&C instanceof Element)if(!0===e){C.style.setProperty("--translateY",q+"px");let e=C?.children[b??0];if(e instanceof Element){gt(C,e,"top","instant"),xt(I,"visible"),xt(C,"show"),N=b;let t,n=[[l[b],b],[l[b+1],b+1],[l[b-1],b-1]],o=n[0][0]?.popupHeader?.querySelector?.(".trailer")||C?.children?.[b]?.querySelector?.(".trailer");for(let e=0;e<i.length;e++)if(i[e].ytPlayer.g===o&&(t=!0,u)){await z(),I?.classList?.contains?.("visible")&&d&&(B(i[e].ytPlayer),i[e].ytPlayer?.playVideo?.());break}n.forEach((([e,n],o)=>{t&&e&&0===o||e&&V(e,n)})),f(Ze,b=null,b)}else xt(I,"visible"),xt(C,"show")}else!1===e&&(Et(C,"show"),xt(C,"hide"),setTimeout((()=>{i?.forEach((({ytPlayer:e})=>e?.pauseVideo?.())),Et(I,"visible")}),300))})),Le.subscribe((async e=>{if(e instanceof Array&&e.length){$&&($?.disconnect?.(),$=null),await z(),$=new IntersectionObserver((e=>{if(!p)return;let t=[];if(e.forEach((e=>{if(!p)return;let n=e.target;e.isIntersecting&&(e.intersectionRatio>=.5||q<=360&&e.intersectionRatio>0)&&t.push(n)})),t.length){let e=ht(C,t,q>360?.5:0)||ht(C,C.children,0)?.getElementsByClassName("popup-header")?.[0];A=e,U()}}),{root:null,rootMargin:"100%",threshold:[.5,0]}),e.forEach((async(e,t)=>{let n=e.popupHeader||C.children?.[t]?.querySelector?.(".popup-header");n instanceof Element&&$?.observe?.(n)}));let t=l[l.length-1].popupContent||C.children?.[l.length-1];v&&t instanceof Element&&v.observe(t),U()}else e instanceof Array&&e.length<1&&f(Qe,p=!1,p)})),Be.subscribe((async e=>{if("boolean"==typeof e)if(await Sn(e,"autoPlay"),!0===e){await z();let e=A?.querySelector?.(".trailer");for(let t=0;t<i.length;t++)if(i[t].ytPlayer.g===e&&d)B(i[t].ytPlayer),i[t].ytPlayer?.playVideo?.();else{i[t].ytPlayer?.pauseVideo?.();let e=i[t].ytPlayer.g,n=e?.closest?.(".popup-header"),o=n?.querySelector?.(".popup-img");xt(e,"display-none"),Et(n,"loader"),Et(o,"display-none")}}else i.forEach((({ytPlayer:e})=>{let t=e.g,n=t?.parentElement,o=n?.querySelector?.(".popup-img");xt(o,"fade-out"),Et(n,"loader"),Et(t,"display-none"),setTimeout((()=>{xt(o,"display-none"),Et(o,"fade-out")}),300),e?.pauseVideo?.()}))})),R((()=>{n(0,I=I||document.getElementById("popup-wrapper")),n(1,C=C||I.querySelector("#popup-container")),E=document.getElementById("anime-grid"),window.addEventListener("resize",(()=>{document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement||(n(2,P=window.visualViewport.width),n(3,q=window.visualViewport.height))})),document.addEventListener("keydown",(async e=>{if(" "===e.key&&p){e.preventDefault();let t=A?.querySelector?.(".trailer"),n=i?.some((({ytPlayer:e})=>t===e.g&&1===e?.getPlayerState?.()));if(i.forEach((({ytPlayer:e})=>{e?.pauseVideo?.()})),!n){await z();for(let e=0;e<i.length;e++)if(i[e].ytPlayer.g===t&&d){B(i[e].ytPlayer),i[e].ytPlayer?.playVideo?.();break}}}}))}));let O,_={};function V(e,t){let n=e?.popupHeader||C.children?.[t]?.querySelector(".popup-header"),o=n?.querySelector?.(".trailer")||n?.querySelector?.(".trailer"),r=e?.trailerID;if(o instanceof Element&&r&&"undefined"!=typeof YT){if(i.some((({ytPlayer:e})=>e.g===o)))return;xt(n,"loader");let s=n?.querySelector?.(".popup-img");if(e?.bannerImageUrl&&!_[e.id]){let e=s.querySelector(".coverImg");xt(e,"display-none"),xt(e,"fade-out")}if(i.length>=8){let e=0,t=-1/0;i.forEach(((n,o)=>{if(-1===n.headerIdx)return;let i=Math.abs(n.headerIdx-N);i>t&&(t=i,e=o)}));let r=i?.splice?.(e,1)?.[0]?.ytPlayer,l=r?.g?.closest?.(".popup-header");r?.destroy?.();let a=l?.querySelector?.(".popup-img");a instanceof Element&&Et(a,"display-none");let c=document.createElement("div");c.className="trailer",xt(o,"display-none"),Et(s,"display-none"),n.replaceChild(c,o),xt(o,"display-none"),o=n.querySelector(".trailer")}else xt(o,"display-none");Et(s,"display-none"),o.setAttribute("id","yt-player"+Date.now()+Math.random());let a=new YT.Player(o,{playerVars:{cc_lang_pref:"en",cc_load_policy:1,enablejsapi:1,modestbranding:1,playsinline:1,playlist:r},events:{onReady:e=>{!async function(e){let t=e.target,n=t?.g,o=n?.parentElement,r=o?.closest?.(".popup-content"),s=l?.[yt(r)??-1];if(-1!==t.getPlayerState()&&"IFRAME"===n.tagName&&S){if(n?.setAttribute?.("loading","lazy"),!u){let e=o?.querySelector?.(".popup-img");xt(e,"fade-out"),Et(o,"loader"),Et(n,"display-none"),setTimeout((()=>{xt(e,"display-none"),Et(e,"fade-out")}),300)}U(),delete _[s.id]}else{_[s.id]=!0,f(Ve,i=i.filter((e=>e.ytPlayer!==t)),i),t.destroy(),xt(n,"display-none"),Et(o,"loader");let e=o?.querySelector?.(".popup-img"),r=e.querySelector(".coverImg");xt(r,"fade-out"),Et(r,"fade-in"),xt(r,"fade-in"),Et(r,"display-none"),Et(r,"fade-out"),Et(e,"display-none")}}(e)},onStateChange:e=>{!function(e){let t=e.target;if(!t||!t?.getPlayerState)return;let n=t?.g,o=n?.parentElement,r=o?.querySelector?.(".popup-img");0===t?.getPlayerState?.()&&t?.seekTo?.(0,!0);1===t?.getPlayerState?.()?(i?.forEach((({ytPlayer:e})=>e?.g!==t?.g&&e?.pauseVideo?.())),T=t,xt(r,"fade-out"),Et(o,"loader"),Et(n,"display-none"),setTimeout((()=>{xt(r,"display-none"),Et(r,"fade-out")}),300)):A!==o&&u&&(xt(n,"display-none"),Et(o,"loader"),Et(r,"display-none"))}(e)},onError:e=>{!function(e){let t=e.target,n=t?.g,o=n?.parentElement,r=o?.querySelector?.(".popup-img");f(Ve,i=i.filter((e=>e.ytPlayer!==t)),i),t.destroy(),xt(n,"display-none"),Et(o,"loader");let l=r.querySelector(".coverImg");xt(l,"fade-out"),Et(l,"fade-in"),xt(l,"fade-in"),Et(l,"display-none"),Et(l,"fade-out"),Et(r,"display-none")}(e)}}}),c=`https://www.youtube.com/embed/${r}`;o.setAttribute("src",c),i.push({ytPlayer:a,headerIdx:t})}else{let e=n?.querySelector?.(".popup-img"),t=e.querySelector(".coverImg");Et(n,"loader"),Et(t,"display-none"),Et(e,"display-none"),i.forEach((({ytPlayer:e})=>{if(e?.pauseVideo?.(),u){let t=e?.g,n=t?.parentElement,o=n?.querySelector?.(".popup-img");xt(t,"display-none"),Et(n,"loader"),Et(o,"display-none")}}))}}function B(e){if(T?.isMuted&&T?.getVolume){let t=T?.isMuted?.(),n=T?.getVolume?.();"boolean"==typeof t&&(t?e?.mute?.():e?.unMute?.()),"number"==typeof n&&(x!==n&&(x=n,Sn(x,"savedYtVolume")),e?.setVolume?.(x))}}async function W(e){if(await w({title:"List update is available",text:"Are you sure you want to refresh the list?"})){let t,n=e.target,i=n.classList;t=i.contains("list-update-container")?n.querySelector?.(".list-update-icon"):n?.closest(".list-update-container")?.querySelector?.(".list-update-icon"),O&&clearTimeout(O),xt(t,"fa-spin"),jt().then((async e=>{f(tt,g=!1,g),O=setTimeout((()=>{Et(t,"fa-spin")}),300),f(je,y=e.animeLoaderWorker,y),f(Ke,h="",h),e?.isNew&&(f(Le,l=e.finalAnimeList,l),f(Ie,m=e.hiddenEntries,m)),f(Pe,o=null,o)})).catch((e=>{throw e}))}}let Y=!1;window.returnedAppIsVisible=e=>{if(!a)return;if(f(Ne,d=e,d),!p||s)return;let t=A?.querySelector?.(".trailer");if(t)if(d)for(let e=0;e<i.length;e++)i[e]?.ytPlayer.g===t&&(u||2===i[e]?.ytPlayer?.getPlayerState?.()&&Y)?(B(i[e]?.ytPlayer),i[e]?.ytPlayer?.playVideo?.()):i[e]?.ytPlayer?.pauseVideo?.();else{Y=!1;for(let e=0;e<i.length;e++)i[e]?.ytPlayer.g===t&&1===i[e]?.ytPlayer?.getPlayerState?.()&&(Y=!0),i[e]?.ytPlayer?.pauseVideo?.()}},document.addEventListener("visibilitychange",(()=>{if(a)return;if(f(Ne,d="visible"===document.visibilityState,d),!p||s)return;let e=A?.querySelector?.(".trailer");if(e)if(d)for(let t=0;t<i.length;t++)i[t]?.ytPlayer.g===e&&(u||2===i[t]?.ytPlayer?.getPlayerState?.()&&Y)?(B(i[t]?.ytPlayer),i[t]?.ytPlayer?.playVideo?.()):i[t]?.ytPlayer?.pauseVideo?.();else{Y=!1;for(let t=0;t<i.length;t++)i[t]?.ytPlayer.g===e&&1===i[t]?.ytPlayer?.getPlayerState?.()&&(Y=!0),i[t]?.ytPlayer?.pauseVideo?.()}})),window.addEventListener("online",(()=>{if(a)try{JSBridge.isOnline(!0)}catch(e){}f(Pe,o="Reconnected Successfully",o),s&&f(Re,s=!1,s),l?.length||f(ct,r=!r,r),S=!0,document.querySelectorAll("link")?.forEach((e=>{e.href&&(e.href=e.href)})),document.querySelectorAll("script")?.forEach((e=>{e.src&&"https://www.youtube.com/iframe_api?v=16"!==e.src&&(e.src=e.src)})),document.querySelectorAll("img")?.forEach((e=>{e.naturalHeight||(e.src=e.src)})),new Promise((e=>{var t=document.getElementById("www-widgetapi-script");t&&t.parentElement.removeChild(t);var n=document.createElement("script");n.src="https://www.youtube.com/iframe_api?v=16",n.onerror=()=>{e()},n.onload=()=>{window?.onYouTubeIframeAPIReady?.(),e()};var o=document.getElementsByTagName("script")[0];o.parentElement.insertBefore(n,o)})).then((()=>{f(Ve,i=i.filter((({ytPlayer:e})=>{if("function"!=typeof e?.playVideo||-1===e.getPlayerState()||isNaN(e.getPlayerState())){e.destroy();let t=e?.g?.closest?.(".popup-header")?.querySelector?.(".popup-img");return t instanceof Element&&Et(t,"display-none"),!1}return!0})),i),U()}))})),window.addEventListener("offline",(()=>{f(Pe,o="Currently Offline...",o),S=!1}));return[I,C,P,q,l,u,g,k,F,function(e){return m?m[e]?"Show":"Hide":"N/A"},D,M,function({contentCaution:e,meanScoreAll:t,meanScoreAbove:n,score:o}){let i=[];return o<t?i.push({caution:`Very Low Score (mean: ${wt(t)})`,cautionColor:"purple"}):o<n&&i.push({caution:`Low Score (mean: ${wt(n)})`,cautionColor:"orange"}),e?.caution?.length&&(i=i.concat(e?.caution.map((e=>({caution:e,cautionColor:"red"}))))),e?.semiCaution?.length&&(i=i.concat(e?.semiCaution.map((e=>({caution:e,cautionColor:"teal"}))))),i},W,function(e){return vt(e,"completed")?"green":vt(e,"current")||vt(e,"repeating")?"blue":vt(e,"planning")?"orange":vt(e,"paused")?"peach":vt(e,"dropped")?"red":void 0},function(e,t,n){if(!e?.length)return e;let o=pt(t)&&!mt(t),i=pt(n)&&!mt(n),r={},l={};i&&(n?.caution.forEach((e=>{r[e.trim().toLowerCase()]=!0})),n?.semiCaution.forEach((e=>{l[e.trim().toLowerCase()]=!0})));let s=[],a=[],c=[],u=[],d={};return e.forEach((e=>{let n=e?.trim?.().toLowerCase?.();i&&(r[n]?(d[e]=!0,a.push({tag:e,tagColor:"red"})):l[n]&&(d[e]=!0,c.push({tag:e,tagColor:"teal"}))),o&&!d[e]&&t[n]&&(d[e]=!0,s.push({tag:e,score:t[n]})),d[e]||u.push({tag:e,tagColor:null})})),s.sort(((e,t)=>t.score-e.score)),s=s.map((e=>({tag:`${e.tag} (${wt(e.score)})`,tagColor:"green"}))),a.concat(c).concat(s).concat(u)},function(e,t){if(!e?.length)return e;let n=pt(t)&&!mt(t),o=[],i=[];return e.forEach((([e,r])=>{if(n){let n=e?.trim?.().toLowerCase?.();t[n]?o.push({studio:[e,r],score:t[n]}):i.push({studio:{studioName:e,studioUrl:r},studioColor:null})}else i.push({studio:{studioName:e,studioUrl:r},studioColor:null})})),o.sort(((e,t)=>t.score-e.score)),o=o.map((e=>({studio:{studioName:`${e.studio[0]} (${wt(e.score)})`,studioUrl:e.studio[1]},studioColor:"green"}))),o.concat(i)},function(e,t,n){if(!e?.length)return e;let o=pt(t)&&!mt(t),i=pt(n)&&!mt(n),r={},l={};i&&(n?.caution.forEach((e=>{r[e.trim().toLowerCase()]=!0})),n?.semiCaution.forEach((e=>{l[e.trim().toLowerCase()]=!0})));let s=[],a=[],c=[],u=[],d={};return e.forEach((e=>{let n=e?.trim?.().toLowerCase?.();i&&(r[n]?(d[e]=!0,a.push({genre:e,genreColor:"red"})):l[n]&&(d[e]=!0,c.push({genre:e,genreColor:"teal"}))),o&&!d[e]&&t[n]&&(d[e]=!0,s.push({genre:e,score:t[n]})),d[e]||u.push({genre:e,genreColor:null})})),s.sort(((e,t)=>t.score-e.score)),s=s.map((e=>({genre:`${e.genre} (${wt(e.score)})`,genreColor:"green"}))),s.concat(a).concat(c).concat(u)},function({episodes:e,format:t,duration:n}){let o=t;if(e>0&&t&&(o=`${t} [${e}]`,n>0)){let e=function(e){try{let t=Math.floor(e/1e3%60),n=Math.floor(e/6e4%60),o=Math.floor(e/36e5%24),i=Math.floor(e/864e5%7),r=Math.floor(e/6048e5%4),l=Math.floor(e/24192e5%12),s=Math.floor(e/290304e5%10),a=Math.floor(e/290304e6%10),c=Math.floor(e/290304e7%10),u=Math.floor(e/290304e8%10),d=[];return u<=0&&c<=0&&a<=0&&s<=0&&l<=0&&r<=0&&i<=0&&o<=0&&n<=0&&t<=0?"0s":(u>0&&d.push(1===u?`${u}mil`:`${u}mils`),a>0&&d.push(1===a?`${a}de`:`${a}des`),s>0&&d.push(`${s}y`),l>0&&d.push(1===l?`${l}mo`:`${l}mos`),r>0&&d.push(`${r}w`),i>0&&d.push(`${i}d`),o>0&&d.push(`${o}h`),n>0&&d.push(`${n}m`),t>0&&d.push(`${t}s`),d.join(" "))}catch(e){return}}(60*n*1e3);o=`${o} | ${e||""}`}return o},e=>{Et(e.target,"fade-out"),xt(e.target,"fade-in")},e=>{Et(e.target,"fade-out"),xt(e.target,"fade-in")},e=>{Et(e.target,"fade-out"),xt(e.target,"fade-in")},function(e,t,n){H[e?"unshift":"push"]((()=>{t[n].popupHeader=e}))},e=>"Enter"===e.key&&W(e),function(){u=this.checked,Be.set(u)},(e,t,n)=>"Enter"===n.key&&M(e,t),(e,t)=>"Enter"===t.key&&D(e.id),function(e,t,n){H[e?"unshift":"push"]((()=>{t[n].popupContent=e}))},function(e){H[e?"unshift":"push"]((()=>{C=e,n(1,C)}))},e=>"Enter"===e.key&&F(e),function(e){H[e?"unshift":"push"]((()=>{I=e,n(0,I)}))}]}function Zn(e){let t,n,o,r,l,s,a,c,u,d,f,p,m,h,y,g,w,v,k,S,A,C,P=(e[3][e[1]]?"Show":"Hide")+" Anime";return{c(){t=N("div"),n=N("div"),o=N("div"),r=N("span"),l=N("h1"),s=T(e[0]),a=I(),c=N("div"),c.textContent="×",u=I(),d=N("span"),d.innerHTML='<h2 class="option-title svelte-l9gjbd">Open Anime</h2>',f=I(),p=N("span"),p.innerHTML='<h2 class="option-title svelte-l9gjbd">Open In Anilist</h2>',m=I(),h=N("span"),h.innerHTML='<h2 class="option-title svelte-l9gjbd">Copy Title</h2>',y=I(),g=N("span"),w=N("h2"),v=T(P),L(l,"class","svelte-l9gjbd"),L(r,"class","anime-title svelte-l9gjbd"),L(c,"class","closing-x svelte-l9gjbd"),L(o,"class","option-header svelte-l9gjbd"),L(d,"class","anime-option svelte-l9gjbd"),L(p,"class","anime-option svelte-l9gjbd"),L(h,"class","anime-option svelte-l9gjbd"),L(w,"class","option-title svelte-l9gjbd"),L(g,"class","anime-option svelte-l9gjbd"),L(n,"class","anime-options-container svelte-l9gjbd"),L(t,"class","anime-options svelte-l9gjbd")},m(i,k){x(i,t,k),b(t,n),b(n,o),b(o,r),b(r,l),b(l,s),b(o,a),b(o,c),b(n,u),b(n,d),b(n,f),b(n,p),b(n,m),b(n,h),b(n,y),b(n,g),b(g,w),b(w,v),S=!0,A||(C=[$(c,"click",e[4]),$(c,"keydown",e[9]),$(d,"click",e[5]),$(d,"keydown",e[10]),$(p,"click",e[6]),$(p,"keydown",e[11]),$(h,"click",e[7]),$(h,"keydown",e[12]),$(g,"click",e[8]),$(g,"keydown",e[13]),$(t,"click",e[4]),$(t,"keydown",e[14])],A=!0)},p(e,t){(!S||1&t)&&j(s,e[0]),(!S||10&t)&&P!==(P=(e[3][e[1]]?"Show":"Hide")+" Anime")&&j(v,P)},i(e){S||(Q((()=>{S&&(k||(k=pe(n,kn,{y:20,duration:300},!0)),k.run(1))})),S=!0)},o(e){k||(k=pe(n,kn,{y:20,duration:300},!1)),k.run(0),S=!1},d(e){e&&E(t),e&&k&&k.end(),A=!1,i(C)}}}function eo(e){let t,n,o=e[2]&&Zn(e);return{c(){o&&o.c(),t=C()},m(e,i){o&&o.m(e,i),x(e,t,i),n=!0},p(e,[n]){e[2]?o?(o.p(e,n),4&n&&ue(o,1)):(o=Zn(e),o.c(),ue(o,1),o.m(t.parentNode,t)):o&&(ae(),de(o,1,1,(()=>{o=null})),ce())},i(e){n||(ue(o),n=!0)},o(e){de(o),n=!1},d(e){o&&o.d(e),e&&E(t)}}}function to(e,t,n){let o,i,r,l,s,a,u,d,p,m,h,y,g;c(e,Ge,(e=>n(2,o=e))),c(e,je,(e=>n(19,i=e))),c(e,Le,(e=>n(20,r=e))),c(e,Ie,(e=>n(3,l=e))),c(e,Je,(e=>n(21,s=e))),c(e,Ae,(e=>n(22,a=e))),c(e,Qe,(e=>n(23,u=e))),c(e,Ze,(e=>n(24,d=e))),c(e,ze,(e=>n(25,p=e)));let w,v=!0;function b(e){if(v&&"keydown"!==e.type)return;let t=e.target,n=t.classList;(n.contains("closing-x")||!t.closest(".anime-options-container")&&!n.contains("anime-options-container"))&&f(Ge,o=!1,o)}function k(e){v&&"keydown"!==e.type||(f(Ze,d=g,d),f(Qe,u=!0,u),f(Ge,o=!1,o))}function S(e){v&&"keydown"!==e.type||(y&&window.open(y,"_blank"),f(Ge,o=!1,o))}function x(e){if((!v||"keydown"===e.type)&&m){if(a)try{JSBridge.copyToClipBoard(m)}catch(e){}else navigator?.clipboard?.writeText?.(m);f(Ge,o=!1,o)}}async function E(e){if(v&&"keydown"!==e.type)return;l[h]?await s("Are you sure you want to show the anime?")&&(delete l[h],Ie.set(l),r.length&&i instanceof Worker&&i.postMessage({removeID:h}),f(Ge,o=!1,o)):await s("Are you sure you want to hide the anime?")&&(f(Ie,l[h]=!0,l),r.length&&i instanceof Worker&&i.postMessage({removeID:h}),f(Ge,o=!1,o))}Ge.subscribe((e=>{if(!0===e){v=!0,w=setTimeout((()=>{v=!1}),500);let e=r[p];e&&(n(0,m=e.title),n(1,h=e.id),y=e.animeUrl,g=p),f(ze,p=null,p)}else w&&clearTimeout(w),v=!1}));return[m,h,o,l,b,k,S,x,E,e=>"Enter"===e.key&&b(e),e=>"Enter"===e.key&&k(e),e=>"Enter"===e.key&&S(e),e=>"Enter"===e.key&&x(e),e=>"Enter"===e.key&&E(e),e=>"Enter"===e.key&&b(e)]}function no(t){let n,o,r,l,s,c,u,f,p,m,h,y,g,w,v,k,S=(t[0]||"Your Anilist Username")+"";return{c(){n=N("div"),o=N("nav"),r=N("i"),l=I(),s=N("div"),c=N("input"),u=I(),f=N("div"),p=T(S),h=I(),y=N("img"),L(r,"class",d("goback fa-solid fa-arrow-left")+" svelte-r9baka"),L(c,"id","usernameInput"),L(c,"type","search"),L(c,"enterkeyhint","search"),L(c,"autocomplete","off"),L(c,"placeholder","Your Anilist Username"),L(c,"class","svelte-r9baka"),L(f,"class",m=d("usernameText "+(t[6]&&(t[4]||t[5]||t[2]>40||window.scrollY>40)?"animate":""))+" svelte-r9baka"),L(s,"class","input-search svelte-r9baka"),L(y,"class","logo-icon svelte-r9baka"),a(y.src,g="./images/Kanshi-Logo.png")||L(y,"src","./images/Kanshi-Logo.png"),L(y,"alt","Kanshi Logo"),L(o,"id","nav"),L(o,"class",w=d("nav "+(t[4]||t[5]?"popupvisible":t[1]===document?.activeElement?"inputfocused":""))+" svelte-r9baka"),L(n,"class","nav-container svelte-r9baka")},m(e,i){x(e,n,i),b(n,o),b(o,r),b(o,l),b(o,s),b(s,c),P(c,t[0]),t[17](c),b(s,u),b(s,f),b(f,p),b(o,h),b(o,y),t[19](o),v||(k=[$(r,"click",t[10]),$(r,"keydown",t[14]),$(c,"keydown",t[15]),$(c,"focusin",t[13]),$(c,"focusout",t[13]),$(c,"input",t[16]),$(f,"click",t[9]),$(f,"keydown",t[18]),$(y,"pointerdown",t[11]),$(y,"pointerup",t[12]),$(y,"pointercancel",t[12]),$(n,"keydown",t[20]),$(n,"click",t[8])],v=!0)},p(e,[t]){1&t&&c.value!==e[0]&&P(c,e[0]),1&t&&S!==(S=(e[0]||"Your Anilist Username")+"")&&j(p,S),116&t&&m!==(m=d("usernameText "+(e[6]&&(e[4]||e[5]||e[2]>40||window.scrollY>40)?"animate":""))+" svelte-r9baka")&&L(f,"class",m),50&t&&w!==(w=d("nav "+(e[4]||e[5]?"popupvisible":e[1]===document?.activeElement?"inputfocused":""))+" svelte-r9baka")&&L(o,"class",w)},i:e,o:e,d(e){e&&E(n),t[17](null),t[19](null),v=!1,i(k)}}}function oo(e,t,n){let o,i,r,l,s,a,u;c(e,Je,(e=>n(25,o=e))),c(e,Qe,(e=>n(4,i=e))),c(e,Xe,(e=>n(5,r=e))),c(e,Pe,(e=>n(6,l=e))),c(e,Te,(e=>n(26,s=e))),c(e,Le,(e=>n(27,a=e))),c(e,Re,(e=>n(28,u=e)));let d,p,m,h,y,g=[],w="",v=window.scrollY,b=!1;async function k(e){if(u)return await async function(){return await o({isAlert:!0,title:"Initializing resources",text:"Please wait a moment..."})}(),void x();let t=e.target,c=t.classList;if("Enter"===e.key||"click"===e.type&&(c.contains("searchBtn")||t?.closest?.(".searchBtn"))){if(!w)return;if(w!==s){if(!navigator.onLine)return o({isAlert:!0,title:"Currently Offline",text:"It seems that you're currently offline and unable to update."});(async()=>{s?await o(`Currently connected to ${s}, do you want to change account?`)?(f(Xe,r=!1,r),i||(window.scrollY=window.scrollY,window.scrollX=window.scrollX,window?.scrollTo?.({top:-9999,behavior:"smooth"}),f(Le,a=null,a)),f(Pe,l="Getting User Entries",l),Vt({username:w}).then((({newusername:e})=>{e&&(n(0,w=f(Te,s=e||"",s)),st.update((e=>!e)))})).catch((e=>{f(Pe,l="Something went wrong...",l),console.error(e)}))):x():await o(`Are you sure you want to connect to ${w}?`)?(f(Xe,r=!1,r),i||(window.scrollY=window.scrollY,window.scrollX=window.scrollX,window?.scrollTo?.({top:-9999,behavior:"smooth"}),f(Le,a=null,a)),f(Pe,l="Getting User Entries",l),await Vt({username:w}).then((({newusername:e})=>{e&&n(0,w=f(Te,s=e||"",s)),st.update((e=>!e))})).catch((e=>{f(Pe,l="Something went wrong...",l),console.error(e)}))):x()})()}else m?.blur?.(),b=!1}}function S(e){if(y)return void(y=!1);let t=e.target.classList;return t.contains("nav")||t.contains("logo-icon")?b&&!t.contains("logo-icon")?(m?.blur?.(),void(b=!1)):void f(Xe,r=!r,r):void 0}function x(){m?.focus?.()}function E(){m===document.activeElement||b?(m?.blur?.(),b=!1):r?f(Xe,r=!r,r):i&&f(Qe,i=!1,i)}var A;R((()=>{n(3,p=p||document?.getElementById("nav")),n(1,m=m||document?.getElementById("usernameInput")),d=d||document?.getElementById("popup-container"),g.push(Te.subscribe((e=>{n(0,w=e||"")}))),document.addEventListener("scroll",(()=>{n(2,v=window.scrollY)}))})),A=()=>{g.forEach((e=>e()))},B().$$.on_destroy.push(A);return e.$$.update=()=>{3&e.$$.dirty&&w&&m?.setCustomValidity?.("")},[w,m,v,p,i,r,l,k,S,x,E,function(){h&&clearTimeout(h),h=setTimeout((()=>{y=!0,i?(d.scrollTop=d.scrollTop,d.scrollLeft=d.scrollLeft,d?.children?.[0]?.scrollIntoView?.({container:d,behavior:"smooth",block:"center"})):(window.scrollY=window.scrollY,window.scrollX=window.scrollX,window.scrollTo({top:-9999,behavior:"smooth"}))}),500)},function(){h&&clearTimeout(h),y&&(h=setTimeout((()=>{y=!1}),50))},function(e){"focusin"===e.type?(b=!0,xt(p,"inputfocused")):setTimeout((()=>{Et(p,"inputfocused"),b=!1}),100)},e=>"Enter"===e.key&&E(),e=>"Enter"===e.key&&k(e),function(){w=this.value,n(0,w)},function(e){H[e?"unshift":"push"]((()=>{m=e,n(1,m)}))},e=>"Enter"===e.key&&x(),function(e){H[e?"unshift":"push"]((()=>{p=e,n(3,p)}))},e=>"Enter"===e.key&&S(e)]}function io(e){let t,n,o,r,l,s,a,c,u,f,p,m,h,y,g,w,v,k,S,A,C,j,P,q,F,D,M,U,O,_,V,B,R,W,H=e[1]&&ro(e),Y=e[1]&&lo(e);return{c(){t=N("div"),n=N("div"),o=N("button"),o.textContent="Update List",l=I(),s=N("button"),s.textContent="Show All Hidden Entries",c=I(),u=N("button"),u.textContent="Import Data",p=I(),m=N("button"),m.textContent="Export Data",y=I(),H&&H.c(),g=I(),w=N("button"),w.textContent="Dark Mode",k=I(),S=N("button"),A=T("Auto Update"),P=I(),q=N("button"),F=T("Auto Export"),U=I(),O=N("button"),O.textContent="Create an Anilist Account",V=I(),Y&&Y.c(),L(o,"class","button svelte-1pa86sp"),L(s,"class","button svelte-1pa86sp"),L(u,"class","button svelte-1pa86sp"),L(m,"class","button svelte-1pa86sp"),L(w,"class","button selected svelte-1pa86sp"),L(S,"class",C=d("button "+(e[5]?"selected":""))+" svelte-1pa86sp"),L(q,"class",D=d("button "+(e[3]?"selected":""))+" svelte-1pa86sp"),L(O,"class","button svelte-1pa86sp"),L(n,"class","menu svelte-1pa86sp"),L(t,"class","menu-container svelte-1pa86sp")},m(i,r){x(i,t,r),b(t,n),b(n,o),b(n,l),b(n,s),b(n,c),b(n,u),b(n,p),b(n,m),b(n,y),H&&H.m(n,null),b(n,g),b(n,w),b(n,k),b(n,S),b(S,A),b(n,P),b(n,q),b(q,F),b(n,U),b(n,O),b(n,V),Y&&Y.m(n,null),B=!0,R||(W=[$(o,"click",e[10]),$(o,"keydown",e[19]),$(s,"click",e[14]),$(s,"keydown",e[20]),$(u,"click",e[7]),$(u,"keydown",e[21]),$(m,"click",e[9]),$(m,"keydown",e[22]),$(w,"click",e[6]),$(w,"keydown",e[24]),$(S,"click",e[11]),$(S,"keydown",e[25]),$(q,"click",e[12]),$(q,"keydown",e[26]),$(O,"click",e[15]),$(O,"keydown",e[27]),$(t,"click",e[13]),$(t,"keydown",e[30])],R=!0)},p(e,t){e[1]?H?(H.p(e,t),2&t[0]&&ue(H,1)):(H=ro(e),H.c(),ue(H,1),H.m(n,g)):H&&(ae(),de(H,1,1,(()=>{H=null})),ce()),(!B||32&t[0]&&C!==(C=d("button "+(e[5]?"selected":""))+" svelte-1pa86sp"))&&L(S,"class",C),(!B||8&t[0]&&D!==(D=d("button "+(e[3]?"selected":""))+" svelte-1pa86sp"))&&L(q,"class",D),e[1]?Y?(Y.p(e,t),2&t[0]&&ue(Y,1)):(Y=lo(e),Y.c(),ue(Y,1),Y.m(n,null)):Y&&(ae(),de(Y,1,1,(()=>{Y=null})),ce())},i(e){B||(Q((()=>{B&&(r||(r=pe(o,kn,{x:50,duration:300},!0)),r.run(1))})),Q((()=>{B&&(a||(a=pe(s,kn,{x:50,duration:300},!0)),a.run(1))})),Q((()=>{B&&(f||(f=pe(u,kn,{x:50,duration:300},!0)),f.run(1))})),Q((()=>{B&&(h||(h=pe(m,kn,{x:50,duration:300},!0)),h.run(1))})),ue(H),Q((()=>{B&&(v||(v=pe(w,kn,{x:50,duration:300},!0)),v.run(1))})),Q((()=>{B&&(j||(j=pe(S,kn,{x:50,duration:300},!0)),j.run(1))})),Q((()=>{B&&(M||(M=pe(q,kn,{x:50,duration:300},!0)),M.run(1))})),Q((()=>{B&&(_||(_=pe(O,kn,{x:50,duration:300},!0)),_.run(1))})),ue(Y),B=!0)},o(e){r||(r=pe(o,kn,{x:50,duration:300},!1)),r.run(0),a||(a=pe(s,kn,{x:50,duration:300},!1)),a.run(0),f||(f=pe(u,kn,{x:50,duration:300},!1)),f.run(0),h||(h=pe(m,kn,{x:50,duration:300},!1)),h.run(0),de(H),v||(v=pe(w,kn,{x:50,duration:300},!1)),v.run(0),j||(j=pe(S,kn,{x:50,duration:300},!1)),j.run(0),M||(M=pe(q,kn,{x:50,duration:300},!1)),M.run(0),_||(_=pe(O,kn,{x:50,duration:300},!1)),_.run(0),de(Y),B=!1},d(e){e&&E(t),e&&r&&r.end(),e&&a&&a.end(),e&&f&&f.end(),e&&h&&h.end(),H&&H.d(),e&&v&&v.end(),e&&j&&j.end(),e&&M&&M.end(),e&&_&&_.end(),Y&&Y.d(),R=!1,i(W)}}}function ro(e){let t,n,o,r,l,s,a=(e[4]?"Change":"Set")+" Export Folder";return{c(){t=N("button"),n=T(a),L(t,"class","button svelte-1pa86sp")},m(o,i){x(o,t,i),b(t,n),r=!0,l||(s=[$(t,"click",ao),$(t,"keydown",e[23])],l=!0)},p(e,t){(!r||16&t[0])&&a!==(a=(e[4]?"Change":"Set")+" Export Folder")&&j(n,a)},i(e){r||(Q((()=>{r&&(o||(o=pe(t,kn,{x:50,duration:300},!0)),o.run(1))})),r=!0)},o(e){o||(o=pe(t,kn,{x:50,duration:300},!1)),o.run(0),r=!1},d(e){e&&E(t),e&&o&&o.end(),l=!1,i(s)}}}function lo(t){let n,o,r,l,s,a,c,u=!window.location.protocol.startsWith("file:"),d=u&&function(t){let n,o,r,l,s;return{c(){n=N("button"),n.textContent="Check for Updates",L(n,"class","button svelte-1pa86sp")},m(e,o){x(e,n,o),r=!0,l||(s=[$(n,"keydown",t[29]),$(n,"click",t[17])],l=!0)},p:e,i(e){r||(Q((()=>{r&&(o||(o=pe(n,kn,{x:50,duration:300},!0)),o.run(1))})),r=!0)},o(e){o||(o=pe(n,kn,{x:50,duration:300},!1)),o.run(0),r=!1},d(e){e&&E(n),e&&o&&o.end(),l=!1,i(s)}}}(t);return{c(){n=N("button"),n.textContent="Switch App Mode",r=I(),d&&d.c(),l=C(),L(n,"class","button svelte-1pa86sp")},m(e,o){x(e,n,o),x(e,r,o),d&&d.m(e,o),x(e,l,o),s=!0,a||(c=[$(n,"keydown",t[28]),$(n,"click",t[16])],a=!0)},p(e,t){u&&d.p(e,t)},i(e){s||(Q((()=>{s&&(o||(o=pe(n,kn,{x:50,duration:300},!0)),o.run(1))})),ue(d),s=!0)},o(e){o||(o=pe(n,kn,{x:50,duration:300},!1)),o.run(0),de(d),s=!1},d(e){e&&E(n),e&&o&&o.end(),e&&E(r),d&&d.d(e),e&&E(l),a=!1,i(c)}}}function so(e){let t,n,o,i,r,l,s=e[2]&&io(e);return{c(){t=N("input"),n=I(),s&&s.c(),o=C(),L(t,"type","file"),L(t,"accept",".json"),q(t,"display","none")},m(a,c){x(a,t,c),e[18](t),x(a,n,c),s&&s.m(a,c),x(a,o,c),i=!0,r||(l=$(t,"change",e[8]),r=!0)},p(e,t){e[2]?s?(s.p(e,t),4&t[0]&&ue(s,1)):(s=io(e),s.c(),ue(s,1),s.m(o.parentNode,o)):s&&(ae(),de(s,1,1,(()=>{s=null})),ce())},i(e){i||(ue(s),i=!0)},o(e){de(s),i=!1},d(i){i&&E(t),e[18](null),i&&E(n),s&&s.d(i),i&&E(o),r=!1,l()}}}function ao(){try{JSBridge.chooseExportFolder()}catch(e){}}function co(e,t,n){let o,i,r,l,s,a,u,d,p,m,h,y,g,w,v,b;async function k(){o({isAlert:!0,text:"Sorry, this is still not working."})}async function S(){return y?j():b instanceof Element?void(await o({text:"Are you sure you want to import your Data?"})&&b.click()):f(Pe,u="Something went wrong...",u)}async function x(){return y?j():!w&&r?ao():void(await o("Are you sure you want to export your data?")&&(f(Xe,a=!1,a),lt.update((e=>!e))))}async function E(){return y?j():navigator.onLine?void(await o("Are you sure you want to update your list?")&&(f(Xe,a=!1,a),rt.update((e=>!e)))):o({isAlert:!0,title:"Currently offline",text:"It seems that you're currently offline and unable to update."})}async function A(){await o(`Are you sure you want to ${v?"disable":"enable"} auto-update?`)&&f(qe,v=!v,v)}async function N(){if(!w&&r)return ao();await o(`Are you sure you want to ${g?"disable":"enable"} auto-export?`)&&f(Ue,g=!g,g)}function T(e){e.target.classList.contains("button")||f(Xe,a=!a,a)}async function I(){if(y)return j();if(mt(h))o({isAlert:!0,text:"There is currently no hidden entries."});else if(await o("Are you sure you want to show all hidden anime entries?")){m&&(m.terminate(),f(je,m=null,m)),p||f(Le,d=null,d),f(Pe,u="Updating List",u),f(Xe,a=!1,a);let e=s?.filterSelection?.findIndex?.((({filterSelectionName:e})=>"Anime Filter"===e)),t=s?.filterSelection?.[e??-1]?.filters?.Checkbox?.findIndex?.((({filName:e})=>"hidden anime"===e));e>=0&&t>=0&&f(Ce,s.filterSelection[e??-1].filters.Checkbox[t??-1].isSelected=!1,s),l?.["Anime Filter"]&&f($e,l["Anime Filter"]=l["Anime Filter"].filter((({optionName:e,filterType:t})=>"hidden"!==e&&"checkbox"!==t)),l),await Sn(s,"filterOptions"),await Sn(l,"activeTagFilters"),await Sn({},"hiddenEntries"),at.update((e=>!e))}}async function C(){await o("Are you sure want to sign-up an anilist account?")&&window.open("https://anilist.co/signup","_blank")}function $(){if(r)try{JSBridge.switchApp()}catch(e){}}function L(){if(!navigator.onLine)return o({isAlert:!0,title:"Currently offline",text:"It seems that you're currently offline and unable to check for updates."});if(r)try{JSBridge.checkAppID(i,!0)}catch(e){}}function j(){o({isAlert:!0,title:"Initializing resources",text:"Please wait a moment..."})}c(e,Je,(e=>n(31,o=e))),c(e,Ee,(e=>n(32,i=e))),c(e,Ae,(e=>n(1,r=e))),c(e,$e,(e=>n(33,l=e))),c(e,Ce,(e=>n(34,s=e))),c(e,Xe,(e=>n(2,a=e))),c(e,Pe,(e=>n(35,u=e))),c(e,Le,(e=>n(36,d=e))),c(e,Qe,(e=>n(37,p=e))),c(e,je,(e=>n(38,m=e))),c(e,Ie,(e=>n(39,h=e))),c(e,Re,(e=>n(40,y=e))),c(e,Ue,(e=>n(3,g=e))),c(e,Me,(e=>n(4,w=e))),c(e,qe,(e=>n(5,v=e))),window.setExportPathAvailability=async(e=!0)=>{f(Me,w=e,w),await Sn(e,"exportPathIsAvailable")};return[b,r,a,g,w,v,k,S,async function(){if(!(b instanceof Element))return f(Pe,u="Something went wrong...",u);let e=b.files?.[0];if(e){let i=e.name;await o(`File ${i?"named ["+i+"] ":""}has been detected, do you want to continue the import?`)?(await Sn(!0,"shouldProcessRecommendation"),f(Xe,a=!1,a),p||(window.scrollY=window.scrollY,window.scrollX=window.scrollX,window?.scrollTo?.({top:-9999,behavior:"smooth"}),f(Le,d=null,d)),(t={importedFile:e},new Promise(((e,n)=>{Lt||($t=!0,nn(),Ht&&Ht.terminate(),Nt("./webapi/worker/importUserData.js").then((o=>{Ht=new Worker(o),Wt&&clearTimeout(Wt),Ht.postMessage(t),Ht.onmessage=({data:t})=>{void 0!==t?.error?($t=!1,dt.update((e=>!e)),window.confirmPromise?.({isAlert:!0,title:"Import Failed",text:"File has not been imported, please ensure that file is in a supported format (e.g., .json)"}),n(t?.error||"Something went wrong...")):void 0!==t?.status?(Ct=!0,Pe.set(t.status)):"string"==typeof t?.importedUsername?Te.set(t.importedUsername):pt(t?.importedHiddenEntries)?Ie.set(t?.importedHiddenEntries):t?.importedlastRunnedAutoUpdateDate instanceof Date&&!isNaN(t?.importedlastRunnedAutoUpdateDate)?De.set(t.importedlastRunnedAutoUpdateDate):t?.importedlastRunnedAutoExportDate instanceof Date&&!isNaN(t?.importedlastRunnedAutoExportDate)?_e.set(t.importedlastRunnedAutoExportDate):void 0!==t?.updateFilters?($t=!1,tn().then((e=>{$e.set(e.activeTagFilters),Ce.set(e.filterOptions)}))):void 0!==t?.updateRecommendationList?($t=!1,st.update((e=>!e))):($t=!1,rt.update((e=>!e)),Ct=!1,Wt=setTimeout((()=>{Ht.terminate()}),It),e(t))},Ht.onerror=e=>{$t=!1,window.confirmPromise?.({isAlert:!0,title:"Import Failed",text:"File has not been imported, please ensure that file is in a supported format (e.g., .json)"}),dt.update((e=>!e)),n(e||"Something went wrong...")}})).catch((e=>{$t=!1,dt.update((e=>!e)),on(),n(e)})))}))).then((()=>{b instanceof Element&&n(0,b.value=null,b)})).catch((e=>{f(Pe,u=e||"Something went wrong...",u),n(0,b.value=null,b),st.update((e=>!e))}))):b instanceof Element&&n(0,b.value=null,b)}else b instanceof Element&&n(0,b.value=null,b);var t},x,E,A,N,T,I,C,$,L,function(e){H[e?"unshift":"push"]((()=>{b=e,n(0,b)}))},e=>"Enter"===e.key&&E(),e=>"Enter"===e.key&&I(),e=>"Enter"===e.key&&S(),e=>"Enter"===e.key&&x(),e=>"Enter"===e.key&&ao(),e=>"Enter"===e.key&&k(),e=>"Enter"===e.key&&A(),e=>"Enter"===e.key&&N(),e=>"Enter"===e.key&&C(),e=>"Enter"===e.key&&$(),e=>"Enter"===e.key&&L(),e=>"Enter"===e.key&&T(e)]}function uo(e,t,n){const o=e.slice();return o[81]=t[n].sortName,o[83]=n,o}function fo(e,t,n){const o=e.slice();return o[84]=t[n].optionName,o[85]=t[n].optionIdx,o[86]=t[n].selected,o[87]=t[n].changeType,o[88]=t[n].filterType,o[89]=t[n].categIdx,o[90]=t[n].optionValue,o[91]=t[n].optionType,o}function po(e,t,n){const o=e.slice();return o[108]=t[n],o}function mo(e,t,n){const o=e.slice();return o[94]=t[n],o[95]=t,o[96]=n,o}function ho(e,t,n){const o=e.slice();return o[97]=t[n],o[99]=n,o}function yo(e,t,n){const o=e.slice();return o[100]=t[n],o[101]=t,o[102]=n,o}function go(e,t,n){const o=e.slice();return o[103]=t[n],o[104]=t,o[105]=n,o}function wo(e,t,n){const o=e.slice();return o[106]=t[n],o[85]=n,o}function vo(e,t,n){const o=e.slice();return o[111]=t[n].filterSelectionName,o[112]=t[n].isSelected,o}function bo(t){let n;return{c(){n=N("div"),L(n,"class","skeleton shimmer svelte-ehqbi6")},m(e,t){x(e,n,t)},p:e,d(e){e&&E(n)}}}function ko(e){let t,n,o,i=(e[7]?.filterSelection?.filter?.(ri)?.[0]?.filterSelectionName||"")+"";return{c(){t=N("span"),n=N("h2"),o=T(i),L(n,"class","svelte-ehqbi6"),L(t,"class","svelte-ehqbi6")},m(e,i){x(e,t,i),b(t,n),b(n,o)},p(e,t){128&t[0]&&i!==(i=(e[7]?.filterSelection?.filter?.(ri)?.[0]?.filterSelectionName||"")+"")&&j(o,i)},d(e){e&&E(t)}}}function So(n){let o,l,s,a;function c(e,t){return e[10]?Ao:e[11]||e[8]?xo:Eo}let u=c(n),d=u(n);return{c(){o=N("span"),l=N("h2"),d.c(),L(l,"class","svelte-ehqbi6"),L(o,"class","data-status svelte-ehqbi6")},m(e,t){x(e,o,t),b(o,l),d.m(l,null),a=!0},p(e,t){u===(u=c(e))&&d?d.p(e,t):(d.d(1),d=u(e),d&&(d.c(),d.m(l,null)))},i(e){a||(s&&s.end(1),a=!0)},o(n){s=function(n,o,l){const s={direction:"out"};let a,c=o(n,l,s),u=!0;const d=se;function f(){const{delay:o=0,duration:r=300,easing:l=t,tick:s=e,css:f}=c||fe;f&&(a=O(n,1,0,r,o,l,f));const p=h()+o,m=p+r;Q((()=>re(n,!1,"start"))),v((e=>{if(u){if(e>=m)return s(0,1),re(n,!1,"end"),--d.r||i(d.c),!1;if(e>=p){const t=l((e-p)/r);s(1-t,t)}}return u}))}return d.r+=1,r(c)?ie().then((()=>{c=c(s),f()})):f(),{end(e){e&&c.tick&&c.tick(1,0),u&&(a&&_(n,a),u=!1)}}}(o,bn,{duration:300}),a=!1},d(e){e&&E(o),d.d(),e&&s&&s.end()}}}function xo(t){let n;return{c(){n=T("")},m(e,t){x(e,n,t)},p:e,d(e){e&&E(n)}}}function Eo(t){let n;return{c(){n=T("No Anilist Username Found")},m(e,t){x(e,n,t)},p:e,d(e){e&&E(n)}}}function Ao(e){let t;return{c(){t=T(e[10])},m(e,n){x(e,t,n)},p(e,n){1024&n[0]&&j(t,e[10])},d(e){e&&E(t)}}}function No(e){let t,n,o,r,l,s,a,c,u,f,p=[],m=new Map,h=e[7]?.filterSelection||[];const y=e=>e[111];for(let t=0;t<h.length;t+=1){let n=vo(e,h,t),o=y(n);m.set(o,p[t]=To(o,n))}return{c(){t=N("div"),n=N("div"),o=N("h2"),o.textContent="Filters",r=I(),l=N("div"),l.textContent="×",s=I(),a=N("div");for(let e=0;e<p.length;e+=1)p[e].c();L(o,"class","svelte-ehqbi6"),L(l,"class","closing-x svelte-ehqbi6"),L(n,"class","header svelte-ehqbi6"),L(a,"class","options svelte-ehqbi6"),L(t,"class",c=d("options-wrap-filter-info "+(e[4]?"":"hide"))+" svelte-ehqbi6")},m(i,c){x(i,t,c),b(t,n),b(n,o),b(n,r),b(n,l),b(t,s),b(t,a);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(a,null);u||(f=[$(l,"keydown",e[34]),$(l,"click",e[15])],u=!0)},p(e,n){16512&n[0]&&(h=e[7]?.filterSelection||[],p=ye(p,n,y,1,e,h,m,a,me,To,null,vo)),16&n[0]&&c!==(c=d("options-wrap-filter-info "+(e[4]?"":"hide"))+" svelte-ehqbi6")&&L(t,"class",c)},d(e){e&&E(t);for(let e=0;e<p.length;e+=1)p[e].d();u=!1,i(f)}}}function To(e,t){let n,o,l,s,a,c,u=(t[111]||"")+"";function d(...e){return t[35](t[111],...e)}return{key:e,first:null,c(){n=N("div"),o=N("h3"),l=T(u),s=I(),L(o,"class","svelte-ehqbi6"),q(o,"color",t[112]?"#3db4f2":"inherit"),L(n,"class","option svelte-ehqbi6"),this.first=n},m(e,i){x(e,n,i),b(n,o),b(o,l),b(n,s),a||(c=[$(n,"click",(function(){r(t[14](t[111]))&&t[14](t[111]).apply(this,arguments)})),$(n,"keydown",d)],a=!0)},p(e,n){t=e,128&n[0]&&u!==(u=(t[111]||"")+"")&&j(l,u),128&n[0]&&q(o,"color",t[112]?"#3db4f2":"inherit")},d(e){e&&E(n),a=!1,i(c)}}}function Io(t){let n,o=Array(10),i=[];for(let e=0;e<o.length;e+=1)i[e]=$o(po(t,o,e));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();n=C()},m(e,t){for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(e,t);x(e,n,t)},p:e,d(e){A(i,e),e&&E(n)}}}function Co(e){let t,n=[],o=new Map,i=e[7]?.filterSelection||[];const r=e=>e[94].filterSelectionName;for(let t=0;t<i.length;t+=1){let l=mo(e,i,t),s=r(l);o.set(s,n[t]=Ko(s,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=C()},m(e,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,o);x(e,t,o)},p(e,l){270475659&l[0]&&(i=e[7]?.filterSelection||[],n=ye(n,l,r,1,e,i,o,t.parentNode,me,Ko,t,mo))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&E(t)}}}function $o(t){let n;return{c(){n=N("div"),n.innerHTML='<div class="filter-name skeleton shimmer svelte-ehqbi6"></div> \n                    <div class="select skeleton shimmer svelte-ehqbi6"></div> \n                ',L(n,"class","filter-select svelte-ehqbi6")},m(e,t){x(e,n,t)},p:e,d(e){e&&E(n)}}}function Lo(t){let n;return{c(){n=N("i"),L(n,"class","icon fa-solid fa-angle-down svelte-ehqbi6")},m(e,t){x(e,n,t)},p:e,d(e){e&&E(n)}}}function jo(e){let t,n,o;function l(...t){return e[37](e[105],...t)}return{c(){t=N("i"),L(t,"class","icon fa-solid fa-angle-up svelte-ehqbi6")},m(i,s){x(i,t,s),n||(o=[$(t,"keydown",l),$(t,"click",(function(){r(e[17](e[105]))&&e[17](e[105]).apply(this,arguments)}))],n=!0)},p(t,n){e=t},d(e){e&&E(t),n=!1,i(o)}}}function Po(t){let n;return{c(){n=N("div"),n.innerHTML='<h3 class="svelte-ehqbi6">No Results</h3>',L(n,"class","option svelte-ehqbi6")},m(e,t){x(e,n,t)},p:e,d(e){e&&E(n)}}}function qo(e){let t,n=[],o=new Map,i=e[103].options||[];const r=e=>e[94].filterSelectionName+e[103].filName+e[106].optionName;for(let t=0;t<i.length;t+=1){let l=wo(e,i,t),s=r(l);o.set(s,n[t]=Oo(s,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=C()},m(e,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,o);x(e,t,o)},p(e,l){262272&l[0]&&(i=e[103].options||[],n=ye(n,l,r,1,e,i,o,t.parentNode,me,Oo,t,wo))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&E(t)}}}function Fo(t){let n;return{c(){n=N("i"),L(n,"class","fa-regular fa-circle-xmark async-element svelte-ehqbi6"),q(n,"--optionColor","#e85d75")},m(e,t){x(e,n,t)},p:e,d(e){e&&E(n)}}}function Do(e){let t;function n(e,t){return"Content Caution"===e[94].filterSelectionName?Uo:Mo}let o=n(e),i=o(e);return{c(){i.c(),t=C()},m(e,n){i.m(e,n),x(e,t,n)},p(e,r){o!==(o=n(e))&&(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&E(t)}}}function Mo(e){let t;return{c(){t=N("i"),L(t,"class","fa-regular fa-circle-check async-element svelte-ehqbi6"),q(t,"--optionColor","#5f9ea0")},m(e,n){x(e,t,n)},d(e){e&&E(t)}}}function Uo(e){let t;return{c(){t=N("i"),L(t,"class","fa-regular fa-circle-xmark async-element svelte-ehqbi6"),q(t,"--optionColor","#5f9ea0")},m(e,n){x(e,t,n)},d(e){e&&E(t)}}}function Oo(e,t){let n,o,l,s,a,c,u,f=(t[106].optionName||"")+"";function p(e,t){return"included"===e[106].selected?Do:"excluded"===e[106].selected&&"read"!==e[103].changeType?Fo:void 0}let m=p(t),h=m&&m(t);function y(...e){return t[42](t[106],t[103],t[85],t[105],t[94],...e)}return{key:e,first:null,c(){n=N("div"),o=N("h3"),l=T(f),s=I(),h&&h.c(),L(o,"class","svelte-ehqbi6"),L(n,"class",a=d("option "+(oi(t[106].optionName,t[103].optKeyword)?"":"disable-interaction"))+" svelte-ehqbi6"),this.first=n},m(e,i){x(e,n,i),b(n,o),b(o,l),b(n,s),h&&h.m(n,null),c||(u=[$(n,"click",(function(){r(t[18](t[106].optionName,t[103].filName,t[85],t[105],t[103].changeType,t[94].filterSelectionName))&&t[18](t[106].optionName,t[103].filName,t[85],t[105],t[103].changeType,t[94].filterSelectionName).apply(this,arguments)})),$(n,"keydown",y)],c=!0)},p(e,o){t=e,128&o[0]&&f!==(f=(t[106].optionName||"")+"")&&j(l,f),m===(m=p(t))&&h?h.p(t,o):(h&&h.d(1),h=m&&m(t),h&&(h.c(),h.m(n,null))),128&o[0]&&a!==(a=d("option "+(oi(t[106].optionName,t[103].optKeyword)?"":"disable-interaction"))+" svelte-ehqbi6")&&L(n,"class",a)},d(e){e&&E(n),h&&h.d(),c=!1,i(u)}}}function _o(e,t){let n,o,l,s,a,c,u,f,p,m,h,y,g,w,v,k,S,A,C,F,D,M,U,O,_,V,B,R,W,H=(t[103].filName||"")+"",Y=t[103].filName+"",K=`${t[3]}px`;function J(...e){return t[31](t[103],...e)}function X(){t[36].call(f,t[96],t[105])}function G(e,t){return e[103].selected&&e[103].options.length&&!e[0]?jo:Lo}let z=G(t),Q=z(t);function Z(...e){return t[38](t[105],...e)}function ee(...e){return t[39](t[105],...e)}function te(...e){return t[40](t[105],...e)}function ne(){t[41].call(F,t[96],t[105])}function oe(e,t){return 128&t[0]&&(O=null),null==O&&(O=!!e[103].options?.filter?.(J)?.length),O?qo:Po}let ie=oe(t,[-1,-1,-1,-1]),re=ie(t);return{key:e,first:null,c(){n=N("div"),o=N("div"),l=N("h2"),s=T(H),a=I(),c=N("div"),u=N("div"),f=N("input"),m=I(),Q.c(),h=I(),y=N("div"),g=N("div"),w=N("div"),v=N("h2"),k=T(Y),S=I(),A=N("div"),A.textContent="×",C=I(),F=N("input"),M=I(),U=N("div"),re.c(),L(l,"class","svelte-ehqbi6"),L(o,"class","filter-name svelte-ehqbi6"),L(f,"placeholder","Any"),L(f,"type","search"),L(f,"enterkeyhint","search"),L(f,"autocomplete","off"),L(f,"class","value-input svelte-ehqbi6"),f.disabled=p=t[1]<=425||!t[94].isSelected,L(u,"class","value-wrap svelte-ehqbi6"),L(c,"class","select svelte-ehqbi6"),L(v,"class","svelte-ehqbi6"),L(A,"class","closing-x svelte-ehqbi6"),L(w,"class","header svelte-ehqbi6"),L(F,"placeholder","Any"),L(F,"type","search"),L(F,"enterkeyhint","search"),L(F,"autocomplete","off"),F.disabled=D=!t[94].isSelected,L(F,"class","svelte-ehqbi6"),L(U,"class","options svelte-ehqbi6"),L(g,"class",_=d("options-wrap-filter-info "+(t[103].options.length&&!0===t[103].selected&&!t[0]?"":"hide"))+" svelte-ehqbi6"),L(y,"class",V=d("options-wrap "+(t[103].options.length&&!0===t[103].selected&&!t[0]?"":"disable-interaction hide"))+" svelte-ehqbi6"),q(y,"--maxFilterSelectionHeight",K),L(n,"class",B=d("filter-select "+(t[94].isSelected?"":"disable-interaction"))+" svelte-ehqbi6"),this.first=n},m(e,i){x(e,n,i),b(n,o),b(o,l),b(l,s),b(n,a),b(n,c),b(c,u),b(u,f),P(f,t[7].filterSelection[t[96]].filters.Dropdown[t[105]].optKeyword),b(c,m),Q.m(c,null),b(n,h),b(n,y),b(y,g),b(g,w),b(w,v),b(v,k),b(w,S),b(w,A),b(g,C),b(g,F),P(F,t[7].filterSelection[t[96]].filters.Dropdown[t[105]].optKeyword),b(g,M),b(g,U),re.m(U,null),R||(W=[$(f,"input",X),$(c,"keydown",Z),$(c,"click",ee),$(A,"keydown",te),$(A,"click",(function(){r(t[17](t[105]))&&t[17](t[105]).apply(this,arguments)})),$(F,"input",ne)],R=!0)},p(e,o){t=e,128&o[0]&&H!==(H=(t[103].filName||"")+"")&&j(s,H),130&o[0]&&p!==(p=t[1]<=425||!t[94].isSelected)&&(f.disabled=p),128&o[0]&&f.value!==t[7].filterSelection[t[96]].filters.Dropdown[t[105]].optKeyword&&P(f,t[7].filterSelection[t[96]].filters.Dropdown[t[105]].optKeyword),z===(z=G(t))&&Q?Q.p(t,o):(Q.d(1),Q=z(t),Q&&(Q.c(),Q.m(c,null))),128&o[0]&&Y!==(Y=t[103].filName+"")&&j(k,Y),128&o[0]&&D!==(D=!t[94].isSelected)&&(F.disabled=D),128&o[0]&&F.value!==t[7].filterSelection[t[96]].filters.Dropdown[t[105]].optKeyword&&P(F,t[7].filterSelection[t[96]].filters.Dropdown[t[105]].optKeyword),ie===(ie=oe(t,o))&&re?re.p(t,o):(re.d(1),re=ie(t),re&&(re.c(),re.m(U,null))),129&o[0]&&_!==(_=d("options-wrap-filter-info "+(t[103].options.length&&!0===t[103].selected&&!t[0]?"":"hide"))+" svelte-ehqbi6")&&L(g,"class",_),129&o[0]&&V!==(V=d("options-wrap "+(t[103].options.length&&!0===t[103].selected&&!t[0]?"":"disable-interaction hide"))+" svelte-ehqbi6")&&L(y,"class",V),8&o[0]&&K!==(K=`${t[3]}px`)&&q(y,"--maxFilterSelectionHeight",K),128&o[0]&&B!==(B=d("filter-select "+(t[94].isSelected?"":"disable-interaction"))+" svelte-ehqbi6")&&L(n,"class",B)},d(e){e&&E(n),Q.d(),re.d(),R=!1,i(W)}}}function Vo(e){let t,n,o,r,l,s,a,c,u,d=(e[100].filName||"")+"";function f(e,t){return e[8]?Ro:Bo}let p=f(e),m=p(e);function h(...t){return e[46](e[100],e[102],e[94],...t)}function y(...t){return e[47](e[100],e[102],e[94],...t)}return{c(){t=N("div"),n=N("div"),o=I(),r=N("div"),m.c(),l=I(),s=N("div"),a=T(d),L(n,"class","svelte-ehqbi6"),q(n,"visibility","none"),L(s,"class","checkbox-label svelte-ehqbi6"),L(r,"class","checkbox-wrap svelte-ehqbi6"),L(t,"class","filter-checkbox svelte-ehqbi6")},m(e,i){x(e,t,i),b(t,n),b(t,o),b(t,r),m.m(r,null),b(r,l),b(r,s),b(s,a),c||(u=[$(r,"click",h),$(r,"keydown",y)],c=!0)},p(t,n){p===(p=f(e=t))&&m?m.p(e,n):(m.d(1),m=p(e),m&&(m.c(),m.m(r,l))),128&n[0]&&d!==(d=(e[100].filName||"")+"")&&j(a,d)},d(e){e&&E(t),m.d(),c=!1,i(u)}}}function Bo(e){let t,n,o;function r(...t){return e[44](e[100],e[102],e[94],...t)}function l(){e[45].call(t,e[101],e[102])}return{c(){t=N("input"),L(t,"type","checkbox"),L(t,"class","checkbox svelte-ehqbi6")},m(i,s){x(i,t,s),t.checked=e[100].isSelected,n||(o=[$(t,"change",r),$(t,"change",l)],n=!0)},p(n,o){e=n,128&o[0]&&(t.checked=e[100].isSelected)},d(e){e&&E(t),n=!1,i(o)}}}function Ro(e){let t,n,o,i;return{c(){t=N("input"),L(t,"type","checkbox"),L(t,"class","checkbox svelte-ehqbi6"),t.checked=n=e[100].isSelected},m(n,r){x(n,t,r),o||(i=$(t,"change",e[43]),o=!0)},p(e,o){128&o[0]&&n!==(n=e[100].isSelected)&&(t.checked=n)},d(e){e&&E(t),o=!1,i()}}}function Wo(e,t){let n,o,i=t[94].isSelected&&Vo(t);return{key:e,first:null,c(){n=C(),i&&i.c(),o=C(),this.first=n},m(e,t){x(e,n,t),i&&i.m(e,t),x(e,o,t)},p(e,n){(t=e)[94].isSelected?i?i.p(t,n):(i=Vo(t),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(e){e&&E(n),i&&i.d(e),e&&E(o)}}}function Ho(e){let t,n,o,i,r,l,s,a,c,u,d,f,p=(e[97].filName||"")+"";function m(...t){return e[48](e[99],e[97],e[94],...t)}return{c(){t=N("div"),n=N("div"),o=N("h2"),i=T(p),r=I(),l=N("div"),s=N("input"),u=I(),L(o,"class","svelte-ehqbi6"),L(n,"class","filter-input-number-name svelte-ehqbi6"),L(s,"class","value-input-number svelte-ehqbi6"),L(s,"type","text"),L(s,"placeholder",a="scoring system"===e[97].filName?"Default: User Scoring":e[13].includes(e[97].filName)?">123 or 123":null!==e[97].defaultValue?"Default: "+e[97].defaultValue:"123"),s.value=c=e[97].numberValue||"",L(l,"class","value-input-number-wrap svelte-ehqbi6"),L(t,"class","filter-input-number svelte-ehqbi6"),q(t,"display",e[94].isSelected?"":"none")},m(e,a){x(e,t,a),b(t,n),b(n,o),b(o,i),b(t,r),b(t,l),b(l,s),b(t,u),d||(f=$(s,"input",m),d=!0)},p(n,o){e=n,128&o[0]&&p!==(p=(e[97].filName||"")+"")&&j(i,p),128&o[0]&&a!==(a="scoring system"===e[97].filName?"Default: User Scoring":e[13].includes(e[97].filName)?">123 or 123":null!==e[97].defaultValue?"Default: "+e[97].defaultValue:"123")&&L(s,"placeholder",a),128&o[0]&&c!==(c=e[97].numberValue||"")&&s.value!==c&&(s.value=c),128&o[0]&&q(t,"display",e[94].isSelected?"":"none")},d(e){e&&E(t),d=!1,f()}}}function Yo(e,t){let n,o,i=t[94].isSelected&&Ho(t);return{key:e,first:null,c(){n=C(),i&&i.c(),o=C(),this.first=n},m(e,t){x(e,n,t),i&&i.m(e,t),x(e,o,t)},p(e,n){(t=e)[94].isSelected?i?i.p(t,n):(i=Ho(t),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(e){e&&E(n),i&&i.d(e),e&&E(o)}}}function Ko(e,t){let n,o,i,r,l=[],s=new Map,a=[],c=new Map,u=[],d=new Map,f=t[94].filters.Dropdown||[];const p=e=>e[94].filterSelectionName+e[103].filName;for(let e=0;e<f.length;e+=1){let n=go(t,f,e),o=p(n);s.set(o,l[e]=_o(o,n))}let m=t[94].filters.Checkbox||[];const h=e=>e[94].filterSelectionName+e[100].filName;for(let e=0;e<m.length;e+=1){let n=yo(t,m,e),o=h(n);c.set(o,a[e]=Wo(o,n))}let y=t[94].filters["Input Number"]||[];const g=e=>e[94].filterSelectionName+e[97].filName;for(let e=0;e<y.length;e+=1){let n=ho(t,y,e),o=g(n);d.set(o,u[e]=Yo(o,n))}return{key:e,first:null,c(){n=C();for(let e=0;e<l.length;e+=1)l[e].c();o=I();for(let e=0;e<a.length;e+=1)a[e].c();i=I();for(let e=0;e<u.length;e+=1)u[e].c();r=C(),this.first=n},m(e,t){x(e,n,t);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,t);x(e,o,t);for(let n=0;n<a.length;n+=1)a[n]&&a[n].m(e,t);x(e,i,t);for(let n=0;n<u.length;n+=1)u[n]&&u[n].m(e,t);x(e,r,t)},p(e,n){t=e,458891&n[0]&&(f=t[94].filters.Dropdown||[],l=ye(l,n,p,1,t,f,s,o.parentNode,me,_o,o,go)),268960128&n[0]&&(m=t[94].filters.Checkbox||[],a=ye(a,n,h,1,t,m,c,i.parentNode,me,Wo,i,yo)),1056896&n[0]&&(y=t[94].filters["Input Number"]||[],u=ye(u,n,g,1,t,y,d,r.parentNode,me,Yo,r,ho))},d(e){e&&E(n);for(let t=0;t<l.length;t+=1)l[t].d(e);e&&E(o);for(let t=0;t<a.length;t+=1)a[t].d(e);e&&E(i);for(let t=0;t<u.length;t+=1)u[t].d(e);e&&E(r)}}}function Jo(e){let t,n,o=(e[84]||"")+"";return{c(){t=N("h3"),n=T(o),L(t,"class","svelte-ehqbi6")},m(e,o){x(e,t,o),b(t,n)},p(e,t){640&t[0]&&o!==(o=(e[84]||"")+"")&&j(n,o)},d(e){e&&E(t)}}}function Xo(e){let t,n,o=(e[91]+": "+e[84]||"")+"";return{c(){t=N("h3"),n=T(o),L(t,"class","svelte-ehqbi6")},m(e,o){x(e,t,o),b(t,n)},p(e,t){640&t[0]&&o!==(o=(e[91]+": "+e[84]||"")+"")&&j(n,o)},d(e){e&&E(t)}}}function Go(e){let t,n,o=(e[84]+": "+e[90]||"")+"";return{c(){t=N("h3"),n=T(o),L(t,"class","svelte-ehqbi6")},m(e,o){x(e,t,o),b(t,n)},p(e,t){640&t[0]&&o!==(o=(e[84]+": "+e[90]||"")+"")&&j(n,o)},d(e){e&&E(t)}}}function zo(e,t){let n,o,r,l,s,a,c,u;function d(e,t){return"input number"===e[88]?Go:e[91]?Xo:Jo}let f=d(t),p=f(t);function m(...e){return t[50](t[85],t[84],t[88],t[89],t[91],...e)}function h(...e){return t[51](t[85],t[84],t[88],t[89],t[91],...e)}function y(...e){return t[52](t[85],t[84],t[88],t[89],t[87],t[91],t[90],...e)}function g(...e){return t[53](t[85],t[84],t[88],t[89],t[87],t[91],t[90],...e)}return{key:e,first:null,c(){n=N("div"),p.c(),o=I(),r=N("i"),l=I(),L(r,"class","fa-solid fa-xmark svelte-ehqbi6"),L(n,"class","activeTagFilter svelte-ehqbi6"),q(n,"--activeTagFilterColor","included"===t[86]?"#5f9ea0":"#e85d75"),this.first=n},m(e,t){var i;x(e,n,t),p.m(n,null),b(n,o),b(n,r),b(n,l),a=!0,c||(u=[$(r,"click",(i=m,function(e){return e.preventDefault(),i.call(this,e)})),$(r,"keydown",h),$(n,"click",y),$(n,"keydown",g)],c=!0)},p(e,i){f===(f=d(t=e))&&p?p.p(t,i):(p.d(1),p=f(t),p&&(p.c(),p.m(n,o))),640&i[0]&&q(n,"--activeTagFilterColor","included"===t[86]?"#5f9ea0":"#e85d75")},i(e){a||(Q((()=>{a&&(s||(s=pe(n,kn,{x:-10,duration:300},!0)),s.run(1))})),a=!0)},o(e){s||(s=pe(n,kn,{x:-10,duration:300},!1)),s.run(0),a=!1},d(e){e&&E(n),p.d(),e&&s&&s.end(),c=!1,i(u)}}}function Qo(t){let n;return{c(){n=N("div"),L(n,"class","sortFilter skeleton shimmer svelte-ehqbi6")},m(e,t){x(e,n,t)},p:e,d(e){e&&E(n)}}}function Zo(e){let t,n,o,r,l,s,a,c,u,f,p,m,h,y,g,w,v,k,S,A=(e[7]?.sortFilter?.[e[7]?.sortFilter.findIndex(ui)]?.sortName||"")+"",C=[],P=new Map,F=`${e[3]}px`,D=e[7]?.sortFilter||[];const M=e=>e[81]+e[83];for(let t=0;t<D.length;t+=1){let n=uo(e,D,t),o=M(n);P.set(o,C[t]=ti(o,n))}return{c(){t=N("div"),n=N("i"),r=I(),l=N("h2"),s=T(A),a=I(),c=N("div"),u=N("div"),f=N("div"),p=N("h2"),p.textContent="Sort By",m=I(),h=N("div"),h.textContent="×",y=I(),g=N("div");for(let e=0;e<C.length;e+=1)C[e].c();L(n,"class",o=d("fa-duotone fa-sort-"+("asc"===e[7]?.sortFilter?.[e[7]?.sortFilter?.findIndex(ci)]?.sortType?"up":"down"))+" svelte-ehqbi6"),L(l,"class","svelte-ehqbi6"),L(p,"class","svelte-ehqbi6"),L(h,"class","closing-x svelte-ehqbi6"),L(f,"class","header svelte-ehqbi6"),L(g,"class","options svelte-ehqbi6"),L(u,"class",w=d("options-wrap-filter-info "+(e[5]?"":"hide"))+" svelte-ehqbi6"),L(c,"class",v=d("options-wrap "+(e[5]?"":"disable-interaction hide"))+" svelte-ehqbi6"),q(c,"--maxFilterSelectionHeight",F),L(t,"class","sortFilter svelte-ehqbi6")},m(o,i){x(o,t,i),b(t,n),b(t,r),b(t,l),b(l,s),b(t,a),b(t,c),b(c,u),b(u,f),b(f,p),b(f,m),b(f,h),b(u,y),b(u,g);for(let e=0;e<C.length;e+=1)C[e]&&C[e].m(g,null);k||(S=[$(n,"click",e[26]),$(n,"keydown",e[55]),$(l,"click",e[24]),$(l,"keydown",e[56]),$(h,"keydown",e[57]),$(h,"click",e[24])],k=!0)},p(e,t){128&t[0]&&o!==(o=d("fa-duotone fa-sort-"+("asc"===e[7]?.sortFilter?.[e[7]?.sortFilter?.findIndex(ci)]?.sortType?"up":"down"))+" svelte-ehqbi6")&&L(n,"class",o),128&t[0]&&A!==(A=(e[7]?.sortFilter?.[e[7]?.sortFilter.findIndex(ui)]?.sortName||"")+"")&&j(s,A),33554560&t[0]&&(D=e[7]?.sortFilter||[],C=ye(C,t,M,1,e,D,P,g,me,ti,null,uo)),32&t[0]&&w!==(w=d("options-wrap-filter-info "+(e[5]?"":"hide"))+" svelte-ehqbi6")&&L(u,"class",w),32&t[0]&&v!==(v=d("options-wrap "+(e[5]?"":"disable-interaction hide"))+" svelte-ehqbi6")&&L(c,"class",v),8&t[0]&&F!==(F=`${e[3]}px`)&&q(c,"--maxFilterSelectionHeight",F)},d(e){e&&E(t);for(let e=0;e<C.length;e+=1)C[e].d();k=!1,i(S)}}}function ei(e){let t,n;return{c(){t=N("i"),L(t,"class",n=d("fa-duotone fa-sort-"+("asc"===e[7]?.sortFilter?.[e[7]?.sortFilter?.findIndex(di)].sortType?"up":"down"))+" svelte-ehqbi6")},m(e,n){x(e,t,n)},p(e,o){128&o[0]&&n!==(n=d("fa-duotone fa-sort-"+("asc"===e[7]?.sortFilter?.[e[7]?.sortFilter?.findIndex(di)].sortType?"up":"down"))+" svelte-ehqbi6")&&L(t,"class",n)},d(e){e&&E(t)}}}function ti(e,t){let n,o,l,s,a,c,u,d=(t[81]||"")+"",f=t[7]?.sortFilter?.[t[7]?.sortFilter?.findIndex(ii)].sortName===t[81]&&t[81],p=f&&ei(t);function m(...e){return t[58](t[81],...e)}return{key:e,first:null,c(){n=N("div"),o=N("h3"),l=T(d),s=I(),p&&p.c(),a=I(),L(o,"class","svelte-ehqbi6"),L(n,"class","option svelte-ehqbi6"),this.first=n},m(e,i){x(e,n,i),b(n,o),b(o,l),b(n,s),p&&p.m(n,null),b(n,a),c||(u=[$(n,"click",(function(){r(t[25](t[81]))&&t[25](t[81]).apply(this,arguments)})),$(n,"keydown",m)],c=!0)},p(e,o){t=e,128&o[0]&&d!==(d=(t[81]||"")+"")&&j(l,d),128&o[0]&&(f=t[7]?.sortFilter?.[t[7]?.sortFilter?.findIndex(ii)].sortName===t[81]&&t[81]),f?p?p.p(t,o):(p=ei(t),p.c(),p.m(n,a)):p&&(p.d(1),p=null)},d(e){e&&E(n),p&&p.d(),c=!1,i(u)}}}function ni(e){let t,n,o,r,l,s,a,c,f,p,m,h,y,g,w,v,k,S,A,T,C,j,F,D,M,U,O,_,V=`${e[3]}px`,B=`${e[2]}px`,R=[],W=new Map;function H(e,t){return e[7]?ko:bo}let Y=H(e),K=Y(e),J=(e[10]||!e[11])&&So(e),X=e[7]&&No(e);function G(e,t){return e[7]?Co:Io}let z=G(e),Q=z(e),Z=e[9]?.[e[7]?.filterSelection?.[e[7]?.filterSelection?.findIndex(si)]?.filterSelectionName]||[];const ee=e=>e[84]+e[85]+(e[91]??"");for(let t=0;t<Z.length;t+=1){let n=fo(e,Z,t),o=ee(n);W.set(o,R[t]=zo(o,n))}function te(e,t){return e[7]?Zo:Qo}let ne=te(e),oe=ne(e);const ie=e[30].default,re=function(e,t,n,o){if(e){const i=u(e,t,n,o);return e[0](i)}}(ie,e,e[29],null);return{c(){t=N("main"),n=N("div"),K.c(),o=I(),J&&J.c(),r=I(),l=N("div"),s=N("input"),a=I(),c=N("div"),f=N("i"),p=I(),m=N("div"),X&&X.c(),y=I(),g=N("div"),Q.c(),w=I(),v=N("div"),k=N("div"),S=N("i"),A=I();for(let e=0;e<R.length;e+=1)R[e].c();T=I(),C=N("div"),j=N("i"),D=I(),oe.c(),M=I(),re&&re.c(),L(n,"class","home-status svelte-ehqbi6"),L(s,"id","input-search"),L(s,"class","input-search svelte-ehqbi6"),L(s,"type","search"),L(s,"enterkeyhint","search"),L(s,"autocomplete","off"),L(s,"placeholder","Search"),L(f,"class","input-search-wrap-icon fa-solid fa-sliders svelte-ehqbi6"),L(m,"class",h=d("options-wrap "+(e[4]?"":"disable-interaction hide"))+" svelte-ehqbi6"),q(m,"--maxFilterSelectionHeight",V),L(c,"class","filterType svelte-ehqbi6"),L(l,"class","input-search-wrap svelte-ehqbi6"),L(g,"class","filters svelte-ehqbi6"),L(g,"id","filters"),q(g,"--maxPaddingHeight",B),L(S,"class","fa-solid fa-ban svelte-ehqbi6"),L(S,"title","Remove Filters"),q(S,"display",e[9]?"":"none"),q(S,"visibility",e[9]?.[e[7]?.filterSelection?.[e[7]?.filterSelection?.findIndex(li)]?.filterSelectionName]?.length?"visible":"hidden"),L(k,"id","tagFilters"),L(k,"class","tagFilters svelte-ehqbi6"),q(k,"max-height",e[6]?"200px":"28px"),L(j,"class",F=d("icon fa-solid fa-angle-"+(e[6]?"up":"down"))+" svelte-ehqbi6"),L(C,"class","showHideActiveFilters svelte-ehqbi6"),L(v,"class","activeFilters svelte-ehqbi6"),q(v,"display",(e[9]?.[e[7]?.filterSelection?.[e[7]?.filterSelection?.findIndex(ai)]?.filterSelectionName]||[]).length?"":"none"),L(t,"class","svelte-ehqbi6")},m(i,u){x(i,t,u),b(t,n),K.m(n,null),b(n,o),J&&J.m(n,null),b(t,r),b(t,l),b(l,s),P(s,e[12]),b(l,a),b(l,c),b(c,f),b(c,p),b(c,m),X&&X.m(m,null),b(t,y),b(t,g),Q.m(g,null),b(t,w),b(t,v),b(v,k),b(k,S),b(k,A);for(let e=0;e<R.length;e+=1)R[e]&&R[e].m(k,null);b(v,T),b(v,C),b(C,j),b(t,D),oe.m(t,null),b(t,M),re&&re.m(t,null),U=!0,O||(_=[$(s,"input",e[32]),$(f,"click",e[15]),$(f,"keydown",e[33]),$(S,"click",e[23]),$(S,"keydown",e[49]),$(C,"click",e[27]),$(C,"keydown",e[54])],O=!0)},p(e,i){Y===(Y=H(e))&&K?K.p(e,i):(K.d(1),K=Y(e),K&&(K.c(),K.m(n,o))),e[10]||!e[11]?J?(J.p(e,i),3072&i[0]&&ue(J,1)):(J=So(e),J.c(),ue(J,1),J.m(n,null)):J&&(ae(),de(J,1,1,(()=>{J=null})),ce()),4096&i[0]&&s.value!==e[12]&&P(s,e[12]),e[7]?X?X.p(e,i):(X=No(e),X.c(),X.m(m,null)):X&&(X.d(1),X=null),(!U||16&i[0]&&h!==(h=d("options-wrap "+(e[4]?"":"disable-interaction hide"))+" svelte-ehqbi6"))&&L(m,"class",h),8&i[0]&&V!==(V=`${e[3]}px`)&&q(m,"--maxFilterSelectionHeight",V),z===(z=G(e))&&Q?Q.p(e,i):(Q.d(1),Q=z(e),Q&&(Q.c(),Q.m(g,null))),4&i[0]&&B!==(B=`${e[2]}px`)&&q(g,"--maxPaddingHeight",B),512&i[0]&&q(S,"display",e[9]?"":"none"),640&i[0]&&q(S,"visibility",e[9]?.[e[7]?.filterSelection?.[e[7]?.filterSelection?.findIndex(li)]?.filterSelectionName]?.length?"visible":"hidden"),6292096&i[0]&&(Z=e[9]?.[e[7]?.filterSelection?.[e[7]?.filterSelection?.findIndex(si)]?.filterSelectionName]||[],ae(),R=ye(R,i,ee,1,e,Z,W,k,he,zo,null,fo),ce()),64&i[0]&&q(k,"max-height",e[6]?"200px":"28px"),(!U||64&i[0]&&F!==(F=d("icon fa-solid fa-angle-"+(e[6]?"up":"down"))+" svelte-ehqbi6"))&&L(j,"class",F),640&i[0]&&q(v,"display",(e[9]?.[e[7]?.filterSelection?.[e[7]?.filterSelection?.findIndex(ai)]?.filterSelectionName]||[]).length?"":"none"),ne===(ne=te(e))&&oe?oe.p(e,i):(oe.d(1),oe=ne(e),oe&&(oe.c(),oe.m(t,M))),re&&re.p&&(!U||536870912&i[0])&&function(e,t,n,o,i,r){if(i){const l=u(t,n,o,r);e.p(l,i)}}(re,ie,e,e[29],U?function(e,t,n,o){if(e[2]&&o){const i=e[2](o(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|i[o];return e}return t.dirty|i}return t.dirty}(ie,e[29],i,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[29]),null)},i(e){if(!U){ue(J);for(let e=0;e<Z.length;e+=1)ue(R[e]);ue(re,e),U=!0}},o(e){de(J);for(let e=0;e<R.length;e+=1)de(R[e]);de(re,e),U=!1},d(e){e&&E(t),K.d(),J&&J.d(),X&&X.d(),Q.d();for(let e=0;e<R.length;e+=1)R[e].d();oe.d(),re&&re.d(e),O=!1,i(_)}}}function oi(e,t){if("string"==typeof e&&"string"==typeof t)return e.toLowerCase().includes(t.trim().toLowerCase())}const ii=({sortType:e})=>"none"!==e,ri=({isSelected:e})=>e,li=({isSelected:e})=>e,si=({isSelected:e})=>e,ai=({isSelected:e})=>e,ci=({sortType:e})=>"none"!==e,ui=({sortType:e})=>"none"!==e,di=({sortType:e})=>"none"!==e;function fi(e,t,n){let o,i,r,l,s,a,u,d,p,m,h;c(e,Je,(e=>n(67,o=e))),c(e,Ce,(e=>n(7,i=e))),c(e,je,(e=>n(68,r=e))),c(e,Le,(e=>n(69,l=e))),c(e,Re,(e=>n(8,s=e))),c(e,$e,(e=>n(9,a=e))),c(e,dt,(e=>n(70,u=e))),c(e,Pe,(e=>n(10,d=e))),c(e,ct,(e=>n(71,p=e))),c(e,Te,(e=>n(11,m=e))),c(e,Ke,(e=>n(12,h=e)));let y,g,w,v,b,k,S,x,E,{$$slots:A={},$$scope:N}=t,T=!0,I=window.visualViewport.width,C=window.visualViewport.height,$=.3*C,L=!1,j=["Algorithm Filter"],P=["sort","Anime Filter","Content Caution"],q=["weighted score","score","average score","user score","popularity"];function F(e){S&&x===e&&clearTimeout(S),x=e,S=setTimeout((async()=>{j.includes(e)?(r&&(r.terminate(),f(je,r=null,r)),f(Le,l=null,l),f(Pe,d="Updating List",d),await Sn(!0,"shouldProcessRecommendation"),await Sn(i,"filterOptions"),await Sn(a,"activeTagFilters"),f(ct,p=!p,p)):P.includes(e)?(r&&(r.terminate(),f(je,r=null,r)),f(Le,l=null,l),f(Pe,d="Updating List",d),await Sn(i,"filterOptions"),await Sn(a,"activeTagFilters"),f(dt,u=!u,u)):(await Sn(i,"filterOptions"),await Sn(a,"activeTagFilters"))}),300)}async function D(){let e=document.getElementById("tagFilters");await z(),e instanceof Element&&(e.scrollTop=0)}function M(){n(2,C=window.visualViewport.height),n(3,$=.3*C),n(1,I=window.visualViewport.width)}async function U(e){if(s)return ie();let t=i?.filterSelection.findIndex((({isSelected:e})=>e)),o=i?.filterSelection?.[t].filterSelectionName;if(o!==e){n(5,w=!1),l?.length>18&&await oe(),i?.filterSelection?.[t].filters.Dropdown.forEach((e=>{e.selected=!1})),f(Ce,i.filterSelection[t]=i?.filterSelection?.[t],i),g=null,f(Ce,i.filterSelection[t].isSelected=!1,i);let o=i?.filterSelection?.findIndex((({filterSelectionName:t})=>t===e));f(Ce,i.filterSelection[o].isSelected=!0,i),D(),F()}v instanceof Element&&v.closest(".filterType")&&(Et(v,"highlight"),v=null),n(4,y=!1)}function O(e){if(s&&(i?.filterSelection?.length??0)<1)return ie();let t=e.target,o=t.classList,r=t.closest(".filterType"),l=t.closest(".options-wrap");!o.contains("filterType")&&!r||y?l&&!o.contains("closing-x")||o.contains("options-wrap")||(v instanceof Element&&v.closest(".filterType")&&(Et(v,"highlight"),v=null),n(4,y=!1)):n(4,y=!0)}function _(){b&&clearTimeout(b),k=!0,b=setTimeout((()=>{k=!1}),300)}function V(e,t){if(k&&"mouse"===e.pointerType)return;let o=e.target,r=o.closest(".filter-select");if(r===g)return;let l=i?.filterSelection?.findIndex((({isSelected:e})=>e));if(g instanceof Element){let e=Array.from(g.parentElement.children).filter((e=>!e.classList.contains("disable-interaction"))).indexOf(g);if(o.classList.contains("icon")&&!o.classList.contains("fa-angle-down")&&i?.filterSelection?.[l].filters.Dropdown[e].selected)return;f(Ce,i.filterSelection[l].filters.Dropdown[e].selected=!1,i)}T&&n(0,T=!1),v instanceof Element&&v.closest(".filter-select")&&(Et(v,"highlight"),v=null),f(Ce,i.filterSelection[l].filters.Dropdown[t].selected=!0,i),g=r}function B(e){let t=i?.filterSelection?.findIndex((({isSelected:e})=>e));f(Ce,i.filterSelection[t].filters.Dropdown[e].selected=!1,i),v instanceof Element&&v.closest(".filter-select")&&(Et(v,"highlight"),v=null),g=null}async function W(e){if(i?.filterSelection?.length<1||!i)return;let t=e.target,o=t.classList;if(o.contains("options-wrap")&&"fixed"===getComputedStyle(t).position){v instanceof Element&&(Et(v,"highlight"),v=null),n(4,y=!1),n(5,w=!1);let e=i?.filterSelection?.findIndex((({isSelected:e})=>e));i?.filterSelection?.[e].filters.Dropdown.forEach((e=>{e.selected=!1})),f(Ce,i.filterSelection[e]=i?.filterSelection?.[e],i),g=null}else if(!o.contains("options-wrap")&&!t.closest(".options-wrap")&&!o.contains("async-element")){let e=t.closest(".filterType");o.contains("filterType")||e||(v instanceof Element&&v.closest(".filterType")&&(Et(v,"highlight"),v=null),n(4,y=!1));let r=t.closest(".sortFilter");o.contains("sortFilter")||r||(v instanceof Element&&v.closest(".sortFilter")&&(Et(v,"highlight"),v=null),n(5,w=!1));let l=t.closest(".select");if(!o.contains("select")&&!o.contains("fa-angle-down")&&!l){v instanceof Element&&v.closest(".filter-select")&&(Et(v,"highlight"),v=null);let e=i?.filterSelection?.findIndex((({isSelected:e})=>e));i?.filterSelection?.[e].filters.Dropdown.forEach((e=>{e.selected=!1})),f(Ce,i.filterSelection[e]=i?.filterSelection?.[e],i),g=null}}}function H(e,t,n,o,r,l){if(s)return ie();let c=i?.filterSelection?.findIndex((({isSelected:e})=>e)),u=i?.filterSelection?.[c].filterSelectionName,d=i?.filterSelection?.[c].filters.Dropdown[o].options[n].selected;"none"===d||!0===d||"read"===r&&"included"!==d?(f(Ce,i.filterSelection[c].filters.Dropdown[o].options[n].selected="included",i),f($e,a[u]=a[u].filter((o=>o.optionName+o.optionIdx+o.optionType!==e+n+t)),a),a[u].unshift({optionName:e,optionType:t,optionIdx:n,categIdx:o,selected:"included",changeType:r,filterType:"dropdown"}),$e.set(a)):"included"===d?"read"===r?(f(Ce,i.filterSelection[c].filters.Dropdown[o].options[n].selected="none",i),f($e,a[u]=a[u].filter((i=>!(i.optionIdx===n&&i.optionName===e&&"dropdown"===i.filterType&&i.categIdx===o&&(!i.optionType||i.optionType===t)))),a)):(f(Ce,i.filterSelection[c].filters.Dropdown[o].options[n].selected="excluded",i),f($e,a[u]=a[u].map((i=>(i.optionIdx===n&&i.optionName===e&&"dropdown"===i.filterType&&i.categIdx===o&&"included"===i.selected&&i.optionType===t&&(i.selected="excluded"),i))),a)):(f(Ce,i.filterSelection[c].filters.Dropdown[o].options[n].selected="none",i),f($e,a[u]=a[u].filter((i=>!(i.optionIdx===n&&i.optionName===e&&"dropdown"===i.filterType&&i.categIdx===o&&i.optionType===t))),a)),F(l)}function Y(e,t,n,o){let r=e.target.classList,l=e.which||e.keyCode||0;if(r.contains("checkbox")&&"click"===e.type||r.contains("checkbox")&&13!==l&&"keydown"===e.type||k&&"mouse"===e.pointerType)return;if(s)return void(r.contains("checkbox")||ie());let c=i?.filterSelection?.findIndex((({isSelected:e})=>e)),u=i?.filterSelection?.[c].filterSelectionName,d=i?.filterSelection?.[c].filters.Checkbox[n].isSelected;d?f($e,a[u]=a[u].filter((e=>!(e.optionIdx===n&&e.optionName===t&&"checkbox"===e.filterType&&"included"===e.selected))),a):(f($e,a[u]=a[u].filter((e=>e.optionName+e.optionIdx!==t+n)),a),a[u].unshift({optionName:t,optionIdx:n,filterType:"checkbox",selected:"included",changeType:"read"}),$e.set(a)),f(Ce,i.filterSelection[c].filters.Checkbox[n].isSelected=!i?.filterSelection?.[c].filters.Checkbox[n].isSelected,i),F(o)}function K(e,t,n,o,r,l,c){if(s)return ie();let u=i?.filterSelection?.findIndex((({isSelected:e})=>e)),d=i?.filterSelection?.[u].filterSelectionName,p=i?.filterSelection?.[u].filters["Input Number"][n].numberValue;if(q.includes(o)&&/^(>=|<=|<|>).*($)/.test(t)){let s=t.split(/(<=|>=|<|>)/).filter((e=>e));if(t!==p&&s.length<=2){let m,h,y=t.split(/(<=|>=|<|>)/).filter((e=>e));if(s[0].includes(">")||s[0].includes("<")?(m=s[0],h=s[1]):(m=s[1],h=s[0]),y[0].includes(">")||y[0].includes("<")?(y[0],y[1]):(y[1],y[0]),t!==p&&(!isNaN(h)&&(parseFloat(h)>=l||"number"!=typeof l)&&(parseFloat(h)<=r||"number"!=typeof r)||!h)){if(h){let e=a[d].findIndex((e=>e.optionName===o&&e.optionValue===p&&e.optionIdx===n&&"input number"===e.filterType));-1===e?(f($e,a[d]=a[d].filter((e=>e.optionName+e.optionIdx!==o+n)),a),a[d].unshift({optionName:o,optionValue:t,CMPoperator:m,CMPNumber:h,optionIdx:n,filterType:"input number",selected:"included",changeType:"read"})):(a[d].splice(e,1),f($e,a[d]=a[d].filter((e=>e.optionName+e.optionIdx!==o+n)),a),a[d].unshift({optionName:o,optionValue:t,CMPoperator:m,CMPNumber:h,optionIdx:n,filterType:"input number",selected:"included",changeType:"read"})),$e.set(a)}else f($e,a[d]=a[d].filter((e=>!(e.optionIdx===n&&e.optionName===o&&e.optionValue===p&&"input number"===e.filterType))),a);f(Ce,i.filterSelection[u].filters["Input Number"][n].numberValue=t,i),F(c)}else bt(e.target,p)}else{let t=a[d].findIndex((e=>e.optionName===o&&e.optionValue===p&&e.optionIdx===n&&"input number"===e.filterType));t>=0&&f($e,a[d][t].selected="included",a),bt(e.target,p)}}else if(t!==p&&(!isNaN(t)&&(parseFloat(t)>=l||"number"!=typeof l)&&(parseFloat(t)<=r||"number"!=typeof r)||""===t)){if(""===t)f($e,a[d]=a[d].filter((e=>!(e.optionIdx===n&&e.optionName===o&&e.optionValue===p&&"input number"===e.filterType))),a);else{let e=a[d].findIndex((e=>e.optionName===o&&e.optionValue===p&&e.optionIdx===n&&"input number"===e.filterType));-1===e?(f($e,a[d]=a[d].filter((e=>e.optionName+e.optionIdx!==o+n)),a),a[d].unshift({optionName:o,optionValue:t,optionIdx:n,filterType:"input number",selected:"included",changeType:"read"})):(a[d].splice(e,1),f($e,a[d]=a[d].filter((e=>e.optionName+e.optionIdx!==o+n)),a),a[d].unshift({optionName:o,optionValue:t,optionIdx:n,filterType:"input number",selected:"included",changeType:"read"})),$e.set(a)}f(Ce,i.filterSelection[u].filters["Input Number"][n].numberValue=t,i),F(c)}else elementIdx>=0&&f($e,a[d][elementIdx].selected="included",a),bt(e.target,p)}function J(e,t,n,o,r,l,c,u){if(s)return ie();let d=i?.filterSelection?.findIndex((({isSelected:e})=>e)),p=i?.filterSelection?.[d].filterSelectionName;if("input number"===o){let e=a[p].findIndex((e=>e.optionName===n&&e.optionValue===u&&e.optionIdx===t&&"input number"===e.filterType));if(e>=0){let t=a[p][e].selected;f($e,a[p][e].selected="included"===t?"excluded":"included",a)}}else if("checkbox"===o){let e=a[p].findIndex((e=>e.optionIdx===t&&e.optionName===n&&e.filterType===o)),r=a?.[p]?.[e]?.selected;"included"===r?(f($e,a[p][e].selected="excluded",a),f(Ce,i.filterSelection[d].filters.Checkbox[t].isSelected=!1,i)):"excluded"===r&&(f($e,a[p][e].selected="included",a),f(Ce,i.filterSelection[d].filters.Checkbox[t].isSelected=!0,i))}else if("dropdown"===o){let e=i?.filterSelection?.[d].filters.Dropdown[r].options[t].selected;"included"===e?(f(Ce,i.filterSelection[d].filters.Dropdown[r].options[t].selected="excluded",i),f($e,a[p]=a[p].map((e=>(e.optionIdx!==t||e.optionName!==n||"included"!==e.selected||e.optionType&&e.optionType!==c||(e.selected="excluded"),e))),a)):"excluded"===e&&(f(Ce,i.filterSelection[d].filters.Dropdown[r].options[t].selected="included",i),f($e,a[p]=a[p].map((e=>(e.optionIdx!==t||e.optionName!==n||"excluded"!==e.selected||e.optionType&&e.optionType!==c||(e.selected="included"),e))),a))}F(p)}function X(e,t,n,o,r,l){if(s)return ie();let c=i?.filterSelection?.findIndex((({isSelected:e})=>e)),u=i?.filterSelection?.[c].filterSelectionName;f(Ce,"checkbox"===o?i.filterSelection[c].filters.Checkbox[t].isSelected=!1:"input number"===o?i.filterSelection[c].filters["Input Number"][t].numberValue="":i.filterSelection[c].filters.Dropdown[r].options[t].selected="none",i),f($e,a[u]=a[u].filter((e=>!(e.optionName===n&&e.optionIdx===t&&e.filterType===o&&(!e.optionType||e.optionType===l)))),a),F(u)}async function G(e){if(s)return ie();if(await o("Do you want to remove all filters?")){let e=i?.filterSelection?.findIndex((({isSelected:e})=>e)),t=i?.filterSelection?.[e].filterSelectionName;i?.filterSelection?.[e].filters["Input Number"].forEach((e=>{e.numberValue=""})),i?.filterSelection?.[e].filters.Checkbox.forEach((e=>{e.isSelected=!1})),i?.filterSelection?.[e].filters.Dropdown.forEach((({options:t},n)=>{t.forEach((({selected:t},o)=>{f(Ce,i.filterSelection[e].filters.Dropdown[n].options[o].selected="none",i)}))})),f(Ce,i.filterSelection[e]=i?.filterSelection?.[e],i),f($e,a[t]=[],a),F(t)}}function Q(e){let t=e.target,o=t.classList,i=t.closest(".sortFilter"),r=t.closest(".options-wrap");!o.contains("sortFilter")&&!i||w?r&&!o.contains("closing-x")||o.contains("options-wrap")||(v instanceof Element&&v.closest(".sortFilter")&&(Et(v,"highlight"),v=null),n(5,w=!1)):n(5,w=!0)}function Z(e){if(s)return ie();let{sortName:t,sortType:o}=i?.sortFilter?.filter((({sortType:e})=>"none"!==e))[0],r=i?.sortFilter?.findIndex((({sortType:e})=>"none"!==e));if(t===e){let e="desc"===o?"asc":"desc";f(Ce,i.sortFilter[r].sortType=e,i)}else if(t!==e){f(Ce,i.sortFilter[r].sortType="none",i);let t=i?.sortFilter?.findIndex((({sortName:t})=>t===e));f(Ce,i.sortFilter[t].sortType="desc",i)}F("sort"),v instanceof Element&&v.closest(".sortFilter")&&(Et(v,"highlight"),v=null),n(5,w=!1)}function ee(){if(s)return ie();let{sortType:e}=i?.sortFilter?.filter((({sortType:e})=>"none"!==e))[0],t=i?.sortFilter?.findIndex((({sortType:e})=>"none"!==e));f(Ce,i.sortFilter[t].sortType="desc"===e?"asc":"desc",i),F("sort")}function te(e){let t=e.which||e.keyCode||0;if(38==t||40==t){var o=Array.from(document.getElementsByClassName("options-wrap")||[]).find((e=>!e.classList.contains("disable-interaction")));if(o?.closest?.(".filterType")||o?.closest?.(".sortFilter")||o?.closest?.(".filter-select"))if(e.preventDefault(),v instanceof Element&&v?.closest?.(".options")?.children?.length){let e,n,o,i,r=v.closest(".options"),l=Array.from(r.querySelectorAll(".option")),s=l.indexOf(v);for(let r=0;r<l.length;r++)if(!l[r].classList.contains("disable-interaction"))if(38===t){if(i=l[r],r<s)n=l[r];else if(n){e=n;break}}else if(o||(o=l[r]),r>s){e=l[r];break}let a=!1;e instanceof Element||(o instanceof Element?(e=o,a=!0):i instanceof Element&&(e=i,a=!0)),e instanceof Element&&(Et(v,"highlight"),v=e,xt(v,"highlight"),v.scrollIntoView({behavior:a?"auto":"smooth",container:r,block:"nearest",inline:"nearest"}))}else{let e=o.querySelectorAll(".option:not(.disable-interaction)");v=e[0],v instanceof Element&&(xt(v,"highlight"),v.scrollIntoView({behavior:"smooth",container:parent,block:"nearest",inline:"nearest"}))}}else if(13===t){if(v instanceof Element){let e=new KeyboardEvent("keydown",{key:"Enter"});v.dispatchEvent(e)}}else{o=Array.from(document.getElementsByClassName("options-wrap")||[]).find((e=>!e.classList.contains("disable-interaction")));if(o?.closest?.(".filter-select")&&9!==t||o instanceof Element&&"fixed"===getComputedStyle(o).position)return;let e=i?.filterSelection?.findIndex((({isSelected:e})=>e));n(4,y=null),n(5,w=null),i?.filterSelection?.length>0&&(i?.filterSelection?.[e].filters.Dropdown.forEach((e=>{e.selected=!1})),f(Ce,i.filterSelection[e]=i?.filterSelection?.[e],i)),g=null,v instanceof Element&&(Et(v,"highlight"),v=null)}}async function ne(){l?.length>18&&await oe(),n(6,L=!L),D()}function oe(){return new Promise((e=>{r instanceof Worker&&(f(Le,l=null,l),r.postMessage({reload:!0})),E={resolve:e}}))}function ie(){o({isAlert:!0,title:"Initializing resources",text:"Please wait a moment..."})}it.subscribe((e=>{"boolean"==typeof e&&E?.resolve?.()})),window.checkOpenDropdown=()=>(g||y||w)&&window.visualViewport.width<=425,window.closeDropdown=()=>{v instanceof Element&&(Et(v,"highlight"),v=null),n(4,y=!1),n(5,w=!1);let e=i?.filterSelection?.findIndex((({isSelected:e})=>e));i?.filterSelection?.[e].filters.Dropdown.forEach((e=>{e.selected=!1})),f(Ce,i.filterSelection[e]=i?.filterSelection?.[e],i),g=null},R((()=>{let e=document.getElementById("filters");e.addEventListener("scroll",_),((e,t="xy")=>{var n,o,i,r,l;let s=s=>{i&&"mouse"===s.pointerType&&(t.toLowerCase().includes("y")&&(e.scrollTop=n-s.pageY+l),t.toLowerCase().includes("x")&&(e.scrollLeft=o-s.pageX+r))},a=s=>{"mouse"===s.pointerType&&(t.toLowerCase().includes("y")&&(n=s.pageY,l=e.scrollTop),t.toLowerCase().includes("x")&&(o=s.pageX,r=e.scrollLeft),i=!0)},c=e=>{"mouse"===e.pointerType&&(i=!1)};e.addEventListener("pointermove",s),e.addEventListener("pointerdown",a),window.addEventListener("pointerup",c),window.addEventListener("pointercancel",c)})(e,"x"),document.addEventListener("keydown",te),window.addEventListener("resize",M),window.addEventListener("click",W)}));return e.$$set=e=>{"$$scope"in e&&n(29,N=e.$$scope)},[T,I,C,$,y,w,L,i,s,a,d,m,h,q,U,O,V,B,H,Y,K,J,X,G,Q,Z,ee,ne,ie,N,A,(e,{optionName:t})=>oi(t,e.optKeyword)||""===e.optKeyword,function(){h=this.value,Ke.set(h)},e=>"Enter"===e.key&&O(e),e=>"Enter"===e.key&&O(e),(e,t)=>"Enter"===t.key&&U(e),function(e,t){i.filterSelection[e].filters.Dropdown[t].optKeyword=this.value,Ce.set(i)},(e,t)=>"Enter"===t.key&&B(e),(e,t)=>("Enter"===t.key||"ArrowDown"===t.key||"ArrowUp"===t.key)&&V(t,e),(e,t)=>V(t,e),(e,t)=>"Enter"===t.key&&B(e),function(e,t){i.filterSelection[e].filters.Dropdown[t].optKeyword=this.value,Ce.set(i)},(e,t,n,o,i,r)=>"Enter"===r.key&&H(e.optionName,t.filName,n,o,t.changeType,i.filterSelectionName),e=>{e.target.checked=!1,ie()},(e,t,n,o)=>Y(o,e.filName,t,n.filterSelectionName),function(e,t){e[t].isSelected=this.checked},(e,t,n,o)=>Y(o,e.filName,t,n.filterSelectionName),(e,t,n,o)=>"Enter"===o.key&&Y(o,e.filName,t,n.filterSelectionName),(e,t,n,o)=>K(o,o.target.value,e,t.filName,t.maxValue,t.minValue,n.filterSelectionName),e=>"Enter"===e.key&&G(),(e,t,n,o,i,r)=>X(0,e,t,n,o,i),(e,t,n,o,i,r)=>"Enter"===r.key&&X(0,e,t,n,o,i),(e,t,n,o,i,r,l,s)=>J(0,e,t,n,o,0,r,l),(e,t,n,o,i,r,l,s)=>"Enter"===s.key&&J(0,e,t,n,o,0,r,l),e=>"Enter"===e.key&&ne(),e=>"Enter"===e.key&&ee(),e=>"Enter"===e.key&&Q(e),e=>"Enter"===e.key&&Q(e),(e,t)=>"Enter"===t.key&&Z(e)]}function pi(e){let t,n,o,r,l,s,a,c,u,d,f,p,m,h,y,g,w,v,k=!e[1]&&mi(e);return{c(){t=N("div"),n=N("div"),o=N("div"),r=N("div"),l=N("h2"),s=T(e[2]),a=I(),c=N("h2"),u=T(e[3]),d=I(),f=N("div"),k&&k.c(),p=I(),m=N("button"),h=T(e[4]),L(l,"class","confirm-title svelte-1980t5h"),L(c,"class","confirm-text svelte-1980t5h"),L(r,"class","confirm-info-container svelte-1980t5h"),L(m,"class","button svelte-1980t5h"),L(f,"class","confirm-button-container svelte-1980t5h"),L(o,"class","confirm-container svelte-1980t5h"),L(n,"class","confirm-wrapper svelte-1980t5h"),q(n,"--height",e[7]?"calc(100% + 1px)":"100%"),L(t,"class","confirm svelte-1980t5h")},m(i,y){x(i,t,y),b(t,n),b(n,o),b(o,r),b(r,l),b(l,s),b(r,a),b(r,c),b(c,u),b(o,d),b(o,f),k&&k.m(f,null),b(f,p),b(f,m),b(m,h),e[12](m),g=!0,w||(v=[$(m,"click",e[8]),$(m,"keydown",e[13]),$(t,"click",e[10]),$(t,"keydown",e[14])],w=!0)},p(e,t){(!g||4&t)&&j(s,e[2]),(!g||8&t)&&j(u,e[3]),e[1]?k&&(k.d(1),k=null):k?k.p(e,t):(k=mi(e),k.c(),k.m(f,p)),(!g||16&t)&&j(h,e[4]),128&t&&q(n,"--height",e[7]?"calc(100% + 1px)":"100%")},i(e){g||(Q((()=>{g&&(y||(y=pe(o,kn,{y:20,duration:300},!0)),y.run(1))})),g=!0)},o(e){y||(y=pe(o,kn,{y:20,duration:300},!1)),y.run(0),g=!1},d(n){n&&E(t),k&&k.d(),e[12](null),n&&y&&y.end(),w=!1,i(v)}}}function mi(e){let t,n,o,r;return{c(){t=N("button"),n=T(e[5]),L(t,"class","button svelte-1980t5h")},m(i,l){x(i,t,l),b(t,n),o||(r=[$(t,"click",e[9]),$(t,"keydown",e[11])],o=!0)},p(e,t){32&t&&j(n,e[5])},d(e){e&&E(t),o=!1,i(r)}}}function hi(e){let t,n,o=e[0]&&pi(e);return{c(){o&&o.c(),t=C()},m(e,i){o&&o.m(e,i),x(e,t,i),n=!0},p(e,[n]){e[0]?o?(o.p(e,n),1&n&&ue(o,1)):(o=pi(e),o.c(),ue(o,1),o.m(t.parentNode,t)):o&&(ae(),de(o,1,1,(()=>{o=null})),ce())},i(e){n||(ue(o),n=!0)},o(e){de(o),n=!1},d(e){o&&o.d(e),e&&E(t)}}}function yi(e,t,n){let o;c(e,Qe,(e=>n(7,o=e)));const i=function(){const e=B();return(t,n,{cancelable:o=!1}={})=>{const i=e.$$.callbacks[t];if(i){const r=F(t,n,{cancelable:o});return i.slice().forEach((t=>{t.call(e,r)})),!r.defaultPrevented}return!0}}();let r,l,{showConfirm:s=!1}=t,{isAlert:a=!1}=t,{confirmTitle:u="Confirmation"}=t,{confirmText:d="Do you want to continue?"}=t,{confirmLabel:f="OK"}=t,{cancelLabel:p="CANCEL"}=t,m=!1;function h(e){m&&"keydown"!==e.type||(n(0,s=!1),i("confirmed"))}function y(e){m&&"keydown"!==e.type||(n(0,s=!1),i("cancelled"))}function g(e){if(m&&"keydown"!==e.type)return;let t=e.target,n=t.classList;t.closest(".confirm-container")||n.contains("confirm-container")||y(e)}var w;w=()=>{s?(m=!0,l=setTimeout((()=>{m=!1}),500),r?.focus?.()):(l&&clearTimeout(l),m=!1)},B().$$.after_update.push(w);return e.$$set=e=>{"showConfirm"in e&&n(0,s=e.showConfirm),"isAlert"in e&&n(1,a=e.isAlert),"confirmTitle"in e&&n(2,u=e.confirmTitle),"confirmText"in e&&n(3,d=e.confirmText),"confirmLabel"in e&&n(4,f=e.confirmLabel),"cancelLabel"in e&&n(5,p=e.cancelLabel)},[s,a,u,d,f,p,r,o,h,y,g,e=>"Enter"===e.key&&y(e),function(e){H[e?"unshift":"push"]((()=>{r=e,n(6,r)}))},e=>"Enter"===e.key&&h(e),e=>"Enter"===e.key&&g(e)]}var gi={Fixed:{Navigator:class extends ke{constructor(e){super(),be(this,e,oo,no,l,{})}},Menu:class extends ke{constructor(e){super(),be(this,e,co,so,l,{},null,[-1,-1])}}},Anime:{AnimeGrid:class extends ke{constructor(e){super(),be(this,e,wn,yn,l,{},null,[-1,-1])}},Fixed:{AnimePopup:class extends ke{constructor(e){super(),be(this,e,Qn,Gn,l,{},null,[-1,-1,-1])}},AnimeOptionsPopup:class extends ke{constructor(e){super(),be(this,e,to,eo,l,{})}}}},Others:{Search:class extends ke{constructor(e){super(),be(this,e,fi,ni,l,{},null,[-1,-1,-1,-1])}},Confirm:class extends ke{constructor(e){super(),be(this,e,yi,hi,l,{showConfirm:0,isAlert:1,confirmTitle:2,confirmText:3,confirmLabel:4,cancelLabel:5})}}}},wi="@vercel/analytics",vi="1.0.1",bi=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function ki(e="auto"){window.vam="auto"!==e?e:function(){try{const e=process.env.NODE_ENV;if("development"===e||"test"===e)return"development"}catch(e){}return"production"}()}function Si(){return"development"===(window.vam||"production")}function xi(e={debug:!0}){var t;if("undefined"==typeof window)return;ki(e.mode),bi(),e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend));const n=Si()?"https://va.vercel-scripts.com/v1/script.debug.js":"/_vercel/insights/script.js";if(document.head.querySelector(`script[src*="${n}"]`))return;const o=document.createElement("script");o.src=n,o.defer=!0,o.setAttribute("data-sdkn",wi),o.setAttribute("data-sdkv",vi),Si()&&!1===e.debug&&o.setAttribute("data-debug","false"),document.head.appendChild(o)}function Ei(e){let t,n;return t=new gi.Anime.AnimeGrid({}),{c(){ge(t.$$.fragment)},m(e,o){we(t,e,o),n=!0},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){ve(t,e)}}}function Ai(t){let n,o,r,l,s;return{c(){n=N("div"),n.innerHTML='<i class="list-update-icon fa-solid fa-arrows-rotate svelte-y2f0ue"></i> \n\t\t\t<h3 class="list-update-label svelte-y2f0ue">List Update Available</h3>',L(n,"class","list-update-container svelte-y2f0ue")},m(e,o){x(e,n,o),r=!0,l||(s=[$(n,"click",t[9]),$(n,"keydown",t[10])],l=!0)},p:e,i(e){r||(Q((()=>{r&&(o||(o=pe(n,kn,{x:50,duration:300},!0)),o.run(1))})),r=!0)},o(e){o||(o=pe(n,kn,{x:50,duration:300},!1)),o.run(0),r=!1},d(e){e&&E(n),e&&o&&o.end(),l=!1,i(s)}}}function Ni(e){let t,n,o,i,r,l,s,a,c,u,d,f,p,m,h;n=new gi.Fixed.Navigator({}),i=new gi.Fixed.Menu({}),s=new gi.Others.Search({props:{$$slots:{default:[Ei]},$$scope:{ctx:e}}}),c=new gi.Anime.Fixed.AnimePopup({}),d=new gi.Anime.Fixed.AnimeOptionsPopup({}),p=new gi.Others.Confirm({props:{showConfirm:e[0],isAlert:e[1],confirmTitle:e[2],confirmText:e[3],confirmLabel:e[4],cancelLabel:e[5]}}),p.$on("confirmed",e[7]),p.$on("cancelled",e[8]);let y=e[6]&&Ai(e);return{c(){t=N("main"),ge(n.$$.fragment),o=I(),ge(i.$$.fragment),r=I(),l=N("div"),ge(s.$$.fragment),a=I(),ge(c.$$.fragment),u=I(),ge(d.$$.fragment),f=I(),ge(p.$$.fragment),m=I(),y&&y.c(),L(l,"class","home svelte-y2f0ue"),L(t,"class","svelte-y2f0ue")},m(e,g){x(e,t,g),we(n,t,null),b(t,o),we(i,t,null),b(t,r),b(t,l),we(s,l,null),b(l,a),we(c,l,null),b(t,u),we(d,t,null),b(t,f),we(p,t,null),b(t,m),y&&y.m(t,null),h=!0},p(e,n){const o={};262144&n[1]&&(o.$$scope={dirty:n,ctx:e}),s.$set(o);const i={};1&n[0]&&(i.showConfirm=e[0]),2&n[0]&&(i.isAlert=e[1]),4&n[0]&&(i.confirmTitle=e[2]),8&n[0]&&(i.confirmText=e[3]),16&n[0]&&(i.confirmLabel=e[4]),32&n[0]&&(i.cancelLabel=e[5]),p.$set(i),e[6]?y?(y.p(e,n),64&n[0]&&ue(y,1)):(y=Ai(e),y.c(),ue(y,1),y.m(t,null)):y&&(ae(),de(y,1,1,(()=>{y=null})),ce())},i(e){h||(ue(n.$$.fragment,e),ue(i.$$.fragment,e),ue(s.$$.fragment,e),ue(c.$$.fragment,e),ue(d.$$.fragment,e),ue(p.$$.fragment,e),ue(y),h=!0)},o(e){de(n.$$.fragment,e),de(i.$$.fragment,e),de(s.$$.fragment,e),de(c.$$.fragment,e),de(d.$$.fragment,e),de(p.$$.fragment,e),de(y),h=!1},d(e){e&&E(t),ve(n),ve(i),ve(s),ve(c),ve(d),ve(p),y&&y.d()}}}function Ti(e,t,n){let o,i,r,l,s,a,u,d,p,m,h,y,g,w,v,b,k,S,x,E,A,N,T,I,C,$,L,j,P,q;c(e,Ee,(e=>n(18,o=e))),c(e,Ae,(e=>n(19,i=e))),c(e,Je,(e=>n(20,r=e))),c(e,Pe,(e=>n(21,l=e))),c(e,Ie,(e=>n(22,s=e))),c(e,Le,(e=>n(23,a=e))),c(e,Ke,(e=>n(24,u=e))),c(e,je,(e=>n(25,d=e))),c(e,tt,(e=>n(6,p=e))),c(e,nt,(e=>n(26,m=e))),c(e,et,(e=>n(27,h=e))),c(e,Ge,(e=>n(28,y=e))),c(e,Qe,(e=>n(29,g=e))),c(e,Xe,(e=>n(30,w=e))),c(e,Re,(e=>n(31,v=e))),c(e,ot,(e=>n(32,b=e))),c(e,_e,(e=>n(33,k=e))),c(e,Oe,(e=>n(34,S=e))),c(e,Ue,(e=>n(35,x=e))),c(e,Fe,(e=>n(36,E=e))),c(e,qe,(e=>n(37,A=e))),c(e,De,(e=>n(38,N=e))),c(e,Te,(e=>n(39,T=e))),c(e,rt,(e=>n(40,I=e))),c(e,Be,(e=>n(41,C=e))),c(e,Ce,(e=>n(42,$=e))),c(e,$e,(e=>n(43,L=e))),c(e,Me,(e=>n(44,j=e))),f(Ae,i=kt(),i),(async()=>{f(Me,j=await xn("exportPathIsAvailable"),j)})(),xi(),window.onload=()=>{function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-PPMY92TJCE")};const F=new Function;window.onYouTubeIframeAPIReady=F;let D=[];f(Pe,l="Getting Existing Data",l);let M=setInterval((()=>{l||f(Pe,l="Please Wait...",l)}),300);D.push(new Promise((async(e,t)=>{let n=await xn("animeEntriesLength"),o=await xn("lastAnimeUpdate");var i;n<1||!(o instanceof Date)?(f(Le,a=null,a),new Promise(((e,t)=>{Xt=setInterval((()=>{Pe.set("Getting Anime Entries")}),300),Nt("./webapi/worker/getAnimeEntries.js").then((n=>{Xt&&(clearInterval(Xt),Xt=null);let o=new Worker(n);Jt&&clearTimeout(Jt),o.postMessage(i),o.onmessage=({data:t})=>{void 0!==t?.status?(Ct=!0,Pe.set(t.status)):(Ct=!1,ct.update((e=>!e)),Jt=setTimeout((()=>{o.terminate()}),It),e(t))},o.onerror=e=>{t(e)}})).catch((e=>{Xt&&(clearInterval(Xt),Xt=null),Pe.set(null),on(),t(e)}))})).then((()=>{e()})).catch((async()=>{t()}))):(Ut({onlyGetNewEntries:!0}),e())}))),D.push(new Promise((async e=>{let t=await xn("username");t&&(f(Te,T=t,T),Vt({username:T})),e()}))),D.push(new Promise((async e=>{var t;await xn("animeFranchisesLength")<1?new Promise(((e,n)=>{zt=setInterval((()=>{Xt||Pe.set("Getting Anime Franchise")}),300),Nt("./webapi/worker/getAnimeFranchises.js").then((o=>{zt&&(clearInterval(zt),zt=null);let i=new Worker(o);Gt&&clearTimeout(Gt),i.postMessage(t),i.onmessage=({data:t})=>{void 0!==t?.status?(Ct=!0,Pe.set(t.status)):(ct.update((e=>!e)),Ct=!1,Gt=setTimeout((()=>{i.terminate()}),It),e(t))},i.onerror=e=>{n(e)}})).catch((e=>{zt&&(clearInterval(zt),zt=null),Pe.set(null),on(),n(e)}))})).then((()=>{e()})).catch((()=>{reject()})):e()}))),D.push(new Promise((async e=>{tn().then((t=>{f($e,L=t.activeTagFilters,L),f(Ce,$=t.filterOptions,$),e()})).catch((()=>{reject()}))}))),D.push(new Promise((async e=>{let t=await xn("autoPlay");"boolean"==typeof t&&f(Be,C=t,C),f(Ie,s=await xn("hiddenEntries")||{},s),f(De,N=await xn("lastRunnedAutoUpdateDate"),N),f(_e,k=await xn("lastRunnedAutoExportDate"),k),e()}))),Promise.all(D).then((async()=>{let e=await xn("recommendedAnimeListLength"),t=await xn("shouldProcessRecommendation");new Promise((async n=>{e<1||t?Ft().then((async()=>{await Sn(!1,"shouldProcessRecommendation"),n()})).catch((e=>{throw e})):n()})).then((()=>{jt().then((async e=>{f(je,d=e.animeLoaderWorker,d),f(Ke,u="",u),e?.isNew&&(f(Le,a=e.finalAnimeList,a),f(Ie,s=e.hiddenEntries,s),f(Re,v=!1,v),f(qe,A=await xn("autoUpdate")??!1,A),f(Ue,x=await xn("autoExport")??!1,x),f(rt,I=!I,I)),f(Pe,l=null,l)})).catch((e=>{throw e}))}))})).catch((async e=>{f(Re,v=!1,v),f(qe,A=await xn("autoUpdate")??!1,A),f(Ue,x=await xn("autoExport")??!1,x),f(Pe,l="Something went wrong...",l),r?.(i?{isAlert:!0,title:"Something Went Wrong",text:"App may not be working properly, you may want to restart and make sure you're running the latest version."}:{isAlert:!0,title:"Something Went Wrong",text:"App may not be working properly, you may want to refresh the page, or if not clear the cookies but backup your data first."}),console.error(e)})),window.focusInUsernameInput=()=>{let e=document.getElementById("usernameInput");e?.setCustomValidity?.("Enter your Anilist Username"),e?.reportValidity?.()},Re.subscribe((async e=>{if(!1===e){if(!T)if(await z(),i)try{JSBridge.requireUsernameFocus()}catch(e){}else window.focusInUsernameInput?.();clearInterval(M)}})),Le.subscribe((async e=>{v&&e?.length>0&&!1!==v&&(f(Re,v=!1,v),f(qe,A=await xn("autoUpdate")??!1,A),f(Ue,x=await xn("autoExport")??!1,x))})),at.subscribe((async e=>{"boolean"!=typeof e||v||(f(tt,p=!1,p),jt().then((async e=>{f(je,d=e.animeLoaderWorker,d),f(Ke,u="",u),e?.isNew&&(f(Le,a=e.finalAnimeList,a),f(Ie,s=e.hiddenEntries,s)),f(Pe,l=null,l)})).catch((e=>{throw e})))})),st.subscribe((async e=>{"boolean"!=typeof e||v||(await Sn(!0,"shouldProcessRecommendation"),f(tt,p=!1,p),Ft().then((async()=>{await Sn(!1,"shouldProcessRecommendation"),ut.update((e=>!e)),at.update((e=>!e))})).catch((e=>{throw at.update((e=>!e)),e})))})),ct.subscribe((async e=>{"boolean"!=typeof e||v||(await Sn(!0,"shouldProcessRecommendation"),Ft().then((async()=>{await Sn(!1,"shouldProcessRecommendation"),ut.update((e=>!e)),dt.update((e=>!e))})).catch((e=>{throw dt.update((e=>!e)),e})))})),dt.subscribe((async e=>{"boolean"!=typeof e||v||((g||window.scrollY>q?.offsetTop-55)&&a?f(tt,p=!0,p):jt().then((async e=>{f(je,d=e.animeLoaderWorker,d),f(Ke,u="",u),e?.isNew&&(f(Le,a=e.finalAnimeList,a),f(Ie,s=e.hiddenEntries,s)),f(Pe,l=null,l)})).catch((e=>{throw e})))})),ut.subscribe((async e=>{"boolean"!=typeof e||v||tn()}));let U=36e5;qe.subscribe((async e=>{if(!0===e){Sn(!0,"autoUpdate");let e=!1;if((null===N||N instanceof Date&&!isNaN(N)&&(new Date).getTime()-N.getTime()>U)&&(e=!0),e)rt.update((e=>!e)),E&&clearInterval(E),f(Fe,E=setInterval((()=>{A&&rt.update((e=>!e))}),U),E);else{let e=U-((new Date).getTime()-N?.getTime())||0;setTimeout((()=>{!1!==A&&(rt.update((e=>!e)),E&&clearInterval(E),f(Fe,E=setInterval((()=>{A&&rt.update((e=>!e))}),U),E))}),e)}}else!1===e&&(E&&clearInterval(E),Sn(!1,"autoUpdate"))}));let O=!1;rt.subscribe((e=>{"boolean"==typeof e&&!v&&navigator.onLine&&(O=!0,Vt().then((()=>{O=!1,Ut()})).catch((e=>{O=!1,f(Pe,l="Something went wrong...",l),console.error(e)})))})),Ue.subscribe((async e=>{if(!0===e){Sn(!0,"autoExport");let e=!1;if((null===k||k instanceof Date&&!isNaN(k)&&(new Date).getTime()-k.getTime()>U)&&(e=!0),e)lt.update((e=>!e)),S&&clearInterval(S),f(Oe,S=setInterval((()=>{x&&lt.update((e=>!e))}),U),S);else{let e=U-((new Date).getTime()-k?.getTime())||0;setTimeout((()=>{!1!==x&&(lt.update((e=>!e)),S&&clearInterval(S),f(Oe,S=setInterval((()=>{x&&lt.update((e=>!e))}),U),S))}),e)}}else!1===e&&(S&&clearInterval(S),Sn(!1,"autoExport"))})),lt.subscribe((e=>{"boolean"!=typeof e||v||Rt().then((()=>{f(_e,k=new Date,k),Sn(k,"lastRunnedAutoExportDate")}))})),ft.subscribe((e=>{"boolean"==typeof e&&(m||f(nt,m=!0,m),b&&clearTimeout(b),f(ot,b=setTimeout((()=>{f(nt,m=!1,m)}),1e3),b))})),document.addEventListener("visibilitychange",(()=>{v||"visible"!==document.visibilityState||O||Vt({visibilityChange:!0})}));let _,V=!1;"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),window.checkEntries=()=>{v||O||Vt({visibilityChange:!0})},window.addEventListener("popstate",(()=>{window.backPressed()})),window.backPressed=()=>{if(h&&!i)window.history.go(-1);else{if(i||window.history.pushState("visited",""),V)return Q(),void n(0,V=!1);if(P&&P===document?.activeElement&&window.visualViewport.width<=750)P?.focus?.(),P?.blur?.();else{if(w)return void f(Xe,w=!1,w);if(g)return void f(Qe,g=!1,g);if(y)return void f(Ge,y=!1,y);if(window.checkOpenDropdown?.())return void window.closeDropdown?.();if(window.scrollY>200)return window.scrollY=window.scrollY,window.scrollX=window.scrollX,window.scrollTo({top:-9999,behavior:"smooth"}),void window.setShouldGoBack(!0);window.scrollY=window.scrollY,window.scrollX=window.scrollX,window.scrollTo({top:-9999,behavior:"smooth"}),window.setShouldGoBack(!0)}}},Qe.subscribe((e=>{!0===e&&window.setShouldGoBack(!1)})),Xe.subscribe((e=>{!0===e&&window.setShouldGoBack(!1)})),window.addEventListener("scroll",(()=>{0!==window.scrollY&&window.setShouldGoBack(!1),ft.update((e=>!e))})),R((()=>{P=document.getElementById("usernameInput"),q=document.getElementById("anime-grid"),document.getElementById("popup-container").addEventListener("scroll",(()=>{ft.update((e=>!e))}))})),window.setShouldGoBack=e=>{if(i)try{JSBridge.setShouldGoBack(e)}catch(e){}else"visited"!==window.history.state&&window.history.pushState("visited",""),f(et,h=e,h)},window.copyToClipBoard=e=>{if(i)try{JSBridge.copyToClipBoard(e)}catch(e){}else navigator?.clipboard?.writeText?.(e)};let B,W,H,Y,K,J,X,G=!1;function Q(){J?.resolve?.(!1),J=n(1,B=n(2,W=n(3,H=n(4,Y=n(5,K=void 0))))),n(0,V=!1)}async function Z(e){if(await r({title:"List update is available",text:"Are you sure you want to refresh the list?"})){let t,n=e.target,o=n.classList;t=o.contains("list-update-container")?n.querySelector?.(".list-update-icon"):n?.closest(".list-update-container")?.querySelector?.(".list-update-icon"),X&&clearTimeout(X),xt(t,"fa-spin"),jt().then((async e=>{f(tt,p=!1,p),X=setTimeout((()=>{Et(t,"fa-spin")}),300),f(je,d=e.animeLoaderWorker,d),f(Ke,u="",u),e?.isNew&&(f(Le,a=e.finalAnimeList,a),f(Ie,s=e.hiddenEntries,s)),f(Pe,l=null,l)})).catch((e=>{throw e}))}}if(document.addEventListener("pointerdown",(e=>{if("mouse"===e.pointerType)return;let t=e.target;t.classList.contains("copy")||(t=t.closest(".copy")),t&&(G=!0,_&&clearTimeout(_),_=setTimeout((()=>{let e=t.getAttribute("copy-value");e&&!m&&G&&(t.style.pointerEvents="none",setTimeout((()=>{t.style.pointerEvents=""}),500),window.copyToClipBoard(e))}),500))})),document.addEventListener("pointerup",(e=>{if("mouse"===e.pointerType)return;let t=e.target;t.classList.contains("copy")||(t=t.closest(".copy")),t&&(G=!1,_&&clearTimeout(_))})),document.addEventListener("pointercancel",(e=>{if("mouse"===e.pointerType)return;let t=e.target;t.classList.contains("copy")||(t=t.closest(".copy")),t&&(G=!1,_&&clearTimeout(_))})),f(Je,r=window.confirmPromise=async e=>new Promise((t=>{n(1,B=e?.isAlert||!1),n(2,W=e?.title||(B?"Heads Up":"Confirmation")),n(3,H=("string"==typeof e?e:e?.text)||"Are you sure you want to continue"),n(4,Y=e?.confirmLabel||"OK"),n(5,K=e?.cancelLabel||"CANCEL"),n(0,V=!0),J={resolve:t}})),r),window.updateAppAlert=async()=>{if(await(r?.({title:"New updates are available",text:"You may want to download the new version.",confirmLabel:"DOWNLOAD"})))try{JSBridge.downloadUpdate()}catch(e){window.open("https://github.com/u-Kuro/Kanshi.Anime-Recommendation/raw/main/Kanshi.apk","_blank")}},window.appIsUpToDate=()=>{r?.({isAlert:!0,text:"There are currently no updates available."})},i&&navigator.onLine)try{JSBridge.checkAppID(o,!1)}catch(e){window.updateAppAlert?.()}return[V,B,W,H,Y,K,p,function(){J?.resolve?.(!0),J=n(1,B=n(2,W=n(3,H=n(4,Y=n(5,K=void 0))))),n(0,V=!1)},Q,Z,e=>"Enter"===e.key&&Z(e)]}var Ii="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};window.FontAwesomeKitConfig={asyncLoading:{enabled:!1},autoA11y:{enabled:!0},baseUrl:"https://ka-f.fontawesome.com",baseUrlKit:"https://kit.fontawesome.com",detectConflictsUntil:null,iconUploads:{},id:76794169,license:"free",method:"css",minify:{enabled:!0},token:"5a5fa257cb",v4FontFaceShim:{enabled:!0},v4shim:{enabled:!0},v5FontFaceShim:{enabled:!0},version:"6.2.0"},function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)),o}function n(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){var n,i;n=e,i=o[t],t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){var n=t&&t.addOn||"",o=(n=t&&t.baseFilename||e.license+n,t&&t.minify?".min":""),i=t&&t.fileSuffix||e.method;return t=t&&t.subdir||e.method,e.baseUrl+"/releases/"+("latest"===e.version?"latest":"v".concat(e.version))+"/"+t+"/"+n+o+"."+i}function r(e,t){t="."+Array.prototype.join.call(t||["fa"],",."),t=e.querySelectorAll(t),Array.prototype.forEach.call(t,(function(t){var n=t.getAttribute("title"),o=(t.setAttribute("aria-hidden","true"),!t.nextElementSibling||!t.nextElementSibling.classList.contains("sr-only"));n&&o&&((o=e.createElement("span")).innerHTML=n,o.classList.add("sr-only"),t.parentNode.insertBefore(o,t.nextSibling))}))}function l(){}var s,a=void 0!==Ii&&void 0!==Ii.process&&"function"==typeof Ii.process.emit,c="undefined"==typeof setImmediate?setTimeout:setImmediate,u=[];function d(){for(var e=0;e<u.length;e++)u[e][0](u[e][1]);s=!(u=[])}function f(e,t){u.push([e,t]),s||(s=!0,c(d,0))}function p(e){var t=(n=e.owner)._state,n=n._data,o=e[t],i=e.then;if("function"==typeof o){t="fulfilled";try{n=o(n)}catch(e){g(i,e)}}m(i,n)||("fulfilled"===t&&h(i,n),"rejected"===t&&g(i,n))}function m(t,n){var o;try{if(t===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"===e(n))){var i=n.then;if("function"==typeof i)return i.call(n,(function(e){o||(o=!0,(n===e?y:h)(t,e))}),(function(e){o||(o=!0,g(t,e))})),1}}catch(i){return o||g(t,i),1}}function h(e,t){e!==t&&m(e,t)||y(e,t)}function y(e,t){"pending"===e._state&&(e._state="settled",e._data=t,f(v,e))}function g(e,t){"pending"===e._state&&(e._state="settled",e._data=t,f(b,e))}function w(e){e._then=e._then.forEach(p)}function v(e){e._state="fulfilled",w(e)}function b(e){e._state="rejected",w(e),!e._handled&&a&&Ii.process.emit("unhandledRejection",e._data,e)}function k(e){Ii.process.emit("rejectionHandled",e)}function S(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof S==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[];var t=e,n=this;function o(e){g(n,e)}try{t((function(e){h(n,e)}),o)}catch(t){o(t)}}S.prototype={constructor:S,_state:"pending",_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(l),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,"rejected"===this._state&&a&&f(k,this)),"fulfilled"===this._state||"rejected"===this._state?f(p,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},S.all=function(e){if(Array.isArray(e))return new S((function(t,n){for(var o,i=[],r=0,l=0;l<e.length;l++)(o=e[l])&&"function"==typeof o.then?o.then(function(e){return r++,function(n){i[e]=n,--r||t(i)}}(l),n):i[l]=o;r||t(i)}));throw new TypeError("You must pass an array to Promise.all().")},S.race=function(e){if(Array.isArray(e))return new S((function(t,n){for(var o,i=0;i<e.length;i++)(o=e[i])&&"function"==typeof o.then?o.then(t,n):t(o)}));throw new TypeError("You must pass an array to Promise.race().")},S.resolve=function(t){return t&&"object"===e(t)&&t.constructor===S?t:new S((function(e){e(t)}))},S.reject=function(e){return new S((function(t,n){n(e)}))};var x,E,A,N,T="function"==typeof Promise?Promise:S;function I(e,t){var n=t.fetch,o=t.XMLHttpRequest,i=(t=t.token,e);return"URLSearchParams"in window?(i=new URL(e)).searchParams.set("token",t):i=i+"?token="+encodeURIComponent(t),i=i.toString(),new T((function(e,t){var r;"function"==typeof n?n(i,{mode:"cors",cache:"default"}).then((function(e){if(e.ok)return e.text();throw new Error("")})).then((function(t){e(t)})).catch(t):"function"==typeof o?((r=new o).addEventListener("loadend",(function(){this.responseText?e(this.responseText):t(new Error(""))})),["abort","error","timeout"].map((function(e){r.addEventListener(e,(function(){t(new Error(""))}))})),r.open("GET",i),r.send()):t(new Error(""))}))}function C(e,t,n){var i=e;return[[/(url\("?)\.\.\/\.\.\/\.\./g,function(e,n){return"".concat(n).concat(t)}],[/(url\("?)\.\.\/webfonts/g,function(e,o){return"".concat(o).concat(t,"/releases/v").concat(n,"/webfonts")}],[/(url\("?)https:\/\/kit-free([^.])*\.fontawesome\.com/g,function(e,n){return"".concat(n).concat(t)}]].forEach((function(e){t=2,e=function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,i=!1,r=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw r}}return n}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?o(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var t=e[0];e=e[1],i=i.replace(t,e)})),i}function $(e,t,o){o=2<arguments.length&&void 0!==o?o:function(){};var l=t.document||l,s=(l=r.bind(r,l,["fa","fab","fas","far","fal","fad","fak"]),0<Object.keys(e.iconUploads||{}).length);return e.autoA11y.enabled&&o(l),o=[{id:"fa-main",addOn:void 0}],e.v4shim&&e.v4shim.enabled&&o.push({id:"fa-v4-shims",addOn:"-v4-shims"}),e.v5FontFaceShim&&e.v5FontFaceShim.enabled&&o.push({id:"fa-v5-font-face",addOn:"-v5-font-face"}),e.v4FontFaceShim&&e.v4FontFaceShim.enabled&&o.push({id:"fa-v4-font-face",addOn:"-v4-font-face"}),s&&o.push({id:"fa-kit-upload",customCss:!0}),l=o.map((function(o){return new T((function(r,l){I(o.customCss?e.baseUrlKit+"/"+e.token+"/"+e.id+"/kit-upload.css":i(e,{addOn:o.addOn,minify:e.minify.enabled}),t).then((function(i){var l,s,a;r((l=n(n({},t),{},{baseUrl:e.baseUrl,version:e.version,id:o.id,contentFilter:function(e,t){return C(e,t.baseUrl,t.version)}}),s=l.contentFilter||function(e,t){return e},a=document.createElement("style"),s=document.createTextNode(s(i,l)),a.appendChild(s),a.media="all",l.id&&a.setAttribute("id",l.id),l&&l.detectingConflicts&&l.detectionIgnoreAttr&&a.setAttributeNode(document.createAttribute(l.detectionIgnoreAttr)),a))})).catch(l)}))})),T.all(l)}function L(e,t){t.autoA11y=e.autoA11y.enabled,"pro"===e.license&&(t.autoFetchSvg=!0,t.fetchSvgFrom=e.baseUrl+"/releases/"+("latest"===e.version?"latest":"v".concat(e.version))+"/svgs",t.fetchUploadedSvgFrom=e.uploadsUrl);var o=[];return e.v4shim.enabled&&o.push(new T((function(o,r){I(i(e,{addOn:"-v4-shims",minify:e.minify.enabled}),t).then((function(e){o(j(e,n(n({},t),{},{id:"fa-v4-shims"})))})).catch(r)}))),o.push(new T((function(o,r){I(i(e,{minify:e.minify.enabled}),t).then((function(e){var i,r,l;e=j(e,n(n({},t),{},{id:"fa-main"})),o((r=(i=t)&&void 0!==i.autoFetchSvg?i.autoFetchSvg:void 0,void 0!==(l=i&&void 0!==i.autoA11y?i.autoA11y:void 0)&&e.setAttribute("data-auto-a11y",l?"true":"false"),r&&(e.setAttributeNode(document.createAttribute("data-auto-fetch-svg")),e.setAttribute("data-fetch-svg-from",i.fetchSvgFrom),e.setAttribute("data-fetch-uploaded-svg-from",i.fetchUploadedSvgFrom)),e))})).catch(r)}))),T.all(o)}function j(e,t){var n=document.createElement("SCRIPT");return e=document.createTextNode(e),n.appendChild(e),n.referrerPolicy="strict-origin",t.id&&n.setAttribute("id",t.id),t&&t.detectingConflicts&&t.detectionIgnoreAttr&&n.setAttributeNode(document.createAttribute(t.detectionIgnoreAttr)),n}function P(e){var t,n=[],o=document,i=(o.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(o.readyState);i||o.addEventListener("DOMContentLoaded",t=function(){for(o.removeEventListener("DOMContentLoaded",t),i=1;t=n.shift();)t()}),i?setTimeout(e,0):n.push(e)}try{window.FontAwesomeKitConfig&&(x=window.FontAwesomeKitConfig,E={detectingConflicts:x.detectConflictsUntil&&new Date<=new Date(x.detectConflictsUntil),detectionIgnoreAttr:"data-fa-detection-ignore",fetch:window.fetch,token:x.token,XMLHttpRequest:window.XMLHttpRequest,document:document},A=document.currentScript,N=A?A.parentElement:document.head,function(e,t){return t=1<arguments.length&&void 0!==t?t:{},"js"===(e=0<arguments.length&&void 0!==e?e:{}).method?L(e,t):"css"===e.method?$(e,t,(function(e){P(e),"undefined"!=typeof MutationObserver&&new MutationObserver(e).observe(document,{childList:!0,subtree:!0})})):void 0}(x,E).then((function(e){e.map((function(e){try{N.insertBefore(e,A?A.nextSibling:null)}catch(t){N.appendChild(e)}})),E.detectingConflicts&&A&&P((function(){A.setAttributeNode(document.createAttribute(E.detectionIgnoreAttr)),e=x,n=E,t=document.createElement("script"),n.detectionIgnoreAttr&&t.setAttributeNode(document.createAttribute(n.detectionIgnoreAttr)),t.src=i(e,{baseFilename:"conflict-detection",fileSuffix:"js",subdir:"js",minify:e.minify.enabled});var e,t,n=t;document.body.appendChild(n)}))})).catch((function(e){console.error("".concat("Font Awesome Kit:"," ").concat(e))})))}catch(e){console.error("".concat("Font Awesome Kit:"," ").concat(e))}}();return new class extends ke{constructor(e){super(),be(this,e,Ti,Ni,l,{},null,[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
