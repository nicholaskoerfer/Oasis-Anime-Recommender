var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function o(){return Object.create(null)}function i(e){e.forEach(n)}function l(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let s;function a(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function c(e){let t;return a(e,(e=>t=e))(),t}function u(e,t,n){e.$$.on_destroy.push(a(t,n))}function d(e,t,n,o){return e[1]&&o?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](o(t))):n.ctx}function p(e){return null==e?"":e}function f(e,t,n){return e.set(n),t}function m(t){return t&&l(t.destroy)?t.destroy:e}const h="undefined"!=typeof window;let y=h?()=>window.performance.now():()=>Date.now(),v=h?e=>requestAnimationFrame(e):e;const w=new Set;function g(e){w.forEach((t=>{t.c(e)||(w.delete(t),t.f())})),0!==w.size&&v(g)}function b(e,t){e.appendChild(t)}function x(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function k(e){const t=T("style");return function(e,t){b(e.head||e,t),t.sheet}(x(e),t),t.sheet}function S(e,t,n){e.insertBefore(t,n||null)}function A(e){e.parentNode&&e.parentNode.removeChild(e)}function E(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function T(e){return document.createElement(e)}function N(e){return document.createTextNode(e)}function $(){return N(" ")}function I(){return N("")}function L(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function P(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function C(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function M(e,t){t=""+t,e.data!==t&&(e.data=t)}function D(e,t){e.value=null==t?"":t}function F(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function U(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,o,t),i}class j{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}(t.nodeName):this.e=T(11===t.nodeType?"TEMPLATE":t.nodeName),this.t="TEMPLATE"!==t.tagName?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)S(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(A)}}const O=new Map;let V,_=0;function R(e,t,n,o,i,l,r,s=0){const a=16.666/o;let c="{\n";for(let e=0;e<=1;e+=a){const o=t+(n-t)*l(e);c+=100*e+`%{${r(o,1-o)}}\n`}const u=c+`100% {${r(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${s}`,p=x(e),{stylesheet:f,rules:m}=O.get(p)||function(e,t){const n={stylesheet:k(t),rules:{}};return O.set(e,n),n}(p,e);m[d]||(m[d]=!0,f.insertRule(`@keyframes ${d} ${u}`,f.cssRules.length));const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${d} ${o}ms linear ${i}ms 1 both`,_+=1,d}function B(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-o.length;i&&(e.style.animation=o.join(", "),_-=i,_||v((()=>{_||(O.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&A(t)})),O.clear())})))}function q(e){V=e}function H(){if(!V)throw new Error("Function called outside component initialization");return V}function W(e){H().$$.on_mount.push(e)}const G=[],K=[];let Y=[];const z=[],J=Promise.resolve();let X=!1;function Q(){X||(X=!0,J.then(ie))}function Z(){return Q(),J}function ee(e){Y.push(e)}const te=new Set;let ne,oe=0;function ie(){if(0!==oe)return;const e=V;do{try{for(;oe<G.length;){const e=G[oe];oe++,q(e),le(e.$$)}}catch(e){throw G.length=0,oe=0,e}for(q(null),G.length=0,oe=0;K.length;)K.pop()();for(let e=0;e<Y.length;e+=1){const t=Y[e];te.has(t)||(te.add(t),t())}Y.length=0}while(G.length);for(;z.length;)z.pop()();X=!1,te.clear(),q(e)}function le(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ee)}}function re(e,t,n){e.dispatchEvent(U(`${t?"intro":"outro"}${n}`))}const se=new Set;let ae;function ce(){ae={r:0,c:[],p:ae}}function ue(){ae.r||i(ae.c),ae=ae.p}function de(e,t){e&&e.i&&(se.delete(e),e.i(t))}function pe(e,t,n,o){if(e&&e.o){if(se.has(e))return;se.add(e),ae.c.push((()=>{se.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}const fe={duration:0};function me(n,o,r){const s={direction:"out"};let a,c=o(n,r,s),u=!0;const d=ae;function p(){const{delay:o=0,duration:l=300,easing:r=t,tick:s=e,css:p}=c||fe;p&&(a=R(n,1,0,l,o,r,p));const f=y()+o,m=f+l;ee((()=>re(n,!1,"start"))),function(e){let t;0===w.size&&v(g),new Promise((n=>{w.add(t={c:e,f:n})}))}((e=>{if(u){if(e>=m)return s(0,1),re(n,!1,"end"),--d.r||i(d.c),!1;if(e>=f){const t=r((e-f)/l);s(1-t,t)}}return u}))}return d.r+=1,l(c)?(ne||(ne=Promise.resolve(),ne.then((()=>{ne=null}))),ne).then((()=>{c=c(s),p()})):p(),{end(e){e&&c.tick&&c.tick(1,0),u&&(a&&B(n,a),u=!1)}}}function he(e,t){e.d(1),t.delete(e.key)}function ye(e,t){pe(e,1,1,(()=>{t.delete(e.key)}))}function ve(e,t,n,o,l,r,s,a,c,u,d,p){let f=e.length,m=r.length,h=f;const y={};for(;h--;)y[e[h].key]=h;const v=[],w=new Map,g=new Map,b=[];for(h=m;h--;){const e=p(l,r,h),i=n(e);let a=s.get(i);a?o&&b.push((()=>a.p(e,t))):(a=u(i,e),a.c()),w.set(i,v[h]=a),i in y&&g.set(i,Math.abs(h-y[i]))}const x=new Set,k=new Set;function S(e){de(e,1),e.m(a,d),s.set(e.key,e),d=e.first,m--}for(;f&&m;){const t=v[m-1],n=e[f-1],o=t.key,i=n.key;t===n?(d=t.first,f--,m--):w.has(i)?!s.has(o)||x.has(o)?S(t):k.has(i)?f--:g.get(o)>g.get(i)?(k.add(o),S(t)):(x.add(i),f--):(c(n,s),f--)}for(;f--;){const t=e[f];w.has(t.key)||c(t,s)}for(;m;)S(v[m-1]);return i(b),v}function we(e){e&&e.c()}function ge(e,t,o,r){const{fragment:s,after_update:a}=e.$$;s&&s.m(t,o),r||ee((()=>{const t=e.$$.on_mount.map(n).filter(l);e.$$.on_destroy?e.$$.on_destroy.push(...t):i(t),e.$$.on_mount=[]})),a.forEach(ee)}function be(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];Y.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),Y=t}(n.after_update),i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function xe(t,n,l,r,s,a,c,u=[-1]){const d=V;q(t);const p=t.$$={fragment:null,ctx:[],props:a,update:e,not_equal:s,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(p.root);let f=!1;if(p.ctx=l?l(t,n.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return p.ctx&&s(p.ctx[e],p.ctx[e]=i)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](i),f&&function(e,t){-1===e.$$.dirty[0]&&(G.push(e),Q(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],p.update(),f=!0,i(p.before_update),p.fragment=!!r&&r(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(A)}else p.fragment&&p.fragment.c();n.intro&&de(t.$$.fragment),ge(t,n.target,n.anchor,n.customElement),ie()}q(d)}class ke{$destroy(){be(this,1),this.$destroy=e}$on(t,n){if(!l(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Se=156;const Ae=[];function Ee(t,n=e){let o;const i=new Set;function l(e){if(r(t,e)&&(t=e,o)){const e=!Ae.length;for(const e of i)e[1](),Ae.push(e,t);if(e){for(let e=0;e<Ae.length;e+=2)Ae[e][0](Ae[e+1]);Ae.length=0}}}return{set:l,update:function(e){l(e(t))},subscribe:function(r,s=e){const a=[r,s];return i.add(a),1===i.size&&(o=n(l)||e),r(t),()=>{i.delete(a),0===i.size&&o&&(o(),o=null)}}}}const Te=e=>"[object Object]"===Object.prototype.toString.call(e);function Ne(e,t){try{let n=Math.floor(e/1e3%60),o=Math.floor(e/6e4%60),i=Math.floor(e/36e5%24),l=Math.floor(e/864e5%7),r=Math.floor(e/6048e5%4),s=Math.floor(e/24192e5%12),a=Math.floor(e/290304e5%10),c=Math.floor(e/290304e6%10),u=Math.floor(e/290304e7%10),d=Math.floor(e/290304e8%10),p=[];return d<=0&&u<=0&&c<=0&&a<=0&&s<=0&&r<=0&&l<=0&&i<=0&&o<=0&&n<=0?"0s":(d>0&&p.push(`${d}mil`),c>0&&p.push(`${c}dec`),a>0&&p.push(`${a}y`),s>0&&p.push(`${s}mon`),r>0&&p.push(`${r}w`),l>0&&p.push(`${l}d`),i>0&&p.push(`${i}h`),o>0&&p.push(`${o}m`),n>0&&p.push(`${n}s`),t>0&&(p=p.slice(0,t)),p.join(" "))}catch(e){return}}function $e(e,t,n=.5){try{var o;o=t instanceof Array?t:e.querySelectorAll(t);var i=null,l=0;let s=[],a=e.scrollTop;for(let e=0;e<o.length;e++)if(o[e].offsetTop>a){s=e>0?[o[e-1],o[e]]:0===e?[o[e]]:[];break}var r=e.getBoundingClientRect();return s.forEach((e=>{var t=e.getBoundingClientRect(),o=(Math.min(t.bottom,r.bottom)-Math.max(t.top,r.top))/t.height;o>=n&&o>l&&(l=o,i=e)})),i}catch(e){return}}const Ie=(e,t)=>{try{return Array.from(e.parentElement.children).indexOf(e)}catch(e){return}},Le=(e,t,n="top",o,i=0)=>{try{let l;if("string"==typeof t&&(t=document.querySelector(t)),e===window){const e=t.getBoundingClientRect(),o=window.scrollY;l="bottom"===n?e.bottom+o-window.innerHeight:"center"===n?e.top+o-window.innerHeight/2:e.top+o}else if("string"==typeof e&&(e=document.querySelector(e)),"bottom"===n)l=t.offsetTop+t.offsetHeight-e.offsetHeight;else if("center"===n){let n=t.getBoundingClientRect(),o=e.getBoundingClientRect();l=n.top+n.height/2-(o.top+o.height/2)+e.scrollTop-o.height/2}else{let n=t.getBoundingClientRect(),o=e.getBoundingClientRect();l=n.top-o.top+e.scrollTop}e===window?"smooth"===o?window.scrollTo({top:l+i,behavior:"smooth"}):window.scrollTo({top:l+i}):"smooth"===o?e.scrollBy({top:l+i,behavior:"smooth"}):e.scrollTop=l+i}catch(e){return}},Pe=(e,t)=>{let n=Math.max(e.selectionStart-1||0,0);e.value=t,e.setSelectionRange(n,n)},Ce=(e,t="xy")=>{let n,o,i,l,r,s,a,c,u,d=l=>{if(n&&"mouse"===l.pointerType){if(t.toLowerCase().includes("y")){let t=l.clientY-o;e.scrollTop=s-t}if(t.toLowerCase().includes("x")){let t=l.clientX-i;e.scrollLeft=a-t}}},p=d=>{"mouse"===d.pointerType&&(l=0,cancelAnimationFrame(c),r=0,cancelAnimationFrame(u),t.toLowerCase().includes("y")&&(o=d.clientY,s=e.scrollTop),t.toLowerCase().includes("x")&&(i=d.clientX,a=e.scrollLeft),n=!0)},f=c=>{if(n){if(t.toLowerCase().includes("y")&&"mouse"===c.pointerType){let t=c.clientY-o;e.scrollTop=s-t,l=t,h(e)}if(t.toLowerCase().includes("x")&&"mouse"===c.pointerType){let t=c.clientX-i;e.scrollLeft=a-t,r=t,y(e)}}n=!1},m=()=>n=!1,h=(e,t)=>{if((null==t||e.scrollTop===t)&&"number"==typeof l&&e&&Math.abs(l)>.1){e.scrollTop-=.1*l;let t=e.scrollTop;c=requestAnimationFrame((()=>h(e,t))),l*=.9}else l=0,cancelAnimationFrame(c)},y=(e,t)=>{if((null==t||e.scrollLeft===t)&&"number"==typeof r&&e&&Math.abs(r)>.1){e.scrollLeft-=.1*r;let t=e.scrollLeft;u=requestAnimationFrame((()=>y(e,t))),r*=.9}else r=0,cancelAnimationFrame(u)};return e.addEventListener("pointermove",d),e.addEventListener("pointerdown",p),e.addEventListener("pointerup",f),window.addEventListener("pointerup",m),window.addEventListener("pointercancel",m),()=>{r=l=0,cancelAnimationFrame(c),cancelAnimationFrame(u),e.removeEventListener("pointermove",d),e.removeEventListener("pointerdown",p),e.removeEventListener("pointerup",f),window.addEventListener("pointerup",m),window.addEventListener("pointercancel",m)}},Me=()=>{try{return JSBridge.exportJSON,!0}catch(e){return!1}};let De;const Fe=(e,t)=>{e?.classList?.add?.(t)},Ue=(e,t)=>{e?.classList?.remove?.(t)},je="Kanshi.Anime.Recommendations.Anilist.W~uPtWCq=vG$TR:Zl^#t<vdS]I~N70",Oe=e=>{let t;try{return e=je+e,t=localStorage.getItem(e),JSON.parse(t)}catch(e){return t??null}},Ve=(e,t)=>{try{localStorage.setItem(je+e,t)}catch(e){}},_e=e=>{try{return"null"!==new URL(e).origin}catch(e){return!1}},Re=Ee(null),Be=Ee(null),qe=Ee(!0),He=Ee(0),We=Ee(!1),Ge=Ee(Oe("username")||null),Ke=Ee(null),Ye=Ee(null),ze=Ee(null),Je=Ee(null),Xe=Ee(null),Qe=Ee(null),Ze=Ee(!1),et=Ee(null),tt=Ee(Oe("autoUpdate")||null),nt=Ee(null),ot=Ee(null),it=Ee(Oe("exportPathIsAvailable")||null),lt=Ee(Oe("autoExport")||null),rt=Ee(null),st=Ee(null),at=Ee([]),ct=Ee(Oe("autoPlay")||null),ut=Ee(!0),dt=Ee(Oe("gridFullView")||null),pt=Ee(null),ft=Ee(null),mt=Ee(!1),ht=Ee(null),yt=Ee(null),vt=Ee(!1),wt=Ee(""),gt=Ee(null),bt=Ee(!1),xt=Ee(!1),kt=Ee(null),St=Ee(!1),At=Ee(null),Et=Ee(!0),Tt=Ee(!1),Nt=Ee(!1),$t=Ee(null),It=Ee(null),Lt=Ee(null),Pt=Ee(null),Ct=Ee(null),Mt=Ee(null),Dt=Ee(null),Ft=Ee(null),Ut=Ee(null),jt=Ee(null),Ot=Ee(null);function Vt(e,{delay:n=0,duration:o=400,easing:i=t}={}){const l=+getComputedStyle(e).opacity;return{delay:n,duration:o,easing:i,css:e=>"opacity: "+e*l}}let _t={},Rt={};const Bt=async e=>Rt[e]?Rt[e]:_t[e]?_t[e]:_e(e)?(_t[e]=new Promise((async t=>{fetch(e,{cache:"force-cache"}).then((async e=>await e.blob())).then((n=>{try{let o=URL.createObjectURL(n);Rt[e]=o,_t[e]=null,t(o)}catch(n){_t[e]=null,t(e)}})).catch((()=>{_t[e]=null,t(e)}))})),_t[e]):e,qt=Me(),Ht=qt||(()=>{try{let t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}catch(e){}var e})();let Wt={},Gt={};const Kt=(e,t,n)=>Gt[e]?Gt[e]:Wt[e]?Wt[e]:Ht&&window?.location?.protocol?.includes?.("https")&&_e(e)?(Wt[e]=new Promise((async o=>{let i=e;window?.location?.origin?.includes?.("https://u-kuro.github.io")&&qt&&(i="https://cors-anywhere-kuro.vercel.app/api?url="+i),fetch(i,{cache:"force-cache"}).then((async e=>await e.blob())).then((i=>{try{let l=URL.createObjectURL(i),r=new Image;r.src=l,r.onload=()=>{try{let i=document.createElement("canvas");i.width=t||r.naturalWidth,i.height=n||r.naturalHeight,i.getContext("2d").drawImage(r,0,0),i.toBlob((t=>{try{let n=URL.createObjectURL(t);Gt[e]=n,Wt[e]=null,o(n)}catch(t){Gt[e]=l,Wt[e]=null,o(l)}}),"image/webp",.8)}catch(t){Gt[e]=l,Wt[e]=null,o(l)}},r.onerror=()=>{Wt[e]=null,o(e)}}catch(t){Wt[e]=null,o(e)}})).catch((t=>{Wt[e]=null,o(e)}))})),Wt[e]):e||"data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Yt(e,t,n){const o=e.slice();return o[52]=t[n],o}function zt(e,t,n){const o=e.slice();return o[52]=t[n],o}function Jt(e,t,n){const o=e.slice();return o[52]=t[n],o}function Xt(e,t,n){const o=e.slice();return o[52]=t[n],o}function Qt(e,t,n){const o=e.slice();return o[57]=t[n],o[58]=t,o[59]=n,o}function Zt(t){let n;return{c(){n=T("div"),n.textContent="No Results",C(n,"class","empty svelte-1agyj99")},m(e,t){S(e,n,t)},p:e,d(e){e&&A(n)}}}function en(t){let n,o,i=Array(21),l=[];for(let e=0;e<i.length;e+=1)l[e]=nn(zt(t,i,e));let r=Array(5),s=[];for(let e=0;e<r.length;e+=1)s[e]=on(Yt(t,r,e));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();n=$();for(let e=0;e<s.length;e+=1)s[e].c();o=I()},m(e,t){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,t);S(e,n,t);for(let n=0;n<s.length;n+=1)s[n]&&s[n].m(e,t);S(e,o,t)},p:e,d(e){E(l,e),e&&A(n),E(s,e),e&&A(o)}}}function tn(e){let t,n,o,i=[],l=new Map,r=e[12]||[];const s=e=>e[57]?.id||{};for(let t=0;t<r.length;t+=1){let n=Qt(e,r,t),o=s(n);l.set(o,i[t]=dn(o,n))}let a=Array(e[11]?0:1),c=[];for(let t=0;t<a.length;t+=1)c[t]=pn(Xt(e,a,t));let u=Array(e[3]?Math.floor((e[5]??1100)/220):5),d=[];for(let t=0;t<u.length;t+=1)d[t]=fn(Jt(e,u,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=$();for(let e=0;e<c.length;e+=1)c[e].c();n=$();for(let e=0;e<d.length;e+=1)d[e].c();o=I()},m(e,l){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,l);S(e,t,l);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(e,l);S(e,n,l);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(e,l);S(e,o,l)},p(e,p){if(504832&p[0]&&(r=e[12]||[],i=ve(i,p,s,1,e,r,l,t.parentNode,he,dn,t,Qt)),2048&p[0]){let t;for(a=Array(e[11]?0:1),t=0;t<a.length;t+=1){const o=Xt(e,a,t);c[t]?c[t].p(o,p):(c[t]=pn(),c[t].c(),c[t].m(n.parentNode,n))}for(;t<c.length;t+=1)c[t].d(1);c.length=a.length}if(40&p[0]){let t;for(u=Array(e[3]?Math.floor((e[5]??1100)/220):5),t=0;t<u.length;t+=1){const n=Jt(e,u,t);d[t]?d[t].p(n,p):(d[t]=fn(),d[t].c(),d[t].m(o.parentNode,o))}for(;t<d.length;t+=1)d[t].d(1);d.length=u.length}},d(e){for(let t=0;t<i.length;t+=1)i[t].d(e);e&&A(t),E(c,e),e&&A(n),E(d,e),e&&A(o)}}}function nn(t){let n;return{c(){n=T("div"),n.innerHTML='<div class="shimmer svelte-1agyj99"></div>',C(n,"class","image-grid__card skeleton svelte-1agyj99")},m(e,t){S(e,n,t)},p:e,d(e){e&&A(n)}}}function on(t){let n;return{c(){n=T("div"),C(n,"class","image-grid__card svelte-1agyj99")},m(e,t){S(e,n,t)},p:e,d(e){e&&A(n)}}}function ln(e){let t,n,o,r,s,a,c;return{c(){t=T("img"),C(t,"fetchpriority",n=e[59]>wn?"":"high"),C(t,"loading",o=e[59]>wn?"lazy":"eager"),C(t,"class",p("image-grid__card-thumb  fade-out")+" svelte-1agyj99"),C(t,"alt",r=(e[57]?.shownTitle||"")+" Cover"),C(t,"width","180px"),C(t,"height","254.531px")},m(n,o){S(n,t,o),a||(c=[m(s=e[20].call(null,t,e[57]?.coverImageUrl||e[57]?.bannerImageUrl||e[57]?.trailerThumbnailUrl||yn)),L(t,"load",e[25]),L(t,"error",e[26])],a=!0)},p(i,a){e=i,4096&a[0]&&n!==(n=e[59]>wn?"":"high")&&C(t,"fetchpriority",n),4096&a[0]&&o!==(o=e[59]>wn?"lazy":"eager")&&C(t,"loading",o),4096&a[0]&&r!==(r=(e[57]?.shownTitle||"")+" Cover")&&C(t,"alt",r),s&&l(s.update)&&4096&a[0]&&s.update.call(null,e[57]?.coverImageUrl||e[57]?.bannerImageUrl||e[57]?.trailerThumbnailUrl||yn)},d(e){e&&A(t),a=!1,i(c)}}}function rn(e){let t,n=`${e[57].format||"N/A"}${e[57].episodes?"("+e[57].episodes+")":""}`;return{c(){t=N(n)},m(e,n){S(e,t,n)},p(e,o){4096&o[0]&&n!==(n=`${e[57].format||"N/A"}${e[57].episodes?"("+e[57].episodes+")":""}`)&&M(t,n)},d(e){e&&A(t)}}}function sn(e){let t,n,o,i=`${e[57].format||"N/A"}`,l=e[13]||1,s=an(e);return{c(){t=N(i),n=$(),s.c(),o=I()},m(e,i){S(e,t,i),S(e,n,i),s.m(e,i),S(e,o,i)},p(e,n){4096&n[0]&&i!==(i=`${e[57].format||"N/A"}`)&&M(t,i),8192&n[0]&&r(l,l=e[13]||1)?(s.d(1),s=an(e),s.c(),s.m(o.parentNode,o)):s.p(e,n)},d(e){e&&A(t),e&&A(n),e&&A(o),s.d(e)}}}function an(e){let t,n=gn(e[57].episodes,e[57].nextAiringEpisode)+"";return{c(){t=N(n)},m(e,n){S(e,t,n)},p(e,o){4096&o[0]&&n!==(n=gn(e[57].episodes,e[57].nextAiringEpisode)+"")&&M(t,n)},d(e){e&&A(t)}}}function cn(e){let t,n=(e[57]?.formattedWeightedScore||"N/A")+"";return{c(){t=N(n)},m(e,n){S(e,t,n)},p(e,o){4096&o[0]&&n!==(n=(e[57]?.formattedWeightedScore||"N/A")+"")&&M(t,n)},d(e){e&&A(t)}}}function un(e){let t,n=(e[57]?.shownScore||"N/A")+"";return{c(){t=N(n)},m(e,n){S(e,t,n)},p(e,o){4096&o[0]&&n!==(n=(e[57]?.shownScore||"N/A")+"")&&M(t,n)},d(e){e&&A(t)}}}function dn(e,t){let n,o,r,s,a,c,u,d,f,m,h,y,v,w,g,x,k,E,I,P,D,F,U,j,O,V,_=(t[57]?.shownTitle||"N/A")+"",R=t[58],B=t[59],q=(t[57]?.coverImageUrl||t[57]?.bannerImageUrl||t[57]?.trailerThumbnailUrl)&&ln(t);function H(e,t){return 4096&t[0]&&(g=null),null==g&&(g=!!Te(e[57]?.nextAiringEpisode)),g?sn:rn}let W=H(t,[-1,-1,-1]),G=W(t);function K(e,t){return e[15]?un:cn}let Y=K(t),z=Y(t);function J(...e){return t[27](t[59],...e)}function X(...e){return t[28](t[59],...e)}const Q=()=>t[29](n,R,B),Z=()=>t[29](null,R,B);return{key:e,first:null,c(){n=T("div"),o=T("div"),q&&q.c(),r=$(),s=T("span"),a=T("span"),c=N(_),d=$(),f=T("span"),m=T("div"),h=T("span"),y=T("i"),w=$(),G.c(),x=$(),k=T("div"),E=T("span"),I=T("i"),D=$(),z.c(),C(a,"class","title copy svelte-1agyj99"),C(a,"copy-value",u=t[57]?.copiedTitle||""),C(y,"class",v=p(`${t[57]?.userStatusColor}-color fa-solid fa-circle`)+" svelte-1agyj99"),C(m,"class","brief-info svelte-1agyj99"),C(I,"class",P=p(`${t[57]?.contentCautionColor}-color fa-solid fa-star`)+" svelte-1agyj99"),C(k,"class","brief-info svelte-1agyj99"),C(f,"class","brief-info-wrapper copy svelte-1agyj99"),C(f,"copy-value",F=t[57]?.copiedTitle||""),C(s,"class","image-grid__card-title svelte-1agyj99"),C(o,"class","shimmer svelte-1agyj99"),C(o,"tabindex",U=t[10]?"":"0"),C(n,"class","image-grid__card svelte-1agyj99"),C(n,"title",j=t[57]?.briefInfo||""),this.first=n},m(e,i){S(e,n,i),b(n,o),q&&q.m(o,null),b(o,r),b(o,s),b(s,a),b(a,c),b(s,d),b(s,f),b(f,m),b(m,h),b(h,y),b(h,w),G.m(h,null),b(f,x),b(f,k),b(k,E),b(E,I),b(E,D),z.m(E,null),Q(),O||(V=[L(o,"click",(function(){l(t[16](t[59]))&&t[16](t[59]).apply(this,arguments)})),L(o,"pointerdown",J),L(o,"pointerup",t[18]),L(o,"pointercancel",t[18]),L(o,"keydown",X)],O=!0)},p(e,i){t=e,t[57]?.coverImageUrl||t[57]?.bannerImageUrl||t[57]?.trailerThumbnailUrl?q?q.p(t,i):(q=ln(t),q.c(),q.m(o,r)):q&&(q.d(1),q=null),4096&i[0]&&_!==(_=(t[57]?.shownTitle||"N/A")+"")&&M(c,_),4096&i[0]&&u!==(u=t[57]?.copiedTitle||"")&&C(a,"copy-value",u),4096&i[0]&&v!==(v=p(`${t[57]?.userStatusColor}-color fa-solid fa-circle`)+" svelte-1agyj99")&&C(y,"class",v),W===(W=H(t,i))&&G?G.p(t,i):(G.d(1),G=W(t),G&&(G.c(),G.m(h,null))),4096&i[0]&&P!==(P=p(`${t[57]?.contentCautionColor}-color fa-solid fa-star`)+" svelte-1agyj99")&&C(I,"class",P),Y===(Y=K(t))&&z?z.p(t,i):(z.d(1),z=Y(t),z&&(z.c(),z.m(E,null))),4096&i[0]&&F!==(F=t[57]?.copiedTitle||"")&&C(f,"copy-value",F),1024&i[0]&&U!==(U=t[10]?"":"0")&&C(o,"tabindex",U),4096&i[0]&&j!==(j=t[57]?.briefInfo||"")&&C(n,"title",j),R===t[58]&&B===t[59]||(Z(),R=t[58],B=t[59],Q())},d(e){e&&A(n),q&&q.d(),G.d(),z.d(),Z(),O=!1,i(V)}}}function pn(t){let n;return{c(){n=T("div"),n.innerHTML='<div class="shimmer svelte-1agyj99"></div>',C(n,"class","image-grid__card skeleton svelte-1agyj99")},m(e,t){S(e,n,t)},p:e,d(e){e&&A(n)}}}function fn(t){let n;return{c(){n=T("div"),C(n,"class","image-grid__card svelte-1agyj99")},m(e,t){S(e,n,t)},p:e,d(e){e&&A(n)}}}function mn(e){let t,n,o,l,r,s,a,c;return{c(){t=T("div"),n=T("i"),C(n,"class",o=p("fa-solid"+(e[9]?" fa-arrow-left":" fa-arrow-up"))+" svelte-1agyj99"),C(t,"class",l=p("go-back-grid"+(e[9]?" fullView":""))+" svelte-1agyj99"),C(t,"tabindex","0")},m(o,i){S(o,t,i),b(t,n),s=!0,a||(c=[L(t,"click",e[19]),L(t,"keydown",e[33])],a=!0)},p(e,i){(!s||512&i[0]&&o!==(o=p("fa-solid"+(e[9]?" fa-arrow-left":" fa-arrow-up"))+" svelte-1agyj99"))&&C(n,"class",o),(!s||512&i[0]&&l!==(l=p("go-back-grid"+(e[9]?" fullView":""))+" svelte-1agyj99"))&&C(t,"class",l)},i(e){s||(r&&r.end(1),s=!0)},o(e){r=me(t,Vt,{duration:200}),s=!1},d(e){e&&A(t),e&&r&&r.end(),a=!1,i(c)}}}function hn(e){let t,n,o,l,r,s,a,c;function u(e,t){return e[12]?.length?tn:!e[12]||e[14]?en:Zt}let d=u(e),f=d(e),m=!e[4]&&(e[9]||e[8])&&mn(e);return{c(){t=T("main"),n=T("div"),f.c(),l=$(),m&&m.c(),C(n,"id","anime-grid"),C(n,"class",o=p("image-grid "+(e[3]?" fullView":"")+(0!==e[12]?.length||e[14]?"":"empty"))+" svelte-1agyj99"),F(n,"--anime-grid-height",e[5]+"px"),C(t,"class",r=p(e[3]?"fullView":"")+" svelte-1agyj99")},m(o,i){S(o,t,i),b(t,n),f.m(n,null),e[30](n),b(t,l),m&&m.m(t,null),s=!0,a||(c=[L(n,"wheel",e[31]),L(n,"scroll",e[32])],a=!0)},p(e,i){d===(d=u(e))&&f?f.p(e,i):(f.d(1),f=d(e),f&&(f.c(),f.m(n,null))),(!s||20488&i[0]&&o!==(o=p("image-grid "+(e[3]?" fullView":"")+(0!==e[12]?.length||e[14]?"":"empty"))+" svelte-1agyj99"))&&C(n,"class",o),32&i[0]&&F(n,"--anime-grid-height",e[5]+"px"),e[4]||!e[9]&&!e[8]?m&&(ce(),pe(m,1,1,(()=>{m=null})),ue()):m?(m.p(e,i),784&i[0]&&de(m,1)):(m=mn(e),m.c(),de(m,1),m.m(t,null)),(!s||8&i[0]&&r!==(r=p(e[3]?"fullView":"")+" svelte-1agyj99"))&&C(t,"class",r)},i(e){s||(de(m),s=!0)},o(e){pe(m),s=!1},d(n){n&&A(t),f.d(),e[30](null),m&&m.d(),a=!1,i(c)}}}const yn="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",vn="data:image/jpeg;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";let wn=13;function gn(e,t){let n,o;if("number"==typeof t?.episode&&"number"==typeof t?.airingAt){let e=new Date(1e3*t?.airingAt);o=t?.episode,e instanceof Date&&!isNaN(e)&&(n=e.getTime()-(new Date).getTime())}if(n>0&&o>1&&e>o)return`(${o-1}/${e})`;if(n<=0&&"number"==typeof o&&e>o)return`(${o}/${e})`;if("number"==typeof e)return`(${e})`;if("number"==typeof o){if(n>0&&o>1)return`(${o-1}")`;if(n<=0)return`(${o}")`}return""}function bn(e,t,n){let o,i,l,r,s,a,c,d,p,m,h,y,v,w,g,b,x,k,S,A,E,T,N;u(e,Be,(e=>n(4,r=e))),u(e,Tt,(e=>n(23,s=e))),u(e,dt,(e=>n(24,a=e))),u(e,xt,(e=>n(39,c=e))),u(e,kt,(e=>n(40,d=e))),u(e,St,(e=>n(10,p=e))),u(e,At,(e=>n(41,m=e))),u(e,Xe,(e=>n(42,h=e))),u(e,mt,(e=>n(43,y=e))),u(e,vt,(e=>n(11,v=e))),u(e,Lt,(e=>n(44,w=e))),u(e,ht,(e=>n(45,g=e))),u(e,Je,(e=>n(12,b=e))),u(e,Qe,(e=>n(46,x=e))),u(e,yt,(e=>n(47,k=e))),u(e,pt,(e=>n(48,S=e))),u(e,ft,(e=>n(13,A=e))),u(e,Dt,(e=>n(49,E=e))),u(e,ut,(e=>n(14,T=e))),u(e,Ye,(e=>n(15,N=e)));let $,I,L=Math.max(window.visualViewport.height,window.innerHeight),P=Math.max(window.visualViewport.width,window.innerWidth);W((()=>{n(5,L=Math.max(window.visualViewport.height,window.innerHeight)),n(21,P=Math.max(window.visualViewport.width,window.innerWidth)),n(6,$=$||document.getElementById("anime-grid")),window.addEventListener("resize",(()=>{n(5,L=Math.max(window.visualViewport.height,window.innerHeight)),n(21,P=Math.max(window.visualViewport.width,window.innerWidth))}))}));let C,M,D,F,U,j,O,V,_=!1;function R(e){f(At,m=e,m),f(St,p=!0,p)}function B(e,t){let n=e.target;n.classList.contains("copy")||n.closest(".copy")||(D&&clearTimeout(D),D=setTimeout((()=>{f(kt,d=t,d),f(xt,c=!0,c)}),500))}window.checkAnimeLoaderStatus=f(mt,y=async()=>{if(h instanceof Worker&&"function"==typeof h.onmessage)return new Promise(((e,t)=>{C={resolve:e,reject:t},h?.postMessage?.({checkStatus:!0}),clearTimeout(M),M=setTimeout((()=>{t()}),1e3)})).catch((()=>{f(Xe,h=null,h),f(Je,b=null,b),f(Dt,E=!E,E),C=null})).finally((()=>{C=null}))},y),Xe.subscribe((e=>{e instanceof Worker&&(e.onmessage=async({data:t})=>{if(C?.resolve&&t?.isAlive&&(C?.resolve?.(),C=null),await Z(),void 0!==t?.status)f(Qe,x=t.status,x);else if(!0===t.getEarlisetReleaseDate)t.earliestReleaseDate&&t?.timeBeforeEarliestReleaseDate>0&&(t.earliestReleaseDate<A||new Date(A)<new Date||!A)&&(f(ft,A=t.earliestReleaseDate,A),clearTimeout(S),f(pt,S=setTimeout((()=>{h instanceof Worker&&y().then((()=>{h?.postMessage?.({getEarlisetReleaseDate:!0})}))}),Math.min(t.timeBeforeEarliestReleaseDate,2e9)),S));else if(t.finalAnimeList instanceof Array)!0===t?.reload?(f(Je,b=t.finalAnimeList,b),_=!0):!0===t.isNew?f(Je,b=t.finalAnimeList,b):!1===t.isNew&&b instanceof Array&&(f(Je,b=b.concat(t.finalAnimeList),b),t.isLast&&(f(vt,v=!0,v),g instanceof IntersectionObserver&&(g.disconnect(),f(ht,g=null,g)))),e?.postMessage?.({getEarlisetReleaseDate:!0});else if(!0===t.isRemoved&&"number"==typeof t.removedID){let n=Math.max(b.length-2,0),o=b[n].gridElement||$.children?.[n];g instanceof IntersectionObserver&&o instanceof Element&&g.observe(o);let i=b.findIndex((({id:e})=>e===t.removedID));f(Je,b=b.filter((({id:e})=>e!==t.removedID)),b),i>=0&&(f(yt,k=null,k),f(yt,k=i,k)),e?.postMessage?.({getEarlisetReleaseDate:!0})}},e.onerror=e=>{f(Qe,x="Something went wrong...",x),console.error(e)},e?.postMessage?.({getEarlisetReleaseDate:!0}))})),Je.subscribe((async e=>{if(e instanceof Array&&e.length){v&&f(vt,v=!1,v),g&&(g.disconnect(),f(ht,g=null,g)),await Z(),I=!1,f(ht,g=new IntersectionObserver((e=>{v||e.forEach((e=>{if(e.isIntersecting){if(I)return;I=!0,setTimeout((()=>{h instanceof Worker&&y().then((()=>{h?.postMessage?.({loadMore:!0})})),I=!1}),16)}}))}),{root:null,rootMargin:"100%",threshold:[0,1]}),g);let e=b.length-1,t=b[e].gridElement||$.children?.[e];g instanceof IntersectionObserver&&t instanceof Element&&g.observe(t),_&&(f(Lt,w=!w,w),_=!1)}else g&&(g?.disconnect?.(),f(ht,g=null,g)),_&&(f(Lt,w=!w,w),_=!1)})),wt.subscribe((async e=>{"string"==typeof e&&h instanceof Worker&&(f(vt,v=!1,v),y().then((()=>{h?.postMessage?.({filterKeyword:e})})))}));let q=P>750&&L>695;function H(){o?(n(6,$.style.overflow="hidden",$),n(6,$.style.overflow="",$),$?.children?.[0]?.scrollIntoView?.({container:$,behavior:"smooth",block:"nearest",inline:"start"})):(!r&&matchMedia("(hover:hover)").matches||(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow=""),window.scrollTo({top:-9999,behavior:"smooth"}))}window.addEventListener("scroll",(()=>{document.documentElement.scrollTop>500?n(22,O=!0):n(22,O=!1)}),{passive:!0});return e.$$.update=()=>{16777232&e.$$.dirty[0]&&n(3,o=a??Oe("gridFullView")??(!r&&q)),2097167&e.$$.dirty[0]&&n(9,i=o&&V&&(U<F||P>596.5)),12582920&e.$$.dirty[0]&&n(8,l=!o&&!s&&O)},[F,U,V,o,r,L,$,j,l,i,p,v,b,A,T,N,R,B,function(){D&&clearTimeout(D)},H,async function(e,t){if(t&&t!==yn){e.src=vn;let n=await Kt(t);n&&(e.src=n)}else e.src=yn},P,O,s,a,e=>{e?.target?.src!==vn&&(Ue(e.target,"fade-out"),Fe(e.target?.closest?.(".shimmer"),"loaded"))},e=>{Fe(e.target,"fade-out"),Fe(e.target,"display-none")},(e,t)=>B(t,e),(e,t)=>"Enter"===t.key&&R(e),function(e,t,n){K[e?"unshift":"push"]((()=>{t[n].gridElement=e}))},function(e){K[e?"unshift":"push"]((()=>{$=e,n(6,$)}))},e=>{if(o&&(function(e,t){let n=e.target;n.classList.contains(t)||(n=n.closest("."+t)),n.scrollWidth<=n.clientWidth||0!==e.deltaY&&0===e.deltaX&&(e.preventDefault(),e.stopPropagation(),n.scrollLeft=Math.max(0,n.scrollLeft+e.deltaY))}(e,"image-grid"),!j)){n(7,j=!0);let e=window.scrollMaxY||Number.MAX_SAFE_INTEGER;document.documentElement.scrollTop=e,n(7,j=!1)}},e=>{let t=e?.target;n(0,F=U),n(1,U=t?.scrollLeft),n(2,V=U>500)},e=>"Enter"===e.key&&H()]}let xn,kn,Sn,An=1e3,En=!1,Tn=!1;const Nn=(e={})=>new Promise(((t,n)=>{En=!0,He.set(0),Bt("./webapi/worker/animeLoader.js").then((o=>{Sn&&(Sn.terminate(),Sn=null),e?.filterOptions&&e?.activeTagFilters?(xn=e?.filterOptions,kn=e?.activeTagFilters,e.hasPassedFilters=!0):xn&&kn&&(e.filterOptions=xn,e.activeTagFilters=kn,e.hasPassedFilters=!0),Sn=new Worker(o),Sn.postMessage(e),Sn.onmessage=({data:e})=>{e?.hasOwnProperty("progress")?e?.progress>=0&&e?.progress<=100&&He.set(e.progress):e?.hasOwnProperty("status")?(En=!0,Qe.set(e.status)):e?.isNew&&(!0===e?.hasPassedFilters&&(xn=kn=void 0),En=!1,Sn.onmessage=null,Tt.set(!1),He.set(100),t(Object.assign({},e,{animeLoaderWorker:Sn})))},Sn.onerror=e=>{He.set(100),n(e)}})).catch((e=>{He.set(100),Jn(),n(e)}))}));let $n,In;const Ln=(e={})=>new Promise(((t,n)=>{En=!0,In&&In.terminate(),He.set(0),Bt("./webapi/worker/processRecommendedAnimeList.js").then((o=>{$n&&clearTimeout($n),e?.filterOptions&&e?.activeTagFilters?(xn=e?.filterOptions,kn=e?.activeTagFilters,e.hasPassedFilters=!0):xn&&kn&&(e.filterOptions=xn,e.activeTagFilters=kn,e.hasPassedFilters=!0),In=new Worker(o),In.postMessage(e),In.onmessage=({data:e})=>{if(e?.hasOwnProperty("progress"))e?.progress>=0&&e?.progress<=100&&He.set(e.progress);else if(e?.hasOwnProperty("status"))En=!0,Qe.set(e.status);else if(e?.animeReleaseNotification){if(c(Be))try{let t=e?.animeReleaseNotification;"number"==typeof t?.releaseEpisodes&&"number"==typeof t?.releaseDateMillis&&"number"==typeof t?.maxEpisode&&"string"==typeof t?.title&&"number"==typeof t?.id&&"boolean"==typeof t?.isMyAnime&&"string"==typeof t?.imageURL&&JSBridge.addAnimeReleaseNotification(t.id,t.title,t.releaseEpisodes,t.maxEpisode,t.releaseDateMillis,t?.imageURL,t.isMyAnime)}catch(e){}}else!0===e?.hasPassedFilters&&(xn=kn=void 0),En=!1,$n=setTimeout((()=>{In.terminate()}),An),He.set(100),t()},In.onerror=e=>{He.set(100),n(e)}})).catch((e=>{He.set(100),Jn(),n(e)}))}));let Pn,Cn;const Mn=e=>new Promise(((t,n)=>{Cn&&Cn.terminate(),He.set(0),Bt("./webapi/worker/requestAnimeEntries.js").then((o=>{Cn=new Worker(o),Pn&&clearTimeout(Pn),Cn.postMessage(e),Cn.onmessage=({data:e})=>{e?.hasOwnProperty("progress")?!En&&e?.progress>=0&&e?.progress<=100&&He.set(e.progress):e?.hasOwnProperty("status")?En||Qe.set(e.status):void 0!==e?.updateRecommendationList?Ft.update((e=>!e)):e?.lastRunnedAutoUpdateDate instanceof Date&&!isNaN(e?.lastRunnedAutoUpdateDate)?ot.set(e.lastRunnedAutoUpdateDate):(void 0!==e?.errorDuringInit||(Pn=setTimeout((()=>{Cn.terminate()}),An),He.set(100)),t(e))},Cn.onerror=e=>{He.set(100),n(e)}})).catch((e=>{He.set(100),Jn(),n(e)}))}));let Dn,Fn;const Un=e=>new Promise(((t,n)=>{c(ut)||(Tn||c(Ze))&&et.set(!1),Fn&&Fn.terminate(),He.set(0),Bt("./webapi/worker/requestUserEntries.js").then((o=>{Fn=new Worker(o),Dn&&clearTimeout(Dn),Fn.postMessage(e),Fn.onmessage=({data:e})=>{e?.hasOwnProperty("progress")?!En&&e?.progress>=0&&e?.progress<=100&&He.set(e.progress):e?.hasOwnProperty("status")?En||(Qe.set(e.status),"User not found"===e.status&&(et.set(!1),jt.update((e=>!e)),window.confirmPromise({isAlert:!0,text:"User is not found, you may want to try again..."}),Dn=setTimeout((()=>{Fn.terminate()}),An),He.set(100),n(e))):e?.error?(et.set(!1),jt.update((e=>!e)),Dn=setTimeout((()=>{Fn.terminate()}),An),He.set(100),n(e)):void 0!==e?.updateRecommendationList?Ft.update((e=>!e)):(et.set(!1),Dn=setTimeout((()=>{Fn.terminate()}),An),He.set(100),t(e))},Fn.onerror=e=>{et.set(!1),jt.update((e=>!e)),Dn=setTimeout((()=>{Fn.terminate()}),An),He.set(100),n(e)}})).catch((e=>{et.set(!1),He.set(100),jt.update((e=>!e)),Jn(),n(e)}))}));let jn;const On=e=>new Promise(((e,t)=>{if(!c(ut)){if(c(Ze))return;zn(),Tn=!0}jn&&jn.terminate(),He.set(0),Bt("./webapi/worker/exportUserData.js").then((n=>{jn=new Worker(n),c(Be)?jn.postMessage("android"):jn.postMessage("browser"),jn.onmessage=({data:t})=>{if(t?.hasOwnProperty("progress"))t?.progress>=0&&t?.progress<=100&&He.set(t.progress);else if(t?.hasOwnProperty("status"))En=!0,Qe.set(t.status);else if(c(Be)){En=!1;let n=t.chunk,o=t.state;if(0===o)JSBridge.exportJSON("",0,"");else if(1===o)JSBridge.exportJSON(n,1,"");else if(2===o){let o=t.username??null;JSBridge.exportJSON(n,2,`Kanshi.${o?.toLowerCase()||"Backup"}.json`),He.set(100),jn.terminate(),Tn=!1,e(t)}}else{En=!1;let n=t.username??null;He.set(100),((e,t)=>{De&&setTimeout((()=>URL.revokeObjectURL(De)),0),De=e;const n=document.createElement("a");n.href=e,n.download=t,n.click()})(t.url,`Kanshi.${n?.toLowerCase()||"Backup"}.json`),Tn=!1,e(t)}},jn.onerror=e=>{He.set(100),Tn=!1,window.confirmPromise?.({isAlert:!0,title:"Export Failed",text:"Data is not exported, please try again in a later time."}),t(e)}})).catch((e=>{He.set(100),Tn=!1,Jn(),t(e)}))}));let Vn,_n;const Rn=e=>new Promise(((t,n)=>{Bt("./webapi/worker/getIDBdata.js").then((o=>{let i=new Worker(o);i.postMessage({name:e}),i.onmessage=({data:e})=>{e?.hasOwnProperty("status")?Qe.set(e.status):(i.terminate(),t(e))},i.onerror=e=>{n(e)}})).catch((()=>{Jn(),n(error)}))})),Bn=(e,t)=>new Promise(((n,o)=>{Bt("./webapi/worker/saveIDBdata.js").then((i=>{let l=new Worker(i);l.onmessage=({data:e})=>{e?.hasOwnProperty("status")?Qe.set(e.status):(setTimeout((()=>{l.terminate(),l=null}),An),n())},l.onerror=e=>{o(e)},l.postMessage({data:e,name:t}),"boolean"==typeof e&&Ve(t,e)})).catch((e=>{Jn(),o(e)}))}));let qn,Hn;let Wn,Gn,Kn;const Yn=e=>new Promise(((t,n)=>{Gn=setInterval((()=>{Hn||Qe.set("Getting Filters")}),300),Bt("./webapi/worker/getFilterOptions.js").then((o=>{Gn&&(clearInterval(Gn),Gn=null),Kn&&Kn.terminate(),Kn=new Worker(o),Wn&&clearTimeout(Wn),Kn.postMessage(e),Kn.onmessage=({data:e})=>{e?.hasOwnProperty("status")?(En=!0,Qe.set(e.status)):(En=!1,Wn=setTimeout((()=>{Kn.terminate()}),An),t(e))},Kn.onerror=e=>{n(e)}})).catch((e=>{Gn&&(clearInterval(Gn),Gn=null),Qe.set(null),Jn(),n(e)}))}));function zn(){He.set(0),Cn?.terminate?.(),Fn?.terminate?.(),et.set(!1),_n?.terminate?.(),Ze.set(!1),jn?.terminate?.(),Tn=!1,Kn?.terminate?.(),clearInterval(Hn),Hn=null,clearInterval(Gn),Gn=null,Qe.set(null)}function Jn(){c(Be)?window.confirmPromise?.({isAlert:!0,title:"Something Went Wrong",text:"App may not be working properly, you may want to restart and make sure you're running the latest version."}):window.confirmPromise?.({isAlert:!0,title:"Something Went Wrong",text:"App may not be working properly, you may want to refresh the page, or if not clear the cookies but backup your data first."})}function Xn(e,t){return new Promise((async(n,o)=>{await Bn(e,t).then((e=>{n(e)})).catch((e=>{o(e)}))}))}async function Qn(e){return new Promise((async(t,n)=>{await Rn(e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}function Zn(e,t,n){const o=e.slice();return o[116]=t[n],o[117]=t,o[118]=n,o}function eo(e,t,n){const o=e.slice();return o[119]=t[n],o}function to(e,t,n){const o=e.slice();return o[122]=t[n],o}function no(e,t,n){const o=e.slice();return o[125]=t[n],o}function oo(e){let t,n,o=[],i=new Map,l=e[9]||[];const r=e=>e[116]?.id||{};for(let t=0;t<l.length;t+=1){let n=Zn(e,l,t),s=r(n);i.set(s,o[t]=To(s,n))}let s=e[9]?.length&&!e[14]&&No();return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=$(),s&&s.c(),n=I()},m(e,i){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,i);S(e,t,i),s&&s.m(e,i),S(e,n,i)},p(e,a){6241971&a[0]&&(l=e[9]||[],o=ve(o,a,r,1,e,l,i,t.parentNode,he,To,t,Zn)),e[9]?.length&&!e[14]?s||(s=No(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(e){for(let t=0;t<o.length;t+=1)o[t].d(e);e&&A(t),s&&s.d(e),e&&A(n)}}}function io(e){let t;return{c(){t=T("div"),C(t,"class","trailer display-none svelte-1vt6vmc")},m(e,n){S(e,t,n)},d(e){e&&A(t)}}}function lo(e){let t,n,o,r,s;return{c(){t=T("img"),C(t,"loading","lazy"),C(t,"width","640px"),C(t,"height","360px"),C(t,"alt",n=(e[116]?.shownTitle||"")+(e[116].bannerImageUrl?" Banner":" Thumbnail")),C(t,"class","bannerImg fade-out svelte-1vt6vmc")},m(n,i){S(n,t,i),r||(s=[m(o=e[31].call(null,t,e[116].bannerImageUrl||e[116].trailerThumbnailUrl||Co)),L(t,"load",e[33]),L(t,"error",e[34])],r=!0)},p(i,r){e=i,512&r[0]&&n!==(n=(e[116]?.shownTitle||"")+(e[116].bannerImageUrl?" Banner":" Thumbnail"))&&C(t,"alt",n),o&&l(o.update)&&512&r[0]&&o.update.call(null,e[116].bannerImageUrl||e[116].trailerThumbnailUrl||Co)},d(e){e&&A(t),r=!1,i(s)}}}function ro(e){let t;return{c(){t=N("Auto")},m(e,n){S(e,t,n)},d(e){e&&A(t)}}}function so(e){let t;return{c(){t=N("Auto Play")},m(e,n){S(e,t,n)},d(e){e&&A(t)}}}function ao(e){let t,n,o,l,r,s,a,c=e[4]>=320?"List Update":e[4]>=205?"Update":e[4]>=180?"List":"";return{c(){t=T("div"),n=T("i"),o=$(),l=T("h3"),r=N(c),C(n,"class","list-update-icon fa-solid fa-arrows-rotate svelte-1vt6vmc"),C(l,"class","list-update-label svelte-1vt6vmc"),C(t,"class","list-update-container svelte-1vt6vmc"),C(t,"tabindex","0")},m(i,c){S(i,t,c),b(t,n),b(t,o),b(t,l),b(l,r),s||(a=[L(t,"click",e[19]),L(t,"keydown",e[42])],s=!0)},p(e,t){16&t[0]&&c!==(c=e[4]>=320?"List Update":e[4]>=205?"Update":e[4]>=180?"List":"")&&M(r,c)},d(e){e&&A(t),s=!1,i(a)}}}function co(e){let t,n,o,l,r,s,a,c=e[116].bannerImageUrl?"Banner":"Thumbnail";function u(){return e[43](e[116])}function d(...t){return e[44](e[116],...t)}return{c(){t=T("div"),n=T("i"),o=$(),l=T("h3"),r=N(c),C(n,"class","banner-image-icon fa-solid fa-image svelte-1vt6vmc"),C(l,"class","banner-image-label svelte-1vt6vmc"),C(t,"class","banner-image-button svelte-1vt6vmc"),C(t,"tabindex","0")},m(e,i){S(e,t,i),b(t,n),b(t,o),b(t,l),b(l,r),s||(a=[L(t,"click",u),L(t,"keydown",d)],s=!0)},p(t,n){e=t,512&n[0]&&c!==(c=e[116].bannerImageUrl?"Banner":"Thumbnail")&&M(r,c)},d(e){e&&A(t),s=!1,i(a)}}}function uo(e){let t,n,o,i,l,r,s=(e[116]?.format||"NA")+"",a=(e[20](e[116])||" · NA")+"",c=(e[116]?.formattedDuration||" · NA")+"";return{c(){t=T("h4"),n=N(s),o=$(),i=new j(!1),l=$(),r=N(c),i.a=l,C(t,"class","svelte-1vt6vmc")},m(e,s){S(e,t,s),b(t,n),b(t,o),i.m(a,t),b(t,l),b(t,r)},p(e,t){512&t[0]&&s!==(s=(e[116]?.format||"NA")+"")&&M(n,s),512&t[0]&&a!==(a=(e[20](e[116])||" · NA")+"")&&i.p(a),512&t[0]&&c!==(c=(e[116]?.formattedDuration||" · NA")+"")&&M(r,c)},d(e){e&&A(t)}}}function po(e){let t,n,o,i,l,s=(e[116]?.format||"NA")+"",a=e[13]||1,c=(e[116]?.formattedDuration||" · NA")+"",u=fo(e);return{c(){t=T("h4"),n=N(s),o=$(),u.c(),i=$(),l=N(c),C(t,"class","svelte-1vt6vmc")},m(e,r){S(e,t,r),b(t,n),b(t,o),u.m(t,null),b(t,i),b(t,l)},p(e,o){512&o[0]&&s!==(s=(e[116]?.format||"NA")+"")&&M(n,s),8192&o[0]&&r(a,a=e[13]||1)?(u.d(1),u=fo(e),u.c(),u.m(t,i)):u.p(e,o),512&o[0]&&c!==(c=(e[116]?.formattedDuration||" · NA")+"")&&M(l,c)},d(e){e&&A(t),u.d(e)}}}function fo(e){let t,n,o=(e[20](e[116])||" · NA")+"";return{c(){t=new j(!1),n=I(),t.a=n},m(e,i){t.m(o,e,i),S(e,n,i)},p(e,n){512&n[0]&&o!==(o=(e[20](e[116])||" · NA")+"")&&t.p(o)},d(e){e&&A(n),e&&t.d()}}}function mo(t){let n;return{c(){n=T("h4"),n.textContent="NA",C(n,"class","svelte-1vt6vmc")},m(e,t){S(e,n,t)},p:e,d(e){e&&A(n)}}}function ho(e){let t,n,o,i=(`${e[116]?.season||""}${e[116]?.year?" "+e[116].year:""}`||"NA")+"";return{c(){t=T("span"),n=N(i),F(t,"text-align","right"),C(t,"class","copy svelte-1vt6vmc"),C(t,"copy-value",o=`${e[116]?.season||""}${e[116]?.year?" "+e[116].year:""}`||"NA")},m(e,o){S(e,t,o),b(t,n)},p(e,l){512&l[0]&&i!==(i=(`${e[116]?.season||""}${e[116]?.year?" "+e[116].year:""}`||"NA")+"")&&M(n,i),512&l[0]&&o!==(o=`${e[116]?.season||""}${e[116]?.year?" "+e[116].year:""}`||"NA")&&C(t,"copy-value",o)},d(e){e&&A(t)}}}function yo(e){let t,n,o,i,l,r=e[116].userScore+"";return{c(){t=N(" · "),n=$(),o=T("i"),i=$(),l=N(r),C(o,"class","fa-regular fa-star svelte-1vt6vmc")},m(e,r){S(e,t,r),S(e,n,r),S(e,o,r),S(e,i,r),S(e,l,r)},p(e,t){512&t[0]&&r!==(r=e[116].userScore+"")&&M(l,r)},d(e){e&&A(t),e&&A(n),e&&A(o),e&&A(i),e&&A(l)}}}function vo(e){let t,n,o,l,r,s,a=[],c=new Map,u=e[116].studios;const d=e=>e[125]?.studio||{};for(let t=0;t<u.length;t+=1){let n=no(e,u,t),o=d(n);c.set(o,a[t]=wo(o,n))}function f(...t){return e[45](e[116],e[117],e[118],...t)}return{c(){t=T("div"),n=T("div"),n.textContent="Studios",o=$(),l=T("div");for(let e=0;e<a.length;e+=1)a[e].c();C(n,"class","info-categ svelte-1vt6vmc"),C(l,"class",p("studio-popup info")+" svelte-1vt6vmc"),F(l,"overflow",e[7]?"hidden":""),C(t,"class","svelte-1vt6vmc")},m(i,c){S(i,t,c),b(t,n),b(t,o),b(t,l);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(l,null);r||(s=[L(l,"scroll",e[22]),L(l,"mouseenter",f)],r=!0)},p(t,n){e=t,512&n[0]&&(u=e[116].studios,a=ve(a,n,d,1,e,u,c,l,he,wo,null,no)),128&n[0]&&F(l,"overflow",e[7]?"hidden":"")},d(e){e&&A(t);for(let e=0;e<a.length;e+=1)a[e].d();r=!1,i(s)}}}function wo(e,t){let n,o,i,l,r,s,a,c,u=(t[125]?.studio?.studioName||"N/A")+"";return{key:e,first:null,c(){n=T("a"),o=N(u),i=$(),C(n,"class",l=p("copy"+(t[125]?.studioColor?` ${t[125]?.studioColor}-color`:""))+" svelte-1vt6vmc"),C(n,"rel",r=t[125]?.studio?.studioUrl?"noopener noreferrer":""),C(n,"target",s=t[125]?.studio?.studioUrl?"_blank":""),C(n,"href",a=t[125]?.studio?.studioUrl||"javascript:void(0)"),C(n,"copy-value",c=t[125]?.studio?.studioName||""),this.first=n},m(e,t){S(e,n,t),b(n,o),b(n,i)},p(e,i){t=e,512&i[0]&&u!==(u=(t[125]?.studio?.studioName||"N/A")+"")&&M(o,u),512&i[0]&&l!==(l=p("copy"+(t[125]?.studioColor?` ${t[125]?.studioColor}-color`:""))+" svelte-1vt6vmc")&&C(n,"class",l),512&i[0]&&r!==(r=t[125]?.studio?.studioUrl?"noopener noreferrer":"")&&C(n,"rel",r),512&i[0]&&s!==(s=t[125]?.studio?.studioUrl?"_blank":"")&&C(n,"target",s),512&i[0]&&a!==(a=t[125]?.studio?.studioUrl||"javascript:void(0)")&&C(n,"href",a),512&i[0]&&c!==(c=t[125]?.studio?.studioName||"")&&C(n,"copy-value",c)},d(e){e&&A(n)}}}function go(e){let t,n,o,l,r,s,a=[],c=new Map,u=e[116].genres;const d=e=>e[122]?.genre||{};for(let t=0;t<u.length;t+=1){let n=to(e,u,t),o=d(n);c.set(o,a[t]=bo(o,n))}function f(...t){return e[46](e[116],e[117],e[118],...t)}return{c(){t=T("div"),n=T("div"),n.textContent="Genres",o=$(),l=T("div");for(let e=0;e<a.length;e+=1)a[e].c();C(n,"class","info-categ svelte-1vt6vmc"),C(l,"class",p("genres-popup info")+" svelte-1vt6vmc"),F(l,"overflow",e[7]?"hidden":""),C(t,"class","svelte-1vt6vmc")},m(i,c){S(i,t,c),b(t,n),b(t,o),b(t,l);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(l,null);r||(s=[L(l,"scroll",e[22]),L(l,"mouseenter",f)],r=!0)},p(t,n){e=t,512&n[0]&&(u=e[116].genres,a=ve(a,n,d,1,e,u,c,l,he,bo,null,to)),128&n[0]&&F(l,"overflow",e[7]?"hidden":"")},d(e){e&&A(t);for(let e=0;e<a.length;e+=1)a[e].d();r=!1,i(s)}}}function bo(e,t){let n,o,i,l,r,s=(t[122]?.genre||"N/A")+"";return{key:e,first:null,c(){n=T("span"),o=N(s),i=$(),C(n,"class",l=p("copy "+(t[122]?.genreColor?`${t[122]?.genreColor}-color`:""))+" svelte-1vt6vmc"),C(n,"copy-value",r=t[122]?.genre||""),this.first=n},m(e,t){S(e,n,t),b(n,o),b(n,i)},p(e,i){t=e,512&i[0]&&s!==(s=(t[122]?.genre||"N/A")+"")&&M(o,s),512&i[0]&&l!==(l=p("copy "+(t[122]?.genreColor?`${t[122]?.genreColor}-color`:""))+" svelte-1vt6vmc")&&C(n,"class",l),512&i[0]&&r!==(r=t[122]?.genre||"")&&C(n,"copy-value",r)},d(e){e&&A(n)}}}function xo(e){let t,n,o,l,r=[],s=new Map,a=e[116].tags;const c=e=>e[119]?.tag||{};for(let t=0;t<a.length;t+=1){let n=eo(e,a,t),o=c(n);s.set(o,r[t]=ko(o,n))}function u(...t){return e[47](e[116],e[117],e[118],...t)}return{c(){t=T("div"),n=T("div");for(let e=0;e<r.length;e+=1)r[e].c();C(n,"class",p("tags-info-content info")+" svelte-1vt6vmc"),F(n,"overflow",e[7]?"hidden":""),C(t,"class","tag-info svelte-1vt6vmc")},m(i,s){S(i,t,s),b(t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(n,null);o||(l=[L(n,"scroll",e[22]),L(n,"mouseenter",u)],o=!0)},p(t,o){e=t,512&o[0]&&(a=e[116].tags,r=ve(r,o,c,1,e,a,s,n,he,ko,null,eo)),128&o[0]&&F(n,"overflow",e[7]?"hidden":"")},d(e){e&&A(t);for(let e=0;e<r.length;e+=1)r[e].d();o=!1,i(l)}}}function ko(e,t){let n,o,i,l,r,s=(t[119]?.tag||"N/A")+"";return{key:e,first:null,c(){n=T("span"),o=new j(!1),i=$(),o.a=i,C(n,"class",l=p("copy "+(t[119]?.tagColor?`${t[119]?.tagColor}-color`:""))+" svelte-1vt6vmc"),C(n,"copy-value",r=t[119]?.copyValue||""),this.first=n},m(e,t){S(e,n,t),o.m(s,n),b(n,i)},p(e,i){t=e,512&i[0]&&s!==(s=(t[119]?.tag||"N/A")+"")&&o.p(s),512&i[0]&&l!==(l=p("copy "+(t[119]?.tagColor?`${t[119]?.tagColor}-color`:""))+" svelte-1vt6vmc")&&C(n,"class",l),512&i[0]&&r!==(r=t[119]?.copyValue||"")&&C(n,"copy-value",r)},d(e){e&&A(n)}}}function So(e){let t,n,o,l,r,s,a=Fo(e[116]?.description)+"";function c(){return e[51](e[116])}function u(...t){return e[52](e[116],...t)}return{c(){t=T("div"),n=T("h3"),n.textContent="Description",o=$(),l=T("div"),C(n,"class","svelte-1vt6vmc"),C(l,"class","anime-description svelte-1vt6vmc"),C(t,"class","anime-description-wrapper svelte-1vt6vmc"),C(t,"tabindex","0")},m(e,i){S(e,t,i),b(t,n),b(t,o),b(t,l),l.innerHTML=a,r||(s=[L(t,"click",c),L(t,"keydown",u)],r=!0)},p(t,n){e=t,512&n[0]&&a!==(a=Fo(e[116]?.description)+"")&&(l.innerHTML=a)},d(e){e&&A(t),r=!1,i(s)}}}function Ao(t){let n;return{c(){n=N("N/A")},m(e,t){S(e,n,t)},p:e,d(e){e&&A(n)}}}function Eo(e){let t,n=" "+(e[11][e[116]?.id]?"Show":"Hide");return{c(){t=N(n)},m(e,n){S(e,t,n)},p(e,o){2560&o[0]&&n!==(n=" "+(e[11][e[116]?.id]?"Show":"Hide"))&&M(t,n)},d(e){e&&A(t)}}}function To(e,t){let n,o,r,s,a,c,u,d,f,h,y,v,w,g,x,k,E,I,P,D,U,O,V,_,R,B,q,H,W,G,K,Y,z,J,X,Q,Z,ee,te,ne,oe,ie,le,re,se,ae,ce,ue,de,pe,fe,me,he,ye,ve,we,ge,be,xe,ke,Se,Ae,Ee,Te,Ne,$e,Ie,Le,Pe,Ce,Me,De,Fe,Ue,je,Oe,Ve,_e,Re,Be,qe,He,We,Ge,Ke,Ye,ze,Je,Xe,Qe=t[117],Ze=t[118],et=(t[116]?.shownTitle||"NA")+"",tt=(null!=t[116].averageScore&&t[116].formattedAverageScore||"NA")+"",nt="/10 · "+(null!=t[116].popularity&&t[116].formattedPopularity||"NA"),ot=(t[116]?.recommendedRatingInfo||"")+"",it=(t[116].userStatus||"NA")+"",lt=(t[116].status||"NA")+"",rt=t[116].trailerID&&io(),st=(t[116].bannerImageUrl||t[116].trailerThumbnailUrl)&&lo(t);const at=()=>t[35](r,Qe,Ze),ct=()=>t[35](null,Qe,Ze);function ut(){return t[36](t[116])}function dt(...e){return t[37](t[116],...e)}function pt(e,t){return e[4]>=290?so:e[4]>=260?ro:void 0}let ft=pt(t),mt=ft&&ft(t),ht=t[12]&&ao(t),yt=(t[116].bannerImageUrl||t[116].trailerThumbnailUrl)&&co(t);function vt(e,t){return e[116]?.nextAiringEpisode?.airingAt?po:uo}let wt=vt(t),gt=wt(t);function bt(e,t){return e[116]?.season||e[116]?.year?ho:mo}let xt=bt(t),kt=xt(t),St=null!=t[116].userScore&&yo(t),At=t[116].studios?.length&&vo(t),Et=t[116].genres.length&&go(t),Tt=t[116]?.tags?.length&&xo(t);function Nt(){return t[49](t[116])}function $t(...e){return t[50](t[116],...e)}let It=t[116]?.description&&So(t);const Lt=()=>t[53](q,Qe,Ze),Pt=()=>t[53](null,Qe,Ze);function Ct(e,t){return e[11]?Eo:Ao}let Mt=Ct(t),Dt=Mt(t);function Ft(...e){return t[54](t[116],...e)}function Ut(...e){return t[55](t[116],...e)}function jt(){return t[56](t[116])}function Ot(...e){return t[57](t[116],...e)}const Vt=()=>t[58](n,Qe,Ze),_t=()=>t[58](null,Qe,Ze);return{key:e,first:null,c(){n=T("div"),o=T("div"),r=T("div"),s=T("div"),s.innerHTML='<i class="fa-solid fa-k fa-fade svelte-1vt6vmc"></i>',a=$(),rt&&rt.c(),c=$(),u=T("div"),st&&st.c(),f=$(),h=T("div"),y=T("div"),v=T("label"),w=T("label"),g=N("Auto Play"),k=$(),E=T("input"),P=$(),D=T("span"),U=$(),O=T("h3"),mt&&mt.c(),V=$(),ht&&ht.c(),_=$(),yt&&yt.c(),R=$(),B=T("div"),q=T("div"),H=T("div"),W=T("a"),G=N(et),Q=$(),Z=T("div"),ee=T("i"),te=$(),ne=T("h3"),oe=T("b"),ie=N(tt),le=$(),re=N(nt),se=$(),ae=N(" · "),ce=new j(!1),de=$(),pe=T("div"),gt.c(),fe=$(),kt.c(),me=$(),he=T("div"),ye=T("h4"),ve=T("a"),we=T("span"),ge=N(it),xe=$(),St&&St.c(),Te=$(),Ne=T("h4"),$e=N(lt),Le=$(),Pe=T("div"),At&&At.c(),Ce=$(),Et&&Et.c(),Me=$(),Tt&&Tt.c(),De=$(),Fe=T("div"),Ue=T("img"),_e=$(),It&&It.c(),Re=$(),Be=T("div"),qe=T("button"),He=T("i"),We=$(),Dt.c(),Ge=$(),Ke=T("button"),Ke.innerHTML='<i class="fa-brands fa-youtube svelte-1vt6vmc"></i> YouTube',Ye=$(),ze=T("button"),ze.innerHTML='<img loading="lazy" class="anilist-icon svelte-1vt6vmc" src="./images/Anilist-Logo.svg" alt="Anilist Logo" width="23px" height="23px"/> Anilist',C(s,"class","popup-header-loading svelte-1vt6vmc"),C(u,"class","popup-img svelte-1vt6vmc"),C(r,"class",d=p("popup-header "+(t[116].trailerID?"loader":""))+" svelte-1vt6vmc"),C(r,"tabindex","0"),C(w,"class","disable-interaction svelte-1vt6vmc"),C(w,"for",x="auto-play-"+t[116]?.id),C(E,"id",I="auto-play-"+t[116]?.id),C(E,"type","checkbox"),C(E,"class","autoplayToggle svelte-1vt6vmc"),C(D,"class","slider round svelte-1vt6vmc"),C(D,"tabindex","0"),C(v,"class","switch svelte-1vt6vmc"),C(O,"class","autoplay-label svelte-1vt6vmc"),C(y,"class","autoPlay-container svelte-1vt6vmc"),C(h,"class","popup-controls svelte-1vt6vmc"),C(W,"rel",K=t[116].animeUrl?"noopener noreferrer":""),C(W,"target",Y=t[116].animeUrl?"_blank":""),C(W,"href",z=t[116].animeUrl||"javascript:void(0)"),C(W,"class",J=p(t[116]?.contentCautionColor+"-color anime-title copy")+" svelte-1vt6vmc"),C(W,"copy-value",X=t[116]?.copiedTitle||""),F(W,"overflow",t[7]?"hidden":""),C(ee,"class","fa-regular fa-star svelte-1vt6vmc"),C(oe,"class","svelte-1vt6vmc"),ce.a=null,C(ne,"class","copy svelte-1vt6vmc"),C(ne,"copy-value",ue=(null!=t[116].averageScore&&t[116].formattedAverageScore||"NA")+"/10 · "+(null!=t[116].popularity&&t[116].formattedPopularity||"NA")),C(Z,"class","info-rating-wrapper svelte-1vt6vmc"),C(H,"class","anime-title-container svelte-1vt6vmc"),F(H,"overflow",t[7]?"hidden":""),C(pe,"class","info-format svelte-1vt6vmc"),F(pe,"overflow",t[7]?"hidden":""),C(we,"class",be=p(t[116].userStatusColor+"-color")+" svelte-1vt6vmc"),C(ve,"rel",ke=t[116].animeUrl?"noopener noreferrer":""),C(ve,"target",Se=t[116].animeUrl?"_blank":""),C(ve,"href",Ae=t[116].animeUrl||"javascript:void(0)"),C(ve,"class","svelte-1vt6vmc"),C(ye,"class","copy svelte-1vt6vmc"),C(ye,"copy-value",Ee=(t[116].userStatus||"NA")+(null!=t[116].userScore?" · "+t[116].userScore:"")),F(Ne,"text-align","right"),C(Ne,"class","copy year-season svelte-1vt6vmc"),C(Ne,"copy-value",Ie=t[116].status||""),C(he,"class","info-status svelte-1vt6vmc"),F(he,"overflow",t[7]?"hidden":""),C(Pe,"class","info-contents svelte-1vt6vmc"),C(Ue,"loading","lazy"),C(Ue,"width","150px"),C(Ue,"height","210px"),C(Ue,"alt",je=(t[116]?.shownTitle||"")+(t[116].coverImageUrl?" Cover":t[116].bannerImageUrl?" Banner":" Thumbnail")),C(Ue,"tabindex","0"),C(Ue,"class",Oe=p("coverImg"+(t[116].coverImageUrl||t[116].bannerImageUrl||t[116].trailerThumbnailUrl?"":" display-none"))+" svelte-1vt6vmc"),C(Fe,"class","info-profile svelte-1vt6vmc"),C(q,"class","popup-info svelte-1vt6vmc"),F(q,"--windowWidth",t[4]+"px"),F(q,"--windowHeight",t[5]+"px"),C(He,"class","fa-solid fa-circle-minus hideshow svelte-1vt6vmc"),C(qe,"class","hideshowbtn svelte-1vt6vmc"),F(qe,"overflow",t[7]?"hidden":""),C(Ke,"class","morevideos svelte-1vt6vmc"),F(Ke,"overflow",t[7]?"hidden":""),C(ze,"class","openanilist svelte-1vt6vmc"),F(ze,"overflow",t[7]?"hidden":""),C(Be,"class","footer svelte-1vt6vmc"),C(B,"class","popup-body svelte-1vt6vmc"),C(o,"class","popup-main svelte-1vt6vmc"),C(n,"class","popup-content svelte-1vt6vmc"),this.first=n},m(e,i){S(e,n,i),b(n,o),b(o,r),b(r,s),b(r,a),rt&&rt.m(r,null),b(r,c),b(r,u),st&&st.m(u,null),at(),b(o,f),b(o,h),b(h,y),b(y,v),b(v,w),b(w,g),b(v,k),b(v,E),E.checked=t[10],b(v,P),b(v,D),b(y,U),b(y,O),mt&&mt.m(O,null),b(h,V),ht&&ht.m(h,null),b(h,_),yt&&yt.m(h,null),b(o,R),b(o,B),b(B,q),b(q,H),b(H,W),b(W,G),b(H,Q),b(H,Z),b(Z,ee),b(Z,te),b(Z,ne),b(ne,oe),b(oe,ie),b(ne,le),b(ne,re),b(ne,se),b(ne,ae),ce.m(ot,ne),b(q,de),b(q,pe),gt.m(pe,null),b(pe,fe),kt.m(pe,null),b(q,me),b(q,he),b(he,ye),b(ye,ve),b(ve,we),b(we,ge),b(ve,xe),St&&St.m(ve,null),b(he,Te),b(he,Ne),b(Ne,$e),b(q,Le),b(q,Pe),At&&At.m(Pe,null),b(Pe,Ce),Et&&Et.m(Pe,null),b(Pe,Me),Tt&&Tt.m(Pe,null),b(q,De),b(q,Fe),b(Fe,Ue),b(Fe,_e),It&&It.m(Fe,null),Lt(),b(B,Re),b(B,Be),b(Be,qe),b(qe,He),b(qe,We),Dt.m(qe,null),b(Be,Ge),b(Be,Ke),b(Be,Ye),b(Be,ze),Vt(),Je||(Xe=[L(r,"click",ut),L(r,"keydown",dt),L(E,"change",t[38]),L(D,"keydown",t[39]),L(O,"click",t[40]),L(O,"keydown",t[41]),L(W,"scroll",t[22]),L(H,"scroll",t[22]),L(pe,"scroll",t[22]),L(he,"scroll",t[22]),m(Ve=t[31].call(null,Ue,t[116].coverImageUrl||t[116].bannerImageUrl||t[116].trailerThumbnailUrl||Co)),L(Ue,"error",t[48]),L(Ue,"click",Nt),L(Ue,"keydown",$t),L(qe,"click",(function(){l(t[16](t[116].id,t[116]?.title?.english))&&t[16](t[116].id,t[116]?.title?.english).apply(this,arguments)})),L(qe,"keydown",Ft),L(Ke,"click",(function(){l(t[18](t[116].title))&&t[18](t[116].title).apply(this,arguments)})),L(Ke,"keydown",Ut),L(ze,"click",jt),L(ze,"keydown",Ot)],Je=!0)},p(e,n){(t=e)[116].trailerID?rt||(rt=io(),rt.c(),rt.m(r,c)):rt&&(rt.d(1),rt=null),t[116].bannerImageUrl||t[116].trailerThumbnailUrl?st?st.p(t,n):(st=lo(t),st.c(),st.m(u,null)):st&&(st.d(1),st=null),512&n[0]&&d!==(d=p("popup-header "+(t[116].trailerID?"loader":""))+" svelte-1vt6vmc")&&C(r,"class",d),Qe===t[117]&&Ze===t[118]||(ct(),Qe=t[117],Ze=t[118],at()),512&n[0]&&x!==(x="auto-play-"+t[116]?.id)&&C(w,"for",x),512&n[0]&&I!==(I="auto-play-"+t[116]?.id)&&C(E,"id",I),1024&n[0]&&(E.checked=t[10]),ft!==(ft=pt(t))&&(mt&&mt.d(1),mt=ft&&ft(t),mt&&(mt.c(),mt.m(O,null))),t[12]?ht?ht.p(t,n):(ht=ao(t),ht.c(),ht.m(h,_)):ht&&(ht.d(1),ht=null),t[116].bannerImageUrl||t[116].trailerThumbnailUrl?yt?yt.p(t,n):(yt=co(t),yt.c(),yt.m(h,null)):yt&&(yt.d(1),yt=null),512&n[0]&&et!==(et=(t[116]?.shownTitle||"NA")+"")&&M(G,et),512&n[0]&&K!==(K=t[116].animeUrl?"noopener noreferrer":"")&&C(W,"rel",K),512&n[0]&&Y!==(Y=t[116].animeUrl?"_blank":"")&&C(W,"target",Y),512&n[0]&&z!==(z=t[116].animeUrl||"javascript:void(0)")&&C(W,"href",z),512&n[0]&&J!==(J=p(t[116]?.contentCautionColor+"-color anime-title copy")+" svelte-1vt6vmc")&&C(W,"class",J),512&n[0]&&X!==(X=t[116]?.copiedTitle||"")&&C(W,"copy-value",X),128&n[0]&&F(W,"overflow",t[7]?"hidden":""),512&n[0]&&tt!==(tt=(null!=t[116].averageScore&&t[116].formattedAverageScore||"NA")+"")&&M(ie,tt),512&n[0]&&nt!==(nt="/10 · "+(null!=t[116].popularity&&t[116].formattedPopularity||"NA"))&&M(re,nt),512&n[0]&&ot!==(ot=(t[116]?.recommendedRatingInfo||"")+"")&&ce.p(ot),512&n[0]&&ue!==(ue=(null!=t[116].averageScore&&t[116].formattedAverageScore||"NA")+"/10 · "+(null!=t[116].popularity&&t[116].formattedPopularity||"NA"))&&C(ne,"copy-value",ue),128&n[0]&&F(H,"overflow",t[7]?"hidden":""),wt===(wt=vt(t))&&gt?gt.p(t,n):(gt.d(1),gt=wt(t),gt&&(gt.c(),gt.m(pe,fe))),xt===(xt=bt(t))&&kt?kt.p(t,n):(kt.d(1),kt=xt(t),kt&&(kt.c(),kt.m(pe,null))),128&n[0]&&F(pe,"overflow",t[7]?"hidden":""),512&n[0]&&it!==(it=(t[116].userStatus||"NA")+"")&&M(ge,it),512&n[0]&&be!==(be=p(t[116].userStatusColor+"-color")+" svelte-1vt6vmc")&&C(we,"class",be),null!=t[116].userScore?St?St.p(t,n):(St=yo(t),St.c(),St.m(ve,null)):St&&(St.d(1),St=null),512&n[0]&&ke!==(ke=t[116].animeUrl?"noopener noreferrer":"")&&C(ve,"rel",ke),512&n[0]&&Se!==(Se=t[116].animeUrl?"_blank":"")&&C(ve,"target",Se),512&n[0]&&Ae!==(Ae=t[116].animeUrl||"javascript:void(0)")&&C(ve,"href",Ae),512&n[0]&&Ee!==(Ee=(t[116].userStatus||"NA")+(null!=t[116].userScore?" · "+t[116].userScore:""))&&C(ye,"copy-value",Ee),512&n[0]&&lt!==(lt=(t[116].status||"NA")+"")&&M($e,lt),512&n[0]&&Ie!==(Ie=t[116].status||"")&&C(Ne,"copy-value",Ie),128&n[0]&&F(he,"overflow",t[7]?"hidden":""),t[116].studios?.length?At?At.p(t,n):(At=vo(t),At.c(),At.m(Pe,Ce)):At&&(At.d(1),At=null),t[116].genres.length?Et?Et.p(t,n):(Et=go(t),Et.c(),Et.m(Pe,Me)):Et&&(Et.d(1),Et=null),t[116]?.tags?.length?Tt?Tt.p(t,n):(Tt=xo(t),Tt.c(),Tt.m(Pe,null)):Tt&&(Tt.d(1),Tt=null),512&n[0]&&je!==(je=(t[116]?.shownTitle||"")+(t[116].coverImageUrl?" Cover":t[116].bannerImageUrl?" Banner":" Thumbnail"))&&C(Ue,"alt",je),512&n[0]&&Oe!==(Oe=p("coverImg"+(t[116].coverImageUrl||t[116].bannerImageUrl||t[116].trailerThumbnailUrl?"":" display-none"))+" svelte-1vt6vmc")&&C(Ue,"class",Oe),Ve&&l(Ve.update)&&512&n[0]&&Ve.update.call(null,t[116].coverImageUrl||t[116].bannerImageUrl||t[116].trailerThumbnailUrl||Co),t[116]?.description?It?It.p(t,n):(It=So(t),It.c(),It.m(Fe,null)):It&&(It.d(1),It=null),Qe===t[117]&&Ze===t[118]||(Pt(),Qe=t[117],Ze=t[118],Lt()),16&n[0]&&F(q,"--windowWidth",t[4]+"px"),32&n[0]&&F(q,"--windowHeight",t[5]+"px"),Mt===(Mt=Ct(t))&&Dt?Dt.p(t,n):(Dt.d(1),Dt=Mt(t),Dt&&(Dt.c(),Dt.m(qe,null))),128&n[0]&&F(qe,"overflow",t[7]?"hidden":""),128&n[0]&&F(Ke,"overflow",t[7]?"hidden":""),128&n[0]&&F(ze,"overflow",t[7]?"hidden":""),Qe===t[117]&&Ze===t[118]||(_t(),Qe=t[117],Ze=t[118],Vt())},d(e){e&&A(n),rt&&rt.d(),st&&st.d(),ct(),mt&&mt.d(),ht&&ht.d(),yt&&yt.d(),gt.d(),kt.d(),St&&St.d(),At&&At.d(),Et&&Et.d(),Tt&&Tt.d(),It&&It.d(),Pt(),Dt.d(),_t(),Je=!1,i(Xe)}}}function No(e){let t;return{c(){t=T("div"),t.innerHTML='<i class="popup-content-loading-icon fa-solid fa-k fa-fade svelte-1vt6vmc"></i>',C(t,"class","popup-content-loading svelte-1vt6vmc")},m(e,n){S(e,t,n)},d(e){e&&A(t)}}}function $o(e){let t,n,o,i,l,r;return{c(){t=T("div"),n=T("div"),o=T("i"),C(o,"class","fa-solid fa-arrow-left svelte-1vt6vmc"),C(n,"class",i=p("go-back-grid"+(e[6]>=100?" willGoBack":""))+" svelte-1vt6vmc"),C(t,"class","go-back-grid-highlight svelte-1vt6vmc"),F(t,"--scale",Math.max(1,.01*(e[6]??1)*2)),F(t,"--position","-"+(100-(e[6]??0))+"%")},m(e,i){S(e,t,i),b(t,n),b(n,o),r=!0},p(e,o){(!r||64&o[0]&&i!==(i=p("go-back-grid"+(e[6]>=100?" willGoBack":""))+" svelte-1vt6vmc"))&&C(n,"class",i),64&o[0]&&F(t,"--scale",Math.max(1,.01*(e[6]??1)*2)),64&o[0]&&F(t,"--position","-"+(100-(e[6]??0))+"%")},i(e){r||(l&&l.end(1),r=!0)},o(e){l=me(t,Vt,{duration:200}),r=!1},d(e){e&&A(t),e&&l&&l.end()}}}function Io(e){let t,n,o,l,r,s,a,c;return{c(){t=T("div"),n=T("div"),o=T("div"),l=T("div"),C(l,"tabindex","0"),C(l,"class","fullPopupDescription svelte-1vt6vmc"),C(o,"class","fullPopupDescriptionWrapper svelte-1vt6vmc"),C(n,"class","fullPopup svelte-1vt6vmc"),C(n,"id","fullPopup"),C(t,"class","fullPopupWrapper svelte-1vt6vmc")},m(i,r){S(i,t,r),b(t,n),b(n,o),b(o,l),l.innerHTML=e[1],s=!0,a||(c=[L(l,"keydown",e[62]),L(l,"scroll",e[27]),L(t,"click",e[63]),L(t,"keydown",e[64]),L(t,"touchstart",e[28],{passive:!0}),L(t,"touchend",e[29],{passive:!0}),L(t,"touchcancel",e[30],{passive:!0})],a=!0)},p(e,t){(!s||2&t[0])&&(l.innerHTML=e[1])},i(e){s||(r&&r.end(1),s=!0)},o(e){r=me(l,Vt,{duration:200}),s=!1},d(e){e&&A(t),e&&r&&r.end(),a=!1,i(c)}}}function Lo(e){let t,n,o,r,s,a,c,u;return{c(){t=T("div"),n=T("div"),o=T("img"),C(o,"tabindex","0"),C(o,"class","fullPopupImage svelte-1vt6vmc"),C(o,"loading","lazy"),C(o,"alt","Full View"),C(n,"class","fullPopup svelte-1vt6vmc"),C(n,"id","fullPopup"),C(t,"class","fullPopupWrapper svelte-1vt6vmc")},m(i,l){S(i,t,l),b(t,n),b(n,o),a=!0,c||(u=[m(r=e[31].call(null,o,e[0]||Co)),L(o,"keydown",e[65]),L(o,"error",e[66]),L(t,"click",e[67]),L(t,"keydown",e[68]),L(t,"touchstart",e[28],{passive:!0}),L(t,"touchend",e[29],{passive:!0}),L(t,"touchcancel",e[30],{passive:!0})],c=!0)},p(e,t){r&&l(r.update)&&1&t[0]&&r.update.call(null,e[0]||Co)},i(e){a||(s&&s.end(1),a=!0)},o(e){s=me(o,Vt,{duration:200}),a=!1},d(e){e&&A(t),e&&s&&s.end(),c=!1,i(u)}}}function Po(e){let t,n,o,l,r,s,a,c,u,d=e[9]?.length&&oo(e),p=e[8]&&e[7]&&$o(e),f=e[1]&&Io(e),m=e[0]&&Lo(e);return{c(){t=T("div"),n=T("div"),d&&d.c(),o=$(),p&&p.c(),l=$(),f&&f.c(),r=$(),m&&m.c(),s=I(),C(n,"id","popup-container"),C(n,"class","popup-container hide svelte-1vt6vmc"),C(t,"id","popup-wrapper"),C(t,"class","popup-wrapper svelte-1vt6vmc")},m(i,h){S(i,t,h),b(t,n),d&&d.m(n,null),e[59](n),e[61](t),S(i,o,h),p&&p.m(i,h),S(i,l,h),f&&f.m(i,h),S(i,r,h),m&&m.m(i,h),S(i,s,h),a=!0,c||(u=[L(n,"touchstart",e[23],{passive:!0}),L(n,"touchmove",e[24],{passive:!0}),L(n,"touchend",e[25],{passive:!0}),L(n,"touchcancel",e[26],{passive:!0}),L(n,"scroll",e[21]),L(t,"click",e[15]),L(t,"keydown",e[60])],c=!0)},p(e,t){e[9]?.length?d?d.p(e,t):(d=oo(e),d.c(),d.m(n,null)):d&&(d.d(1),d=null),e[8]&&e[7]?p?(p.p(e,t),384&t[0]&&de(p,1)):(p=$o(e),p.c(),de(p,1),p.m(l.parentNode,l)):p&&(ce(),pe(p,1,1,(()=>{p=null})),ue()),e[1]?f?(f.p(e,t),2&t[0]&&de(f,1)):(f=Io(e),f.c(),de(f,1),f.m(r.parentNode,r)):f&&(ce(),pe(f,1,1,(()=>{f=null})),ue()),e[0]?m?(m.p(e,t),1&t[0]&&de(m,1)):(m=Lo(e),m.c(),de(m,1),m.m(s.parentNode,s)):m&&(ce(),pe(m,1,1,(()=>{m=null})),ue())},i(e){a||(de(p),de(f),de(m),a=!0)},o(e){pe(p),pe(f),pe(m),a=!1},d(n){n&&A(t),d&&d.d(),e[59](null),e[61](null),n&&A(o),p&&p.d(n),n&&A(l),f&&f.d(n),n&&A(r),m&&m.d(n),n&&A(s),c=!1,i(u)}}}const Co="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",Mo="data:image/jpeg;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Do(e){"string"==typeof e&&""!==e&&window.open(e,"_blank")}function Fo(e){let t=document.createElement("span");t.innerHTML=e;let n=t.querySelectorAll("a");return Array.from(n).forEach((e=>{e?.setAttribute("rel","noopener noreferrer"),e?.setAttribute("target","_blank")})),t.innerHTML}function Uo(e,t,n){let o,i,l,r,s,a,c,d,p,m,h,y,v,w,g,b,x,k,S,A;u(e,Be,(e=>n(32,o=e))),u(e,Nt,(e=>n(7,i=e))),u(e,St,(e=>n(8,l=e))),u(e,Qe,(e=>n(96,r=e))),u(e,at,(e=>n(97,s=e))),u(e,Ft,(e=>n(98,a=e))),u(e,Je,(e=>n(9,c=e))),u(e,ut,(e=>n(99,d=e))),u(e,ct,(e=>n(10,p=e))),u(e,qe,(e=>n(100,m=e))),u(e,Ke,(e=>n(11,h=e))),u(e,wt,(e=>n(101,y=e))),u(e,Xe,(e=>n(102,v=e))),u(e,Tt,(e=>n(12,w=e))),u(e,gt,(e=>n(103,g=e))),u(e,ht,(e=>n(104,b=e))),u(e,At,(e=>n(105,x=e))),u(e,mt,(e=>n(106,k=e))),u(e,ft,(e=>n(13,S=e))),u(e,vt,(e=>n(14,A=e)));let E,T,N,$,I,L,P,C,M,D,F,U=window.navigator.onLine,j=Math.max(window.visualViewport.width,window.innerWidth),O=Math.max(window.visualViewport.height,window.innerHeight),V={},_=!o&&matchMedia("(hover:hover)").matches?50:100;function R(e){let t=e.target;t.classList.contains("popup-container")||t.closest(".popup-container")||f(St,l=!1,l)}async function B(e,t){t=t?`<b>${t}</b>`:"this anime",h[e]?await g(`Are you sure you want to show ${t} in your recommendation list?`)&&k().then((()=>{delete h[e],Ke.set(h),c.length&&v instanceof Worker&&v?.postMessage?.({removeID:e})})).catch((()=>{g({isAlert:!0,title:"Something went wrong",text:"Showing anime has failed, please try again."})})):await g(`Are you sure you want to hide ${t} in your recommendation list?`)&&k().then((()=>{f(Ke,h[e]=!0,h),c.length&&v instanceof Worker&&v?.postMessage?.({removeID:e})})).catch((()=>{g({isAlert:!0,title:"Something went wrong",text:"Hiding anime has failed, please try again."})}))}async function q(e){let t;Te(e)?t=e?.romaji||e?.userPreferred||e?.english||e?.native:"string"==typeof e&&(t=e),"string"==typeof t&&""!==t&&await g({title:"See Related Videos",text:"Are you sure you want see more related videos in YouTube?"})&&H(t)}async function H(e){let t;Te(e)?t=e?.romaji||e?.userPreferred||e?.english||e?.native:"string"==typeof e&&(t=e),"string"==typeof t&&""!==t&&window.open(`https://www.youtube.com/results?search_query=${t} Anime`,"_blank")}async function G(){if(!l)return;await Z();let e,t=T?.querySelector?.(".trailer"),n=Ie(T?.closest?.(".popup-content"))??-1;if(D&&clearTimeout(D),D=setTimeout((()=>{if(!l)return;let e=c?.[n]?.gridElement||E.children?.[n];l&&e instanceof Element&&!function(e,t,n=0){try{var o=t.getBoundingClientRect(),i=e.getBoundingClientRect(),l=getComputedStyle(e).overflowX,r=getComputedStyle(e).overflowY;if("auto"===l||"scroll"===l||"auto"===r||"scroll"===r){var s=e.scrollLeft,a=e.scrollTop,c=o.top>=i.top&&o.left>=i.left&&o.bottom<=i.bottom&&o.right<=i.right;if(c||(c=(Math.max(o.top,i.top)-Math.min(o.bottom,i.bottom))*(Math.max(o.left,i.left)-Math.min(o.right,i.right))/(Math.min(o.height,window.innerHeight)*Math.min(o.width,window.innerWidth))>=n),!c)return!1;o={top:o.top-i.top+a,left:o.left-i.left+s,bottom:o.bottom-i.top+a,right:o.right-i.left+s,height:o.height,width:o.width}}var u=window.innerHeight||document.documentElement.clientHeight,d=window.innerWidth||document.documentElement.clientWidth;return o.top>=0&&o.left>=0&&o.bottom<=u&&o.right<=d}catch(e){return}}(E,e,.5)&&(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow="",E.style.overflow="hidden",E.style.overflow="",e.scrollIntoView({behavior:"smooth",block:"nearest"}))}),300),t instanceof Element&&(e=s?.some((({ytPlayer:e})=>e.g===t))),e){if(n>=0){N=n;let e=[[c?.[n+1],n+1],[c?.[n-1],n-1]];F&&clearTimeout(F),F=setTimeout((async()=>{l&&e.forEach((([e,t])=>{e&&J(e,t)}))}),300)}for(let e=0;e<s.length;e++)if(s[e].ytPlayer.g===t&&1!==s[e].ytPlayer?.getPlayerState?.())if(await Z(),l&&m&&(p||2===s[e].ytPlayer?.getPlayerState?.()))X(s[e].ytPlayer),s[e].ytPlayer?.playVideo?.();else{if(!p){let t=s?.[e]?.ytPlayer,n=t?.g;if(n&&null!=t?.getPlayerState?.()&&-1!==t?.getPlayerState?.()){let e=n?.parentElement,t=e?.querySelector?.(".popup-img");Fe(t,"fade-out"),Ue(e,"loader"),Ue(n,"display-none"),setTimeout((()=>{Fe(t,"display-none"),Ue(t,"fade-out")}),200)}}s[e].ytPlayer?.pauseVideo?.()}else if(s[e].ytPlayer.g!==t){if(!p){let t=s?.[e]?.ytPlayer,n=t?.g;if(n&&null!=t?.getPlayerState?.()&&-1!==t?.getPlayerState?.()){let e=n?.parentElement,t=e?.querySelector?.(".popup-img");Fe(t,"fade-out"),Ue(e,"loader"),Ue(n,"display-none"),setTimeout((()=>{Fe(t,"display-none"),Ue(t,"fade-out")}),200)}}s[e].ytPlayer?.pauseVideo?.()}}else if(s?.forEach((({ytPlayer:e})=>e?.pauseVideo?.())),n>=0){N=n;let e=[[c?.[n],n],[c?.[n+1],n+1],[c?.[n-1],n-1]];F&&clearTimeout(F),F=setTimeout((async()=>{l&&e.forEach((([e,t])=>{e&&J(e,t)}))}),300)}}(async()=>{_=await Qn("savedYtVolume")||_})(),yt.subscribe((async e=>{if(l&&null!=e&&e>=0){await Z();let t=L?.children?.[e];t instanceof Element&&L instanceof Element&&Le(L,t,"top")}})),Ke.subscribe((async e=>{Te(e)&&await Xn(e,"hiddenEntries")})),St.subscribe((async e=>{if(I instanceof Element&&L instanceof Element)if(!0===e){let e=L?.children[x??N??0];if(e instanceof Element){Le(L,e,"top","instant"),requestAnimationFrame((()=>{Fe(I,"willChange"),Fe(L,"willChange"),Fe(I,"visible"),Fe(L,"show"),setTimeout((()=>{Ue(I,"willChange"),Ue(L,"willChange")}),200)})),N=x;let t,n=[[c[x],x],[c[x+1],x+1],[c[x-1],x-1]],o=n[0][0]?.popupHeader?.querySelector?.(".trailer")||L?.children?.[x]?.querySelector?.(".trailer");for(let e=0;e<s.length;e++)if(s[e].ytPlayer.g===o&&(t=!0,m&&p)){await Z(),X(s[e].ytPlayer),s[e].ytPlayer?.playVideo?.();break}n.forEach((([e,n],o)=>{t&&e&&0===o||e&&J(e,n)})),f(At,x=null,x)}else requestAnimationFrame((()=>{Fe(I,"willChange"),Fe(L,"willChange"),Fe(I,"visible"),Fe(L,"show"),setTimeout((()=>{Ue(I,"willChange"),Ue(L,"willChange")}),200)}))}else!1===e&&requestAnimationFrame((()=>{Fe(I,"willChange"),Fe(L,"willChange"),Ue(L,"show"),setTimeout((()=>{s.forEach((({ytPlayer:e})=>{e?.pauseVideo?.()})),Ue(I,"visible"),Ue(L,"willChange"),setTimeout((()=>{Ue(I,"willChange")}),200)}),200)}))})),Je.subscribe((async e=>{if(e instanceof Array&&e.length){P&&(P?.disconnect?.(),P=null),await Z(),P=new IntersectionObserver((()=>{if(!l)return;let e=$e(L,".popup-header",O>360?.5:0)||$e(L,".popup-content",0)?.getElementsByClassName("popup-header")?.[0];T=e,G()}),{root:null,rootMargin:"100%",threshold:[.5,0]}),e.forEach((async(e,t)=>{let n=e.popupHeader||L.children?.[t]?.querySelector?.(".popup-header");n instanceof Element&&P?.observe?.(n)}));let t=c.length-1,n=c[t].popupContent||L.children?.[t];b&&n instanceof Element&&b.observe(n),G()}else e instanceof Array&&e.length<1&&f(St,l=!1,l)})),ct.subscribe((async e=>{if("boolean"==typeof e&&(await Xn(e,"autoPlay"),!0===e)){await Z();let e=T?.querySelector?.(".trailer");for(let t=0;t<s.length;t++)s[t].ytPlayer.g===e&&m?(X(s[t].ytPlayer),s[t].ytPlayer?.playVideo?.()):s[t].ytPlayer?.pauseVideo?.()}})),W((()=>{n(2,I=I||document.getElementById("popup-wrapper")),n(3,L=L||I.querySelector("#popup-container")),E=document.getElementById("anime-grid"),window.addEventListener("resize",(()=>{document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement||(n(4,j=Math.max(window.visualViewport.width,window.innerWidth)),n(5,O=Math.max(window.visualViewport.height,window.innerHeight)))})),document.addEventListener("keydown",(async e=>{if("Escape"!==e.key||document.fullscreenElement||(e.preventDefault(),window.backPressed?.())," "===e.key&&l){e.preventDefault();let t=T?.querySelector?.(".trailer"),n=s?.some((({ytPlayer:e})=>t===e.g&&1===e?.getPlayerState?.()));if(s.forEach((({ytPlayer:e})=>{e?.pauseVideo?.()})),!n){await Z();for(let e=0;e<s.length;e++)if(s[e].ytPlayer.g===t&&m){X(s[e].ytPlayer),s[e].ytPlayer?.playVideo?.();break}}}else e.ctrlKey&&"x"===e.key?.toLowerCase?.()?(e.preventDefault(),f(St,l=!l,l)):e.ctrlKey&&"k"===e.key?.toLowerCase?.()&&(e.preventDefault(),f(ct,p=!p,p))}))}));let Y,z={};function J(e,t){let n=e?.popupHeader||L.children?.[t]?.querySelector(".popup-header"),o=n?.querySelector?.(".trailer")||n?.querySelector?.(".trailer"),i=e?.trailerID;if(o instanceof Element&&i&&"undefined"!=typeof YT){if(s.some((({ytPlayer:e})=>e.g===o)))return;Fe(n,"loader");let e=n?.querySelector?.(".popup-img");if(s.length>=3){let t=0,i=-1/0;s.forEach(((e,n)=>{if(-1===e.headerIdx)return;let o=Math.abs(e.headerIdx-N);o>i&&(i=o,t=n)}));let l=s?.splice?.(t,1)?.[0]?.ytPlayer,r=l?.g?.closest?.(".popup-header");l?.destroy?.();let a=r?.querySelector?.(".popup-img");a instanceof Element&&Ue(a,"display-none");let c=document.createElement("div");c.className="trailer",Fe(o,"display-none"),Ue(e,"display-none"),n.replaceChild(c,o),Fe(o,"display-none"),o=n.querySelector(".trailer")}else Fe(o,"display-none");Ue(e,"display-none"),o.setAttribute("id","yt-player"+Date.now()+Math.random());let r=new YT.Player(o,{playerVars:{cc_lang_pref:"en",cc_load_policy:1,enablejsapi:1,modestbranding:1,playsinline:1,playlist:i,rel:0},events:{onReady:e=>{!async function(e){let t=e.target,n=t?.g,o=n?.parentElement,i=o?.closest?.(".popup-content"),l=c?.[Ie(i)??-1];if(-1!==t.getPlayerState()&&"IFRAME"===n.tagName&&U){if(n?.setAttribute?.("loading","lazy"),!p){let e=o?.querySelector?.(".popup-img");Fe(e,"fade-out"),Ue(o,"loader"),Ue(n,"display-none"),setTimeout((()=>{Fe(e,"display-none"),Ue(e,"fade-out")}),200)}G(),l?.id&&delete z[l.id]}else{l?.id&&(z[l.id]=!0),f(at,s=s.filter((e=>e.ytPlayer!==t)),s),t.destroy(),Fe(n,"display-none"),Ue(o,"loader");let e=o?.querySelector?.(".popup-img");Ue(e,"display-none")}}(e)},onStateChange:e=>{!function(e){let t=e.target;if(!t||!t?.getPlayerState)return;let n=t?.g,o=n?.parentElement,i=o?.querySelector?.(".popup-img"),r=o?.closest?.(".popup-content"),a=c?.[Ie(r)??-1]?.id;0===t?.getPlayerState?.()?null!=a&&(V[a]&&(clearTimeout(V[a]),V[a]=null),V[a]=setTimeout((()=>{t?.stopVideo?.(),setTimeout((()=>{T===o&&5===t?.getPlayerState?.()&&t.g&&m&&l&&p&&t?.playVideo?.()}),5e3)}),7e3)):V[a]&&(clearTimeout(V[a]),V[a]=null);1!==t?.getPlayerState?.()||!n?.classList?.contains?.("display-none")&&i?.classList?.contains?.("display-none")||(s?.forEach((({ytPlayer:e})=>e?.g!==t?.g&&e?.pauseVideo?.())),$=t,Fe(i,"fade-out"),Ue(o,"loader"),Ue(n,"display-none"),setTimeout((()=>{Fe(i,"display-none"),Ue(i,"fade-out")}),200))}(e)},onError:e=>{!function(e){let t=e.target,n=t?.g,o=n?.parentElement,i=o?.querySelector?.(".popup-img");f(at,s=s.filter((e=>e.ytPlayer!==t)),s),t.destroy(),Fe(n,"display-none"),Ue(o,"loader"),Ue(i,"display-none")}(e)}}}),a=`https://www.youtube.com/embed/${i}`;o.setAttribute("src",a),s.push({ytPlayer:r,headerIdx:t})}else{let e=n?.querySelector?.(".popup-img");Ue(n,"loader"),Ue(e,"display-none")}}function X(e){if($?.isMuted&&$?.getVolume){let t=$?.isMuted?.(),n=$?.getVolume?.();"boolean"==typeof t&&(t?e?.mute?.():e?.unMute?.()),"number"==typeof n&&(_!==n&&(_=n,Xn(_,"savedYtVolume")),e?.setVolume?.(_))}}async function Q(e){if(await g({title:"List update is available",text:"Are you sure you want to refresh the list?"})){let t,n=e.target,o=n.classList;t=o.contains("list-update-container")?n.querySelector?.(".list-update-icon"):n?.closest(".list-update-container")?.querySelector?.(".list-update-icon"),Y&&clearTimeout(Y),Fe(t,"fa-spin"),v&&(v.terminate(),f(Xe,v=null,v)),Nn().then((async e=>{f(Tt,w=!1,w),Y=setTimeout((()=>{Ue(t,"fa-spin")}),200),f(Xe,v=e.animeLoaderWorker,v),f(wt,y="",y),e?.isNew&&(f(Je,c=e.finalAnimeList,c),f(Ke,h=e.hiddenEntries,h)),f(Qe,r=null,r)})).catch((e=>{throw e}))}}function ee(e,t){const n=864e5,o=7*n,i=e=>e.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit",hour12:!0});return t>o?`${Ne(t,1)}, ${l=e,l.toLocaleDateString(void 0,{month:"short"})} ${(e=>e.toLocaleDateString(void 0,{day:"numeric"}))(e)} ${(e=>e.toLocaleDateString(void 0,{year:"numeric"}))(e)}`:t<=o&&t>n?`${Ne(t,1)}, ${(e=>e.toLocaleDateString(void 0,{weekday:"short"}))(e)}, ${i(e).toLowerCase()}`:`${Ne(t,2)}, ${i(e).toLowerCase()}`;var l}let te,ne,oe,ie,le,re,se,ae,ce,ue,de,pe,fe,me,he,ye=!1;function ve(){new Promise((e=>{let t=document.getElementById("www-widgetapi-script");t&&t.parentElement.removeChild(t);let n=document.createElement("script");n.src="https://www.youtube.com/iframe_api?v=16",n.onerror=()=>{e()},n.onload=()=>{window?.onYouTubeIframeAPIReady?.(),e()};let o=document.getElementsByTagName("script")[0];o.parentElement.insertBefore(n,o)})).then((()=>{f(at,s=s.filter((({ytPlayer:e})=>{if("function"!=typeof e?.playVideo||-1===e.getPlayerState()||isNaN(e.getPlayerState())){e.destroy();let t=e?.g?.closest?.(".popup-header")?.querySelector?.(".popup-img");return t instanceof Element&&Ue(t,"display-none"),!1}return!0})),s),G()}))}function we(){ue=de=pe=fe=me=he=!1}window.returnedAppIsVisible=e=>{if(!o)return;if(f(qe,m=e,m),!l||d)return;let t=T?.querySelector?.(".trailer");if(t)if(m)for(let e=0;e<s.length;e++)s[e]?.ytPlayer.g===t&&(p||2===s[e]?.ytPlayer?.getPlayerState?.()&&ye)?(X(s[e]?.ytPlayer),s[e]?.ytPlayer?.playVideo?.()):s[e]?.ytPlayer?.pauseVideo?.();else{ye=!1;for(let e=0;e<s.length;e++)s[e]?.ytPlayer.g===t&&1===s[e]?.ytPlayer?.getPlayerState?.()&&(ye=!0),s[e]?.ytPlayer?.pauseVideo?.()}},document.addEventListener("visibilitychange",(()=>{if(o)return;if(f(qe,m="visible"===document.visibilityState,m),!l||d)return;let e=T?.querySelector?.(".trailer");if(e)if(m)for(let t=0;t<s.length;t++)s[t]?.ytPlayer.g===e&&(p||2===s[t]?.ytPlayer?.getPlayerState?.()&&ye)?(X(s[t]?.ytPlayer),s[t]?.ytPlayer?.playVideo?.()):s[t]?.ytPlayer?.pauseVideo?.();else{ye=!1;for(let t=0;t<s.length;t++)s[t]?.ytPlayer.g===e&&1===s[t]?.ytPlayer?.getPlayerState?.()&&(ye=!0),s[t]?.ytPlayer?.pauseVideo?.()}})),window.addEventListener("online",(()=>{if(o)try{JSBridge.isOnline(!0)}catch(e){}f(Qe,r="Reconnected Successfully",r),d&&f(ut,d=!1,d),c?.length||f(Ft,a=!a,a),U=!0,document.querySelectorAll("script")?.forEach((e=>{e.src&&"https://www.youtube.com/iframe_api?v=16"!==e.src&&(e.src=e.src)})),document.querySelectorAll("img")?.forEach((e=>{e.naturalHeight||(e.src=e.src)})),ve()})),window.reloadYoutube=ve,window.addEventListener("offline",(()=>{if(o)try{JSBridge.isOnline(!1)}catch(e){}f(Qe,r="Currently Offline...",r),U=!1})),window.checkOpenFullScreenItem=()=>C||M,window.closeFullScreenItem=()=>{C?n(0,C=null):n(1,M=null)};return e.$$.update=()=>{3&e.$$.dirty[0]|2&e.$$.dirty[1]&&(!o&&matchMedia("(hover:hover)").matches||(M||C?Fe(document.documentElement,"overflow-hidden"):Ue(document.documentElement,"overflow-hidden")))},[C,M,I,L,j,O,se,i,l,c,p,h,w,S,A,R,B,q,H,Q,function({episodes:e,nextAiringEpisode:t}){let n,o,i,l;return"number"==typeof t?.episode&&"number"==typeof t?.airingAt&&(l=new Date(1e3*t?.airingAt),i=t?.episode,l instanceof Date&&!isNaN(l)&&(o=l.getTime()-(new Date).getTime())),o>0&&"number"==typeof i&&e>i?n=` · <span style="color:rgb(61, 180, 242);">${i}/${e} in ${ee(l,o)}</span>`:o>0&&"number"==typeof i?n=` · <span style="color:rgb(61, 180, 242);">Ep ${i} in ${ee(l,o)}</span>`:o<=0&&"number"==typeof i&&e>i?n=` · ${i}/${e}`:e>0&&(n=` · ${e}`),n},function(){ae=!0,clearTimeout(ce),ce=setTimeout((()=>{ae=!1}),50),f(Nt,i=!1,i),n(6,se=0)},function(){ae=!0,clearTimeout(ce),ce=setTimeout((()=>{ae=!1}),500)},function(e){if(ae)return;oe=e.touches[0].clientX,le=e.touches[0].clientY,te=e.touches[0].identifier;let t=e.target,n=!1;for(;t&&t!==document.body;){if(t.scrollWidth>t.clientWidth&&t.scrollLeft>0){n="popup-container"!==t.id;break}t=t.parentElement}n||(ne=!0)},function(e){if(ne){ne=!1,ie=e.touches[0].clientX,re=e.touches[0].clientY;const t=ie-oe,n=re-le;Math.abs(t)>Math.abs(n)&&t>0&&f(Nt,i=!0,i)}else if(i){ie=e.touches[0].clientX;const t=ie-oe;n(6,se=t>0?Math.min(t/48*100,100):0)}},function(e){if(i){if(ie=Array.from(e.changedTouches)?.find((e=>e.identifier===te))?.clientX,"number"==typeof ie){i&&ie-oe>=48&&f(St,l=!1,l)}te=null,f(Nt,i=!1,i),n(6,se=0)}else te=null,f(Nt,i=!1,i),n(6,se=0)},function(){te=null,f(Nt,i=!1,i),n(6,se=0)},function(){fe=!0},function(e){if(!L)return;let t=e.target,n=t;for(;n&&n!==document.body;){if(me=t.scrollTop<1,he=Math.abs(t.scrollHeight-t.clientHeight-t.scrollTop)<1,me||he)break;n=n?.parentElement}ue=e?.touches?.[0]?.identifier,de=e?.touches?.[0]?.clientY,pe=e?.touches?.[0]?.clientX},function(e){if(!fe){let t=Array.from(e?.changedTouches||[])?.find((e=>e?.identifier===ue))?.clientY,o=Array.from(e?.changedTouches||[])?.find((e=>e?.identifier===ue))?.clientX,i=t-de,l=o-pe;if("number"==typeof i&&!isNaN(i)&&"number"==typeof l&&!isNaN(l)){(Math.abs(l)>Math.abs(i)||i<0&&he||i>0&&me)&&n(1,M=n(0,C=null))}}we()},we,async function(e,t){if(t&&t!==Co){e.src=Mo;let n=await Kt(t);n&&(e.src=n)}else e.src=Co},o,e=>{e?.target?.src!==Mo&&(Ue(e.target,"fade-out"),Fe(e.target,"fade-in"))},e=>{Ue(e.target,"fade-in"),Fe(e.target,"fade-out"),Fe(e.target,"display-none")},function(e,t,n){K[e?"unshift":"push"]((()=>{t[n].popupHeader=e}))},e=>q(e.title),(e,t)=>"Enter"===t.key&&q(e.title),function(){p=this.checked,ct.set(p)},e=>"Enter"===e.key&&f(ct,p=!p,p),()=>{f(ct,p=!p,p)},e=>{"Enter"===e.key&&f(ct,p=!p,p)},e=>"Enter"===e.key&&Q(e),e=>{window.setShouldGoBack(!1),n(0,C=e.bannerImageUrl||e.trailerThumbnailUrl),n(1,M=null)},(e,t)=>{"Enter"===t.key&&(window.setShouldGoBack(!1),n(0,C=e.bannerImageUrl||e.trailerThumbnailUrl),n(1,M=null))},(e,t,n,o)=>{if(!e?.hasStudioDragScroll){let e=o?.target?.closest?.(".info")||o?.target;e&&(f(Je,t[n].hasStudioDragScroll=!0,c),Ce(e,"x"))}},(e,t,n,o)=>{if(!e?.hasGenreDragScroll){let e=o?.target?.closest?.(".info")||o?.target;e&&(f(Je,t[n].hasGenreDragScroll=!0,c),Ce(e,"x"))}},(e,t,n,o)=>{if(!e?.hasTagDragScroll){let e=o?.target?.closest?.(".info")||o?.target;e&&(f(Je,t[n].hasTagDragScroll=!0,c),Ce(e,"x"))}},e=>{Fe(e.target,"display-none")},e=>{window.setShouldGoBack(!1),n(0,C=e.coverImageUrl||e.bannerImageUrl||e.trailerThumbnailUrl||Co),n(1,M=null)},(e,t)=>{window.setShouldGoBack(!1),"Enter"===t.key&&(n(0,C=e.coverImageUrl||e.bannerImageUrl||e.trailerThumbnailUrl||Co),n(1,M=null))},e=>{window.setShouldGoBack(!1),n(1,M=Fo(e?.description)),n(0,C=null)},(e,t)=>{window.setShouldGoBack(!1),"Enter"===t.key&&(n(1,M=Fo(e?.description)),n(0,C=null))},function(e,t,n){K[e?"unshift":"push"]((()=>{t[n].popupInfo=e}))},(e,t)=>"Enter"===t.key&&B(e.id,e?.title?.english),(e,t)=>"Enter"===t.key&&H(e.title),e=>{Do(e.animeUrl)},(e,t)=>"Enter"===t.key&&Do(e.animeUrl),function(e,t,n){K[e?"unshift":"push"]((()=>{t[n].popupContent=e}))},function(e){K[e?"unshift":"push"]((()=>{L=e,n(3,L)}))},e=>"Enter"===e.key&&R(e),function(e){K[e?"unshift":"push"]((()=>{I=e,n(2,I)}))},e=>"Enter"===e.key&&n(1,M=n(0,C=null)),()=>n(1,M=n(0,C=null)),e=>"Enter"===e.key&&n(1,M=n(0,C=null)),e=>"Enter"===e.key&&n(1,M=n(0,C=null)),e=>{Fe(e.target,"display-none")},()=>n(1,M=n(0,C=null)),e=>"Enter"===e.key&&n(1,M=n(0,C=null))]}function jo(e){let t,n,o,l,r,s,a,c,u,d,p,f,h,y,v,w,g,x,k,E,I,P,D,F=(e[5][e[2]]?"Show":"Hide")+" Anime",U=e[1]&&Oo(e);return{c(){t=T("div"),n=T("div"),o=T("div"),l=T("span"),r=T("h1"),s=N(e[0]),a=$(),c=T("div"),c.textContent="×",u=$(),d=T("span"),d.innerHTML='<h2 class="option-title svelte-1d1yx7m">Information</h2>',p=$(),f=T("span"),f.innerHTML='<h2 class="option-title svelte-1d1yx7m">Open in Anilist</h2>',h=$(),y=T("span"),y.innerHTML='<h2 class="option-title svelte-1d1yx7m">Open in YouTube</h2>',v=$(),U&&U.c(),w=$(),g=T("span"),x=T("h2"),k=N(F),C(r,"class","svelte-1d1yx7m"),C(l,"class","anime-title svelte-1d1yx7m"),C(c,"class","closing-x svelte-1d1yx7m"),C(c,"tabindex","0"),C(o,"class","option-header svelte-1d1yx7m"),C(d,"class","anime-option svelte-1d1yx7m"),C(f,"class","anime-option svelte-1d1yx7m"),C(y,"class","anime-option svelte-1d1yx7m"),C(x,"class","option-title svelte-1d1yx7m"),C(g,"class","anime-option svelte-1d1yx7m"),C(n,"class","anime-options-container svelte-1d1yx7m"),C(t,"class","anime-options svelte-1d1yx7m")},m(i,A){S(i,t,A),b(t,n),b(n,o),b(o,l),b(l,r),b(r,s),b(o,a),b(o,c),b(n,u),b(n,d),b(n,p),b(n,f),b(n,h),b(n,y),b(n,v),U&&U.m(n,null),b(n,w),b(n,g),b(g,x),b(x,k),I=!0,P||(D=[L(c,"click",e[8]),L(c,"keydown",e[15]),L(d,"click",e[9]),L(d,"keydown",e[16]),L(f,"click",e[10]),L(f,"keydown",e[17]),L(y,"click",e[11]),L(y,"keydown",e[18]),L(g,"click",e[13]),L(g,"keydown",e[20]),m(e[14].call(null,t)),L(t,"click",e[8]),L(t,"touchend",e[7],{passive:!0}),L(t,"keydown",e[21])],P=!0)},p(e,t){(!I||1&t[0])&&M(s,e[0]),e[1]?U?U.p(e,t):(U=Oo(e),U.c(),U.m(n,w)):U&&(U.d(1),U=null),(!I||36&t[0])&&F!==(F=(e[5][e[2]]?"Show":"Hide")+" Anime")&&M(k,F)},i(e){I||(E&&E.end(1),I=!0)},o(e){E=me(n,Vt,{duration:200}),I=!1},d(e){e&&A(t),U&&U.d(),e&&E&&E.end(),P=!1,i(D)}}}function Oo(t){let n,o,l;return{c(){n=T("span"),n.innerHTML='<h2 class="option-title svelte-1d1yx7m">Copy Title</h2>',C(n,"class","anime-option svelte-1d1yx7m")},m(e,i){S(e,n,i),o||(l=[L(n,"click",t[12]),L(n,"keydown",t[19])],o=!0)},p:e,d(e){e&&A(n),o=!1,i(l)}}}function Vo(e){let t,n,o=e[3]&&!e[6]&&e[4]&&jo(e);return{c(){o&&o.c(),t=I()},m(e,i){o&&o.m(e,i),S(e,t,i),n=!0},p(e,n){e[3]&&!e[6]&&e[4]?o?(o.p(e,n),88&n[0]&&de(o,1)):(o=jo(e),o.c(),de(o,1),o.m(t.parentNode,t)):o&&(ce(),pe(o,1,1,(()=>{o=null})),ue())},i(e){n||(de(o),n=!0)},o(e){pe(o),n=!1},d(e){o&&o.d(e),e&&A(t)}}}function _o(e,t,n){let o,i,l,r,s,a,c,d,p,m,h,y,v,w,g,b;u(e,xt,(e=>n(3,o=e))),u(e,kt,(e=>n(27,i=e))),u(e,Je,(e=>n(4,l=e))),u(e,gt,(e=>n(28,r=e))),u(e,Xe,(e=>n(29,s=e))),u(e,Ke,(e=>n(5,a=e))),u(e,mt,(e=>n(30,c=e))),u(e,Be,(e=>n(31,d=e))),u(e,St,(e=>n(6,p=e))),u(e,At,(e=>n(32,m=e)));let x,k=!0;function S(e){if(k&&"keydown"!==e.type)return;let t=e.target,n=t.classList;(n.contains("closing-x")||!t.closest(".anime-options-container")&&!n.contains("anime-options-container"))&&f(xt,o=!1,o)}function A(e){k&&"keydown"!==e.type||(f(At,m=b,m),f(St,p=!0,p),f(xt,o=!1,o))}function E(e){k&&"keydown"!==e.type||"string"==typeof g&&""!==g&&window.open(g,"_blank")}async function T(e){k&&"keydown"!==e.type||"string"==typeof y&&""!==y&&window.open(`https://www.youtube.com/results?search_query=${y} Anime`,"_blank")}function N(e){if((!k||"keydown"===e.type)&&v){if(d)try{JSBridge.copyToClipBoard(v)}catch(e){}else navigator?.clipboard?.writeText?.(v);f(xt,o=!1,o)}}async function $(e){if(k&&"keydown"!==e.type)return;let t=h?`<b>${h}</b>`:"this anime";a[w]?await r(`Are you sure you want to show ${t} in your recommendation list?`)&&(c().then((()=>{delete a[w],Ke.set(a),l.length&&s instanceof Worker&&s?.postMessage?.({removeID:w})})).catch((()=>{r({isAlert:!0,title:"Something went wrong",text:"Showing anime has failed, please try again."})})),f(xt,o=!1,o)):await r(`Are you sure you want to hide ${t} in your recommendation list?`)&&(c().then((()=>{f(Ke,a[w]=!0,a),l.length&&s instanceof Worker&&s?.postMessage?.({removeID:w})})).catch((()=>{r({isAlert:!0,title:"Something went wrong",text:"Hiding anime has failed, please try again."})})),f(xt,o=!1,o))}function I(){let e=l?.[i??-1];e?(n(0,h=e?.shownTitle),n(1,v=y=e?.copiedTitle),n(2,w=e.id),g=e.animeUrl,b=i):f(xt,o=!1,o)}xt.subscribe((e=>{!0===e?(k=!0,x=setTimeout((()=>{k=!1}),100)):(x&&clearTimeout(x),k=!1)})),Je.subscribe((()=>{o&&I()}));return[h,v,w,o,l,a,p,function(e){if(k)return;let t=e.target,n=t.classList;t.closest(".anime-options-container")||n.contains("anime-options-container")||f(xt,o=!1,o)},S,A,E,T,N,$,I,e=>"Enter"===e.key&&S(e),e=>"Enter"===e.key&&A(e),e=>"Enter"===e.key&&E(e),e=>"Enter"===e.key&&T(e),e=>"Enter"===e.key&&N(e),e=>"Enter"===e.key&&$(e),e=>"Enter"===e.key&&S(e)]}function Ro(t){let n,o,l,r,a,c,u,d,f,m,h,y,v,w,g,x,k,E,I,P=(t[0]||"Your Anilist Username")+"";return{c(){var e,i;n=T("div"),o=T("nav"),l=T("div"),r=T("i"),a=$(),c=T("div"),u=T("label"),u.textContent="Anilist Username",d=$(),f=T("input"),m=$(),h=T("div"),y=N(P),v=$(),w=T("div"),g=T("img"),C(r,"class",p("goback fa-solid fa-arrow-left")+" svelte-18cyh3p"),C(r,"tabindex","0"),C(l,"class","go-back-container svelte-18cyh3p"),C(u,"class","disable-interaction svelte-18cyh3p"),C(u,"for","usernameInput"),C(f,"id","usernameInput"),C(f,"type","search"),C(f,"enterkeyhint","search"),C(f,"autocomplete","off"),C(f,"placeholder","Your Anilist Username"),C(f,"class","svelte-18cyh3p"),C(h,"class",p("usernameText")+" svelte-18cyh3p"),C(c,"class","input-search svelte-18cyh3p"),C(g,"class","logo-icon svelte-18cyh3p"),e=g.src,i=x="./images/Kanshi-Logo.webp",s||(s=document.createElement("a")),s.href=i,e!==s.href&&C(g,"src","./images/Kanshi-Logo.webp"),C(g,"alt","Kanshi Logo"),C(g,"tabindex","0"),C(g,"width","30px"),C(g,"height","30px"),C(w,"class","logo-icon-container svelte-18cyh3p"),C(o,"id","nav"),C(o,"class",k=p("nav "+(t[3]||t[4]?"popupvisible":t[1]===document?.activeElement?"inputfocused":""))+" svelte-18cyh3p"),C(n,"class","nav-container svelte-18cyh3p")},m(e,i){S(e,n,i),b(n,o),b(o,l),b(l,r),b(o,a),b(o,c),b(c,u),b(c,d),b(c,f),D(f,t[0]),t[15](f),b(c,m),b(c,h),b(h,y),b(o,v),b(o,w),b(w,g),t[18](o),E||(I=[L(r,"keydown",t[12]),L(l,"click",t[8]),L(f,"keydown",t[13]),L(f,"focusin",t[11]),L(f,"focusout",t[11]),L(f,"input",t[14]),L(h,"click",t[7]),L(h,"keydown",t[16]),L(g,"keydown",t[17]),L(w,"pointerdown",t[9]),L(w,"pointerup",t[10]),L(w,"pointercancel",t[10]),L(n,"keydown",t[19]),L(n,"click",t[6])],E=!0)},p(e,t){1&t[0]&&f.value!==e[0]&&D(f,e[0]),1&t[0]&&P!==(P=(e[0]||"Your Anilist Username")+"")&&M(y,P),26&t[0]&&k!==(k=p("nav "+(e[3]||e[4]?"popupvisible":e[1]===document?.activeElement?"inputfocused":""))+" svelte-18cyh3p")&&C(o,"class",k)},i:e,o:e,d(e){e&&A(n),t[15](null),t[18](null),E=!1,i(I)}}}function Bo(e,t,n){let o,i,l,r,s,a,c,d,p;u(e,gt,(e=>n(25,o=e))),u(e,dt,(e=>n(26,i=e))),u(e,St,(e=>n(3,l=e))),u(e,bt,(e=>n(4,r=e))),u(e,Qe,(e=>n(27,s=e))),u(e,Ge,(e=>n(28,a=e))),u(e,et,(e=>n(29,c=e))),u(e,Je,(e=>n(30,d=e))),u(e,ut,(e=>n(31,p=e)));let m,h,y,v,w,g,b=[],x="",k=!1;async function S(e){if(p)return await async function(){return await o({isAlert:!0,title:"Initializing resources",text:"Please wait a moment..."})}(),void E();let t=e.target,i=t.classList;if("Enter"===e.key||"click"===e.type&&(i.contains("searchBtn")||t?.closest?.(".searchBtn"))){if(!x)return;if(x!==a){if(!navigator.onLine)return o({isAlert:!0,title:"Currently Offline",text:"It seems that you're currently offline and unable to update."});(async()=>{a?await o(`Currently connected to ${a}, do you want to change account?`)?(f(bt,r=!1,r),l||(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow="",window?.scrollTo?.({top:-9999,behavior:"smooth"}),f(Je,d=null,d)),f(Qe,s="Getting User Entries",s),f(et,c=!0,c),Un({username:x}).then((({newusername:e})=>{f(et,c=!1,c),e&&(Ve("username",e),n(0,x=f(Ge,a=e||"",a)),Mt.update((e=>!e)))})).catch((e=>{f(Qe,s="Something went wrong...",s),console.error(e)}))):E():await o(`Are you sure you want to connect to ${x}?`)?(f(bt,r=!1,r),l||(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow="",window?.scrollTo?.({top:-9999,behavior:"smooth"}),f(Je,d=null,d)),f(Qe,s="Getting User Entries",s),f(et,c=!0,c),await Un({username:x}).then((({newusername:e})=>{f(et,c=!1,c),e&&(Ve("username",e),n(0,x=f(Ge,a=e||"",a))),Mt.update((e=>!e))})).catch((e=>{f(Qe,s="Something went wrong...",s),console.error(e)}))):E()})()}else v?.blur?.(),k=!1}}function A(e){if(g)return void(g=!1);let t=e.target.classList;return t.contains("nav")||t.contains("logo-icon")?k&&!t.contains("logo-icon")?(v?.blur?.(),void(k=!1)):void f(bt,r=!r,r):void 0}async function E(){v?.focus?.()}function T(){v===document.activeElement||k?(v?.blur?.(),k=!1):r?f(bt,r=!r,r):l&&f(St,l=!1,l)}var N;W((()=>{n(2,y=y||document?.getElementById("nav")),n(1,v=v||document?.getElementById("usernameInput")),m=m||document?.getElementById("anime-grid"),h=h||document?.getElementById("popup-container"),b.push(Ge.subscribe((e=>{n(0,x=e||"")})))})),N=()=>{b.forEach((e=>e()))},H().$$.on_destroy.push(N);return e.$$.update=()=>{3&e.$$.dirty[0]&&x&&v?.setCustomValidity?.("")},[x,v,y,l,r,S,A,E,T,function(){w&&clearTimeout(w),w=setTimeout((()=>{g=!0,l?(h.style.overflow="hidden",h.style.overflow="",h?.children?.[0]?.scrollIntoView?.({container:h,behavior:"smooth",block:"start",inline:"nearest"})):i?(m.style.overflow="hidden",m.style.overflow="",m?.children?.[0]?.scrollIntoView?.({container:m,behavior:"smooth",block:"nearest",inline:"start"})):(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow="",window.scrollTo({top:-9999,behavior:"smooth"}))}),500)},function(){w&&clearTimeout(w),g&&(w=setTimeout((()=>{g=!1}),50))},function(e){"focusin"===e.type?(k=!0,Fe(y,"inputfocused")):setTimeout((()=>{Ue(y,"inputfocused"),k=!1}),100)},e=>"Enter"===e.key&&T(),e=>"Enter"===e.key&&S(e),function(){x=this.value,n(0,x)},function(e){K[e?"unshift":"push"]((()=>{v=e,n(1,v)}))},e=>"Enter"===e.key&&E(),e=>{"Enter"===e.key?(e.stopPropagation(),f(bt,r=!r,r)):"Escape"!==e.key&&e.stopPropagation()},function(e){K[e?"unshift":"push"]((()=>{y=e,n(2,y)}))},e=>"Enter"===e.key&&A(e)]}function qo(e){let t,n,o,l,r,s,a,c,u,d,f,m,h,y,v,w,g,x,k,E,I,P,M,D,F=e[1]&&Ho(e),U=e[1]&&Wo(e),j=e[1]&&Go(e);return{c(){t=T("div"),n=T("div"),o=T("button"),o.textContent="Update List",l=$(),r=T("button"),r.textContent="Show All Hidden Entries",s=$(),a=T("button"),a.textContent="Import Data",c=$(),u=T("button"),u.textContent="Export Data",d=$(),F&&F.c(),f=$(),m=T("button"),h=N("Auto Update"),v=$(),U&&U.c(),w=$(),g=T("button"),g.textContent="Create an Anilist Account",x=$(),j&&j.c(),k=$(),E=T("button"),E.textContent="Reload",C(o,"class","button svelte-1wqc9nc"),C(r,"class","button svelte-1wqc9nc"),C(a,"class","button svelte-1wqc9nc"),C(u,"class","button svelte-1wqc9nc"),C(m,"class",y=p("button "+(e[5]?"selected":""))+" svelte-1wqc9nc"),C(g,"class","button svelte-1wqc9nc"),C(E,"class","button svelte-1wqc9nc"),C(n,"class","menu svelte-1wqc9nc"),C(t,"class","menu-container svelte-1wqc9nc")},m(i,p){S(i,t,p),b(t,n),b(n,o),b(n,l),b(n,r),b(n,s),b(n,a),b(n,c),b(n,u),b(n,d),F&&F.m(n,null),b(n,f),b(n,m),b(m,h),b(n,v),U&&U.m(n,null),b(n,w),b(n,g),b(n,x),j&&j.m(n,null),b(n,k),b(n,E),P=!0,M||(D=[L(o,"click",e[9]),L(o,"keydown",e[22]),L(r,"click",e[13]),L(r,"keydown",e[23]),L(a,"click",e[6]),L(a,"keydown",e[24]),L(u,"click",e[8]),L(u,"keydown",e[25]),L(m,"click",e[10]),L(m,"keydown",e[27]),L(g,"click",e[14]),L(g,"keydown",e[29]),L(E,"keydown",e[35]),L(E,"click",e[18]),L(t,"click",e[36]),L(t,"touchend",e[12],{passive:!0}),L(t,"keydown",e[37])],M=!0)},p(e,t){e[1]?F?F.p(e,t):(F=Ho(e),F.c(),F.m(n,f)):F&&(F.d(1),F=null),(!P||32&t[0]&&y!==(y=p("button "+(e[5]?"selected":""))+" svelte-1wqc9nc"))&&C(m,"class",y),e[1]?U?U.p(e,t):(U=Wo(e),U.c(),U.m(n,w)):U&&(U.d(1),U=null),e[1]?j?j.p(e,t):(j=Go(e),j.c(),j.m(n,k)):j&&(j.d(1),j=null)},i(e){P||(I&&I.end(1),P=!0)},o(e){I=me(t,Vt,{duration:200}),P=!1},d(e){e&&A(t),F&&F.d(),U&&U.d(),j&&j.d(),e&&I&&I.end(),M=!1,i(D)}}}function Ho(e){let t,n,o,l,r=(e[4]?"Change":"Set")+" Export Folder";return{c(){t=T("button"),n=N(r),C(t,"class","button svelte-1wqc9nc")},m(i,r){S(i,t,r),b(t,n),o||(l=[L(t,"click",Yo),L(t,"keydown",e[26])],o=!0)},p(e,t){16&t[0]&&r!==(r=(e[4]?"Change":"Set")+" Export Folder")&&M(n,r)},d(e){e&&A(t),o=!1,i(l)}}}function Wo(e){let t,n,o,l,r;return{c(){t=T("button"),n=N("Auto Export"),C(t,"class",o=p("button "+(e[3]?"selected":""))+" svelte-1wqc9nc")},m(o,i){S(o,t,i),b(t,n),l||(r=[L(t,"click",e[11]),L(t,"keydown",e[28])],l=!0)},p(e,n){8&n[0]&&o!==(o=p("button "+(e[3]?"selected":""))+" svelte-1wqc9nc")&&C(t,"class",o)},d(e){e&&A(t),l=!1,i(r)}}}function Go(t){let n,o,l,r,s,a,c,u,d,p,f=!window.location.protocol.startsWith("file:"),m=f&&function(t){let n,o,l;return{c(){n=T("button"),n.textContent="Check for Updates",C(n,"class","button svelte-1wqc9nc")},m(e,i){S(e,n,i),o||(l=[L(n,"keydown",t[31]),L(n,"click",t[17])],o=!0)},p:e,d(e){e&&A(n),o=!1,i(l)}}}(t);return{c(){n=T("button"),n.textContent="Show Recent Releases",o=$(),m&&m.c(),l=$(),r=T("button"),r.textContent="Switch App Mode",s=$(),a=T("button"),a.textContent="Clear Cache",c=$(),u=T("button"),u.textContent="Refresh",C(n,"class","button svelte-1wqc9nc"),C(r,"class","button svelte-1wqc9nc"),C(a,"class","button svelte-1wqc9nc"),C(u,"class","button svelte-1wqc9nc")},m(e,i){S(e,n,i),S(e,o,i),m&&m.m(e,i),S(e,l,i),S(e,r,i),S(e,s,i),S(e,a,i),S(e,c,i),S(e,u,i),d||(p=[L(n,"keydown",t[30]),L(n,"click",t[15]),L(r,"keydown",t[32]),L(r,"click",t[16]),L(a,"keydown",t[33]),L(a,"click",t[20]),L(u,"keydown",t[34]),L(u,"click",t[19])],d=!0)},p(e,t){f&&m.p(e,t)},d(e){e&&A(n),e&&A(o),m&&m.d(e),e&&A(l),e&&A(r),e&&A(s),e&&A(a),e&&A(c),e&&A(u),d=!1,i(p)}}}function Ko(e){let t,n,o,i,l,r,s=e[2]&&qo(e);return{c(){t=T("input"),n=$(),s&&s.c(),o=I(),C(t,"id","import-file"),C(t,"type","file"),C(t,"accept",".json"),F(t,"display","none")},m(a,c){S(a,t,c),e[21](t),S(a,n,c),s&&s.m(a,c),S(a,o,c),i=!0,l||(r=L(t,"change",e[7]),l=!0)},p(e,t){e[2]?s?(s.p(e,t),4&t[0]&&de(s,1)):(s=qo(e),s.c(),de(s,1),s.m(o.parentNode,o)):s&&(ce(),pe(s,1,1,(()=>{s=null})),ue())},i(e){i||(de(s),i=!0)},o(e){pe(s),i=!1},d(i){i&&A(t),e[21](null),i&&A(n),s&&s.d(i),i&&A(o),l=!1,r()}}}function Yo(){try{JSBridge.chooseExportFolder()}catch(e){}}function zo(e,t,n){let o,i,l,r,s,a,d,p,m,h,y,v,w,g,b,x;async function k(){return v?U():x instanceof Element?void(await o({text:"Are you sure you want to import your Data?"})&&x.click()):f(Qe,d="Something went wrong...",d)}async function S(){return v?U():!g&&i?Yo():void(await o("Are you sure you want to export your data?")&&(f(bt,a=!1,a),Ct.update((e=>!e))))}async function A(){return v?U():navigator.onLine?void(await o("Are you sure you want to update your list?")&&(f(bt,a=!1,a),Pt.update((e=>!e)))):o({isAlert:!0,title:"Currently offline",text:"It seems that you're currently offline and unable to update."})}async function E(){await o(`Are you sure you want to ${b?"disable":"enable"} auto-update?`)&&f(tt,b=!b,b)}async function T(){if(!g&&i)return Yo();await o(`Are you sure you want to ${w?"disable":"enable"} auto-export?`)&&f(lt,w=!w,w)}function N(e){e.target.classList.contains("button")||f(bt,a=!a,a)}async function $(){if(v)return U();if((e=>{for(const t in e)return!1;return!0})(y))o({isAlert:!0,text:"There is currently no hidden entries."});else if(await o("Are you sure you want to show all hidden anime entries?")){h&&(h.terminate(),f(Xe,h=null,h)),m||f(Je,p=null,p),f(Qe,d="Updating List",d),f(bt,a=!1,a);let e=s?.filterSelection?.findIndex?.((({filterSelectionName:e})=>"Anime Filter"===e)),t=s?.filterSelection?.[e??-1]?.filters?.Checkbox?.findIndex?.((({filName:e})=>"hidden anime"===e));e>=0&&t>=0&&f(Ye,s.filterSelection[e??-1].filters.Checkbox[t??-1].isSelected=!1,s),r?.["Anime Filter"]&&f(ze,r["Anime Filter"]=r["Anime Filter"].filter((({optionName:e,filterType:t})=>"hidden"!==e&&"checkbox"!==t)),r),await Xn(s,"filterOptions"),await Xn(r,"activeTagFilters"),await Xn({},"hiddenEntries"),Dt.update((e=>!e))}}async function I(){await o("Are you sure want to sign-up an anilist account?")&&window.open("https://anilist.co/signup","_blank")}function L(){if(i)try{JSBridge.showRecentReleases()}catch(e){}}function P(){if(i)try{JSBridge.switchApp()}catch(e){}}function C(){if(!navigator.onLine)return o({isAlert:!0,title:"Currently offline",text:"It seems that you're currently offline and unable to check for updates."});if(i)try{JSBridge.checkAppID(l,!0)}catch(e){}}async function M(){await o("Are you sure want to reload the resources?")&&(document.querySelectorAll("script")?.forEach((e=>{e.src&&"https://www.youtube.com/iframe_api?v=16"!==e.src&&(e.src=e.src)})),document.querySelectorAll("img")?.forEach((e=>{e.naturalHeight||(e.src=e.src)})),window.reloadYoutube?.())}async function D(){if(i&&await o("Are you sure want to refresh the app?"))try{JSBridge.refreshWeb()}catch(e){}}async function F(){if(i&&await o("Are you sure want to clear the cache?"))try{JSBridge.clearCache()}catch(e){}}function U(){o({isAlert:!0,title:"Initializing resources",text:"Please wait a moment..."})}u(e,gt,(e=>n(38,o=e))),u(e,Be,(e=>n(1,i=e))),u(e,Re,(e=>n(39,l=e))),u(e,ze,(e=>n(40,r=e))),u(e,Ye,(e=>n(41,s=e))),u(e,bt,(e=>n(2,a=e))),u(e,Qe,(e=>n(42,d=e))),u(e,Je,(e=>n(43,p=e))),u(e,St,(e=>n(44,m=e))),u(e,Xe,(e=>n(45,h=e))),u(e,Ke,(e=>n(46,y=e))),u(e,ut,(e=>n(47,v=e))),u(e,lt,(e=>n(3,w=e))),u(e,it,(e=>n(4,g=e))),u(e,tt,(e=>n(5,b=e))),window.setExportPathAvailability=async(e=!0)=>{f(it,g=e,g),Ve("exportPathIsAvailable",e),await Xn(e,"exportPathIsAvailable")};return[x,i,a,w,g,b,k,async function(){if(!(x instanceof Element))return f(Qe,d="Something went wrong...",d);let e=x.files?.[0];if(e){let i=e.name;await o(`File ${i?"named ["+i+"] ":""}has been detected, do you want to continue the import?`)?(await Xn(!0,"shouldProcessRecommendation"),f(bt,a=!1,a),m||(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow="",window?.scrollTo?.({top:-9999,behavior:"smooth"}),f(Je,p=null,p)),(t={importedFile:e},new Promise(((e,n)=>{if(!c(ut)){if(Tn)return;zn(),Ze.set(!0)}_n&&_n.terminate(),He.set(0),Bt("./webapi/worker/importUserData.js").then((o=>{_n=new Worker(o),Vn&&clearTimeout(Vn),_n.postMessage(t),_n.onmessage=({data:t})=>{t?.hasOwnProperty("progress")?t?.progress>=0&&t?.progress<=100&&He.set(t.progress):void 0!==t?.error?(Ze.set(!1),jt.update((e=>!e)),window.confirmPromise?.({isAlert:!0,title:"Import Failed",text:"File has not been imported, please ensure that file is in a supported format (e.g., .json)"}),He.set(100),n(t?.error||"Something went wrong...")):t?.hasOwnProperty("status")?(En=!0,Qe.set(t.status)):"string"==typeof t?.importedUsername?Ge.set(t.importedUsername):Te(t?.importedHiddenEntries)?Ke.set(t?.importedHiddenEntries):t?.importedlastRunnedAutoUpdateDate instanceof Date&&!isNaN(t?.importedlastRunnedAutoUpdateDate)?ot.set(t.importedlastRunnedAutoUpdateDate):t?.importedlastRunnedAutoExportDate instanceof Date&&!isNaN(t?.importedlastRunnedAutoExportDate)?st.set(t.importedlastRunnedAutoExportDate):void 0!==t?.updateFilters?(Ze.set(!1),Yn().then((e=>{ze.set(e.activeTagFilters),Ye.set(e.filterOptions)}))):void 0!==t?.updateRecommendationList?(Ze.set(!1),Mt.update((e=>!e))):(Ze.set(!1),Pt.update((e=>!e)),En=!1,Vn=setTimeout((()=>{_n.terminate()}),An),He.set(100),e(t))},_n.onerror=e=>{Ze.set(!1),window.confirmPromise?.({isAlert:!0,title:"Import Failed",text:"File has not been imported, please ensure that file is in a supported format (e.g., .json)"}),jt.update((e=>!e)),He.set(100),n(e||"Something went wrong...")}})).catch((e=>{He.set(100),Ze.set(!1),jt.update((e=>!e)),Jn(),n(e)}))}))).then((()=>{x instanceof Element&&n(0,x.value=null,x)})).catch((e=>{f(Qe,d=e||"Something went wrong...",d),n(0,x.value=null,x),Mt.update((e=>!e))}))):x instanceof Element&&n(0,x.value=null,x)}else x instanceof Element&&n(0,x.value=null,x);var t},S,A,E,T,N,$,I,L,P,C,M,D,F,function(e){K[e?"unshift":"push"]((()=>{x=e,n(0,x)}))},e=>"Enter"===e.key&&A(),e=>"Enter"===e.key&&$(),e=>"Enter"===e.key&&k(),e=>"Enter"===e.key&&S(),e=>"Enter"===e.key&&Yo(),e=>"Enter"===e.key&&E(),e=>"Enter"===e.key&&T(),e=>"Enter"===e.key&&I(),e=>"Enter"===e.key&&L(),e=>"Enter"===e.key&&C(),e=>"Enter"===e.key&&P(),e=>"Enter"===e.key&&F(),e=>"Enter"===e.key&&D(),e=>"Enter"===e.key&&M(),e=>{"touch"!==e.pointerType&&N(e)},e=>"Enter"===e.key&&N(e)]}function Jo(e,t,n){const o=e.slice();return o[106]=t[n],o}function Xo(e,t,n){const o=e.slice();return o[109]=t[n],o}function Qo(e,t,n){const o=e.slice();return o[127]=t[n],o}function Zo(e,t,n){const o=e.slice();return o[112]=t[n],o[113]=t,o[114]=n,o}function ei(e,t,n){const o=e.slice();return o[115]=t[n],o[117]=n,o}function ti(e,t,n){const o=e.slice();return o[118]=t[n],o[119]=t,o[120]=n,o}function ni(e,t,n){const o=e.slice();return o[121]=t[n],o[122]=t,o[123]=n,o}function oi(e,t,n){const o=e.slice();return o[124]=t[n],o[126]=n,o}function ii(e,t,n){const o=e.slice();return o[112]=t[n],o}function li(t){let n;return{c(){n=T("div"),C(n,"class","skeleton shimmer svelte-6np4xh")},m(e,t){S(e,n,t)},p:e,d(e){e&&A(n)}}}function ri(e){let t,n,o,i=(e[0]||"")+"";return{c(){t=T("span"),n=T("h2"),o=N(i),C(n,"class","svelte-6np4xh"),C(t,"class","svelte-6np4xh")},m(e,i){S(e,t,i),b(t,n),b(n,o)},p(e,t){1&t[0]&&i!==(i=(e[0]||"")+"")&&M(o,i)},d(e){e&&A(t)}}}function si(e){let t,n,o,i;function l(e,t){return e[15]?ui:e[17]||e[14]?ai:ci}let r=l(e),s=r(e);return{c(){t=T("span"),n=T("h2"),s.c(),C(n,"class","svelte-6np4xh"),C(t,"class","data-status svelte-6np4xh")},m(e,o){S(e,t,o),b(t,n),s.m(n,null),i=!0},p(e,t){r===(r=l(e))&&s?s.p(e,t):(s.d(1),s=r(e),s&&(s.c(),s.m(n,null)))},i(e){i||(o&&o.end(1),i=!0)},o(e){o=me(t,Vt,{duration:200}),i=!1},d(e){e&&A(t),s.d(),e&&o&&o.end()}}}function ai(t){let n;return{c(){n=N("")},m(e,t){S(e,n,t)},p:e,d(e){e&&A(n)}}}function ci(t){let n;return{c(){n=N("No Anilist Username Found")},m(e,t){S(e,n,t)},p:e,d(e){e&&A(n)}}}function ui(e){let t;return{c(){t=N(e[15])},m(e,n){S(e,t,n)},p(e,n){32768&n[0]&&M(t,e[15])},d(e){e&&A(t)}}}function di(e){let t,n,o,l,r,s,a,c,u,d,f,m,h=[],y=new Map,v=e[1]?.filterSelection||[];const w=e=>e[112]?.filterSelectionName||{};for(let t=0;t<v.length;t+=1){let n=ii(e,v,t),o=w(n);y.set(o,h[t]=pi(o,n))}return{c(){t=T("div"),n=T("div"),o=T("h2"),o.textContent="Filters",l=$(),r=T("div"),s=N("×"),c=$(),u=T("div");for(let e=0;e<h.length;e+=1)h[e].c();C(o,"class","svelte-6np4xh"),C(r,"class","closing-x svelte-6np4xh"),C(r,"tabindex",a=e[5]&&e[3]<=425?"0":""),C(n,"class","header svelte-6np4xh"),C(u,"class","options svelte-6np4xh"),C(t,"class",d=p("options-wrap-filter-info "+(e[5]?"":"hide"))+" svelte-6np4xh")},m(i,a){S(i,t,a),b(t,n),b(n,o),b(n,l),b(n,r),b(r,s),b(t,c),b(t,u);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(u,null);f||(m=[L(r,"keydown",e[48]),L(r,"click",e[21])],f=!0)},p(e,n){40&n[0]&&a!==(a=e[5]&&e[3]<=425?"0":"")&&C(r,"tabindex",a),1048578&n[0]&&(v=e[1]?.filterSelection||[],h=ve(h,n,w,1,e,v,y,u,he,pi,null,ii)),32&n[0]&&d!==(d=p("options-wrap-filter-info "+(e[5]?"":"hide"))+" svelte-6np4xh")&&C(t,"class",d)},d(e){e&&A(t);for(let e=0;e<h.length;e+=1)h[e].d();f=!1,i(m)}}}function pi(e,t){let n,o,r,s,a,c,u=(t[112]?.filterSelectionName||"")+"";function d(...e){return t[49](t[112],...e)}return{key:e,first:null,c(){n=T("div"),o=T("h3"),r=N(u),s=$(),C(o,"class","svelte-6np4xh"),F(o,"color",t[112]?.isSelected?"#3db4f2":"inherit"),C(n,"class","option svelte-6np4xh"),this.first=n},m(e,i){S(e,n,i),b(n,o),b(o,r),b(n,s),a||(c=[L(n,"click",(function(){l(t[20](t[112]?.filterSelectionName))&&t[20](t[112]?.filterSelectionName).apply(this,arguments)})),L(n,"keydown",d)],a=!0)},p(e,n){t=e,2&n[0]&&u!==(u=(t[112]?.filterSelectionName||"")+"")&&M(r,u),2&n[0]&&F(o,"color",t[112]?.isSelected?"#3db4f2":"inherit")},d(e){e&&A(n),a=!1,i(c)}}}function fi(t){let n,o=Array(10),i=[];for(let e=0;e<o.length;e+=1)i[e]=hi(Qo(t,o,e));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();n=I()},m(e,t){for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(e,t);S(e,n,t)},p:e,d(e){E(i,e),e&&A(n)}}}function mi(e){let t,n=[],o=new Map,i=e[1]?.filterSelection||[];const l=e=>e[112].filterSelectionName||{};for(let t=0;t<i.length;t+=1){let r=Zo(e,i,t),s=l(r);o.set(s,n[t]=Ci(s,r))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=I()},m(e,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,o);S(e,t,o)},p(e,r){130564382&r[0]|32&r[1]&&(i=e[1]?.filterSelection||[],n=ve(n,r,l,1,e,i,o,t.parentNode,he,Ci,t,Zo))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&A(t)}}}function hi(t){let n;return{c(){n=T("div"),n.innerHTML='<div class="filter-name skeleton shimmer svelte-6np4xh"></div> \n                    <div class="select skeleton shimmer svelte-6np4xh"></div> \n                ',C(n,"class","filter-select svelte-6np4xh")},m(e,t){S(e,n,t)},p:e,d(e){e&&A(n)}}}function yi(t){let n;return{c(){n=T("i"),C(n,"class","icon fa-solid fa-angle-down svelte-6np4xh")},m(e,t){S(e,n,t)},p:e,d(e){e&&A(n)}}}function vi(e){let t,n,o;function r(...t){return e[52](e[123],...t)}return{c(){t=T("i"),C(t,"class","icon fa-solid fa-angle-up svelte-6np4xh")},m(i,s){S(i,t,s),n||(o=[L(t,"keydown",r),L(t,"click",(function(){l(e[23](e[123]))&&e[23](e[123]).apply(this,arguments)}))],n=!0)},p(t,n){e=t},d(e){e&&A(t),n=!1,i(o)}}}function wi(t){let n;return{c(){n=T("div"),n.innerHTML='<h3 class="svelte-6np4xh">No Results</h3>',C(n,"class","option svelte-6np4xh")},m(e,t){S(e,n,t)},p:e,d(e){e&&A(n)}}}function gi(e){let t,n=[],o=new Map,i=e[121].options||[];const l=e=>e[112].filterSelectionName+e[121].filName+e[124].optionName||{};for(let t=0;t<i.length;t+=1){let r=oi(e,i,t),s=l(r);o.set(s,n[t]=Ai(s,r))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=I()},m(e,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,o);S(e,t,o)},p(e,r){16777218&r[0]&&(i=e[121].options||[],n=ve(n,r,l,1,e,i,o,t.parentNode,he,Ai,t,oi))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&A(t)}}}function bi(t){let n;return{c(){n=T("i"),C(n,"class","fa-regular fa-circle-xmark async-element svelte-6np4xh"),F(n,"--optionColor","#e85d75")},m(e,t){S(e,n,t)},p:e,d(e){e&&A(n)}}}function xi(e){let t;function n(e,t){return"Content Caution"===e[112].filterSelectionName?Si:ki}let o=n(e),i=o(e);return{c(){i.c(),t=I()},m(e,n){i.m(e,n),S(e,t,n)},p(e,l){o!==(o=n(e))&&(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&A(t)}}}function ki(e){let t;return{c(){t=T("i"),C(t,"class","fa-regular fa-circle-check async-element svelte-6np4xh"),F(t,"--optionColor","#5f9ea0")},m(e,n){S(e,t,n)},d(e){e&&A(t)}}}function Si(e){let t;return{c(){t=T("i"),C(t,"class","fa-regular fa-circle-xmark async-element svelte-6np4xh"),F(t,"--optionColor","#5f9ea0")},m(e,n){S(e,t,n)},d(e){e&&A(t)}}}function Ai(e,t){let n,o,r,s,a,c,u,d=(t[124].optionName||"")+"";function f(e,t){return"included"===e[124].selected?xi:"excluded"===e[124].selected&&"read"!==e[121].changeType?bi:void 0}let m=f(t),h=m&&m(t);function y(...e){return t[57](t[124],t[121],t[126],t[123],t[112],...e)}return{key:e,first:null,c(){n=T("div"),o=T("h3"),r=N(d),s=$(),h&&h.c(),C(o,"class","svelte-6np4xh"),C(n,"class",a=p("option "+(Hi(t[124].optionName,t[121].optKeyword)?"":"disable-interaction"))+" svelte-6np4xh"),this.first=n},m(e,i){S(e,n,i),b(n,o),b(o,r),b(n,s),h&&h.m(n,null),c||(u=[L(n,"click",(function(){l(t[24](t[124].optionName,t[121].filName,t[126],t[123],t[121].changeType,t[112].filterSelectionName))&&t[24](t[124].optionName,t[121].filName,t[126],t[123],t[121].changeType,t[112].filterSelectionName).apply(this,arguments)})),L(n,"keydown",y)],c=!0)},p(e,o){t=e,2&o[0]&&d!==(d=(t[124].optionName||"")+"")&&M(r,d),m===(m=f(t))&&h?h.p(t,o):(h&&h.d(1),h=m&&m(t),h&&(h.c(),h.m(n,null))),2&o[0]&&a!==(a=p("option "+(Hi(t[124].optionName,t[121].optKeyword)?"":"disable-interaction"))+" svelte-6np4xh")&&C(n,"class",a)},d(e){e&&A(n),h&&h.d(),c=!1,i(u)}}}function Ei(e,t){let n,o,r,s,a,c,u,d,f,m,h,y,v,w,g,x,k,E,I,U,j,O,V,_,R,B,q,H,W,G,K,Y,z,J,X,Q,Z,ee,te,ne,oe,ie,le=(t[121].filName||"")+"",re=t[112].filterSelectionName+" "+t[121].filName,se=t[121].filName+"",ae="Search "+t[112].filterSelectionName+" "+t[121].filName,ce=`${t[4]}px`;function ue(...e){return t[45](t[121],...e)}function de(){t[51].call(y,t[114],t[123])}function pe(e,t){return e[121].selected&&e[121].options.length&&!e[2]?vi:yi}let fe=pe(t),me=fe(t);function he(...e){return t[53](t[123],...e)}function ye(...e){return t[54](t[123],...e)}function ve(...e){return t[55](t[123],...e)}function we(){t[56].call(Y,t[114],t[123])}function ge(e,t){return 2&t[0]&&(Z=null),null==Z&&(Z=!!e[121].options?.filter?.(ue)?.length),Z?gi:wi}let be=ge(t,[-1,-1,-1,-1,-1]),xe=be(t);return{key:e,first:null,c(){n=T("div"),o=T("div"),r=T("h2"),s=N(le),a=$(),c=T("div"),u=T("div"),d=T("label"),f=N(re),h=$(),y=T("input"),g=$(),me.c(),k=$(),E=T("div"),I=T("div"),U=T("div"),j=T("h2"),O=N(se),V=$(),_=T("div"),R=N("×"),q=$(),H=T("label"),W=N(ae),K=$(),Y=T("input"),X=$(),Q=T("div"),xe.c(),C(r,"class","svelte-6np4xh"),C(o,"class","filter-name svelte-6np4xh"),C(d,"class","disable-interaction svelte-6np4xh"),C(d,"for",m=t[112].filterSelectionName+t[121].filName),C(y,"id",v=t[112].filterSelectionName+t[121].filName),C(y,"placeholder","Any"),C(y,"type","search"),C(y,"enterkeyhint","search"),C(y,"autocomplete","off"),C(y,"class",p("value-input")+" svelte-6np4xh"),y.disabled=w=!t[8]||t[3]<=425||!t[112].isSelected,C(u,"class","value-wrap svelte-6np4xh"),C(c,"class","select svelte-6np4xh"),C(c,"tabindex",x=t[8]&&t[3]<=425&&t[112].isSelected?"0":""),C(j,"class","svelte-6np4xh"),C(_,"class","closing-x svelte-6np4xh"),C(_,"tabindex",B=t[8]&&t[121].selected?"0":""),C(U,"class","header svelte-6np4xh"),C(H,"class","disable-interaction svelte-6np4xh"),C(H,"for",G="Search "+(t[112].filterSelectionName+t[121].filName)),C(Y,"id",z="Search "+(t[112].filterSelectionName+t[121].filName)),C(Y,"placeholder","Any"),C(Y,"type","search"),C(Y,"enterkeyhint","search"),C(Y,"autocomplete","off"),Y.disabled=J=!t[8]||!t[112].isSelected||!t[121].selected,C(Y,"class","svelte-6np4xh"),C(Q,"class","options svelte-6np4xh"),C(I,"class",ee=p("options-wrap-filter-info "+(t[121].options.length&&!0===t[121].selected&&!t[2]?"":"hide"))+" svelte-6np4xh"),C(E,"class",te=p("options-wrap "+(t[121].options.length&&!0===t[121].selected&&!t[2]?"":"disable-interaction hide"))+" svelte-6np4xh"),F(E,"--maxFilterSelectionHeight",ce),C(n,"class",ne=p("filter-select "+(t[112].isSelected?"":"disable-interaction"))+" svelte-6np4xh"),this.first=n},m(e,i){S(e,n,i),b(n,o),b(o,r),b(r,s),b(n,a),b(n,c),b(c,u),b(u,d),b(d,f),b(u,h),b(u,y),D(y,t[1].filterSelection[t[114]].filters.Dropdown[t[123]].optKeyword),b(c,g),me.m(c,null),b(n,k),b(n,E),b(E,I),b(I,U),b(U,j),b(j,O),b(U,V),b(U,_),b(_,R),b(I,q),b(I,H),b(H,W),b(I,K),b(I,Y),D(Y,t[1].filterSelection[t[114]].filters.Dropdown[t[123]].optKeyword),b(I,X),b(I,Q),xe.m(Q,null),oe||(ie=[L(y,"input",de),L(c,"keydown",he),L(c,"click",ye),L(_,"keydown",ve),L(_,"click",(function(){l(t[23](t[123]))&&t[23](t[123]).apply(this,arguments)})),L(Y,"input",we),L(Q,"wheel",P(Wi),{passive:!0}),L(E,"wheel",P(Gi),{passive:!0})],oe=!0)},p(e,o){t=e,2&o[0]&&le!==(le=(t[121].filName||"")+"")&&M(s,le),2&o[0]&&re!==(re=t[112].filterSelectionName+" "+t[121].filName)&&M(f,re),2&o[0]&&m!==(m=t[112].filterSelectionName+t[121].filName)&&C(d,"for",m),2&o[0]&&v!==(v=t[112].filterSelectionName+t[121].filName)&&C(y,"id",v),266&o[0]&&w!==(w=!t[8]||t[3]<=425||!t[112].isSelected)&&(y.disabled=w),2&o[0]&&y.value!==t[1].filterSelection[t[114]].filters.Dropdown[t[123]].optKeyword&&D(y,t[1].filterSelection[t[114]].filters.Dropdown[t[123]].optKeyword),fe===(fe=pe(t))&&me?me.p(t,o):(me.d(1),me=fe(t),me&&(me.c(),me.m(c,null))),266&o[0]&&x!==(x=t[8]&&t[3]<=425&&t[112].isSelected?"0":"")&&C(c,"tabindex",x),2&o[0]&&se!==(se=t[121].filName+"")&&M(O,se),258&o[0]&&B!==(B=t[8]&&t[121].selected?"0":"")&&C(_,"tabindex",B),2&o[0]&&ae!==(ae="Search "+t[112].filterSelectionName+" "+t[121].filName)&&M(W,ae),2&o[0]&&G!==(G="Search "+(t[112].filterSelectionName+t[121].filName))&&C(H,"for",G),2&o[0]&&z!==(z="Search "+(t[112].filterSelectionName+t[121].filName))&&C(Y,"id",z),258&o[0]&&J!==(J=!t[8]||!t[112].isSelected||!t[121].selected)&&(Y.disabled=J),2&o[0]&&Y.value!==t[1].filterSelection[t[114]].filters.Dropdown[t[123]].optKeyword&&D(Y,t[1].filterSelection[t[114]].filters.Dropdown[t[123]].optKeyword),be===(be=ge(t,o))&&xe?xe.p(t,o):(xe.d(1),xe=be(t),xe&&(xe.c(),xe.m(Q,null))),6&o[0]&&ee!==(ee=p("options-wrap-filter-info "+(t[121].options.length&&!0===t[121].selected&&!t[2]?"":"hide"))+" svelte-6np4xh")&&C(I,"class",ee),6&o[0]&&te!==(te=p("options-wrap "+(t[121].options.length&&!0===t[121].selected&&!t[2]?"":"disable-interaction hide"))+" svelte-6np4xh")&&C(E,"class",te),16&o[0]&&ce!==(ce=`${t[4]}px`)&&F(E,"--maxFilterSelectionHeight",ce),2&o[0]&&ne!==(ne=p("filter-select "+(t[112].isSelected?"":"disable-interaction"))+" svelte-6np4xh")&&C(n,"class",ne)},d(e){e&&A(n),me.d(),xe.d(),oe=!1,i(ie)}}}function Ti(e){let t,n,o,l,r,s,a,c,u,d,p,f,m,h=e[118].filName+"",y=(e[118].filName||"")+"";function v(e,t){return e[14]?$i:Ni}let w=v(e),g=w(e);function x(...t){return e[61](e[118],e[120],e[112],...t)}function k(...t){return e[62](e[118],e[120],e[112],...t)}return{c(){t=T("div"),n=T("div"),o=$(),l=T("div"),r=T("label"),s=N(h),c=$(),g.c(),u=$(),d=T("div"),p=N(y),C(n,"class","svelte-6np4xh"),F(n,"visibility","none"),C(r,"class","disable-interaction svelte-6np4xh"),C(r,"for",a="Checkbox: "+e[118].filName),C(d,"class","checkbox-label svelte-6np4xh"),C(l,"class","checkbox-wrap svelte-6np4xh"),C(t,"class","filter-checkbox svelte-6np4xh")},m(e,i){S(e,t,i),b(t,n),b(t,o),b(t,l),b(l,r),b(r,s),b(l,c),g.m(l,null),b(l,u),b(l,d),b(d,p),f||(m=[L(l,"click",x),L(l,"keydown",k)],f=!0)},p(t,n){e=t,2&n[0]&&h!==(h=e[118].filName+"")&&M(s,h),2&n[0]&&a!==(a="Checkbox: "+e[118].filName)&&C(r,"for",a),w===(w=v(e))&&g?g.p(e,n):(g.d(1),g=w(e),g&&(g.c(),g.m(l,u))),2&n[0]&&y!==(y=(e[118].filName||"")+"")&&M(p,y)},d(e){e&&A(t),g.d(),f=!1,i(m)}}}function Ni(e){let t,n,o,l,r;function s(...t){return e[59](e[118],e[120],e[112],...t)}function a(){e[60].call(t,e[119],e[120])}return{c(){t=T("input"),C(t,"id",n="Checkbox: "+e[118].filName),C(t,"type","checkbox"),C(t,"class","checkbox svelte-6np4xh"),t.disabled=o=!e[8]},m(n,o){S(n,t,o),t.checked=e[118].isSelected,l||(r=[L(t,"change",s),L(t,"change",a)],l=!0)},p(i,l){e=i,2&l[0]&&n!==(n="Checkbox: "+e[118].filName)&&C(t,"id",n),256&l[0]&&o!==(o=!e[8])&&(t.disabled=o),2&l[0]&&(t.checked=e[118].isSelected)},d(e){e&&A(t),l=!1,i(r)}}}function $i(e){let t,n,o,i,l,r;return{c(){t=T("input"),C(t,"id",n="Checkbox: "+e[118].filName),C(t,"type","checkbox"),C(t,"class","checkbox svelte-6np4xh"),t.checked=o=e[118].isSelected,t.disabled=i=!e[8]},m(n,o){S(n,t,o),l||(r=L(t,"change",e[58]),l=!0)},p(e,l){2&l[0]&&n!==(n="Checkbox: "+e[118].filName)&&C(t,"id",n),2&l[0]&&o!==(o=e[118].isSelected)&&(t.checked=o),256&l[0]&&i!==(i=!e[8])&&(t.disabled=i)},d(e){e&&A(t),l=!1,r()}}}function Ii(e,t){let n,o,i=t[112].isSelected&&Ti(t);return{key:e,first:null,c(){n=I(),i&&i.c(),o=I(),this.first=n},m(e,t){S(e,n,t),i&&i.m(e,t),S(e,o,t)},p(e,n){(t=e)[112].isSelected?i?i.p(t,n):(i=Ti(t),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(e){e&&A(n),i&&i.d(e),e&&A(o)}}}function Li(e){let t,n,o,i,l,r,s,a,c,u,d,p,f,m,h,y,v,w,g=(e[115].filName||"")+"",x="Number Filter: "+e[115].filName;function k(...t){return e[63](e[117],e[115],e[112],...t)}return{c(){t=T("div"),n=T("div"),o=T("h2"),i=N(g),l=$(),r=T("div"),s=T("label"),a=N(x),u=$(),d=T("input"),y=$(),C(o,"class","svelte-6np4xh"),C(n,"class","filter-input-number-name svelte-6np4xh"),C(s,"class","disable-interaction svelte-6np4xh"),C(s,"for",c="Number Filter: "+e[115].filName),C(d,"id",p="Number Filter: "+e[115].filName),C(d,"class","value-input-number svelte-6np4xh"),C(d,"type","text"),C(d,"placeholder",f="scoring system"===e[115].filName?"Default: User Scoring":e[19].includes(e[115].filName)?">123 or 123":null!==e[115].defaultValue?"Default: "+e[115].defaultValue:"123"),d.value=m=e[115].numberValue||"",d.disabled=h=!e[8],C(r,"class","value-input-number-wrap svelte-6np4xh"),C(t,"class","filter-input-number svelte-6np4xh"),F(t,"display",e[112].isSelected?"":"none")},m(e,c){S(e,t,c),b(t,n),b(n,o),b(o,i),b(t,l),b(t,r),b(r,s),b(s,a),b(r,u),b(r,d),b(t,y),v||(w=L(d,"input",k),v=!0)},p(n,o){e=n,2&o[0]&&g!==(g=(e[115].filName||"")+"")&&M(i,g),2&o[0]&&x!==(x="Number Filter: "+e[115].filName)&&M(a,x),2&o[0]&&c!==(c="Number Filter: "+e[115].filName)&&C(s,"for",c),2&o[0]&&p!==(p="Number Filter: "+e[115].filName)&&C(d,"id",p),2&o[0]&&f!==(f="scoring system"===e[115].filName?"Default: User Scoring":e[19].includes(e[115].filName)?">123 or 123":null!==e[115].defaultValue?"Default: "+e[115].defaultValue:"123")&&C(d,"placeholder",f),2&o[0]&&m!==(m=e[115].numberValue||"")&&d.value!==m&&(d.value=m),256&o[0]&&h!==(h=!e[8])&&(d.disabled=h),2&o[0]&&F(t,"display",e[112].isSelected?"":"none")},d(e){e&&A(t),v=!1,w()}}}function Pi(e,t){let n,o,i=t[112].isSelected&&Li(t);return{key:e,first:null,c(){n=I(),i&&i.c(),o=I(),this.first=n},m(e,t){S(e,n,t),i&&i.m(e,t),S(e,o,t)},p(e,n){(t=e)[112].isSelected?i?i.p(t,n):(i=Li(t),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(e){e&&A(n),i&&i.d(e),e&&A(o)}}}function Ci(e,t){let n,o,i,l,r=[],s=new Map,a=[],c=new Map,u=[],d=new Map,p=t[112].filters.Dropdown||[];const f=e=>e[112].filterSelectionName+e[121].filName||{};for(let e=0;e<p.length;e+=1){let n=ni(t,p,e),o=f(n);s.set(o,r[e]=Ei(o,n))}let m=t[112].filters.Checkbox||[];const h=e=>e[112].filterSelectionName+e[118].filName||{};for(let e=0;e<m.length;e+=1){let n=ti(t,m,e),o=h(n);c.set(o,a[e]=Ii(o,n))}let y=t[112].filters["Input Number"]||[];const v=e=>e[112].filterSelectionName+e[115].filName||{};for(let e=0;e<y.length;e+=1){let n=ei(t,y,e),o=v(n);d.set(o,u[e]=Pi(o,n))}return{key:e,first:null,c(){n=I();for(let e=0;e<r.length;e+=1)r[e].c();o=$();for(let e=0;e<a.length;e+=1)a[e].c();i=$();for(let e=0;e<u.length;e+=1)u[e].c();l=I(),this.first=n},m(e,t){S(e,n,t);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(e,t);S(e,o,t);for(let n=0;n<a.length;n+=1)a[n]&&a[n].m(e,t);S(e,i,t);for(let n=0;n<u.length;n+=1)u[n]&&u[n].m(e,t);S(e,l,t)},p(e,n){t=e,29360414&n[0]&&(p=t[112].filters.Dropdown||[],r=ve(r,n,f,1,t,p,s,o.parentNode,he,Ei,o,ni)),33571074&n[0]|32&n[1]&&(m=t[112].filters.Checkbox||[],a=ve(a,n,h,1,t,m,c,i.parentNode,he,Ii,i,ti)),67633410&n[0]&&(y=t[112].filters["Input Number"]||[],u=ve(u,n,v,1,t,y,d,l.parentNode,he,Pi,l,ei))},d(e){e&&A(n);for(let t=0;t<r.length;t+=1)r[t].d(e);e&&A(o);for(let t=0;t<a.length;t+=1)a[t].d(e);e&&A(i);for(let t=0;t<u.length;t+=1)u[t].d(e);e&&A(l)}}}function Mi(t){let n,o,l;return{c(){n=T("div"),n.innerHTML='<i class="fa-solid fa-ban svelte-6np4xh"></i>',C(n,"tabindex","0"),C(n,"class","empty-tagFilter svelte-6np4xh"),C(n,"title","Remove Filters")},m(e,i){S(e,n,i),o||(l=[L(n,"click",t[29]),L(n,"keydown",t[65])],o=!0)},p:e,d(e){e&&A(n),o=!1,i(l)}}}function Di(t){let n,o,l;return{c(){n=T("div"),n.innerHTML='<i class="fa-solid fa-ban svelte-6np4xh"></i>',C(n,"tabindex","0"),C(n,"class","empty-tagFilter svelte-6np4xh"),C(n,"title","Remove Filters")},m(e,i){S(e,n,i),o||(l=[L(n,"click",t[29]),L(n,"keydown",t[66])],o=!0)},p:e,d(e){e&&A(n),o=!1,i(l)}}}function Fi(e){let t,n,o=(e[109]?.optionName||"")+"";return{c(){t=T("h3"),n=N(o),C(t,"class","svelte-6np4xh")},m(e,o){S(e,t,o),b(t,n)},p(e,t){1024&t[0]&&o!==(o=(e[109]?.optionName||"")+"")&&M(n,o)},d(e){e&&A(t)}}}function Ui(e){let t,n,o=(e[109]?.optionType+": "+e[109]?.optionName||"")+"";return{c(){t=T("h3"),n=N(o),C(t,"class","svelte-6np4xh")},m(e,o){S(e,t,o),b(t,n)},p(e,t){1024&t[0]&&o!==(o=(e[109]?.optionType+": "+e[109]?.optionName||"")+"")&&M(n,o)},d(e){e&&A(t)}}}function ji(e){let t,n,o=(e[109]?.optionName+": "+e[109]?.optionValue||"")+"";return{c(){t=T("h3"),n=N(o),C(t,"class","svelte-6np4xh")},m(e,o){S(e,t,o),b(t,n)},p(e,t){1024&t[0]&&o!==(o=(e[109]?.optionName+": "+e[109]?.optionValue||"")+"")&&M(n,o)},d(e){e&&A(t)}}}function Oi(e,t){let n,o,l,r,s,a,c,u;function d(e,t){return"input number"===e[109]?.filterType?ji:e[109]?.optionType?Ui:Fi}let p=d(t),f=p(t);function m(...e){return t[67](t[109],...e)}function h(...e){return t[68](t[109],...e)}function y(...e){return t[69](t[109],...e)}function v(...e){return t[70](t[109],...e)}return{key:e,first:null,c(){n=T("div"),f.c(),o=$(),l=T("i"),r=$(),C(l,"class","fa-solid fa-xmark svelte-6np4xh"),C(l,"tabindex","0"),C(n,"class","activeTagFilter svelte-6np4xh"),C(n,"tabindex","0"),F(n,"--activeTagFilterColor","included"===t[109]?.selected?"#5f9ea0":"read"===t[109]?.changeType?"#000":"#e85d75"),this.first=n},m(e,t){var i;S(e,n,t),f.m(n,null),b(n,o),b(n,l),b(n,r),a=!0,c||(u=[L(l,"click",(i=m,function(e){return e.preventDefault(),i.call(this,e)})),L(l,"keydown",h),L(n,"click",y),L(n,"keydown",v)],c=!0)},p(e,i){p===(p=d(t=e))&&f?f.p(t,i):(f.d(1),f=p(t),f&&(f.c(),f.m(n,o))),1024&i[0]&&F(n,"--activeTagFilterColor","included"===t[109]?.selected?"#5f9ea0":"read"===t[109]?.changeType?"#000":"#e85d75")},i(e){a||(s&&s.end(1),a=!0)},o(e){s=me(n,Vt,{duration:200}),a=!1},d(e){e&&A(n),f.d(),e&&s&&s.end(),c=!1,i(u)}}}function Vi(e){let t,n,o,l,r,s,a,c;return{c(){t=T("div"),n=T("div"),o=T("i"),r=$(),s=T("div"),C(o,"class",l=p("icon fa-solid fa-arrows-"+(e[13]?"up-down":"left-right"))+" svelte-6np4xh"),C(n,"tabindex","0"),C(n,"class","changeGridView svelte-6np4xh"),C(s,"class","sortFilter skeleton shimmer svelte-6np4xh"),C(t,"class","last-filter-option svelte-6np4xh")},m(i,l){S(i,t,l),b(t,n),b(n,o),b(t,r),b(t,s),a||(c=[L(n,"click",e[33]),L(n,"keydown",e[77])],a=!0)},p(e,t){8192&t[0]&&l!==(l=p("icon fa-solid fa-arrows-"+(e[13]?"up-down":"left-right"))+" svelte-6np4xh")&&C(o,"class",l)},d(e){e&&A(t),a=!1,i(c)}}}function _i(e){let t,n,o,l,r,s,a,c,u,d,f,m,h,y,v,w,g,x,k,E,I,P,D,U,j,O,V,_,R=(e[11]||"")+"",B=[],q=new Map,H=`${e[4]}px`,W=e[1]?.sortFilter||[];const G=e=>e[106]?.sortName||{};for(let t=0;t<W.length;t+=1){let n=Jo(e,W,t),o=G(n);q.set(o,B[t]=Bi(o,n))}return{c(){t=T("div"),n=T("div"),o=T("i"),r=$(),s=T("div"),a=T("i"),d=$(),f=T("h2"),m=N(R),y=$(),v=T("div"),w=T("div"),g=T("div"),x=T("h2"),x.textContent="Sort By",k=$(),E=T("div"),I=N("×"),D=$(),U=T("div");for(let e=0;e<B.length;e+=1)B[e].c();C(o,"class",l=p("icon fa-solid fa-arrows-"+(e[13]?"up-down":"left-right"))+" svelte-6np4xh"),C(n,"tabindex","0"),C(n,"class","changeGridView svelte-6np4xh"),C(a,"tabindex",c=e[6]?"":"0"),C(a,"class",u=p("fa-duotone fa-sort-"+("asc"===e[12]?"up":"down"))+" svelte-6np4xh"),C(f,"tabindex",h=e[6]?"":"0"),C(f,"class","svelte-6np4xh"),C(x,"class","svelte-6np4xh"),C(E,"class","closing-x svelte-6np4xh"),C(E,"tabindex",P=e[6]&&e[3]<=425?"0":""),C(g,"class","header svelte-6np4xh"),C(U,"class","options svelte-6np4xh"),C(w,"class",j=p("options-wrap-filter-info "+(e[6]?"":"hide"))+" svelte-6np4xh"),C(v,"class",O=p("options-wrap "+(e[6]?"":"disable-interaction hide"))+" svelte-6np4xh"),F(v,"--maxFilterSelectionHeight",H),C(s,"class","sortFilter svelte-6np4xh"),C(t,"class","last-filter-option svelte-6np4xh")},m(i,l){S(i,t,l),b(t,n),b(n,o),b(t,r),b(t,s),b(s,a),b(s,d),b(s,f),b(f,m),b(s,y),b(s,v),b(v,w),b(w,g),b(g,x),b(g,k),b(g,E),b(E,I),b(w,D),b(w,U);for(let e=0;e<B.length;e+=1)B[e]&&B[e].m(U,null);V||(_=[L(n,"click",e[33]),L(n,"keydown",e[72]),L(a,"click",e[32]),L(a,"keydown",e[73]),L(f,"click",e[30]),L(f,"keydown",e[74]),L(E,"keydown",e[75]),L(E,"click",e[30])],V=!0)},p(e,t){8192&t[0]&&l!==(l=p("icon fa-solid fa-arrows-"+(e[13]?"up-down":"left-right"))+" svelte-6np4xh")&&C(o,"class",l),64&t[0]&&c!==(c=e[6]?"":"0")&&C(a,"tabindex",c),4096&t[0]&&u!==(u=p("fa-duotone fa-sort-"+("asc"===e[12]?"up":"down"))+" svelte-6np4xh")&&C(a,"class",u),2048&t[0]&&R!==(R=(e[11]||"")+"")&&M(m,R),64&t[0]&&h!==(h=e[6]?"":"0")&&C(f,"tabindex",h),72&t[0]&&P!==(P=e[6]&&e[3]<=425?"0":"")&&C(E,"tabindex",P),6146&t[0]|1&t[1]&&(W=e[1]?.sortFilter||[],B=ve(B,t,G,1,e,W,q,U,he,Bi,null,Jo)),64&t[0]&&j!==(j=p("options-wrap-filter-info "+(e[6]?"":"hide"))+" svelte-6np4xh")&&C(w,"class",j),64&t[0]&&O!==(O=p("options-wrap "+(e[6]?"":"disable-interaction hide"))+" svelte-6np4xh")&&C(v,"class",O),16&t[0]&&H!==(H=`${e[4]}px`)&&F(v,"--maxFilterSelectionHeight",H)},d(e){e&&A(t);for(let e=0;e<B.length;e+=1)B[e].d();V=!1,i(_)}}}function Ri(e){let t,n;return{c(){t=T("i"),C(t,"class",n=p("fa-duotone fa-sort-"+("asc"===e[12]?"up":"down"))+" svelte-6np4xh")},m(e,n){S(e,t,n)},p(e,o){4096&o[0]&&n!==(n=p("fa-duotone fa-sort-"+("asc"===e[12]?"up":"down"))+" svelte-6np4xh")&&C(t,"class",n)},d(e){e&&A(t)}}}function Bi(e,t){let n,o,r,s,a,c,u,d=(t[106]?.sortName||"")+"",p=t[11]===t[106]?.sortName&&Ri(t);function f(...e){return t[76](t[106],...e)}return{key:e,first:null,c(){n=T("div"),o=T("h3"),r=N(d),s=$(),p&&p.c(),a=$(),C(o,"class","svelte-6np4xh"),C(n,"class","option svelte-6np4xh"),this.first=n},m(e,i){S(e,n,i),b(n,o),b(o,r),b(n,s),p&&p.m(n,null),b(n,a),c||(u=[L(n,"click",(function(){l(t[31](t[106]?.sortName))&&t[31](t[106]?.sortName).apply(this,arguments)})),L(n,"keydown",f)],c=!0)},p(e,o){t=e,2&o[0]&&d!==(d=(t[106]?.sortName||"")+"")&&M(r,d),t[11]===t[106]?.sortName?p?p.p(t,o):(p=Ri(t),p.c(),p.m(n,a)):p&&(p.d(1),p=null)},d(e){e&&A(n),p&&p.d(),c=!1,i(u)}}}function qi(e){let t,n,o,l,r,s,a,c,u,f,m,h,y,v,w,g,x,k,E,N,I,P,M,U,j,O,V,_,R,B,q,H,W,G,K,Y,z=`${e[4]}px`,J=[],X=new Map;function Q(e,t){return e[1]?ri:li}let Z=Q(e),ee=Z(e),te=(e[15]||!e[17])&&si(e),ne=e[1]&&di(e);function oe(e,t){return e[1]?mi:fi}let ie=oe(e),le=ie(e),re=!e[7]&&Mi(e),se=e[7]&&Di(e),ae=e[10]||[];const fe=e=>e[109]?.optionName+e[109]?.optionIdx+(e[109]?.optionType??"")||{};for(let t=0;t<ae.length;t+=1){let n=Xo(e,ae,t),o=fe(n);X.set(o,J[t]=Oi(o,n))}function me(e,t){return e[1]?_i:Vi}let he=me(e),we=he(e);const ge=e[44].default,be=function(e,t,n,o){if(e){const i=d(e,t,n,o);return e[0](i)}}(ge,e,e[43],null);return{c(){t=T("main"),n=T("div"),ee.c(),o=$(),te&&te.c(),l=$(),r=T("div"),s=T("label"),s.textContent="Search Title",a=$(),c=T("input"),u=$(),f=T("div"),m=T("i"),y=$(),v=T("div"),ne&&ne.c(),g=$(),x=T("div"),k=T("i"),E=$(),N=T("div"),le.c(),P=$(),M=T("div"),re&&re.c(),U=$(),j=T("div"),se&&se.c(),O=$();for(let e=0;e<J.length;e+=1)J[e].c();V=$(),_=T("div"),R=T("i"),H=$(),we.c(),W=$(),be&&be.c(),C(n,"class","home-status svelte-6np4xh"),C(s,"class","disable-interaction svelte-6np4xh"),C(s,"for","input-search"),C(c,"id","input-search"),C(c,"class","input-search svelte-6np4xh"),C(c,"type","search"),C(c,"enterkeyhint","search"),C(c,"autocomplete","off"),C(c,"placeholder","Search"),C(m,"class","input-search-wrap-icon fa-solid fa-sliders svelte-6np4xh"),C(m,"tabindex",h=e[5]?"":"0"),C(v,"class",w=p("options-wrap "+(e[5]?"":"disable-interaction hide"))+" svelte-6np4xh"),F(v,"--maxFilterSelectionHeight",z),C(f,"class","filterType svelte-6np4xh"),C(k,"class",p("showFilterOptions fa-solid fa-filter")+" svelte-6np4xh"),C(k,"tabindex","0"),C(x,"class","showFilterOptions-container svelte-6np4xh"),C(r,"class","input-search-wrap svelte-6np4xh"),C(N,"class",I=p("filters "+(e[8]?"":"disable-interaction")+(e[18]?" hasWheel":""))+" svelte-6np4xh"),C(N,"id","filters"),F(N,"--maxPaddingHeight",e[4]+65+"px"),C(j,"id","tagFilters"),C(j,"class","tagFilters svelte-6np4xh"),F(j,"max-height",e[7]?"200px":"30px"),C(R,"class",B=p("icon fa-solid fa-angle-"+(e[7]?"up":"down"))+" svelte-6np4xh"),C(_,"tabindex","0"),C(_,"class","showHideActiveFilters svelte-6np4xh"),C(M,"class",q=p("activeFilters"+(e[7]?" seenMore":""))+" svelte-6np4xh"),C(t,"id","main-home"),C(t,"class","svelte-6np4xh"),F(t,"--filters-space",e[8]?"80px":"")},m(i,d){S(i,t,d),b(t,n),ee.m(n,null),b(n,o),te&&te.m(n,null),b(t,l),b(t,r),b(r,s),b(r,a),b(r,c),D(c,e[16]),b(r,u),b(r,f),b(f,m),b(f,y),b(f,v),ne&&ne.m(v,null),b(r,g),b(r,x),b(x,k),b(t,E),b(t,N),le.m(N,null),b(t,P),b(t,M),re&&re.m(M,null),b(M,U),b(M,j),se&&se.m(j,null),b(j,O);for(let e=0;e<J.length;e+=1)J[e]&&J[e].m(j,null);b(M,V),b(M,_),b(_,R),b(t,H),we.m(t,null),b(t,W),be&&be.m(t,null),G=!0,K||(Y=[L(c,"input",e[46]),L(m,"click",e[21]),L(m,"keydown",e[47]),L(k,"click",e[34]),L(k,"keydown",e[50]),L(N,"wheel",e[64]),L(_,"click",e[35]),L(_,"keydown",e[71])],K=!0)},p(e,i){Z===(Z=Q(e))&&ee?ee.p(e,i):(ee.d(1),ee=Z(e),ee&&(ee.c(),ee.m(n,o))),e[15]||!e[17]?te?(te.p(e,i),163840&i[0]&&de(te,1)):(te=si(e),te.c(),de(te,1),te.m(n,null)):te&&(ce(),pe(te,1,1,(()=>{te=null})),ue()),65536&i[0]&&c.value!==e[16]&&D(c,e[16]),(!G||32&i[0]&&h!==(h=e[5]?"":"0"))&&C(m,"tabindex",h),e[1]?ne?ne.p(e,i):(ne=di(e),ne.c(),ne.m(v,null)):ne&&(ne.d(1),ne=null),(!G||32&i[0]&&w!==(w=p("options-wrap "+(e[5]?"":"disable-interaction hide"))+" svelte-6np4xh"))&&C(v,"class",w),16&i[0]&&z!==(z=`${e[4]}px`)&&F(v,"--maxFilterSelectionHeight",z),ie===(ie=oe(e))&&le?le.p(e,i):(le.d(1),le=ie(e),le&&(le.c(),le.m(N,null))),(!G||262400&i[0]&&I!==(I=p("filters "+(e[8]?"":"disable-interaction")+(e[18]?" hasWheel":""))+" svelte-6np4xh"))&&C(N,"class",I),16&i[0]&&F(N,"--maxPaddingHeight",e[4]+65+"px"),e[7]?re&&(re.d(1),re=null):re?re.p(e,i):(re=Mi(e),re.c(),re.m(M,U)),e[7]?se?se.p(e,i):(se=Di(e),se.c(),se.m(j,O)):se&&(se.d(1),se=null),402654208&i[0]&&(ae=e[10]||[],ce(),J=ve(J,i,fe,1,e,ae,X,j,ye,Oi,null,Xo),ue()),128&i[0]&&F(j,"max-height",e[7]?"200px":"30px"),(!G||128&i[0]&&B!==(B=p("icon fa-solid fa-angle-"+(e[7]?"up":"down"))+" svelte-6np4xh"))&&C(R,"class",B),(!G||128&i[0]&&q!==(q=p("activeFilters"+(e[7]?" seenMore":""))+" svelte-6np4xh"))&&C(M,"class",q),he===(he=me(e))&&we?we.p(e,i):(we.d(1),we=he(e),we&&(we.c(),we.m(t,W))),be&&be.p&&(!G||4096&i[1])&&function(e,t,n,o,i,l){if(i){const r=d(t,n,o,l);e.p(r,i)}}(be,ge,e,e[43],G?function(e,t,n,o){if(e[2]&&o){const i=e[2](o(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|i[o];return e}return t.dirty|i}return t.dirty}(ge,e[43],i,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[43]),null),256&i[0]&&F(t,"--filters-space",e[8]?"80px":"")},i(e){if(!G){de(te);for(let e=0;e<ae.length;e+=1)de(J[e]);de(be,e),G=!0}},o(e){pe(te);for(let e=0;e<J.length;e+=1)pe(J[e]);pe(be,e),G=!1},d(e){e&&A(t),ee.d(),te&&te.d(),ne&&ne.d(),le.d(),re&&re.d(),se&&se.d();for(let e=0;e<J.length;e+=1)J[e].d();we.d(),be&&be.d(e),K=!1,i(Y)}}}function Hi(e,t){if("string"==typeof e&&"string"==typeof t)return e.toLowerCase().includes(t.trim().toLowerCase())}const Wi=()=>{},Gi=()=>{};function Ki(e,t,n){let o,i,l,r,s,a,c,d,p,m,h,y,v,w,g,b;u(e,Be,(e=>n(40,i=e))),u(e,dt,(e=>n(41,l=e))),u(e,gt,(e=>n(86,r=e))),u(e,Ye,(e=>n(1,s=e))),u(e,Xe,(e=>n(87,a=e))),u(e,Je,(e=>n(88,c=e))),u(e,mt,(e=>n(89,d=e))),u(e,ut,(e=>n(14,p=e))),u(e,ze,(e=>n(42,m=e))),u(e,Qe,(e=>n(15,h=e))),u(e,Ke,(e=>n(90,y=e))),u(e,wt,(e=>n(16,v=e))),u(e,Ze,(e=>n(91,w=e))),u(e,Ge,(e=>n(17,g=e))),u(e,We,(e=>n(18,b=e)));let x,k,S,A,E,T,N,$,I,L,P,C,M,D,F,{$$slots:U={},$$scope:j}=t,O=!0,V=Math.max(window.visualViewport.width,window.innerWidth),_=Math.max(window.visualViewport.height,window.innerHeight),R=.3*_,B=!1,q=!1,H=["Algorithm Filter"],G=["sort","Anime Filter","Content Caution"],K=["weighted score","score","average score","user score","popularity"],Y=!1,z=!1;async function J(e){p||(H.includes(e)?(Y=!0,f(Qe,h="Updating List",h),async function(){await Xn(!0,"shouldProcessRecommendation"),Ln({filterOptions:s,activeTagFilters:m}).then((async()=>{await Xn(!1,"shouldProcessRecommendation"),Ut.update((e=>!e)),X()})).catch((e=>{throw X(),e}))}()):G.includes(e)?(z=!0,f(Qe,h="Updating List",h),X()):z||Y||w||(await Xn(s,"filterOptions"),await Xn(m,"activeTagFilters")))}function X(){a&&(a.terminate(),f(Xe,a=null,a)),Nn({filterOptions:s,activeTagFilters:m}).then((async e=>{Y=z=!1,f(Xe,a=e.animeLoaderWorker,a),f(wt,v="",v),e?.isNew&&(f(Je,c=e.finalAnimeList,c),f(Ke,y=e.hiddenEntries,y)),f(Qe,h=null,h)})).catch((e=>{throw e}))}async function Q(){let e=document.getElementById("tagFilters");await Z(),e instanceof Element&&(e.scrollTop=0)}function ee(){_=Math.max(window.visualViewport.height,window.innerHeight),n(4,R=.3*_),n(3,V=Math.max(window.visualViewport.width,window.innerWidth))}async function te(e){if(p)return xe();let t=I,o=s?.filterSelection?.[t].filterSelectionName;if(o!==e){n(6,S=!1),c?.length>36&&!l&&await be(),s?.filterSelection?.[t].filters.Dropdown.forEach((e=>{e.selected=!1})),f(Ye,s.filterSelection[t]=s?.filterSelection?.[t],s),k=null,f(Ye,s.filterSelection[t].isSelected=!1,s);let o=s?.filterSelection?.findIndex((({filterSelectionName:t})=>t===e));f(Ye,s.filterSelection[o].isSelected=!0,s),async function(){let e=document.getElementById("filters");await Z(),e instanceof Element&&(e.scrollLeft=0)}(),Q(),J()}A instanceof Element&&A.closest(".filterType")&&(Ue(A,"highlight"),A=null),n(5,x=!1)}function ne(e){if(p&&(s?.filterSelection?.length??0)<1)return xe();let t=e.target,o=t.classList,i=t.closest(".filterType"),l=t.closest(".options-wrap");!o.contains("filterType")&&!i||x?l&&!o.contains("closing-x")||o.contains("options-wrap")||(A instanceof Element&&A.closest(".filterType")&&(Ue(A,"highlight"),A=null),n(5,x=!1)):n(5,x=!0)}function oe(){E&&clearTimeout(E),T=!0,E=setTimeout((()=>{T=!1}),300)}function ie(e,t){if(T&&"mouse"===e.pointerType)return;let o=e.target,i=o.closest(".filter-select");if(i===k)return;let l=I;if(k instanceof Element){let e=Array.from(k.parentElement.children).filter((e=>!e.classList.contains("disable-interaction"))).indexOf(k);if(o.classList.contains("icon")&&!o.classList.contains("fa-angle-down")&&s?.filterSelection?.[l].filters.Dropdown[e].selected)return;f(Ye,s.filterSelection[l].filters.Dropdown[e].selected=!1,s)}O&&n(2,O=!1),A instanceof Element&&A.closest(".filter-select")&&(Ue(A,"highlight"),A=null),f(Ye,s.filterSelection[l].filters.Dropdown[t].selected=!0,s),k=i}function le(e){let t=I;f(Ye,s.filterSelection[t].filters.Dropdown[e].selected=!1,s),A instanceof Element&&A.closest(".filter-select")&&(Ue(A,"highlight"),A=null),k=null}async function re(e){if(s?.filterSelection?.length<1||!s)return;let t=e.target,o=t.classList;if(o.contains("options-wrap")&&"fixed"===getComputedStyle(t).position){A instanceof Element&&(Ue(A,"highlight"),A=null),n(5,x=!1),n(6,S=!1);let e=I;s?.filterSelection?.[e].filters.Dropdown.forEach((e=>{e.selected=!1})),f(Ye,s.filterSelection[e]=s?.filterSelection?.[e],s),k=null}else if(!o.contains("options-wrap")&&!t.closest(".options-wrap")&&!o.contains("async-element")){let e=t.closest(".filterType");o.contains("filterType")||e||(A instanceof Element&&A.closest(".filterType")&&(Ue(A,"highlight"),A=null),n(5,x=!1));let i=t.closest(".sortFilter");o.contains("sortFilter")||i||(A instanceof Element&&A.closest(".sortFilter")&&(Ue(A,"highlight"),A=null),n(6,S=!1));let l=t.closest(".select");if(!o.contains("select")&&!o.contains("fa-angle-down")&&!l){A instanceof Element&&A.closest(".filter-select")&&(Ue(A,"highlight"),A=null);let e=I;s?.filterSelection?.[e].filters.Dropdown.forEach((e=>{e.selected=!1})),f(Ye,s.filterSelection[e]=s?.filterSelection?.[e],s),k=null}}}function se(e,t,n,o,i,l){if(p)return xe();let r=I,a=s?.filterSelection?.[r].filterSelectionName,c=s?.filterSelection?.[r].filters.Dropdown[o].options[n].selected;"none"===c||!0===c||"read"===i&&"included"!==c?(f(Ye,s.filterSelection[r].filters.Dropdown[o].options[n].selected="included",s),f(ze,m[a]=m[a].filter((o=>o.optionName+o.optionIdx+o.optionType!==e+n+t)),m),m[a].unshift({optionName:e,optionType:t,optionIdx:n,categIdx:o,selected:"included",changeType:i,filterType:"dropdown"}),ze.set(m)):"included"===c?"read"===i?(f(Ye,s.filterSelection[r].filters.Dropdown[o].options[n].selected="none",s),f(ze,m[a]=m[a].filter((i=>!(i.optionIdx===n&&i.optionName===e&&"dropdown"===i.filterType&&i.categIdx===o&&(!i.optionType||i.optionType===t)))),m)):(f(Ye,s.filterSelection[r].filters.Dropdown[o].options[n].selected="excluded",s),f(ze,m[a]=m[a].map((i=>(i.optionIdx===n&&i.optionName===e&&"dropdown"===i.filterType&&i.categIdx===o&&"included"===i.selected&&i.optionType===t&&(i.selected="excluded"),i))),m)):(f(Ye,s.filterSelection[r].filters.Dropdown[o].options[n].selected="none",s),f(ze,m[a]=m[a].filter((i=>!(i.optionIdx===n&&i.optionName===e&&"dropdown"===i.filterType&&i.categIdx===o&&i.optionType===t))),m)),J(l)}function ae(e,t,n,o){let i=e.target.classList,l=e.which||e.keyCode||0;if(i.contains("checkbox")&&"click"===e.type||i.contains("checkbox")&&13!==l&&"keydown"===e.type||T&&"mouse"===e.pointerType)return;if(p)return void(i.contains("checkbox")||xe());let r=I,a=s?.filterSelection?.[r].filterSelectionName,c=s?.filterSelection?.[r].filters.Checkbox[n].isSelected;c?f(ze,m[a]=m[a].filter((e=>!(e.optionIdx===n&&e.optionName===t&&"checkbox"===e.filterType&&"included"===e.selected))),m):(f(ze,m[a]=m[a].filter((e=>e.optionName+e.optionIdx!==t+n)),m),m[a].unshift({optionName:t,optionIdx:n,filterType:"checkbox",selected:"included",changeType:"read"}),ze.set(m)),f(Ye,s.filterSelection[r].filters.Checkbox[n].isSelected=!s?.filterSelection?.[r].filters.Checkbox[n].isSelected,s),J(o)}function ce(e,t,n,o,i,l,r){if(p)return xe();let a=I,c=s?.filterSelection?.[a].filterSelectionName,u=s?.filterSelection?.[a].filters["Input Number"][n].numberValue;if(K.includes(o)&&/^(>=|<=|<|>).*($)/.test(t)){let d=t.split(/(<=|>=|<|>)/).filter((e=>e));if(t!==u&&d.length<=2){let p,h,y=t.split(/(<=|>=|<|>)/).filter((e=>e));if(d[0].includes(">")||d[0].includes("<")?(p=d[0],h=d[1]):(p=d[1],h=d[0]),y[0].includes(">")||y[0].includes("<")?(y[0],y[1]):(y[1],y[0]),t!==u&&(!isNaN(h)&&(parseFloat(h)>=l||"number"!=typeof l)&&(parseFloat(h)<=i||"number"!=typeof i)||!h)){if(h){let e=m[c].findIndex((e=>e.optionName===o&&e.optionValue===u&&e.optionIdx===n&&"input number"===e.filterType));-1===e?(f(ze,m[c]=m[c].filter((e=>e.optionName+e.optionIdx!==o+n)),m),m[c].unshift({optionName:o,optionValue:t,CMPoperator:p,CMPNumber:h,optionIdx:n,filterType:"input number",selected:"included",changeType:"read"})):(m[c].splice(e,1),f(ze,m[c]=m[c].filter((e=>e.optionName+e.optionIdx!==o+n)),m),m[c].unshift({optionName:o,optionValue:t,CMPoperator:p,CMPNumber:h,optionIdx:n,filterType:"input number",selected:"included",changeType:"read"})),ze.set(m)}else f(ze,m[c]=m[c].filter((e=>!(e.optionIdx===n&&e.optionName===o&&e.optionValue===u&&"input number"===e.filterType))),m);f(Ye,s.filterSelection[a].filters["Input Number"][n].numberValue=t,s),J(r)}else Pe(e.target,u)}else{let t=m[c].findIndex((e=>e.optionName===o&&e.optionValue===u&&e.optionIdx===n&&"input number"===e.filterType));t>=0&&f(ze,m[c][t].selected="included",m),Pe(e.target,u)}}else if(t!==u&&(!isNaN(t)&&(parseFloat(t)>=l||"number"!=typeof l)&&(parseFloat(t)<=i||"number"!=typeof i)||""===t)){if(""===t)f(ze,m[c]=m[c].filter((e=>!(e.optionIdx===n&&e.optionName===o&&e.optionValue===u&&"input number"===e.filterType))),m);else{let e=m[c].findIndex((e=>e.optionName===o&&e.optionValue===u&&e.optionIdx===n&&"input number"===e.filterType));-1===e?(f(ze,m[c]=m[c].filter((e=>e.optionName+e.optionIdx!==o+n)),m),m[c].unshift({optionName:o,optionValue:t,optionIdx:n,filterType:"input number",selected:"included",changeType:"read"})):(m[c].splice(e,1),f(ze,m[c]=m[c].filter((e=>e.optionName+e.optionIdx!==o+n)),m),m[c].unshift({optionName:o,optionValue:t,optionIdx:n,filterType:"input number",selected:"included",changeType:"read"})),ze.set(m)}f(Ye,s.filterSelection[a].filters["Input Number"][n].numberValue=t,s),J(r)}else elementIdx>=0&&f(ze,m[c][elementIdx].selected="included",m),Pe(e.target,u)}function ue(e,t,n,o,i,l,r,a){if(p)return xe();let c=I,u=s?.filterSelection?.[c].filterSelectionName;if("input number"===o){let e=m[u].findIndex((e=>e.optionName===n&&e.optionValue===a&&e.optionIdx===t&&"input number"===e.filterType));if(e>=0){let t=m[u][e].selected;f(ze,m[u][e].selected="included"===t?"excluded":"included",m)}}else if("checkbox"===o){let e=m[u].findIndex((e=>e.optionIdx===t&&e.optionName===n&&e.filterType===o)),i=m?.[u]?.[e]?.selected;"included"===i?(f(ze,m[u][e].selected="excluded",m),f(Ye,s.filterSelection[c].filters.Checkbox[t].isSelected=!1,s)):"excluded"===i&&(f(ze,m[u][e].selected="included",m),f(Ye,s.filterSelection[c].filters.Checkbox[t].isSelected=!0,s))}else if("dropdown"===o){let e=s?.filterSelection?.[c].filters.Dropdown[i].options[t].selected;"included"===e?(f(Ye,s.filterSelection[c].filters.Dropdown[i].options[t].selected="excluded",s),f(ze,m[u]=m[u].map((e=>(e.optionIdx!==t||e.optionName!==n||"included"!==e.selected||e.optionType&&e.optionType!==r||(e.selected="excluded"),e))),m)):"excluded"===e&&(f(Ye,s.filterSelection[c].filters.Dropdown[i].options[t].selected="included",s),f(ze,m[u]=m[u].map((e=>(e.optionIdx!==t||e.optionName!==n||"excluded"!==e.selected||e.optionType&&e.optionType!==r||(e.selected="included"),e))),m))}J(u)}function de(e,t,n,o,i,l){if(p)return xe();let r=I,a=s?.filterSelection?.[r].filterSelectionName;f(Ye,"checkbox"===o?s.filterSelection[r].filters.Checkbox[t].isSelected=!1:"input number"===o?s.filterSelection[r].filters["Input Number"][t].numberValue="":s.filterSelection[r].filters.Dropdown[i].options[t].selected="none",s),f(ze,m[a]=m[a].filter((e=>!(e.optionName===n&&e.optionIdx===t&&e.filterType===o&&(!e.optionType||e.optionType===l)))),m),J(a)}async function pe(e){if(p)return xe();let t=I,n=s?.filterSelection?.[t].filterSelectionName,o=m?.[n]?.length;o&&await r("Do you want to remove all filters?")&&(s?.filterSelection?.[t].filters["Input Number"].forEach((e=>{e.numberValue=""})),s?.filterSelection?.[t].filters.Checkbox.forEach((e=>{e.isSelected=!1})),s?.filterSelection?.[t].filters.Dropdown.forEach((({options:e},n)=>{e.forEach((({selected:e},o)=>{f(Ye,s.filterSelection[t].filters.Dropdown[n].options[o].selected="none",s)}))})),f(Ye,s.filterSelection[t]=s?.filterSelection?.[t],s),f(ze,m[n]=[],m),J(n))}function fe(e){let t=e.target,o=t.classList,i=t.closest(".sortFilter"),l=t.closest(".options-wrap");!o.contains("sortFilter")&&!i||S?l&&!o.contains("closing-x")||o.contains("options-wrap")||(A instanceof Element&&A.closest(".sortFilter")&&(Ue(A,"highlight"),A=null),n(6,S=!1)):n(6,S=!0)}function me(e){if(p)return xe();let t=P,o=s?.sortFilter?.[t],i=o?.sortName,l=o?.sortType;if(i===e){let e="desc"===l?"asc":"desc";f(Ye,s.sortFilter[t].sortType=e,s)}else if(i!==e){f(Ye,s.sortFilter[t].sortType="none",s);let n=s?.sortFilter?.findIndex((({sortName:t})=>t===e));f(Ye,s.sortFilter[n].sortType="desc",s)}J("sort"),A instanceof Element&&A.closest(".sortFilter")&&(Ue(A,"highlight"),A=null),n(6,S=!1)}function he(){if(p)return xe();let e=P,t=s?.sortFilter?.[e]?.sortType;f(Ye,s.sortFilter[e].sortType="desc"===t?"asc":"desc",s),J("sort")}function ye(e){let t=e.which||e.keyCode||0;if(38==t||40==t){var o=Array.from(document.getElementsByClassName("options-wrap")||[]).find((e=>!e.classList.contains("disable-interaction")));if(o?.closest?.(".filterType")||o?.closest?.(".sortFilter")||o?.closest?.(".filter-select"))if(e.preventDefault(),A instanceof Element&&A?.closest?.(".options")?.children?.length){let e,n,o,i,l=A.closest(".options"),r=Array.from(l.querySelectorAll(".option")),s=r.indexOf(A);for(let l=0;l<r.length;l++)if(!r[l].classList.contains("disable-interaction"))if(38===t){if(i=r[l],l<s)n=r[l];else if(n){e=n;break}}else if(o||(o=r[l]),l>s){e=r[l];break}let a=!1;e instanceof Element||(o instanceof Element?(e=o,a=!0):i instanceof Element&&(e=i,a=!0)),e instanceof Element&&(Ue(A,"highlight"),A=e,Fe(A,"highlight"),A.scrollIntoView({behavior:a?"auto":"smooth",container:l,block:"center",inline:"nearest"}))}else{let e=o.querySelectorAll(".option:not(.disable-interaction)");A=e[0],A instanceof Element&&(Fe(A,"highlight"),A.scrollIntoView({behavior:"smooth",container:parent,block:"center",inline:"nearest"}))}}else if(13===t){if(A instanceof Element){let e=new KeyboardEvent("keydown",{key:"Enter"});A.dispatchEvent(e)}}else{o=Array.from(document.getElementsByClassName("options-wrap")||[]).find((e=>!e.classList.contains("disable-interaction")));if(o?.closest?.(".filter-select")&&9!==t||o instanceof Element&&"fixed"===getComputedStyle(o).position)return;let e=I;n(5,x=null),n(6,S=null),s?.filterSelection?.length>0&&(s?.filterSelection?.[e].filters.Dropdown.forEach((e=>{e.selected=!1})),f(Ye,s.filterSelection[e]=s?.filterSelection?.[e],s)),k=null,A instanceof Element&&(Ue(A,"highlight"),A=null)}}async function ve(){f(dt,l=!l,l),Bn(l,"gridFullView")}async function we(e=null){c?.length>36&&!l&&await be(),n(8,q="boolean"==typeof e?e:!q)}async function ge(e=null){c?.length>36&&!l&&await be(),n(7,B="boolean"==typeof e?e:!B),Q()}function be(){return new Promise((e=>{a instanceof Worker&&d().then((()=>{f(Je,c=null,c),a?.postMessage?.({reload:!0})})).catch((()=>{r({isAlert:!0,title:"Something went wrong",text:"Action failed, please try again."})})),F={resolve:e}}))}function xe(){r({isAlert:!0,title:"Initializing resources",text:"Please wait a moment..."})}Lt.subscribe((e=>{"boolean"==typeof e&&F?.resolve?.()})),window.checkOpenDropdown=()=>(k||x||S)&&Math.max(window.visualViewport.width,window.innerWidth)<=425,window.closeDropdown=function(){A instanceof Element&&(Ue(A,"highlight"),A=null),n(5,x=!1),n(6,S=!1);let e=I;s?.filterSelection?.[e].filters.Dropdown.forEach((e=>{e.selected=!1})),f(Ye,s.filterSelection[e]=s?.filterSelection?.[e],s),k=null},W((()=>{let e=document.getElementById("filters");e.addEventListener("scroll",oe,{passive:!0}),Ce(e,"x"),document.addEventListener("keydown",ye),window.addEventListener("resize",ee),window.addEventListener("click",re)}));let ke=V>750&&_>695;return e.$$set=e=>{"$$scope"in e&&n(43,j=e.$$scope)},e.$$.update=()=>{2&e.$$.dirty[0]&&n(37,I=s?.filterSelection?.findIndex((({isSelected:e})=>e))),2&e.$$.dirty[0]|64&e.$$.dirty[1]&&n(0,L=s?.filterSelection?.[I]?.filterSelectionName),1&e.$$.dirty[0]|2048&e.$$.dirty[1]&&n(10,$=m?.[L]||[]),2&e.$$.dirty[0]&&n(38,P=s?.sortFilter?.findIndex((({sortType:e})=>"none"!==e))),2&e.$$.dirty[0]|128&e.$$.dirty[1]&&n(39,C=s?.sortFilter?.[P]),256&e.$$.dirty[1]&&n(11,M=C?.sortName),256&e.$$.dirty[1]&&n(12,D=C?.sortType),1536&e.$$.dirty[1]&&n(13,o=l??Oe("gridFullView")??(!i&&ke))},[L,s,O,V,R,x,S,B,q,N,$,M,D,o,p,h,v,g,b,K,te,ne,ie,le,se,ae,ce,ue,de,pe,fe,me,he,ve,we,ge,xe,I,P,C,i,l,m,j,U,(e,{optionName:t})=>Hi(t,e?.optKeyword)||""===e?.optKeyword,function(){v=this.value,wt.set(v)},e=>"Enter"===e.key&&ne(e),e=>"Enter"===e.key&&ne(e),(e,t)=>"Enter"===t.key&&te(e?.filterSelectionName),e=>"Enter"===e.key&&we(e),function(e,t){s.filterSelection[e].filters.Dropdown[t].optKeyword=this.value,Ye.set(s)},(e,t)=>"Enter"===t.key&&le(e),(e,t)=>("Enter"===t.key||"ArrowDown"===t.key||"ArrowUp"===t.key)&&ie(t,e),(e,t)=>{ie(t,e)},(e,t)=>"Enter"===t.key&&le(e),function(e,t){s.filterSelection[e].filters.Dropdown[t].optKeyword=this.value,Ye.set(s)},(e,t,n,o,i,l)=>"Enter"===l.key&&se(e.optionName,t.filName,n,o,t.changeType,i.filterSelectionName),e=>{e.target.checked=!1,xe()},(e,t,n,o)=>ae(o,e.filName,t,n.filterSelectionName),function(e,t){e[t].isSelected=this.checked},(e,t,n,o)=>ae(o,e.filName,t,n.filterSelectionName),(e,t,n,o)=>"Enter"===o.key&&ae(o,e.filName,t,n.filterSelectionName),(e,t,n,o)=>ce(o,o.target.value,e,t.filName,t.maxValue,t.minValue,n.filterSelectionName),e=>{if(function(e,t){let n=e.target;n.classList.contains(t)||(n=n.closest("."+t)),n.scrollWidth<=n.clientWidth||0!==e.deltaY&&0===e.deltaX&&(e.preventDefault(),e.stopPropagation(),n.scrollLeft=Math.max(0,n.scrollLeft+e.deltaY))}(e,"filters"),o&&!N&&e.deltaY<0){n(9,N=!0);let e=0;document.documentElement.scrollTop=e,n(9,N=!1)}},e=>"Enter"===e.key&&pe(),e=>"Enter"===e.key&&pe(),(e,t)=>de(0,e?.optionIdx,e?.optionName,e?.filterType,e?.categIdx,e?.optionType),(e,t)=>"Enter"===t.key&&de(0,e?.optionIdx,e?.optionName,e?.filterType,e?.categIdx,e?.optionType),(e,t)=>ue(0,e?.optionIdx,e?.optionName,e?.filterType,e?.categIdx,e?.changeType,e?.optionType,e?.optionValue),(e,t)=>"Enter"===t.key&&ue(0,e?.optionIdx,e?.optionName,e?.filterType,e?.categIdx,e?.changeType,e?.optionType,e?.optionValue),e=>"Enter"===e.key&&ge(),e=>"Enter"===e.key&&ve(),e=>"Enter"===e.key&&he(),e=>"Enter"===e.key&&fe(e),e=>"Enter"===e.key&&fe(e),(e,t)=>"Enter"===t.key&&me(e?.sortName),e=>"Enter"===e.key&&ve()]}function Yi(e){let t,n,o,l,r,s,a,c,u,d,p,f,m,h,y,v,w,g=!e[1]&&zi(e);return{c(){t=T("div"),n=T("div"),o=T("div"),l=T("div"),r=T("h2"),s=N(e[2]),a=$(),c=T("h2"),u=$(),d=T("div"),g&&g.c(),p=$(),f=T("button"),m=N(e[4]),C(r,"class","confirm-title svelte-a42e5c"),C(c,"class","confirm-text svelte-a42e5c"),C(l,"class","confirm-info-container svelte-a42e5c"),C(f,"class","button svelte-a42e5c"),C(d,"class","confirm-button-container svelte-a42e5c"),C(o,"class","confirm-container svelte-a42e5c"),C(n,"class","confirm-wrapper svelte-a42e5c"),F(n,"--height",e[7]?"calc(100% + 1px)":"100%"),C(t,"class","confirm svelte-a42e5c")},m(i,h){S(i,t,h),b(t,n),b(n,o),b(o,l),b(l,r),b(r,s),b(l,a),b(l,c),c.innerHTML=e[3],b(o,u),b(o,d),g&&g.m(d,null),b(d,p),b(d,f),b(f,m),e[12](f),y=!0,v||(w=[L(f,"click",e[8]),L(f,"keydown",e[13]),L(t,"click",e[10]),L(t,"touchend",e[10],{passive:!0}),L(t,"keydown",e[14])],v=!0)},p(e,t){(!y||4&t)&&M(s,e[2]),(!y||8&t)&&(c.innerHTML=e[3]),e[1]?g&&(g.d(1),g=null):g?g.p(e,t):(g=zi(e),g.c(),g.m(d,p)),(!y||16&t)&&M(m,e[4]),128&t&&F(n,"--height",e[7]?"calc(100% + 1px)":"100%")},i(e){y||(h&&h.end(1),y=!0)},o(e){h=me(o,Vt,{duration:200}),y=!1},d(n){n&&A(t),g&&g.d(),e[12](null),n&&h&&h.end(),v=!1,i(w)}}}function zi(e){let t,n,o,l;return{c(){t=T("button"),n=N(e[5]),C(t,"class","button svelte-a42e5c")},m(i,r){S(i,t,r),b(t,n),o||(l=[L(t,"click",e[9]),L(t,"keydown",e[11])],o=!0)},p(e,t){32&t&&M(n,e[5])},d(e){e&&A(t),o=!1,i(l)}}}function Ji(e){let t,n,o=e[0]&&Yi(e);return{c(){o&&o.c(),t=I()},m(e,i){o&&o.m(e,i),S(e,t,i),n=!0},p(e,[n]){e[0]?o?(o.p(e,n),1&n&&de(o,1)):(o=Yi(e),o.c(),de(o,1),o.m(t.parentNode,t)):o&&(ce(),pe(o,1,1,(()=>{o=null})),ue())},i(e){n||(de(o),n=!0)},o(e){pe(o),n=!1},d(e){o&&o.d(e),e&&A(t)}}}function Xi(e,t,n){let o;u(e,St,(e=>n(7,o=e)));const i=function(){const e=H();return(t,n,{cancelable:o=!1}={})=>{const i=e.$$.callbacks[t];if(i){const l=U(t,n,{cancelable:o});return i.slice().forEach((t=>{t.call(e,l)})),!l.defaultPrevented}return!0}}();let l,r,{showConfirm:s=!1}=t,{isAlert:a=!1}=t,{confirmTitle:c="Confirmation"}=t,{confirmText:d="Do you want to continue?"}=t,{confirmLabel:p="OK"}=t,{cancelLabel:f="CANCEL"}=t,m=!1;function h(e){m&&"keydown"!==e.type||(n(0,s=!1),i("confirmed"))}function y(e){m&&"keydown"!==e.type||(n(0,s=!1),i("cancelled"))}function v(e){if(m&&"keydown"!==e.type)return;let t=e.target,n=t.classList;t.closest(".confirm-container")||n.contains("confirm-container")||y(e)}var w;w=()=>{s?(m=!0,r=setTimeout((()=>{m=!1}),200),l?.focus?.()):(r&&clearTimeout(r),m=!1)},H().$$.after_update.push(w);return e.$$set=e=>{"showConfirm"in e&&n(0,s=e.showConfirm),"isAlert"in e&&n(1,a=e.isAlert),"confirmTitle"in e&&n(2,c=e.confirmTitle),"confirmText"in e&&n(3,d=e.confirmText),"confirmLabel"in e&&n(4,p=e.confirmLabel),"cancelLabel"in e&&n(5,f=e.cancelLabel)},[s,a,c,d,p,f,l,o,h,y,v,e=>"Enter"===e.key&&y(e),function(e){K[e?"unshift":"push"]((()=>{l=e,n(6,l)}))},e=>"Enter"===e.key&&h(e),e=>"Enter"===e.key&&v(e)]}var Qi={Fixed:{Navigator:class extends ke{constructor(e){super(),xe(this,e,Bo,Ro,r,{},null,[-1,-1])}},Menu:class extends ke{constructor(e){super(),xe(this,e,zo,Ko,r,{},null,[-1,-1])}}},Anime:{AnimeGrid:class extends ke{constructor(e){super(),xe(this,e,bn,hn,r,{},null,[-1,-1,-1])}},Fixed:{AnimePopup:class extends ke{constructor(e){super(),xe(this,e,Uo,Po,r,{},null,[-1,-1,-1,-1,-1])}},AnimeOptionsPopup:class extends ke{constructor(e){super(),xe(this,e,_o,Vo,r,{},null,[-1,-1])}}}},Others:{Search:class extends ke{constructor(e){super(),xe(this,e,Ki,qi,r,{},null,[-1,-1,-1,-1,-1])}},Confirm:class extends ke{constructor(e){super(),xe(this,e,Xi,Ji,r,{showConfirm:0,isAlert:1,confirmTitle:2,confirmText:3,confirmLabel:4,cancelLabel:5})}}}},Zi="@vercel/analytics",el="1.0.1",tl=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function nl(e="auto"){window.vam="auto"!==e?e:function(){try{const e=process.env.NODE_ENV;if("development"===e||"test"===e)return"development"}catch(e){}return"production"}()}function ol(){return"development"===(window.vam||"production")}function il(e={debug:!0}){var t;if("undefined"==typeof window)return;nl(e.mode),tl(),e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend));const n=ol()?"https://va.vercel-scripts.com/v1/script.debug.js":"/_vercel/insights/script.js";if(document.head.querySelector(`script[src*="${n}"]`))return;const o=document.createElement("script");o.src=n,o.defer=!0,o.setAttribute("data-sdkn",Zi),o.setAttribute("data-sdkv",el),ol()&&!1===e.debug&&o.setAttribute("data-debug","false"),document.head.appendChild(o)}function ll(e){let t,n,o,i,l;return{c(){t=T("div"),C(t,"class","progress svelte-jqdr9c"),F(t,"--progress","-"+(100-e[6])+"%")},m(e,n){S(e,t,n),o=!0,i||(l=L(t,"outrostart",cl),i=!0)},p(e,n){64&n[0]&&F(t,"--progress","-"+(100-e[6])+"%")},i(e){o||(n&&n.end(1),o=!0)},o(e){n=me(t,Vt,{duration:0,delay:400}),o=!1},d(e){e&&A(t),e&&n&&n.end(),i=!1,l()}}}function rl(e){let t,n;return t=new Qi.Anime.AnimeGrid({}),{c(){we(t.$$.fragment)},m(e,o){ge(t,e,o),n=!0},i(e){n||(de(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function sl(t){let n,o,l,r,s;return{c(){n=T("div"),n.innerHTML='<i class="list-update-icon fa-solid fa-arrows-rotate svelte-jqdr9c"></i> \n\t\t\t<h3 class="list-update-label svelte-jqdr9c">List Update</h3>',C(n,"class","list-update-container svelte-jqdr9c"),C(n,"tabindex","0")},m(e,o){S(e,n,o),l=!0,r||(s=[L(n,"click",t[10]),L(n,"keydown",t[11])],r=!0)},p:e,i(e){l||(o&&o.end(1),l=!0)},o(e){o=me(n,Vt,{duration:200}),l=!1},d(e){e&&A(n),e&&o&&o.end(),r=!1,i(s)}}}function al(e){let t,n,o,i,l,r,s,a,c,u,d,p,f,m,h,y,v=e[6]>0&&e[6]<100&&ll(e);o=new Qi.Fixed.Navigator({}),l=new Qi.Fixed.Menu({}),a=new Qi.Others.Search({props:{$$slots:{default:[rl]},$$scope:{ctx:e}}}),u=new Qi.Anime.Fixed.AnimePopup({}),p=new Qi.Anime.Fixed.AnimeOptionsPopup({}),m=new Qi.Others.Confirm({props:{showConfirm:e[0],isAlert:e[1],confirmTitle:e[2],confirmText:e[3],confirmLabel:e[4],cancelLabel:e[5]}}),m.$on("confirmed",e[8]),m.$on("cancelled",e[9]);let w=e[7]&&sl(e);return{c(){t=T("main"),v&&v.c(),n=$(),we(o.$$.fragment),i=$(),we(l.$$.fragment),r=$(),s=T("div"),we(a.$$.fragment),c=$(),we(u.$$.fragment),d=$(),we(p.$$.fragment),f=$(),we(m.$$.fragment),h=$(),w&&w.c(),C(s,"class","home svelte-jqdr9c"),C(s,"id","home"),C(t,"class","svelte-jqdr9c")},m(e,g){S(e,t,g),v&&v.m(t,null),b(t,n),ge(o,t,null),b(t,i),ge(l,t,null),b(t,r),b(t,s),ge(a,s,null),b(s,c),ge(u,s,null),b(t,d),ge(p,t,null),b(t,f),ge(m,t,null),b(t,h),w&&w.m(t,null),y=!0},p(e,o){e[6]>0&&e[6]<100?v?(v.p(e,o),64&o[0]&&de(v,1)):(v=ll(e),v.c(),de(v,1),v.m(t,n)):v&&(ce(),pe(v,1,1,(()=>{v=null})),ue());const i={};4&o[2]&&(i.$$scope={dirty:o,ctx:e}),a.$set(i);const l={};1&o[0]&&(l.showConfirm=e[0]),2&o[0]&&(l.isAlert=e[1]),4&o[0]&&(l.confirmTitle=e[2]),8&o[0]&&(l.confirmText=e[3]),16&o[0]&&(l.confirmLabel=e[4]),32&o[0]&&(l.cancelLabel=e[5]),m.$set(l),e[7]?w?(w.p(e,o),128&o[0]&&de(w,1)):(w=sl(e),w.c(),de(w,1),w.m(t,null)):w&&(ce(),pe(w,1,1,(()=>{w=null})),ue())},i(e){y||(de(v),de(o.$$.fragment,e),de(l.$$.fragment,e),de(a.$$.fragment,e),de(u.$$.fragment,e),de(p.$$.fragment,e),de(m.$$.fragment,e),de(w),y=!0)},o(e){pe(v),pe(o.$$.fragment,e),pe(l.$$.fragment,e),pe(a.$$.fragment,e),pe(u.$$.fragment,e),pe(p.$$.fragment,e),pe(m.$$.fragment,e),pe(w),y=!1},d(e){e&&A(t),v&&v.d(),be(o),be(l),be(a),be(u),be(p),be(m),w&&w.d()}}}const cl=e=>{e.target.style.setProperty("--progress","0%")};function ul(e,t,n){let o,i,l,r,s,a,c,d,p,m,h,y,v,w,g,b,x,k,S,A,E,T,N,$,I,L,P,C,M,D;u(e,gt,(e=>n(26,o=e))),u(e,Qe,(e=>n(27,i=e))),u(e,Ke,(e=>n(28,l=e))),u(e,Je,(e=>n(29,r=e))),u(e,wt,(e=>n(30,s=e))),u(e,Xe,(e=>n(31,a=e))),u(e,$t,(e=>n(32,c=e))),u(e,Be,(e=>n(33,d=e))),u(e,Et,(e=>n(34,p=e))),u(e,dt,(e=>n(35,m=e))),u(e,xt,(e=>n(36,h=e))),u(e,St,(e=>n(37,y=e))),u(e,bt,(e=>n(38,v=e))),u(e,et,(e=>n(39,w=e))),u(e,nt,(e=>n(40,g=e))),u(e,rt,(e=>n(41,b=e))),u(e,ut,(e=>n(42,x=e))),u(e,We,(e=>n(43,k=e))),u(e,tt,(e=>n(44,S=e))),u(e,lt,(e=>n(45,A=e))),u(e,It,(e=>n(46,E=e))),u(e,st,(e=>n(47,T=e))),u(e,ot,(e=>n(48,N=e))),u(e,Tt,(e=>n(7,$=e))),u(e,ct,(e=>n(49,I=e))),u(e,Ye,(e=>n(50,L=e))),u(e,ze,(e=>n(51,P=e))),u(e,Ge,(e=>n(52,C=e))),u(e,it,(e=>n(53,M=e))),u(e,Re,(e=>n(54,D=e))),f(Be,d=Me(),d);let F,U,j=Math.max(window.visualViewport.width,window.innerWidth),O=Math.max(window.visualViewport.height,window.innerHeight);il(),window.onload=()=>{function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),"https://kanshi.vercel.app"===window.location.origin?e("config","G-F5E8XNQS20"):e("config","G-PPMY92TJCE")};const V=new Function;window.onYouTubeIframeAPIReady=V;let _=[];f(Qe,i="Getting Existing Data",i);let R=setInterval((()=>{i||f(Qe,i="Please Wait...",i)}),200);function B(e=!1){e||G()&&S?(f(et,w=!0,w),Un().then((()=>{f(et,w=!1,w),Mn().finally((()=>{q()}))})).catch((e=>{q(),f(et,w=!1,w),f(Qe,i="Something went wrong...",i),console.error(e)}))):q()}function q(){A&&K()&&On()}new Promise((async e=>{if(f(Re,D=await async function(){try{let e=window.location.pathname;e=e.endsWith("/")?e:e+"/",e=e.includes("/index.html")?e.replace("/index.html",""):e;let t=await fetch(`${e}version.json`,{cache:"no-store"});return(await t.json()).version||Se}catch(e){return Se}}(),D),d&&navigator.onLine)try{D&&JSBridge.checkAppID(D,!1)}catch(e){window.updateAppAlert?.()}let t=await Qn("gridFullView")??(!d&&j>750&&O>695);"boolean"==typeof t&&(Ve("gridFullView",t),f(dt,m=t,m)),e()})).then((()=>{d||(async()=>{f(it,M=await Qn("exportPathIsAvailable"),M),"boolean"==typeof M&&Ve("exportPathIsAvailable",M)})(),_.push(new Promise((async(e,t)=>{let n=await Qn("lastAnimeUpdate"),o=!(n instanceof Date&&!isNaN(n));if(!o){await Qn("animeEntriesIsEmpty")&&(o=!0)}var i;o?(f(Je,r=null,r),new Promise(((e,t)=>{Hn=setInterval((()=>{Qe.set("Getting Anime Entries")}),300),He.set(0),Bt("./webapi/worker/getAnimeEntries.js").then((n=>{He.set(25),Hn&&(clearInterval(Hn),Hn=null);let o=new Worker(n);qn&&clearTimeout(qn),o.postMessage(i),o.onmessage=({data:t})=>{t?.hasOwnProperty("status")?(En=!0,Qe.set(t.status)):(He.set(100),En=!1,Ft.update((e=>!e)),qn=setTimeout((()=>{o.terminate()}),An),e(t))},o.onerror=e=>{He.set(100),t(e)}})).catch((e=>{He.set(100),Hn&&(clearInterval(Hn),Hn=null),Qe.set(null),Jn(),t(e)}))})).then((()=>{e()})).catch((async()=>{t()}))):e()}))),_.push(new Promise((async e=>{let t=await Qn("username");t&&(Ve("username",t),f(Ge,C=t,C)),e()}))),_.push(new Promise((async e=>{Yn().then((t=>{f(ze,P=t.activeTagFilters,P),f(Ye,L=t.filterOptions,L),e()})).catch((()=>{reject()}))}))),_.push(new Promise((async e=>{let t=await Qn("autoPlay");"boolean"==typeof t&&(Ve("autoPlay",t),f(ct,I=t,I)),f(ot,N=await Qn("lastRunnedAutoUpdateDate"),N),f(st,T=await Qn("lastRunnedAutoExportDate"),T),f(tt,S=await Qn("autoUpdate")??!1,S),Ve("autoUpdate",S),f(lt,A=await Qn("autoExport")??!1,A),Ve("autoExport",A),e()}))),Promise.all(_).then((async()=>{let e=await Qn("shouldProcessRecommendation");if(!e){await Qn("recommendedAnimeListLength")<1&&(e=!0)}new Promise((async t=>{e?Ln().then((async()=>{await Xn(!1,"shouldProcessRecommendation"),t(!1)})).catch((e=>{throw e})):t(!0)})).then((e=>{Nn({loadSaved:e}).then((async e=>{f(Xe,a=e.animeLoaderWorker,a),f(wt,s="",s),e?.isNew&&(f(Je,r=e.finalAnimeList,r),f(Ke,l=e.hiddenEntries,l),f(Qe,i=null,i),B(!0),f(ut,x=!1,x))})).catch((e=>{throw e}))}))})).catch((async e=>{B(!0),f(ut,x=!1,x),f(Qe,i="Something went wrong...",i),o?.(d?{isAlert:!0,title:"Something Went Wrong",text:"App may not be working properly, you may want to restart and make sure you're running the latest version."}:{isAlert:!0,title:"Something Went Wrong",text:"App may not be working properly, you may want to refresh the page, or if not clear the cookies but backup your data first."}),console.error(e)}))})),ut.subscribe((async e=>{!1===e&&clearInterval(R)})),Je.subscribe((async e=>{x&&e?.length>0&&!1!==x&&f(ut,x=!1,x)})),Dt.subscribe((async e=>{"boolean"!=typeof e||x||(f(Tt,$=!1,$),a&&(a.terminate(),f(Xe,a=null,a)),Nn().then((async e=>{f(Xe,a=e.animeLoaderWorker,a),f(wt,s="",s),e?.isNew&&(f(Je,r=e.finalAnimeList,r),f(Ke,l=e.hiddenEntries,l)),f(Qe,i=null,i)})).catch((e=>{throw e})))})),Mt.subscribe((async e=>{"boolean"!=typeof e||x||(await Xn(!0,"shouldProcessRecommendation"),f(Tt,$=!1,$),Ln().then((async()=>{await Xn(!1,"shouldProcessRecommendation"),Ut.update((e=>!e)),Dt.update((e=>!e))})).catch((e=>{throw Dt.update((e=>!e)),e})))})),Ft.subscribe((async e=>{"boolean"!=typeof e||x||(await Xn(!0,"shouldProcessRecommendation"),Ln().then((async()=>{await Xn(!1,"shouldProcessRecommendation"),Ut.update((e=>!e)),jt.update((e=>!e))})).catch((e=>{throw jt.update((e=>!e)),e})))})),jt.subscribe((async e=>{"boolean"!=typeof e||x||((y||(m?U.scrollLeft>500:document.documentElement.scrollTop>Math.max(0,U?.offsetTop-55)))&&r?.length?f(Tt,$=!0,$):(a&&(a.terminate(),f(Xe,a=null,a)),Nn().then((async e=>{f(Xe,a=e.animeLoaderWorker,a),f(wt,s="",s),e?.isNew&&(f(Je,r=e.finalAnimeList,r),f(Ke,l=e.hiddenEntries,l)),f(Qe,i=null,i)})).catch((e=>{throw e}))))})),Ut.subscribe((async e=>{"boolean"!=typeof e||x||Yn()}));let H=36e5;function G(){let e=!1;return N?N instanceof Date&&!isNaN(N)&&(new Date).getTime()-N.getTime()>H&&(e=!0):e=!0,e}function K(){let e=!1;return T?T instanceof Date&&!isNaN(T)&&(new Date).getTime()-T.getTime()>H&&(e=!0):e=!0,e}tt.subscribe((async e=>{if(!0===e)if(Xn(!0,"autoUpdate"),G())B(),g&&clearInterval(g),f(nt,g=setInterval((()=>{S&&B()}),H),g);else{let e=H-((new Date).getTime()-N?.getTime())||0;setTimeout((()=>{!1!==S&&(B(),g&&clearInterval(g),f(nt,g=setInterval((()=>{S&&B()}),H),g))}),Math.min(e,2e9))}else!1===e&&(g&&clearInterval(g),Xn(!1,"autoUpdate"))})),Pt.subscribe((e=>{"boolean"==typeof e&&!x&&navigator.onLine&&(f(et,w=!0,w),Un().then((()=>{f(et,w=!1,w),Mn()})).catch((e=>{f(et,w=!1,w),f(Qe,i="Something went wrong...",i),console.error(e)})))})),lt.subscribe((async e=>{if(!0===e)if(Xn(!0,"autoExport"),K())B(),b&&clearInterval(b),f(rt,b=setInterval((()=>{A&&B()}),H),b);else{let e=H-((new Date).getTime()-T?.getTime())||0;setTimeout((()=>{!1!==A&&(B(),b&&clearInterval(b),f(rt,b=setInterval((()=>{A&&B()}),H),b))}),Math.min(e,2e9))}else!1===e&&(b&&clearInterval(b),Xn(!1,"autoExport"))})),Ct.subscribe((e=>{"boolean"!=typeof e||x||On()})),Ot.subscribe((e=>{"boolean"==typeof e&&(c||f($t,c=!0,c),E&&clearTimeout(E),f(It,E=setTimeout((()=>{f($t,c=!1,c)}),500),E))})),document.addEventListener("visibilitychange",(()=>{x||d||"visible"!==document.visibilityState||(w&&(G()||K())?(B(),A&&!b&&lt.update((e=>e)),S&&!g&&tt.update((e=>e))):w||(f(et,w=!0,w),Un({visibilityChange:!0}).then((()=>f(et,w=!1,w)))))}));let Y=!1;"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");let z=()=>{f(We,k=!0,k),window.removeEventListener("wheel",z,{passive:!0})};window.addEventListener("wheel",z,{passive:!0}),window.checkEntries=()=>{x||(w&&(G()||K())?(B(),b||lt.update((e=>e)),g||tt.update((e=>e))):w||(f(et,w=!0,w),Un({visibilityChange:!0}).then((()=>f(et,w=!1,w)))))},window.addEventListener("popstate",(()=>{window.backPressed()}));let J,X,Q,ee,te=!1;window.backPressed=()=>{if(p&&!d)window.history.go(-1);else{if(d||window.history.pushState("visited",""),Y)return ue(),n(0,Y=!1),void(te=!1);if(F&&F===document?.activeElement&&Math.max(window.visualViewport.width,window.innerWidth)<=750)return F?.focus?.(),F?.blur?.(),void(te=!1);if(v)return f(bt,v=!1,v),void(te=!1);if(window.checkOpenFullScreenItem?.())return window.closeFullScreenItem?.(),void(te=!1);if(y)return f(St,y=!1,y),void(te=!1);if(h)return f(xt,h=!1,h),void(te=!1);if(window.checkOpenDropdown?.())return window.closeDropdown?.(),void(te=!1);if(!te)return te=!0,void(m?(U.style.overflow="hidden",U.style.overflow="",U?.children?.[0]?.scrollIntoView?.({container:U,behavior:"smooth",block:"nearest",inline:"start"})):(!d&&matchMedia("(hover:hover)").matches||(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow=""),window.scrollTo({top:-9999,behavior:"smooth"})));m?(U.style.overflow="hidden",U.scrollLeft=0,clearTimeout(J),J=setTimeout((()=>{U.style.overflow=""}),100)):(!d&&matchMedia("(hover:hover)").matches||(document.documentElement.style.overflow="hidden"),document.documentElement.scrollTop=0,document.body.scrollTop=0,window.scrollY=0,!d&&matchMedia("(hover:hover)").matches||(clearTimeout(J),J=setTimeout((()=>{document.documentElement.style.overflow=""}),100)));try{JSBridge.willExit()}catch(e){}window.setShouldGoBack(!0),te=!1}},dt.subscribe((async e=>{await Z(),e?U?.scrollLeft>500&&window.setShouldGoBack(!1):document.documentElement.scrollTop>Math.max(0,U?.offsetTop-55)&&window.setShouldGoBack(!1)})),St.subscribe((e=>{!0===e&&window.setShouldGoBack(!1)})),bt.subscribe((e=>{!0===e&&window.setShouldGoBack(!1)})),window.addEventListener("scroll",(()=>{document.documentElement.scrollTop>Math.max(0,U?.offsetTop-55)&&!te&&window.setShouldGoBack(!1),Ot.update((e=>!e))}),{passive:!0}),W((()=>{F=document.getElementById("usernameInput"),U=document.getElementById("anime-grid"),U?.addEventListener("scroll",(()=>{U.scrollLeft>Math.max(0,U?.offsetTop-55)&&!te&&window.setShouldGoBack(!1),m&&Ot.update((e=>!e))}),{passive:!0}),document.getElementById("popup-container").addEventListener("scroll",(()=>{Ot.update((e=>!e))}),{passive:!0}),j=Math.max(window.visualViewport.width,window.innerWidth),O=Math.max(window.visualViewport.height,window.innerHeight),window.addEventListener("resize",(()=>{O=Math.max(window.visualViewport.height,window.innerHeight),j=Math.max(window.visualViewport.width,window.innerWidth)}))})),window.setShouldGoBack=e=>{if(e||(te=!1),d)try{JSBridge.setShouldGoBack(e)}catch(e){}else"visited"!==window.history.state&&window.history.pushState("visited",""),f(Et,p=e,p)},window.copyToClipBoard=e=>{if(d)try{JSBridge.copyToClipBoard(e)}catch(e){}else navigator?.clipboard?.writeText?.(e)},Nt.subscribe((()=>{clearTimeout(Q),X=!0,Q=setTimeout((()=>{X=!1}),500)}));let ne,oe,ie,le,re,se,ae,ce=!1;function ue(){se?.resolve?.(!1),se=n(1,ne=n(2,oe=n(3,ie=n(4,le=n(5,re=void 0))))),n(0,Y=!1)}async function de(e){if(await o({title:"List update is available",text:"Are you sure you want to refresh the list?"})){let t,n=e.target,o=n.classList;t=o.contains("list-update-container")?n.querySelector?.(".list-update-icon"):n?.closest(".list-update-container")?.querySelector?.(".list-update-icon"),ae&&clearTimeout(ae),Fe(t,"fa-spin"),a&&(a.terminate(),f(Xe,a=null,a)),Nn().then((async e=>{ae=setTimeout((()=>{Ue(t,"fa-spin")}),200),f(Xe,a=e.animeLoaderWorker,a),f(wt,s="",s),e?.isNew&&(f(Je,r=e.finalAnimeList,r),f(Ke,l=e.hiddenEntries,l)),f(Qe,i=null,i)})).catch((e=>{throw e}))}}document.addEventListener("pointerdown",(e=>{if("mouse"===e.pointerType)return;let t=e.target;t.classList.contains("copy")||(t=t.closest(".copy")),t&&(ce=!0,ee&&clearTimeout(ee),ee=setTimeout((()=>{let e=t.getAttribute("copy-value");e&&!c&&ce&&!X&&(t.style.pointerEvents="none",setTimeout((()=>{t.style.pointerEvents=""}),500),window.copyToClipBoard(e))}),500))})),document.addEventListener("pointerup",(e=>{if("mouse"===e.pointerType)return;let t=e.target;t.classList.contains("copy")||(t=t.closest(".copy")),t&&(ce=!1,ee&&clearTimeout(ee))})),document.addEventListener("pointercancel",(e=>{if("mouse"===e.pointerType)return;let t=e.target;t.classList.contains("copy")||(t=t.closest(".copy")),t&&(ce=!1,ee&&clearTimeout(ee))})),f(gt,o=window.confirmPromise=async e=>new Promise((t=>{n(1,ne=e?.isAlert||!1),n(2,oe=e?.title||(ne?"Heads Up":"Confirmation")),n(3,ie=("string"==typeof e?e:e?.text)||"Are you sure you want to continue"),n(4,le=e?.confirmLabel||"OK"),n(5,re=e?.cancelLabel||"CANCEL"),n(0,Y=!0),se={resolve:t}})),o),window.updateAppAlert=async()=>{if(await(o?.({title:"New updates are available",text:"You may want to download the new version.",confirmLabel:"DOWNLOAD"})))try{JSBridge.downloadUpdate()}catch(e){window.open("https://github.com/u-Kuro/Kanshi.Anime-Recommendation/raw/main/Kanshi.apk","_blank")}};let pe,fe=0,me=performance.now();He.subscribe((e=>{(e>=100||e<=0||performance.now()-me>300)&&(cancelAnimationFrame(pe),pe=requestAnimationFrame((()=>{n(6,fe=e)})),me=performance.now())}));return[Y,ne,oe,ie,le,re,fe,$,function(){se?.resolve?.(!0),se=n(1,ne=n(2,oe=n(3,ie=n(4,le=n(5,re=void 0))))),n(0,Y=!1)},ue,de,e=>"Enter"===e.key&&de(e)]}var dl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};window.FontAwesomeKitConfig={asyncLoading:{enabled:!1},autoA11y:{enabled:!0},baseUrl:"https://ka-f.fontawesome.com",baseUrlKit:"https://kit.fontawesome.com",detectConflictsUntil:null,iconUploads:{},id:76794169,license:"free",method:"css",minify:{enabled:!0},token:"5a5fa257cb",v4FontFaceShim:{enabled:!0},v4shim:{enabled:!0},v5FontFaceShim:{enabled:!0},version:"6.2.0"},function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)),o}function n(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){var n,i;n=e,i=o[t],t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){var n=t&&t.addOn||"",o=(n=t&&t.baseFilename||e.license+n,t&&t.minify?".min":""),i=t&&t.fileSuffix||e.method;return t=t&&t.subdir||e.method,e.baseUrl+"/releases/"+("latest"===e.version?"latest":"v".concat(e.version))+"/"+t+"/"+n+o+"."+i}function l(e,t){t="."+Array.prototype.join.call(t||["fa"],",."),t=e.querySelectorAll(t),Array.prototype.forEach.call(t,(function(t){var n=t.getAttribute("title"),o=(t.setAttribute("aria-hidden","true"),!t.nextElementSibling||!t.nextElementSibling.classList.contains("sr-only"));n&&o&&((o=e.createElement("span")).innerHTML=n,o.classList.add("sr-only"),t.parentNode.insertBefore(o,t.nextSibling))}))}function r(){}var s,a=void 0!==dl&&void 0!==dl.process&&"function"==typeof dl.process.emit,c="undefined"==typeof setImmediate?setTimeout:setImmediate,u=[];function d(){for(var e=0;e<u.length;e++)u[e][0](u[e][1]);s=!(u=[])}function p(e,t){u.push([e,t]),s||(s=!0,c(d,0))}function f(e){var t=(n=e.owner)._state,n=n._data,o=e[t],i=e.then;if("function"==typeof o){t="fulfilled";try{n=o(n)}catch(e){v(i,e)}}m(i,n)||("fulfilled"===t&&h(i,n),"rejected"===t&&v(i,n))}function m(t,n){var o;try{if(t===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"===e(n))){var i=n.then;if("function"==typeof i)return i.call(n,(function(e){o||(o=!0,(n===e?y:h)(t,e))}),(function(e){o||(o=!0,v(t,e))})),1}}catch(i){return o||v(t,i),1}}function h(e,t){e!==t&&m(e,t)||y(e,t)}function y(e,t){"pending"===e._state&&(e._state="settled",e._data=t,p(g,e))}function v(e,t){"pending"===e._state&&(e._state="settled",e._data=t,p(b,e))}function w(e){e._then=e._then.forEach(f)}function g(e){e._state="fulfilled",w(e)}function b(e){e._state="rejected",w(e),!e._handled&&a&&dl.process.emit("unhandledRejection",e._data,e)}function x(e){dl.process.emit("rejectionHandled",e)}function k(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof k==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[];var t=e,n=this;function o(e){v(n,e)}try{t((function(e){h(n,e)}),o)}catch(t){o(t)}}k.prototype={constructor:k,_state:"pending",_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(r),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,"rejected"===this._state&&a&&p(x,this)),"fulfilled"===this._state||"rejected"===this._state?p(f,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},k.all=function(e){if(Array.isArray(e))return new k((function(t,n){for(var o,i=[],l=0,r=0;r<e.length;r++)(o=e[r])&&"function"==typeof o.then?o.then(function(e){return l++,function(n){i[e]=n,--l||t(i)}}(r),n):i[r]=o;l||t(i)}));throw new TypeError("You must pass an array to Promise.all().")},k.race=function(e){if(Array.isArray(e))return new k((function(t,n){for(var o,i=0;i<e.length;i++)(o=e[i])&&"function"==typeof o.then?o.then(t,n):t(o)}));throw new TypeError("You must pass an array to Promise.race().")},k.resolve=function(t){return t&&"object"===e(t)&&t.constructor===k?t:new k((function(e){e(t)}))},k.reject=function(e){return new k((function(t,n){n(e)}))};var S,A,E,T,N="function"==typeof Promise?Promise:k;function $(e,t){var n=t.fetch,o=t.XMLHttpRequest,i=(t=t.token,e);return"URLSearchParams"in window?(i=new URL(e)).searchParams.set("token",t):i=i+"?token="+encodeURIComponent(t),i=i.toString(),new N((function(e,t){var l;"function"==typeof n?n(i,{mode:"cors",cache:"default"}).then((function(e){if(e.ok)return e.text();throw new Error("")})).then((function(t){e(t)})).catch(t):"function"==typeof o?((l=new o).addEventListener("loadend",(function(){this.responseText?e(this.responseText):t(new Error(""))})),["abort","error","timeout"].map((function(e){l.addEventListener(e,(function(){t(new Error(""))}))})),l.open("GET",i),l.send()):t(new Error(""))}))}function I(e,t,n){var i=e;return[[/(url\("?)\.\.\/\.\.\/\.\./g,function(e,n){return"".concat(n).concat(t)}],[/(url\("?)\.\.\/webfonts/g,function(e,o){return"".concat(o).concat(t,"/releases/v").concat(n,"/webfonts")}],[/(url\("?)https:\/\/kit-free([^.])*\.fontawesome\.com/g,function(e,n){return"".concat(n).concat(t)}]].forEach((function(e){t=2,e=function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,i=!1,l=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw l}}return n}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?o(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var t=e[0];e=e[1],i=i.replace(t,e)})),i}function L(e,t,o){o=2<arguments.length&&void 0!==o?o:function(){};var r=t.document||r,s=(r=l.bind(l,r,["fa","fab","fas","far","fal","fad","fak"]),0<Object.keys(e.iconUploads||{}).length);return e.autoA11y.enabled&&o(r),o=[{id:"fa-main",addOn:void 0}],e.v4shim&&e.v4shim.enabled&&o.push({id:"fa-v4-shims",addOn:"-v4-shims"}),e.v5FontFaceShim&&e.v5FontFaceShim.enabled&&o.push({id:"fa-v5-font-face",addOn:"-v5-font-face"}),e.v4FontFaceShim&&e.v4FontFaceShim.enabled&&o.push({id:"fa-v4-font-face",addOn:"-v4-font-face"}),s&&o.push({id:"fa-kit-upload",customCss:!0}),r=o.map((function(o){return new N((function(l,r){$(o.customCss?e.baseUrlKit+"/"+e.token+"/"+e.id+"/kit-upload.css":i(e,{addOn:o.addOn,minify:e.minify.enabled}),t).then((function(i){var r,s,a;l((r=n(n({},t),{},{baseUrl:e.baseUrl,version:e.version,id:o.id,contentFilter:function(e,t){return I(e,t.baseUrl,t.version)}}),s=r.contentFilter||function(e,t){return e},a=document.createElement("style"),s=document.createTextNode(s(i,r)),a.appendChild(s),a.media="all",r.id&&a.setAttribute("id",r.id),r&&r.detectingConflicts&&r.detectionIgnoreAttr&&a.setAttributeNode(document.createAttribute(r.detectionIgnoreAttr)),a))})).catch(r)}))})),N.all(r)}function P(e,t){t.autoA11y=e.autoA11y.enabled,"pro"===e.license&&(t.autoFetchSvg=!0,t.fetchSvgFrom=e.baseUrl+"/releases/"+("latest"===e.version?"latest":"v".concat(e.version))+"/svgs",t.fetchUploadedSvgFrom=e.uploadsUrl);var o=[];return e.v4shim.enabled&&o.push(new N((function(o,l){$(i(e,{addOn:"-v4-shims",minify:e.minify.enabled}),t).then((function(e){o(C(e,n(n({},t),{},{id:"fa-v4-shims"})))})).catch(l)}))),o.push(new N((function(o,l){$(i(e,{minify:e.minify.enabled}),t).then((function(e){var i,l,r;e=C(e,n(n({},t),{},{id:"fa-main"})),o((l=(i=t)&&void 0!==i.autoFetchSvg?i.autoFetchSvg:void 0,void 0!==(r=i&&void 0!==i.autoA11y?i.autoA11y:void 0)&&e.setAttribute("data-auto-a11y",r?"true":"false"),l&&(e.setAttributeNode(document.createAttribute("data-auto-fetch-svg")),e.setAttribute("data-fetch-svg-from",i.fetchSvgFrom),e.setAttribute("data-fetch-uploaded-svg-from",i.fetchUploadedSvgFrom)),e))})).catch(l)}))),N.all(o)}function C(e,t){var n=document.createElement("SCRIPT");return e=document.createTextNode(e),n.appendChild(e),n.referrerPolicy="strict-origin",t.id&&n.setAttribute("id",t.id),t&&t.detectingConflicts&&t.detectionIgnoreAttr&&n.setAttributeNode(document.createAttribute(t.detectionIgnoreAttr)),n}function M(e){var t,n=[],o=document,i=(o.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(o.readyState);i||o.addEventListener("DOMContentLoaded",t=function(){for(o.removeEventListener("DOMContentLoaded",t),i=1;t=n.shift();)t()}),i?setTimeout(e,0):n.push(e)}try{window.FontAwesomeKitConfig&&(S=window.FontAwesomeKitConfig,A={detectingConflicts:S.detectConflictsUntil&&new Date<=new Date(S.detectConflictsUntil),detectionIgnoreAttr:"data-fa-detection-ignore",fetch:window.fetch,token:S.token,XMLHttpRequest:window.XMLHttpRequest,document:document},E=document.currentScript,T=E?E.parentElement:document.head,function(e,t){return t=1<arguments.length&&void 0!==t?t:{},"js"===(e=0<arguments.length&&void 0!==e?e:{}).method?P(e,t):"css"===e.method?L(e,t,(function(e){M(e),"undefined"!=typeof MutationObserver&&new MutationObserver(e).observe(document,{childList:!0,subtree:!0})})):void 0}(S,A).then((function(e){e.map((function(e){try{T.insertBefore(e,E?E.nextSibling:null)}catch(t){T.appendChild(e)}})),A.detectingConflicts&&E&&M((function(){E.setAttributeNode(document.createAttribute(A.detectionIgnoreAttr)),e=S,n=A,t=document.createElement("script"),n.detectionIgnoreAttr&&t.setAttributeNode(document.createAttribute(n.detectionIgnoreAttr)),t.src=i(e,{baseFilename:"conflict-detection",fileSuffix:"js",subdir:"js",minify:e.minify.enabled});var e,t,n=t;document.body.appendChild(n)}))})).catch((function(e){console.error("".concat("Font Awesome Kit:"," ").concat(e))})))}catch(e){console.error("".concat("Font Awesome Kit:"," ").concat(e))}}();return new class extends ke{constructor(e){super(),xe(this,e,ul,al,r,{},null,[-1,-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
