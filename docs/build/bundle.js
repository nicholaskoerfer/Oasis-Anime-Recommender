var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function o(){return Object.create(null)}function i(e){e.forEach(n)}function r(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let s;function a(e,t){return s||(s=document.createElement("a")),s.href=t,e===s.href}function c(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function u(e){let t;return c(e,(e=>t=e))(),t}function d(e,t,n){e.$$.on_destroy.push(c(t,n))}function f(e,t,n,o){return e[1]&&o?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](o(t))):n.ctx}function p(e){return null==e?"":e}function m(e,t,n){return e.set(n),t}function h(e){const t="string"==typeof e&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const y="undefined"!=typeof window;let w=y?()=>window.performance.now():()=>Date.now(),g=y?e=>requestAnimationFrame(e):e;const v=new Set;function b(e){v.forEach((t=>{t.c(e)||(v.delete(t),t.f())})),0!==v.size&&g(b)}function x(e){let t;return 0===v.size&&g(b),{promise:new Promise((n=>{v.add(t={c:e,f:n})})),abort(){v.delete(t)}}}function k(e,t){e.appendChild(t)}function S(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function E(e){const t=I("style");return function(e,t){k(e.head||e,t),t.sheet}(S(e),t),t.sheet}function T(e,t,n){e.insertBefore(t,n||null)}function A(e){e.parentNode&&e.parentNode.removeChild(e)}function N(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function I(e){return document.createElement(e)}function $(e){return document.createTextNode(e)}function L(){return $(" ")}function P(){return $("")}function C(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function F(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function M(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function D(e,t){t=""+t,e.data!==t&&(e.data=t)}function U(e,t){e.value=null==t?"":t}function O(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function _(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,o,t),i}class V{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}(t.nodeName):this.e=I(11===t.nodeType?"TEMPLATE":t.nodeName),this.t="TEMPLATE"!==t.tagName?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)T(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(A)}}const B=new Map;let j,R=0;function H(e,t,n,o,i,r,l,s=0){const a=16.666/o;let c="{\n";for(let e=0;e<=1;e+=a){const o=t+(n-t)*r(e);c+=100*e+`%{${l(o,1-o)}}\n`}const u=c+`100% {${l(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${s}`,f=S(e),{stylesheet:p,rules:m}=B.get(f)||function(e,t){const n={stylesheet:E(t),rules:{}};return B.set(e,n),n}(f,e);m[d]||(m[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${d} ${o}ms linear ${i}ms 1 both`,R+=1,d}function q(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-o.length;i&&(e.style.animation=o.join(", "),R-=i,R||g((()=>{R||(B.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&A(t)})),B.clear())})))}function W(e){j=e}function z(){if(!j)throw new Error("Function called outside component initialization");return j}function G(e){z().$$.on_mount.push(e)}const Y=[],K=[];let J=[];const X=[],Q=Promise.resolve();let Z=!1;function ee(){Z||(Z=!0,Q.then(le))}function te(){return ee(),Q}function ne(e){J.push(e)}const oe=new Set;let ie,re=0;function le(){if(0!==re)return;const e=j;do{try{for(;re<Y.length;){const e=Y[re];re++,W(e),se(e.$$)}}catch(e){throw Y.length=0,re=0,e}for(W(null),Y.length=0,re=0;K.length;)K.pop()();for(let e=0;e<J.length;e+=1){const t=J[e];oe.has(t)||(oe.add(t),t())}J.length=0}while(Y.length);for(;X.length;)X.pop()();Z=!1,oe.clear(),W(e)}function se(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ne)}}function ae(){return ie||(ie=Promise.resolve(),ie.then((()=>{ie=null}))),ie}function ce(e,t,n){e.dispatchEvent(_(`${t?"intro":"outro"}${n}`))}const ue=new Set;let de;function fe(){de={r:0,c:[],p:de}}function pe(){de.r||i(de.c),de=de.p}function me(e,t){e&&e.i&&(ue.delete(e),e.i(t))}function he(e,t,n,o){if(e&&e.o){if(ue.has(e))return;ue.add(e),de.c.push((()=>{ue.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}const ye={duration:0};function we(n,o,l){const s={direction:"out"};let a,c=o(n,l,s),u=!0;const d=de;function f(){const{delay:o=0,duration:r=300,easing:l=t,tick:s=e,css:f}=c||ye;f&&(a=H(n,1,0,r,o,l,f));const p=w()+o,m=p+r;ne((()=>ce(n,!1,"start"))),x((e=>{if(u){if(e>=m)return s(0,1),ce(n,!1,"end"),--d.r||i(d.c),!1;if(e>=p){const t=l((e-p)/r);s(1-t,t)}}return u}))}return d.r+=1,r(c)?ae().then((()=>{c=c(s),f()})):f(),{end(e){e&&c.tick&&c.tick(1,0),u&&(a&&q(n,a),u=!1)}}}function ge(n,o,l,s){const a={direction:"both"};let c=o(n,l,a),u=s?0:1,d=null,f=null,p=null;function m(){p&&q(n,p)}function h(e,t){const n=e.b-u;return t*=Math.abs(n),{a:u,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function y(o){const{delay:r=0,duration:l=300,easing:s=t,tick:a=e,css:y}=c||ye,g={start:w()+r,b:o};o||(g.group=de,de.r+=1),d||f?f=g:(y&&(m(),p=H(n,u,o,l,r,s,y)),o&&a(0,1),d=h(g,l),ne((()=>ce(n,o,"start"))),x((e=>{if(f&&e>f.start&&(d=h(f,l),f=null,ce(n,d.b,"start"),y&&(m(),p=H(n,u,d.b,d.duration,0,s,c.css))),d)if(e>=d.end)a(u=d.b,1-u),ce(n,d.b,"end"),f||(d.b?m():--d.group.r||i(d.group.c)),d=null;else if(e>=d.start){const t=e-d.start;u=d.a+d.d*s(t/d.duration),a(u,1-u)}return!(!d&&!f)})))}return{run(e){r(c)?ae().then((()=>{c=c(a),y(e)})):y(e)},end(){m(),d=f=null}}}function ve(e,t){e.d(1),t.delete(e.key)}function be(e,t){he(e,1,1,(()=>{t.delete(e.key)}))}function xe(e,t,n,o,r,l,s,a,c,u,d,f){let p=e.length,m=l.length,h=p;const y={};for(;h--;)y[e[h].key]=h;const w=[],g=new Map,v=new Map,b=[];for(h=m;h--;){const e=f(r,l,h),i=n(e);let a=s.get(i);a?o&&b.push((()=>a.p(e,t))):(a=u(i,e),a.c()),g.set(i,w[h]=a),i in y&&v.set(i,Math.abs(h-y[i]))}const x=new Set,k=new Set;function S(e){me(e,1),e.m(a,d),s.set(e.key,e),d=e.first,m--}for(;p&&m;){const t=w[m-1],n=e[p-1],o=t.key,i=n.key;t===n?(d=t.first,p--,m--):g.has(i)?!s.has(o)||x.has(o)?S(t):k.has(i)?p--:v.get(o)>v.get(i)?(k.add(o),S(t)):(x.add(i),p--):(c(n,s),p--)}for(;p--;){const t=e[p];g.has(t.key)||c(t,s)}for(;m;)S(w[m-1]);return i(b),w}function ke(e){e&&e.c()}function Se(e,t,o,l){const{fragment:s,after_update:a}=e.$$;s&&s.m(t,o),l||ne((()=>{const t=e.$$.on_mount.map(n).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...t):i(t),e.$$.on_mount=[]})),a.forEach(ne)}function Ee(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];J.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),J=t}(n.after_update),i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Te(t,n,r,l,s,a,c,u=[-1]){const d=j;W(t);const f=t.$$={fragment:null,ctx:[],props:a,update:e,not_equal:s,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(f.root);let p=!1;if(f.ctx=r?r(t,n.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return f.ctx&&s(f.ctx[e],f.ctx[e]=i)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](i),p&&function(e,t){-1===e.$$.dirty[0]&&(Y.push(e),ee(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],f.update(),p=!0,i(f.before_update),f.fragment=!!l&&l(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(A)}else f.fragment&&f.fragment.c();n.intro&&me(t.$$.fragment),Se(t,n.target,n.anchor,n.customElement),le()}W(d)}class Ae{$destroy(){Ee(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ne=142;async function Ie(){try{let e=window.location.pathname;e=e.endsWith("/")?e:e+"/",e=e.includes("/index.html")?e.replace("/index.html",""):e;let t=await fetch(`${e}version.json`,{cache:"no-store"});return(await t.json()).version||Ne}catch(e){return Ne}}const $e=[];function Le(t,n=e){let o;const i=new Set;function r(e){if(l(t,e)&&(t=e,o)){const e=!$e.length;for(const e of i)e[1](),$e.push(e,t);if(e){for(let e=0;e<$e.length;e+=2)$e[e][0]($e[e+1]);$e.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(l,s=e){const a=[l,s];return i.add(a),1===i.size&&(o=n(r)||e),l(t),()=>{i.delete(a),0===i.size&&o&&(o(),o=null)}}}}const Pe=e=>"[object Object]"===Object.prototype.toString.call(e);function Ce(e,t){try{let n=Math.floor(e/1e3%60),o=Math.floor(e/6e4%60),i=Math.floor(e/36e5%24),r=Math.floor(e/864e5%7),l=Math.floor(e/6048e5%4),s=Math.floor(e/24192e5%12),a=Math.floor(e/290304e5%10),c=Math.floor(e/290304e6%10),u=Math.floor(e/290304e7%10),d=Math.floor(e/290304e8%10),f=[];return d<=0&&u<=0&&c<=0&&a<=0&&s<=0&&l<=0&&r<=0&&i<=0&&o<=0&&n<=0?"0s":(d>0&&f.push(`${d}mil`),c>0&&f.push(`${c}dec`),a>0&&f.push(`${a}y`),s>0&&f.push(`${s}mon`),l>0&&f.push(`${l}w`),r>0&&f.push(`${r}d`),i>0&&f.push(`${i}h`),o>0&&f.push(`${o}m`),n>0&&f.push(`${n}s`),t>0&&(f=f.slice(0,t)),f.join(" "))}catch(e){return}}function Fe(e,t,n=.5){try{var o;o=t instanceof Array?t:e.querySelectorAll(t);var i=null,r=0;let s=[],a=e.scrollTop;for(let e=0;e<o.length;e++)if(o[e].offsetTop>a){s=e>0?[o[e-1],o[e]]:0===e?[o[e]]:[];break}var l=e.getBoundingClientRect();return s.forEach((e=>{var t=e.getBoundingClientRect(),o=(Math.min(t.bottom,l.bottom)-Math.max(t.top,l.top))/t.height;o>=n&&o>r&&(r=o,i=e)})),i}catch(e){return}}const Me=(e,t)=>{try{return Array.from(e.parentElement.children).indexOf(e)}catch(e){return}},De=(e,t,n="top",o,i=0)=>{try{let r;if("string"==typeof t&&(t=document.querySelector(t)),e===window){const e=t.getBoundingClientRect(),o=window.scrollY;r="bottom"===n?e.bottom+o-window.innerHeight:"center"===n?e.top+o-window.innerHeight/2:e.top+o}else if("string"==typeof e&&(e=document.querySelector(e)),"bottom"===n)r=t.offsetTop+t.offsetHeight-e.offsetHeight;else if("center"===n){let n=t.getBoundingClientRect(),o=e.getBoundingClientRect();r=n.top+n.height/2-(o.top+o.height/2)+e.scrollTop-o.height/2}else{let n=t.getBoundingClientRect(),o=e.getBoundingClientRect();r=n.top-o.top+e.scrollTop}e===window?"smooth"===o?window.scrollTo({top:r+i,behavior:"smooth"}):window.scrollTo({top:r+i}):"smooth"===o?e.scrollBy({top:r+i,behavior:"smooth"}):e.scrollTop=r+i}catch(e){return}},Ue=(e,t)=>{let n=Math.max(e.selectionStart-1||0,0);e.value=t,e.setSelectionRange(n,n)},Oe=(e,t="xy")=>{let n,o,i,r,l,s,a,c,u,d=r=>{if(n&&"mouse"===r.pointerType){if(t.toLowerCase().includes("y")){let t=r.clientY-o;e.scrollTop=s-t}if(t.toLowerCase().includes("x")){let t=r.clientX-i;e.scrollLeft=a-t}}},f=d=>{"mouse"===d.pointerType&&(r=0,cancelAnimationFrame(c),l=0,cancelAnimationFrame(u),t.toLowerCase().includes("y")&&(o=d.clientY,s=e.scrollTop),t.toLowerCase().includes("x")&&(i=d.clientX,a=e.scrollLeft),n=!0)},p=c=>{if(n){if(t.toLowerCase().includes("y")&&"mouse"===c.pointerType){let t=c.clientY-o;e.scrollTop=s-t,r=t,h(e)}if(t.toLowerCase().includes("x")&&"mouse"===c.pointerType){let t=c.clientX-i;e.scrollLeft=a-t,l=t,y(e)}}n=!1},m=()=>n=!1,h=(e,t)=>{if((null==t||e.scrollTop===t)&&"number"==typeof r&&e&&Math.abs(r)>.1){e.scrollTop-=.1*r;let t=e.scrollTop;c=requestAnimationFrame((()=>h(e,t))),r*=.9}else r=0,cancelAnimationFrame(c)},y=(e,t)=>{if((null==t||e.scrollLeft===t)&&"number"==typeof l&&e&&Math.abs(l)>.1){e.scrollLeft-=.1*l;let t=e.scrollLeft;u=requestAnimationFrame((()=>y(e,t))),l*=.9}else l=0,cancelAnimationFrame(u)};return e.addEventListener("pointermove",d),e.addEventListener("pointerdown",f),e.addEventListener("pointerup",p),window.addEventListener("pointerup",m),window.addEventListener("pointercancel",m),()=>{l=r=0,cancelAnimationFrame(c),cancelAnimationFrame(u),e.removeEventListener("pointermove",d),e.removeEventListener("pointerdown",f),e.removeEventListener("pointerup",p),window.addEventListener("pointerup",m),window.addEventListener("pointercancel",m)}};let _e;const Ve=(e,t)=>{e?.classList?.add?.(t)},Be=(e,t)=>{e?.classList?.remove?.(t)},je="Kanshi.Anime.Recommendations.Anilist.W~uPtWCq=vG$TR:Zl^#t<vdS]I~N70",Re=e=>{let t;try{return e=je+e,t=localStorage.getItem(e),JSON.parse(t)}catch(e){return t??null}},He=(e,t)=>{try{localStorage.setItem(je+e,t)}catch(e){}},qe=Le(null),We=Le(null),ze=Le(!0),Ge=Le(0),Ye=Le(!1),Ke=Le(Re("username")||null),Je=Le(null),Xe=Le(null),Qe=Le(null),Ze=Le(null),et=Le(null),tt=Le(null),nt=Le(!1),ot=Le(null),it=Le(Re("autoUpdate")||null),rt=Le(null),lt=Le(null),st=Le(Re("exportPathIsAvailable")||null),at=Le(Re("autoExport")||null),ct=Le(null),ut=Le(null),dt=Le([]),ft=Le(Re("autoPlay")||null),pt=Le(!0),mt=Le(Re("gridFullView")||null),ht=Le(!1),yt=Le(null),wt=Le(null),gt=Le(!1),vt=Le(""),bt=Le(null),xt=Le(null),kt=Le(!1),St=Le(!1),Et=Le(null),Tt=Le(!1),At=Le(null),Nt=Le(!0),It=Le(!1),$t=Le(!1),Lt=Le(null),Pt=Le(null),Ct=Le(null),Ft=Le(null),Mt=Le(null),Dt=Le(null),Ut=Le(null),Ot=Le(null),_t=Le(null),Vt=Le(null),Bt=Le(null);function jt(e){const t=e-1;return t*t*t+1}function Rt(e,{delay:n=0,duration:o=400,easing:i=t}={}){const r=+getComputedStyle(e).opacity;return{delay:n,duration:o,easing:i,css:e=>"opacity: "+e*r}}function Ht(e,{delay:t=0,duration:n=400,easing:o=jt,x:i=0,y:r=0,opacity:l=0}={}){const s=getComputedStyle(e),a=+s.opacity,c="none"===s.transform?"":s.transform,u=a*(1-l),[d,f]=h(i),[p,m]=h(r);return{delay:t,duration:n,easing:o,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*d}${f}, ${(1-e)*p}${m});\n\t\t\topacity: ${a-u*t}`}}function qt(e,t,n){const o=e.slice();return o[42]=t[n],o}function Wt(e,t,n){const o=e.slice();return o[42]=t[n],o}function zt(e,t,n){const o=e.slice();return o[42]=t[n],o}function Gt(e,t,n){const o=e.slice();return o[42]=t[n],o}function Yt(e,t,n){const o=e.slice();return o[47]=t[n],o[48]=t,o[49]=n,o}function Kt(t){let n;return{c(){n=I("div"),n.textContent="No Results",M(n,"class","empty svelte-14ny1pz")},m(e,t){T(e,n,t)},p:e,d(e){e&&A(n)}}}function Jt(t){let n,o,i=Array(21),r=[];for(let e=0;e<i.length;e+=1)r[e]=Qt(Wt(t,i,e));let l=Array(5),s=[];for(let e=0;e<l.length;e+=1)s[e]=Zt(qt(t,l,e));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();n=L();for(let e=0;e<s.length;e+=1)s[e].c();o=P()},m(e,t){for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(e,t);T(e,n,t);for(let n=0;n<s.length;n+=1)s[n]&&s[n].m(e,t);T(e,o,t)},p:e,d(e){N(r,e),e&&A(n),N(s,e),e&&A(o)}}}function Xt(e){let t,n,o,i=[],r=new Map,l=e[8]||[];const s=e=>e[47].id;for(let t=0;t<l.length;t+=1){let n=Yt(e,l,t),o=s(n);r.set(o,i[t]=sn(o,n))}let a=Array(e[7]??fn),c=[];for(let t=0;t<a.length;t+=1)c[t]=an(Gt(e,a,t));let u=Array(e[9]??Re("gridFullView")??!e[10]?Math.floor((e[0]??1100)/220):5),d=[];for(let t=0;t<u.length;t+=1)d[t]=cn(zt(e,u,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=L();for(let e=0;e<c.length;e+=1)c[e].c();n=L();for(let e=0;e<d.length;e+=1)d[e].c();o=P()},m(e,r){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,r);T(e,t,r);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(e,r);T(e,n,r);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(e,r);T(e,o,r)},p(e,f){if(61730&f[0]&&(l=e[8]||[],i=xe(i,f,s,1,e,l,r,t.parentNode,ve,sn,t,Yt)),456&f[0]){let t;for(a=Array(e[7]??fn),t=0;t<a.length;t+=1){const o=Gt(e,a,t);c[t]?c[t].p(o,f):(c[t]=an(o),c[t].c(),c[t].m(n.parentNode,n))}for(;t<c.length;t+=1)c[t].d(1);c.length=a.length}if(1537&f[0]){let t;for(u=Array(e[9]??Re("gridFullView")??!e[10]?Math.floor((e[0]??1100)/220):5),t=0;t<u.length;t+=1){const n=zt(e,u,t);d[t]?d[t].p(n,f):(d[t]=cn(),d[t].c(),d[t].m(o.parentNode,o))}for(;t<d.length;t+=1)d[t].d(1);d.length=u.length}},d(e){for(let t=0;t<i.length;t+=1)i[t].d(e);e&&A(t),N(c,e),e&&A(n),N(d,e),e&&A(o)}}}function Qt(t){let n;return{c(){n=I("div"),n.innerHTML='<div class="shimmer svelte-14ny1pz"></div>',M(n,"class","image-grid__card skeleton svelte-14ny1pz")},m(e,t){T(e,n,t)},p:e,d(e){e&&A(n)}}}function Zt(t){let n;return{c(){n=I("div"),M(n,"class","image-grid__card svelte-14ny1pz")},m(e,t){T(e,n,t)},p:e,d(e){e&&A(n)}}}function en(e){let t,n,o,r,l,s,c;return{c(){t=I("img"),M(t,"fetchpriority",n=e[49]>fn?"":"high"),M(t,"loading",o=e[49]>fn?"lazy":"eager"),M(t,"class",p("image-grid__card-thumb  fade-out")+" svelte-14ny1pz"),M(t,"alt",r=(e[47]?.shownTitle||"")+" Cover"),a(t.src,l=e[47]?.coverImageUrl||e[47]?.bannerImageUrl||e[47]?.trailerThumbnailUrl||"")||M(t,"src",l),M(t,"width","180px"),M(t,"height","254.531px")},m(n,o){T(n,t,o),s||(c=[C(t,"load",e[17]),C(t,"error",e[18])],s=!0)},p(e,i){256&i[0]&&n!==(n=e[49]>fn?"":"high")&&M(t,"fetchpriority",n),256&i[0]&&o!==(o=e[49]>fn?"lazy":"eager")&&M(t,"loading",o),256&i[0]&&r!==(r=(e[47]?.shownTitle||"")+" Cover")&&M(t,"alt",r),256&i[0]&&!a(t.src,l=e[47]?.coverImageUrl||e[47]?.bannerImageUrl||e[47]?.trailerThumbnailUrl||"")&&M(t,"src",l)},d(e){e&&A(t),s=!1,i(c)}}}function tn(e){let t,n=`${e[47].format||"N/A"}${e[47].episodes?"("+e[47].episodes+")":""}`;return{c(){t=$(n)},m(e,n){T(e,t,n)},p(e,o){256&o[0]&&n!==(n=`${e[47].format||"N/A"}${e[47].episodes?"("+e[47].episodes+")":""}`)&&D(t,n)},d(e){e&&A(t)}}}function nn(e){let t,n,o,i=`${e[47].format||"N/A"}`,r=e[1]?.getSeconds?.()||1,s=on(e);return{c(){t=$(i),n=L(),s.c(),o=P()},m(e,i){T(e,t,i),T(e,n,i),s.m(e,i),T(e,o,i)},p(e,n){256&n[0]&&i!==(i=`${e[47].format||"N/A"}`)&&D(t,i),2&n[0]&&l(r,r=e[1]?.getSeconds?.()||1)?(s.d(1),s=on(e),s.c(),s.m(o.parentNode,o)):s.p(e,n)},d(e){e&&A(t),e&&A(n),e&&A(o),s.d(e)}}}function on(e){let t,n=pn(e[47].episodes,e[47].nextAiringEpisode)+"";return{c(){t=$(n)},m(e,n){T(e,t,n)},p(e,o){256&o[0]&&n!==(n=pn(e[47].episodes,e[47].nextAiringEpisode)+"")&&D(t,n)},d(e){e&&A(t)}}}function rn(e){let t,n=(e[47]?.formattedWeightedScore||"N/A")+"";return{c(){t=$(n)},m(e,n){T(e,t,n)},p(e,o){256&o[0]&&n!==(n=(e[47]?.formattedWeightedScore||"N/A")+"")&&D(t,n)},d(e){e&&A(t)}}}function ln(e){let t,n=(e[47]?.shownScore||"N/A")+"";return{c(){t=$(n)},m(e,n){T(e,t,n)},p(e,o){256&o[0]&&n!==(n=(e[47]?.shownScore||"N/A")+"")&&D(t,n)},d(e){e&&A(t)}}}function sn(e,t){let n,o,l,s,a,c,u,d,f,m,h,y,w,g,v,b,x,S,E,N,P,F,U,O,_,V,B=(t[47]?.shownTitle||"N/A")+"",j=t[48],R=t[49],H=(t[47]?.coverImageUrl||t[47]?.bannerImageUrl||t[47]?.trailerThumbnailUrl)&&en(t);function q(e,t){return 256&t[0]&&(v=null),null==v&&(v=!!Pe(e[47]?.nextAiringEpisode)),v?nn:tn}let W=q(t,[-1,-1]),z=W(t);function G(e,t){return e[12]?ln:rn}let Y=G(t),K=Y(t);function J(...e){return t[19](t[49],...e)}function X(...e){return t[20](t[49],...e)}const Q=()=>t[21](n,j,R),Z=()=>t[21](null,j,R);return{key:e,first:null,c(){n=I("div"),o=I("div"),H&&H.c(),l=L(),s=I("span"),a=I("span"),c=$(B),d=L(),f=I("span"),m=I("div"),h=I("span"),y=I("i"),g=L(),z.c(),b=L(),x=I("div"),S=I("span"),E=I("i"),P=L(),K.c(),M(a,"class","title copy svelte-14ny1pz"),M(a,"copy-value",u=t[47]?.shownTitle||""),M(y,"class",w=p(`${t[47]?.userStatusColor}-color fa-solid fa-circle`)+" svelte-14ny1pz"),M(m,"class","brief-info svelte-14ny1pz"),M(E,"class",N=p(`${t[47]?.contentCautionColor}-color fa-solid fa-star`)+" svelte-14ny1pz"),M(x,"class","brief-info svelte-14ny1pz"),M(f,"class","brief-info-wrapper copy svelte-14ny1pz"),M(f,"copy-value",F=t[47]?.shownTitle||""),M(s,"class","image-grid__card-title svelte-14ny1pz"),M(o,"class","shimmer svelte-14ny1pz"),M(o,"tabindex",U=t[5]?"":"0"),M(n,"class","image-grid__card svelte-14ny1pz"),M(n,"title",O=t[47]?.briefInfo||""),this.first=n},m(e,i){T(e,n,i),k(n,o),H&&H.m(o,null),k(o,l),k(o,s),k(s,a),k(a,c),k(s,d),k(s,f),k(f,m),k(m,h),k(h,y),k(h,g),z.m(h,null),k(f,b),k(f,x),k(x,S),k(S,E),k(S,P),K.m(S,null),Q(),_||(V=[C(o,"click",(function(){r(t[13](t[49]))&&t[13](t[49]).apply(this,arguments)})),C(o,"pointerdown",J),C(o,"pointerup",t[15]),C(o,"pointercancel",t[15]),C(o,"keydown",X)],_=!0)},p(e,i){t=e,t[47]?.coverImageUrl||t[47]?.bannerImageUrl||t[47]?.trailerThumbnailUrl?H?H.p(t,i):(H=en(t),H.c(),H.m(o,l)):H&&(H.d(1),H=null),256&i[0]&&B!==(B=(t[47]?.shownTitle||"N/A")+"")&&D(c,B),256&i[0]&&u!==(u=t[47]?.shownTitle||"")&&M(a,"copy-value",u),256&i[0]&&w!==(w=p(`${t[47]?.userStatusColor}-color fa-solid fa-circle`)+" svelte-14ny1pz")&&M(y,"class",w),W===(W=q(t,i))&&z?z.p(t,i):(z.d(1),z=W(t),z&&(z.c(),z.m(h,null))),256&i[0]&&N!==(N=p(`${t[47]?.contentCautionColor}-color fa-solid fa-star`)+" svelte-14ny1pz")&&M(E,"class",N),Y===(Y=G(t))&&K?K.p(t,i):(K.d(1),K=Y(t),K&&(K.c(),K.m(S,null))),256&i[0]&&F!==(F=t[47]?.shownTitle||"")&&M(f,"copy-value",F),32&i[0]&&U!==(U=t[5]?"":"0")&&M(o,"tabindex",U),256&i[0]&&O!==(O=t[47]?.briefInfo||"")&&M(n,"title",O),j===t[48]&&R===t[49]||(Z(),j=t[48],R=t[49],Q())},d(e){e&&A(n),H&&H.d(),z.d(),K.d(),Z(),_=!1,i(V)}}}function an(e){let t,n,o;return{c(){t=I("div"),n=I("div"),M(n,"class","shimmer svelte-14ny1pz"),M(t,"class",o=p("image-grid__card skeleton anime-loaded-padding "+(e[8]?.length&&!e[6]&&e[3]?"":"disable-interaction"))+" svelte-14ny1pz")},m(e,o){T(e,t,o),k(t,n)},p(e,n){328&n[0]&&o!==(o=p("image-grid__card skeleton anime-loaded-padding "+(e[8]?.length&&!e[6]&&e[3]?"":"disable-interaction"))+" svelte-14ny1pz")&&M(t,"class",o)},d(e){e&&A(t)}}}function cn(t){let n;return{c(){n=I("div"),M(n,"class","image-grid__card svelte-14ny1pz")},m(e,t){T(e,n,t)},p:e,d(e){e&&A(n)}}}function un(t){let n,o,r,l,s;return{c(){n=I("div"),n.innerHTML='<i class="fa-solid fa-arrow-left svelte-14ny1pz"></i>',M(n,"class","go-back-grid svelte-14ny1pz"),M(n,"tabindex","0")},m(e,o){T(e,n,o),r=!0,l||(s=[C(n,"click",t[16]),C(n,"keydown",t[24])],l=!0)},p:e,i(e){r||(ne((()=>{r&&(o||(o=ge(n,Ht,{x:-50,duration:200},!0)),o.run(1))})),r=!0)},o(e){o||(o=ge(n,Ht,{x:-50,duration:200},!1)),o.run(0),r=!1},d(e){e&&A(n),e&&o&&o.end(),l=!1,i(s)}}}function dn(e){let t,n,o,i,r,l,s,a;function c(e,t){return e[8]?.length?Xt:!e[8]||e[11]?Jt:Kt}let u=c(e),d=u(e),f=!e[10]&&e[9]&&e[2]?.scrollLeft>500&&un(e);return{c(){t=I("main"),n=I("div"),d.c(),i=L(),f&&f.c(),M(n,"id","anime-grid"),M(n,"class",o=p("image-grid "+(e[9]??Re("gridFullView")??!e[10]?"fullView":"")+(0!==e[8]?.length||e[11]?"":"empty"))+" svelte-14ny1pz"),O(n,"--anime-grid-height",e[0]+"px"),M(t,"class",r=p(e[9]??Re("gridFullView")??!e[10]?"fullView":"")+" svelte-14ny1pz")},m(o,r){T(o,t,r),k(t,n),d.m(n,null),e[22](n),k(t,i),f&&f.m(t,null),l=!0,s||(a=C(n,"wheel",e[23]),s=!0)},p(e,i){u===(u=c(e))&&d?d.p(e,i):(d.d(1),d=u(e),d&&(d.c(),d.m(n,null))),(!l||3840&i[0]&&o!==(o=p("image-grid "+(e[9]??Re("gridFullView")??!e[10]?"fullView":"")+(0!==e[8]?.length||e[11]?"":"empty"))+" svelte-14ny1pz"))&&M(n,"class",o),1&i[0]&&O(n,"--anime-grid-height",e[0]+"px"),!e[10]&&e[9]&&e[2]?.scrollLeft>500?f?(f.p(e,i),1540&i[0]&&me(f,1)):(f=un(e),f.c(),me(f,1),f.m(t,null)):f&&(fe(),he(f,1,1,(()=>{f=null})),pe()),(!l||1536&i[0]&&r!==(r=p(e[9]??Re("gridFullView")??!e[10]?"fullView":"")+" svelte-14ny1pz"))&&M(t,"class",r)},i(e){l||(me(f),l=!0)},o(e){he(f),l=!1},d(n){n&&A(t),d.d(),e[22](null),f&&f.d(),s=!1,a()}}}let fn=13;function pn(e,t){let n,o;if("number"==typeof t?.episode&&"number"==typeof t?.airingAt){let e=new Date(1e3*t?.airingAt);o=t?.episode,e instanceof Date&&!isNaN(e)&&(n=e.getTime()-(new Date).getTime())}if(n>0&&o>1&&e>o)return`(${o-1}/${e})`;if(n<=0&&"number"==typeof o&&e>o)return`(${o}/${e})`;if("number"==typeof e)return`(${e})`;if("number"==typeof o){if(n>0&&o>1)return`(${o-1}")`;if(n<=0)return`(${o}")`}return""}function mn(e,t,n){let o,i,r,l,s,a,c,u,f,p,h,y,w,g,v,b,x,k;d(e,St,(e=>n(30,o=e))),d(e,Et,(e=>n(31,i=e))),d(e,Tt,(e=>n(5,r=e))),d(e,At,(e=>n(32,l=e))),d(e,et,(e=>n(33,s=e))),d(e,ht,(e=>n(34,a=e))),d(e,gt,(e=>n(6,c=e))),d(e,Ct,(e=>n(35,u=e))),d(e,yt,(e=>n(36,f=e))),d(e,bt,(e=>n(7,p=e))),d(e,Ze,(e=>n(8,h=e))),d(e,tt,(e=>n(37,y=e))),d(e,wt,(e=>n(38,w=e))),d(e,Ut,(e=>n(39,g=e))),d(e,mt,(e=>n(9,v=e))),d(e,We,(e=>n(10,b=e))),d(e,pt,(e=>n(11,x=e))),d(e,Xe,(e=>n(12,k=e)));let S,E,T=Math.max(window.visualViewport.height,window.innerHeight),A=new Date,N=!1;G((()=>{n(0,T=Math.max(window.visualViewport.height,window.innerHeight)),n(2,S=S||document.getElementById("anime-grid")),window.addEventListener("resize",(()=>{n(0,T=Math.max(window.visualViewport.height,window.innerHeight))})),setInterval((()=>{n(1,A=new Date)}),1e3)}));let I,$,L,P,C=!1;function F(e){m(At,l=e,l),m(Tt,r=!0,r)}function M(e,t){let n=e.target;n.classList.contains("copy")||n.closest(".copy")||(L&&clearTimeout(L),L=setTimeout((()=>{m(Et,i=t,i),m(St,o=!0,o)}),500))}function D(){n(2,S.style.overflow="hidden",S),n(2,S.style.overflow="",S),S?.children?.[0]?.scrollIntoView?.({container:S,behavior:"smooth",block:"nearest",inline:"start"})}window.checkAnimeLoaderStatus=m(ht,a=async()=>{if(s instanceof Worker&&"function"==typeof s.onmessage)return new Promise(((e,t)=>{I={resolve:e,reject:t},s?.postMessage?.({checkStatus:!0}),clearTimeout($),$=setTimeout((()=>{t()}),1e3)})).catch((()=>{m(et,s=null,s),m(Ze,h=null,h),m(Ut,g=!g,g),I=null})).finally((()=>{I=null}))},a),et.subscribe((e=>{e instanceof Worker&&(e.onmessage=async({data:e})=>{if(I?.resolve&&e?.isAlive&&(I?.resolve?.(),I=null),await te(),void 0!==e?.status)m(tt,y=e.status,y);else if(e.finalAnimeList instanceof Array)!0===e?.reload?(m(Ze,h=e.finalAnimeList,h),C=!0,m(bt,p=e.numberOfNextLoadedGrid,p)):!0===e.isNew?(m(Ze,h=e.finalAnimeList,h),m(bt,p=e.numberOfNextLoadedGrid,p)):!1===e.isNew&&(h instanceof Array&&(m(Ze,h=h.concat(e.finalAnimeList),h),e.isLast&&(m(gt,c=!0,c),f instanceof IntersectionObserver&&(f.disconnect(),m(yt,f=null,f)))),m(bt,p=e.numberOfNextLoadedGrid,p));else if(!0===e.isRemoved&&"number"==typeof e.removedID){let t=Math.max(h.length-2,0),n=h[t].gridElement||S.children?.[t];f instanceof IntersectionObserver&&n instanceof Element&&f.observe(n);let o=h.findIndex((({id:t})=>t===e.removedID));m(Ze,h=h.filter((({id:t})=>t!==e.removedID)),h),o>=0&&(m(wt,w=null,w),m(wt,w=o,w)),m(bt,p=e.numberOfNextLoadedGrid,p)}},e.onerror=e=>{m(tt,y="Something went wrong...",y),console.error(e)})})),Ze.subscribe((async e=>{if(e instanceof Array&&e.length){c&&m(gt,c=!1,c),f&&(f.disconnect(),m(yt,f=null,f)),await te(),E=!1,m(yt,f=new IntersectionObserver((e=>{c||e.forEach((e=>{if(e.isIntersecting){if(n(3,N=!0),E)return;E=!0,setTimeout((()=>{s instanceof Worker&&a().then((()=>{s?.postMessage?.({loadMore:!0})})),E=!1}),1e3)}}))}),{root:null,rootMargin:"100%",threshold:[0,1]}),f);let e=h.length-1,t=h[e].gridElement||S.children?.[e];f instanceof IntersectionObserver&&(t instanceof Element&&f.observe(t),document.querySelectorAll(".anime-loaded-padding").forEach((e=>{f.observe(e)}))),C&&(m(Ct,u=!u,u),C=!1),n(3,N=!1)}else m(bt,p=null,p),f&&(f?.disconnect?.(),m(yt,f=null,f)),C&&(m(Ct,u=!u,u),C=!1),n(3,N=!1)})),vt.subscribe((async e=>{"string"==typeof e&&s instanceof Worker&&(m(gt,c=!1,c),a().then((()=>{s?.postMessage?.({filterKeyword:e})})))}));return[T,A,S,N,P,r,c,p,h,v,b,x,k,F,M,function(){L&&clearTimeout(L)},D,e=>{Be(e.target,"fade-out"),Ve(e.target?.closest?.(".shimmer"),"loaded")},e=>{Ve(e.target,"fade-out"),Ve(e.target,"display-none")},(e,t)=>M(t,e),(e,t)=>"Enter"===t.key&&F(e),function(e,t,n){K[e?"unshift":"push"]((()=>{t[n].gridElement=e}))},function(e){K[e?"unshift":"push"]((()=>{S=e,n(2,S)}))},e=>{if((v??Re("gridFullView")??!b)&&(function(e,t){let n=e.target;n.classList.contains(t)||(n=n.closest("."+t)),n.scrollWidth<=n.clientWidth||0!==e.deltaY&&0===e.deltaX&&(e.preventDefault(),e.stopPropagation(),n.scrollLeft=Math.max(0,n.scrollLeft+e.deltaY))}(e,"image-grid"),!P)){n(4,P=!0);let e=window.scrollMaxY||Number.MAX_SAFE_INTEGER;document.documentElement.scrollTop=e,n(4,P=!1)}},e=>"Enter"===e.key&&D()]}let hn={};const yn=e=>new Promise((async t=>{if(u(We))t(e);else{let n=u(qe);n||(n=await Ie(),qe.set(n)),hn[e=e+"?v="+n]?t(hn[e]):fetch(e,{headers:{"Cache-Control":"max-age=31536000, immutable"}}).then((e=>e.blob())).then((n=>{let o=URL.createObjectURL(n);hn[e]=o,t(o)})).catch((async()=>{t(e)}))}}));let wn,gn,vn,bn=1e3,xn=!1,kn=!1;const Sn=(e={})=>new Promise(((t,n)=>{xn=!0,Ge.set(0),yn("./webapi/worker/animeLoader.js").then((o=>{vn&&(vn.terminate(),vn=null),e?.filterOptions&&e?.activeTagFilters?(wn=e?.filterOptions,gn=e?.activeTagFilters,e.hasPassedFilters=!0):wn&&gn&&(e.filterOptions=wn,e.activeTagFilters=gn,e.hasPassedFilters=!0),vn=new Worker(o),vn.postMessage(e),vn.onmessage=({data:e})=>{e?.hasOwnProperty("progress")?e?.progress>=0&&e?.progress<=100&&Ge.set(e.progress):e?.hasOwnProperty("status")?(xn=!0,tt.set(e.status)):e?.isNew&&(!0===e?.hasPassedFilters&&(wn=gn=void 0),xn=!1,vn.onmessage=null,Ge.set(100),t(Object.assign({},e,{animeLoaderWorker:vn})))},vn.onerror=e=>{Ge.set(100),n(e)}})).catch((e=>{Ge.set(100),zn(),n(e)}))}));let En,Tn;const An=(e={})=>new Promise(((t,n)=>{xn=!0,Tn&&Tn.terminate(),Ge.set(0),yn("./webapi/worker/processRecommendedAnimeList.js").then((o=>{En&&clearTimeout(En),e?.filterOptions&&e?.activeTagFilters?(wn=e?.filterOptions,gn=e?.activeTagFilters,e.hasPassedFilters=!0):wn&&gn&&(e.filterOptions=wn,e.activeTagFilters=gn,e.hasPassedFilters=!0),Tn=new Worker(o),Tn.postMessage(e),Tn.onmessage=({data:e})=>{if(e?.hasOwnProperty("progress"))e?.progress>=0&&e?.progress<=100&&Ge.set(e.progress);else if(e?.hasOwnProperty("status"))xn=!0,tt.set(e.status);else if(e?.animeReleaseNotification){if(u(We))try{let t=e?.animeReleaseNotification;"number"==typeof t?.releaseEpisodes&&"number"==typeof t?.releaseDateMillis&&"number"==typeof t?.maxEpisode&&"string"==typeof t?.title&&"number"==typeof t?.id&&"boolean"==typeof t?.isMyAnime&&"string"==typeof t?.imageURL&&JSBridge.addAnimeReleaseNotification(t.id,t.title,t.releaseEpisodes,t.maxEpisode,t.releaseDateMillis,t?.imageURL,t.isMyAnime)}catch(e){}}else!0===e?.hasPassedFilters&&(wn=gn=void 0),xn=!1,En=setTimeout((()=>{Tn.terminate()}),bn),Ge.set(100),t()},Tn.onerror=e=>{Ge.set(100),n(e)}})).catch((e=>{Ge.set(100),zn(),n(e)}))}));let Nn,In;const $n=e=>new Promise(((t,n)=>{In&&In.terminate(),Ge.set(0),yn("./webapi/worker/requestAnimeEntries.js").then((o=>{In=new Worker(o),Nn&&clearTimeout(Nn),In.postMessage(e),In.onmessage=({data:e})=>{e?.hasOwnProperty("progress")?!xn&&e?.progress>=0&&e?.progress<=100&&Ge.set(e.progress):e?.hasOwnProperty("status")?xn||tt.set(e.status):void 0!==e?.updateRecommendationList?Ot.update((e=>!e)):e?.lastRunnedAutoUpdateDate instanceof Date&&!isNaN(e?.lastRunnedAutoUpdateDate)?lt.set(e.lastRunnedAutoUpdateDate):(void 0!==e?.errorDuringInit||(Nn=setTimeout((()=>{In.terminate()}),bn),Ge.set(100)),t(e))},In.onerror=e=>{Ge.set(100),n(e)}})).catch((e=>{Ge.set(100),zn(),n(e)}))}));let Ln,Pn;const Cn=e=>new Promise(((t,n)=>{u(pt)||(kn||u(nt))&&ot.set(!1),Pn&&Pn.terminate(),Ge.set(0),yn("./webapi/worker/requestUserEntries.js").then((o=>{Pn=new Worker(o),Ln&&clearTimeout(Ln),Pn.postMessage(e),Pn.onmessage=({data:e})=>{e?.hasOwnProperty("progress")?!xn&&e?.progress>=0&&e?.progress<=100&&Ge.set(e.progress):e?.hasOwnProperty("status")?xn||(tt.set(e.status),"User not found"===e.status&&(ot.set(!1),Vt.update((e=>!e)),window.confirmPromise({isAlert:!0,text:"User is not found, you may want to try again..."}),Ln=setTimeout((()=>{Pn.terminate()}),bn),Ge.set(100),n(e))):e?.error?(ot.set(!1),Vt.update((e=>!e)),Ln=setTimeout((()=>{Pn.terminate()}),bn),Ge.set(100),n(e)):void 0!==e?.updateRecommendationList?Ot.update((e=>!e)):(ot.set(!1),Ln=setTimeout((()=>{Pn.terminate()}),bn),Ge.set(100),t(e))},Pn.onerror=e=>{ot.set(!1),Vt.update((e=>!e)),Ln=setTimeout((()=>{Pn.terminate()}),bn),Ge.set(100),n(e)}})).catch((e=>{ot.set(!1),Ge.set(100),Vt.update((e=>!e)),zn(),n(e)}))}));let Fn;const Mn=e=>new Promise(((e,t)=>{if(!u(pt)){if(u(nt))return;Wn(),kn=!0}Fn&&Fn.terminate(),Ge.set(0),yn("./webapi/worker/exportUserData.js").then((n=>{Fn=new Worker(n),u(We)?Fn.postMessage("android"):Fn.postMessage("browser"),Fn.onmessage=({data:t})=>{if(t?.hasOwnProperty("progress"))t?.progress>=0&&t?.progress<=100&&Ge.set(t.progress);else if(t?.hasOwnProperty("status"))xn=!0,tt.set(t.status);else if(u(We)){xn=!1;let n=t.chunk,o=t.state;if(0===o)JSBridge.exportJSON("",0,"");else if(1===o)JSBridge.exportJSON(n,1,"");else if(2===o){let o=t.username??null;JSBridge.exportJSON(n,2,`Kanshi.${o?.toLowerCase()||"Backup"}.json`),Ge.set(100),Fn.terminate(),kn=!1,e(t)}}else{xn=!1;let n=t.username??null;Ge.set(100),((e,t)=>{_e&&setTimeout((()=>URL.revokeObjectURL(_e)),0),_e=e;const n=document.createElement("a");n.href=e,n.download=t,n.click()})(t.url,`Kanshi.${n?.toLowerCase()||"Backup"}.json`),kn=!1,e(t)}},Fn.onerror=e=>{Ge.set(100),kn=!1,window.confirmPromise?.({isAlert:!0,title:"Export Failed",text:"Data is not exported, please try again in a later time."}),t(e)}})).catch((e=>{Ge.set(100),kn=!1,zn(),t(e)}))}));let Dn,Un;const On=e=>new Promise(((t,n)=>{yn("./webapi/worker/getIDBdata.js").then((o=>{let i=new Worker(o);i.postMessage({name:e}),i.onmessage=({data:e})=>{e?.hasOwnProperty("status")?tt.set(e.status):(i.terminate(),t(e))},i.onerror=e=>{n(e)}})).catch((()=>{zn(),n(error)}))})),_n=(e,t)=>new Promise(((n,o)=>{yn("./webapi/worker/saveIDBdata.js").then((i=>{let r=new Worker(i);r.onmessage=({data:e})=>{e?.hasOwnProperty("status")?tt.set(e.status):(setTimeout((()=>{r.terminate(),r=null}),bn),n())},r.onerror=e=>{o(e)},r.postMessage({data:e,name:t}),"boolean"==typeof e&&He(t,e)})).catch((e=>{zn(),o(e)}))}));let Vn,Bn;let jn,Rn,Hn;const qn=e=>new Promise(((t,n)=>{Rn=setInterval((()=>{Bn||tt.set("Getting Filters")}),300),yn("./webapi/worker/getFilterOptions.js").then((o=>{Rn&&(clearInterval(Rn),Rn=null),Hn&&Hn.terminate(),Hn=new Worker(o),jn&&clearTimeout(jn),Hn.postMessage(e),Hn.onmessage=({data:e})=>{e?.hasOwnProperty("status")?(xn=!0,tt.set(e.status)):(xn=!1,jn=setTimeout((()=>{Hn.terminate()}),bn),t(e))},Hn.onerror=e=>{n(e)}})).catch((e=>{Rn&&(clearInterval(Rn),Rn=null),tt.set(null),zn(),n(e)}))}));function Wn(){Ge.set(0),In?.terminate?.(),Pn?.terminate?.(),ot.set(!1),Un?.terminate?.(),nt.set(!1),Fn?.terminate?.(),kn=!1,Hn?.terminate?.(),clearInterval(Bn),Bn=null,clearInterval(Rn),Rn=null,tt.set(null)}function zn(){u(We)?window.confirmPromise?.({isAlert:!0,title:"Something Went Wrong",text:"App may not be working properly, you may want to restart and make sure you're running the latest version."}):window.confirmPromise?.({isAlert:!0,title:"Something Went Wrong",text:"App may not be working properly, you may want to refresh the page, or if not clear the cookies but backup your data first."})}function Gn(e,t){return new Promise((async(n,o)=>{await _n(e,t).then((e=>{n(e)})).catch((e=>{o(e)}))}))}async function Yn(e){return new Promise((async(t,n)=>{await On(e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}function Kn(e,t,n){const o=e.slice();return o[119]=t[n],o[120]=t,o[121]=n,o}function Jn(e,t,n){const o=e.slice();return o[122]=t[n],o}function Xn(e,t,n){const o=e.slice();return o[125]=t[n],o}function Qn(e,t,n){const o=e.slice();return o[128]=t[n],o}function Zn(e){let t,n,o=[],i=new Map,r=e[10]||[];const l=e=>e[119].id;for(let t=0;t<r.length;t+=1){let n=Kn(e,r,t),s=l(n);i.set(s,o[t]=ko(s,n))}let s=e[10]?.length&&!e[14]&&So();return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=L(),s&&s.c(),n=P()},m(e,i){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,i);T(e,t,i),s&&s.m(e,i),T(e,n,i)},p(e,a){6241639&a[0]&&(r=e[10]||[],o=xe(o,a,l,1,e,r,i,t.parentNode,ve,ko,t,Kn)),e[10]?.length&&!e[14]?s||(s=So(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(e){for(let t=0;t<o.length;t+=1)o[t].d(e);e&&A(t),s&&s.d(e),e&&A(n)}}}function eo(e){let t;return{c(){t=I("div"),M(t,"class","trailer display-none svelte-xmcaps")},m(e,n){T(e,t,n)},d(e){e&&A(t)}}}function to(e){let t,n,o,r,l;return{c(){t=I("img"),M(t,"loading","lazy"),M(t,"width","640px"),M(t,"height","360px"),a(t.src,n=e[119].bannerImageUrl||e[119].trailerThumbnailUrl)||M(t,"src",n),M(t,"alt",o=(e[119]?.shownTitle||"")+(e[119].bannerImageUrl?" Banner":" Thumbnail")),M(t,"class","bannerImg fade-out svelte-xmcaps")},m(n,o){T(n,t,o),r||(l=[C(t,"load",e[32]),C(t,"error",e[33])],r=!0)},p(e,i){1024&i[0]&&!a(t.src,n=e[119].bannerImageUrl||e[119].trailerThumbnailUrl)&&M(t,"src",n),1024&i[0]&&o!==(o=(e[119]?.shownTitle||"")+(e[119].bannerImageUrl?" Banner":" Thumbnail"))&&M(t,"alt",o)},d(e){e&&A(t),r=!1,i(l)}}}function no(e){let t;return{c(){t=$("Auto")},m(e,n){T(e,t,n)},d(e){e&&A(t)}}}function oo(e){let t;return{c(){t=$("Auto Play")},m(e,n){T(e,t,n)},d(e){e&&A(t)}}}function io(e){let t,n,o,r,l,s,a,c=e[5]>=320?"List Update":e[5]>=205?"Update":e[5]>=180?"List":"";return{c(){t=I("div"),n=I("i"),o=L(),r=I("h3"),l=$(c),M(n,"class","list-update-icon fa-solid fa-arrows-rotate svelte-xmcaps"),M(r,"class","list-update-label svelte-xmcaps"),M(t,"class","list-update-container svelte-xmcaps"),M(t,"tabindex","0")},m(i,c){T(i,t,c),k(t,n),k(t,o),k(t,r),k(r,l),s||(a=[C(t,"click",e[19]),C(t,"keydown",e[41])],s=!0)},p(e,t){32&t[0]&&c!==(c=e[5]>=320?"List Update":e[5]>=205?"Update":e[5]>=180?"List":"")&&D(l,c)},d(e){e&&A(t),s=!1,i(a)}}}function ro(e){let t,n,o,r,l,s,a,c=e[119].bannerImageUrl?"Banner":"Thumbnail";function u(){return e[42](e[119])}function d(...t){return e[43](e[119],...t)}return{c(){t=I("div"),n=I("i"),o=L(),r=I("h3"),l=$(c),M(n,"class","banner-image-icon fa-solid fa-image svelte-xmcaps"),M(r,"class","banner-image-label svelte-xmcaps"),M(t,"class","banner-image-button svelte-xmcaps"),M(t,"tabindex","0")},m(e,i){T(e,t,i),k(t,n),k(t,o),k(t,r),k(r,l),s||(a=[C(t,"click",u),C(t,"keydown",d)],s=!0)},p(t,n){e=t,1024&n[0]&&c!==(c=e[119].bannerImageUrl?"Banner":"Thumbnail")&&D(l,c)},d(e){e&&A(t),s=!1,i(a)}}}function lo(e){let t,n,o,i,r,l,s=(e[119]?.format||"NA")+"",a=(e[20](e[119])||" · NA")+"",c=(e[119]?.formattedDuration||" · NA")+"";return{c(){t=I("h4"),n=$(s),o=L(),i=new V(!1),r=L(),l=$(c),i.a=r,M(t,"class","svelte-xmcaps")},m(e,s){T(e,t,s),k(t,n),k(t,o),i.m(a,t),k(t,r),k(t,l)},p(e,t){1024&t[0]&&s!==(s=(e[119]?.format||"NA")+"")&&D(n,s),1024&t[0]&&a!==(a=(e[20](e[119])||" · NA")+"")&&i.p(a),1024&t[0]&&c!==(c=(e[119]?.formattedDuration||" · NA")+"")&&D(l,c)},d(e){e&&A(t)}}}function so(e){let t,n,o,i,r,s=(e[119]?.format||"NA")+"",a=e[2]?.getSeconds?.()||1,c=(e[119]?.formattedDuration||" · NA")+"",u=ao(e);return{c(){t=I("h4"),n=$(s),o=L(),u.c(),i=L(),r=$(c),M(t,"class","svelte-xmcaps")},m(e,l){T(e,t,l),k(t,n),k(t,o),u.m(t,null),k(t,i),k(t,r)},p(e,o){1024&o[0]&&s!==(s=(e[119]?.format||"NA")+"")&&D(n,s),4&o[0]&&l(a,a=e[2]?.getSeconds?.()||1)?(u.d(1),u=ao(e),u.c(),u.m(t,i)):u.p(e,o),1024&o[0]&&c!==(c=(e[119]?.formattedDuration||" · NA")+"")&&D(r,c)},d(e){e&&A(t),u.d(e)}}}function ao(e){let t,n,o=(e[20](e[119])||" · NA")+"";return{c(){t=new V(!1),n=P(),t.a=n},m(e,i){t.m(o,e,i),T(e,n,i)},p(e,n){1024&n[0]&&o!==(o=(e[20](e[119])||" · NA")+"")&&t.p(o)},d(e){e&&A(n),e&&t.d()}}}function co(t){let n;return{c(){n=I("h4"),n.textContent="NA",M(n,"class","svelte-xmcaps")},m(e,t){T(e,n,t)},p:e,d(e){e&&A(n)}}}function uo(e){let t,n,o,i=(`${e[119]?.season||""}${e[119]?.year?" "+e[119].year:""}`||"NA")+"";return{c(){t=I("span"),n=$(i),O(t,"text-align","right"),M(t,"class","copy svelte-xmcaps"),M(t,"copy-value",o=`${e[119]?.season||""}${e[119]?.year?" "+e[119].year:""}`||"NA")},m(e,o){T(e,t,o),k(t,n)},p(e,r){1024&r[0]&&i!==(i=(`${e[119]?.season||""}${e[119]?.year?" "+e[119].year:""}`||"NA")+"")&&D(n,i),1024&r[0]&&o!==(o=`${e[119]?.season||""}${e[119]?.year?" "+e[119].year:""}`||"NA")&&M(t,"copy-value",o)},d(e){e&&A(t)}}}function fo(e){let t,n,o,i,r,l=e[119].userScore+"";return{c(){t=$(" · "),n=L(),o=I("i"),i=L(),r=$(l),M(o,"class","fa-regular fa-star svelte-xmcaps")},m(e,l){T(e,t,l),T(e,n,l),T(e,o,l),T(e,i,l),T(e,r,l)},p(e,t){1024&t[0]&&l!==(l=e[119].userScore+"")&&D(r,l)},d(e){e&&A(t),e&&A(n),e&&A(o),e&&A(i),e&&A(r)}}}function po(e){let t,n,o,r,l,s,a=[],c=new Map,u=e[119].studios;const d=e=>e[128]?.studio||{};for(let t=0;t<u.length;t+=1){let n=Qn(e,u,t),o=d(n);c.set(o,a[t]=mo(o,n))}function f(...t){return e[44](e[119],e[120],e[121],...t)}return{c(){t=I("div"),n=I("div"),n.textContent="Studios",o=L(),r=I("div");for(let e=0;e<a.length;e+=1)a[e].c();M(n,"class","info-categ svelte-xmcaps"),M(r,"class",p("studio-popup info")+" svelte-xmcaps"),O(r,"overflow",e[8]?"hidden":""),M(t,"class","svelte-xmcaps")},m(i,c){T(i,t,c),k(t,n),k(t,o),k(t,r);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(r,null);l||(s=[C(r,"scroll",e[22]),C(r,"mouseenter",f)],l=!0)},p(t,n){e=t,1024&n[0]&&(u=e[119].studios,a=xe(a,n,d,1,e,u,c,r,ve,mo,null,Qn)),256&n[0]&&O(r,"overflow",e[8]?"hidden":"")},d(e){e&&A(t);for(let e=0;e<a.length;e+=1)a[e].d();l=!1,i(s)}}}function mo(e,t){let n,o,i,r,l,s,a,c,u=(t[128]?.studio?.studioName||"N/A")+"";return{key:e,first:null,c(){n=I("a"),o=$(u),i=L(),M(n,"class",r=p("copy"+(t[128]?.studioColor?` ${t[128]?.studioColor}-color`:""))+" svelte-xmcaps"),M(n,"rel",l=t[128]?.studio?.studioUrl?"noopener noreferrer":""),M(n,"target",s=t[128]?.studio?.studioUrl?"_blank":""),M(n,"href",a=t[128]?.studio?.studioUrl||"javascript:void(0)"),M(n,"copy-value",c=t[128]?.studio?.studioName||""),this.first=n},m(e,t){T(e,n,t),k(n,o),k(n,i)},p(e,i){t=e,1024&i[0]&&u!==(u=(t[128]?.studio?.studioName||"N/A")+"")&&D(o,u),1024&i[0]&&r!==(r=p("copy"+(t[128]?.studioColor?` ${t[128]?.studioColor}-color`:""))+" svelte-xmcaps")&&M(n,"class",r),1024&i[0]&&l!==(l=t[128]?.studio?.studioUrl?"noopener noreferrer":"")&&M(n,"rel",l),1024&i[0]&&s!==(s=t[128]?.studio?.studioUrl?"_blank":"")&&M(n,"target",s),1024&i[0]&&a!==(a=t[128]?.studio?.studioUrl||"javascript:void(0)")&&M(n,"href",a),1024&i[0]&&c!==(c=t[128]?.studio?.studioName||"")&&M(n,"copy-value",c)},d(e){e&&A(n)}}}function ho(e){let t,n,o,r,l,s,a=[],c=new Map,u=e[119].genres;const d=e=>e[125]?.genre||{};for(let t=0;t<u.length;t+=1){let n=Xn(e,u,t),o=d(n);c.set(o,a[t]=yo(o,n))}function f(...t){return e[45](e[119],e[120],e[121],...t)}return{c(){t=I("div"),n=I("div"),n.textContent="Genres",o=L(),r=I("div");for(let e=0;e<a.length;e+=1)a[e].c();M(n,"class","info-categ svelte-xmcaps"),M(r,"class",p("genres-popup info")+" svelte-xmcaps"),O(r,"overflow",e[8]?"hidden":""),M(t,"class","svelte-xmcaps")},m(i,c){T(i,t,c),k(t,n),k(t,o),k(t,r);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(r,null);l||(s=[C(r,"scroll",e[22]),C(r,"mouseenter",f)],l=!0)},p(t,n){e=t,1024&n[0]&&(u=e[119].genres,a=xe(a,n,d,1,e,u,c,r,ve,yo,null,Xn)),256&n[0]&&O(r,"overflow",e[8]?"hidden":"")},d(e){e&&A(t);for(let e=0;e<a.length;e+=1)a[e].d();l=!1,i(s)}}}function yo(e,t){let n,o,i,r,l,s=(t[125]?.genre||"N/A")+"";return{key:e,first:null,c(){n=I("span"),o=$(s),i=L(),M(n,"class",r=p("copy "+(t[125]?.genreColor?`${t[125]?.genreColor}-color`:""))+" svelte-xmcaps"),M(n,"copy-value",l=t[125]?.genre||""),this.first=n},m(e,t){T(e,n,t),k(n,o),k(n,i)},p(e,i){t=e,1024&i[0]&&s!==(s=(t[125]?.genre||"N/A")+"")&&D(o,s),1024&i[0]&&r!==(r=p("copy "+(t[125]?.genreColor?`${t[125]?.genreColor}-color`:""))+" svelte-xmcaps")&&M(n,"class",r),1024&i[0]&&l!==(l=t[125]?.genre||"")&&M(n,"copy-value",l)},d(e){e&&A(n)}}}function wo(e){let t,n,o,r,l=[],s=new Map,a=e[119].tags;const c=e=>e[122]?.tag||{};for(let t=0;t<a.length;t+=1){let n=Jn(e,a,t),o=c(n);s.set(o,l[t]=go(o,n))}function u(...t){return e[46](e[119],e[120],e[121],...t)}return{c(){t=I("div"),n=I("div");for(let e=0;e<l.length;e+=1)l[e].c();M(n,"class",p("tags-info-content info")+" svelte-xmcaps"),O(n,"overflow",e[8]?"hidden":""),M(t,"class","tag-info svelte-xmcaps")},m(i,s){T(i,t,s),k(t,n);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(n,null);o||(r=[C(n,"scroll",e[22]),C(n,"mouseenter",u)],o=!0)},p(t,o){e=t,1024&o[0]&&(a=e[119].tags,l=xe(l,o,c,1,e,a,s,n,ve,go,null,Jn)),256&o[0]&&O(n,"overflow",e[8]?"hidden":"")},d(e){e&&A(t);for(let e=0;e<l.length;e+=1)l[e].d();o=!1,i(r)}}}function go(e,t){let n,o,i,r,l,s=(t[122]?.tag||"N/A")+"";return{key:e,first:null,c(){n=I("span"),o=new V(!1),i=L(),o.a=i,M(n,"class",r=p("copy "+(t[122]?.tagColor?`${t[122]?.tagColor}-color`:""))+" svelte-xmcaps"),M(n,"copy-value",l=t[122]?.copyValue||""),this.first=n},m(e,t){T(e,n,t),o.m(s,n),k(n,i)},p(e,i){t=e,1024&i[0]&&s!==(s=(t[122]?.tag||"N/A")+"")&&o.p(s),1024&i[0]&&r!==(r=p("copy "+(t[122]?.tagColor?`${t[122]?.tagColor}-color`:""))+" svelte-xmcaps")&&M(n,"class",r),1024&i[0]&&l!==(l=t[122]?.copyValue||"")&&M(n,"copy-value",l)},d(e){e&&A(n)}}}function vo(e){let t,n,o,r,l,s,a=$o(e[119]?.description)+"";function c(){return e[50](e[119])}function u(...t){return e[51](e[119],...t)}return{c(){t=I("div"),n=I("h3"),n.textContent="Description",o=L(),r=I("div"),M(n,"class","svelte-xmcaps"),M(r,"class","anime-description svelte-xmcaps"),M(t,"class","anime-description-wrapper svelte-xmcaps"),M(t,"tabindex","0")},m(e,i){T(e,t,i),k(t,n),k(t,o),k(t,r),r.innerHTML=a,l||(s=[C(t,"click",c),C(t,"keydown",u)],l=!0)},p(t,n){e=t,1024&n[0]&&a!==(a=$o(e[119]?.description)+"")&&(r.innerHTML=a)},d(e){e&&A(t),l=!1,i(s)}}}function bo(t){let n;return{c(){n=$("N/A")},m(e,t){T(e,n,t)},p:e,d(e){e&&A(n)}}}function xo(e){let t,n=" "+(e[12][e[119]?.id]?"Show":"Hide");return{c(){t=$(n)},m(e,n){T(e,t,n)},p(e,o){5120&o[0]&&n!==(n=" "+(e[12][e[119]?.id]?"Show":"Hide"))&&D(t,n)},d(e){e&&A(t)}}}function ko(e,t){let n,o,l,s,c,u,d,f,m,h,y,w,g,v,b,x,S,E,N,P,F,U,_,B,j,R,H,q,W,z,G,Y,K,J,X,Q,Z,ee,te,ne,oe,ie,re,le,se,ae,ce,ue,de,fe,pe,me,he,ye,we,ge,ve,be,xe,ke,Se,Ee,Te,Ae,Ne,Ie,$e,Le,Pe,Ce,Fe,Me,De,Ue,Oe,_e,Ve,Be,je,Re,He,qe,We,ze,Ge=t[120],Ye=t[121],Ke=(t[119]?.shownTitle||"NA")+"",Je=(null!=t[119].averageScore&&t[119].formattedAverageScore||"NA")+"",Xe="/10 · "+(null!=t[119].popularity&&t[119].formattedPopularity||"NA"),Qe=(t[119]?.recommendedRatingInfo||"")+"",Ze=(t[119].userStatus||"NA")+"",et=(t[119].status||"NA")+"",tt=t[119].trailerID&&eo(),nt=(t[119].bannerImageUrl||t[119].trailerThumbnailUrl)&&to(t);const ot=()=>t[34](l,Ge,Ye),it=()=>t[34](null,Ge,Ye);function rt(){return t[35](t[119])}function lt(...e){return t[36](t[119],...e)}function st(e,t){return e[5]>=290?oo:e[5]>=260?no:void 0}let at=st(t),ct=at&&at(t),ut=t[13]&&io(t),dt=(t[119].bannerImageUrl||t[119].trailerThumbnailUrl)&&ro(t);function ft(e,t){return e[119]?.nextAiringEpisode?.airingAt?so:lo}let pt=ft(t),mt=pt(t);function ht(e,t){return e[119]?.season||e[119]?.year?uo:co}let yt=ht(t),wt=yt(t),gt=null!=t[119].userScore&&fo(t),vt=t[119].studios?.length&&po(t),bt=t[119].genres.length&&ho(t),xt=t[119]?.tags?.length&&wo(t);function kt(){return t[48](t[119])}function St(...e){return t[49](t[119],...e)}let Et=t[119]?.description&&vo(t);const Tt=()=>t[52](U,Ge,Ye),At=()=>t[52](null,Ge,Ye);function Nt(e,t){return e[12]?xo:bo}let It=Nt(t),$t=It(t);function Lt(...e){return t[53](t[119],...e)}function Pt(...e){return t[54](t[119],...e)}function Ct(){return t[55](t[119])}function Ft(...e){return t[56](t[119],...e)}const Mt=()=>t[57](n,Ge,Ye),Dt=()=>t[57](null,Ge,Ye);return{key:e,first:null,c(){n=I("div"),o=I("div"),l=I("div"),s=I("div"),s.innerHTML='<i class="fa-solid fa-k fa-fade svelte-xmcaps"></i>',c=L(),tt&&tt.c(),u=L(),d=I("div"),nt&&nt.c(),m=L(),h=I("div"),y=I("div"),w=I("label"),g=I("input"),v=L(),b=I("span"),x=L(),S=I("h3"),ct&&ct.c(),E=L(),ut&&ut.c(),N=L(),dt&&dt.c(),P=L(),F=I("div"),U=I("div"),_=I("div"),B=I("a"),j=$(Ke),G=L(),Y=I("div"),K=I("i"),J=L(),X=I("h3"),Q=I("b"),Z=$(Je),ee=L(),te=$(Xe),ne=L(),oe=$(" · "),ie=new V(!1),le=L(),se=I("div"),mt.c(),ae=L(),wt.c(),ce=L(),ue=I("div"),de=I("h4"),fe=I("a"),pe=I("span"),me=$(Ze),ye=L(),gt&&gt.c(),xe=L(),ke=I("h4"),Se=$(et),Te=L(),Ae=I("div"),vt&&vt.c(),Ne=L(),bt&&bt.c(),Ie=L(),xt&&xt.c(),$e=L(),Le=I("div"),Pe=I("img"),De=L(),Et&&Et.c(),Ue=L(),Oe=I("div"),_e=I("button"),Ve=I("i"),Be=L(),$t.c(),je=L(),Re=I("button"),Re.innerHTML='<i class="fa-brands fa-youtube svelte-xmcaps"></i> YouTube',He=L(),qe=I("button"),qe.innerHTML='<img loading="lazy" class="anilist-icon svelte-xmcaps" src="./images/Anilist-Logo.svg" alt="Anilist Logo" width="23px" height="23px"/> Anilist',M(s,"class","popup-header-loading svelte-xmcaps"),M(d,"class","popup-img svelte-xmcaps"),M(l,"class",f=p("popup-header "+(t[119].trailerID?"loader":""))+" svelte-xmcaps"),M(l,"tabindex","0"),M(g,"type","checkbox"),M(g,"class","autoplayToggle svelte-xmcaps"),M(b,"class","slider round svelte-xmcaps"),M(b,"tabindex","0"),M(w,"class","switch svelte-xmcaps"),M(S,"class","autoplay-label svelte-xmcaps"),M(y,"class","autoPlay-container svelte-xmcaps"),M(h,"class","popup-controls svelte-xmcaps"),M(B,"rel",R=t[119].animeUrl?"noopener noreferrer":""),M(B,"target",H=t[119].animeUrl?"_blank":""),M(B,"href",q=t[119].animeUrl||"javascript:void(0)"),M(B,"class",W=p(t[119]?.contentCautionColor+"-color anime-title copy")+" svelte-xmcaps"),M(B,"copy-value",z=t[119]?.shownTitle||""),O(B,"overflow",t[8]?"hidden":""),M(K,"class","fa-regular fa-star svelte-xmcaps"),M(Q,"class","svelte-xmcaps"),ie.a=null,M(X,"class","copy svelte-xmcaps"),M(X,"copy-value",re=(null!=t[119].averageScore&&t[119].formattedAverageScore||"NA")+"/10 · "+(null!=t[119].popularity&&t[119].formattedPopularity||"NA")),M(Y,"class","info-rating-wrapper svelte-xmcaps"),M(_,"class","anime-title-container svelte-xmcaps"),O(_,"overflow",t[8]?"hidden":""),M(se,"class","info-format svelte-xmcaps"),O(se,"overflow",t[8]?"hidden":""),M(pe,"class",he=p(t[119].userStatusColor+"-color")+" svelte-xmcaps"),M(fe,"rel",we=t[119].animeUrl?"noopener noreferrer":""),M(fe,"target",ge=t[119].animeUrl?"_blank":""),M(fe,"href",ve=t[119].animeUrl||"javascript:void(0)"),M(fe,"class","svelte-xmcaps"),M(de,"class","copy svelte-xmcaps"),M(de,"copy-value",be=(t[119].userStatus||"NA")+(null!=t[119].userScore?" · "+t[119].userScore:"")),O(ke,"text-align","right"),M(ke,"class","copy year-season svelte-xmcaps"),M(ke,"copy-value",Ee=t[119].status||""),M(ue,"class","info-status svelte-xmcaps"),O(ue,"overflow",t[8]?"hidden":""),M(Ae,"class","info-contents svelte-xmcaps"),M(Pe,"loading","lazy"),M(Pe,"width","150px"),M(Pe,"height","210px"),a(Pe.src,Ce=t[119].coverImageUrl||t[119].bannerImageUrl||t[119].trailerThumbnailUrl||"")||M(Pe,"src",Ce),M(Pe,"alt",Fe=(t[119]?.shownTitle||"")+(t[119].coverImageUrl?" Cover":t[119].bannerImageUrl?" Banner":" Thumbnail")),M(Pe,"tabindex","0"),M(Pe,"class",Me=p("coverImg"+(t[119].coverImageUrl||t[119].bannerImageUrl||t[119].trailerThumbnailUrl?"":" display-none"))+" svelte-xmcaps"),M(Le,"class","info-profile svelte-xmcaps"),M(U,"class","popup-info svelte-xmcaps"),O(U,"--windowWidth",t[5]+"px"),O(U,"--windowHeight",t[6]+"px"),M(Ve,"class","fa-solid fa-circle-minus hideshow svelte-xmcaps"),M(_e,"class","hideshowbtn svelte-xmcaps"),O(_e,"overflow",t[8]?"hidden":""),M(Re,"class","morevideos svelte-xmcaps"),O(Re,"overflow",t[8]?"hidden":""),M(qe,"class","openanilist svelte-xmcaps"),O(qe,"overflow",t[8]?"hidden":""),M(Oe,"class","footer svelte-xmcaps"),M(F,"class","popup-body svelte-xmcaps"),M(o,"class","popup-main svelte-xmcaps"),M(n,"class","popup-content svelte-xmcaps"),this.first=n},m(e,i){T(e,n,i),k(n,o),k(o,l),k(l,s),k(l,c),tt&&tt.m(l,null),k(l,u),k(l,d),nt&&nt.m(d,null),ot(),k(o,m),k(o,h),k(h,y),k(y,w),k(w,g),g.checked=t[11],k(w,v),k(w,b),k(y,x),k(y,S),ct&&ct.m(S,null),k(h,E),ut&&ut.m(h,null),k(h,N),dt&&dt.m(h,null),k(o,P),k(o,F),k(F,U),k(U,_),k(_,B),k(B,j),k(_,G),k(_,Y),k(Y,K),k(Y,J),k(Y,X),k(X,Q),k(Q,Z),k(X,ee),k(X,te),k(X,ne),k(X,oe),ie.m(Qe,X),k(U,le),k(U,se),mt.m(se,null),k(se,ae),wt.m(se,null),k(U,ce),k(U,ue),k(ue,de),k(de,fe),k(fe,pe),k(pe,me),k(fe,ye),gt&&gt.m(fe,null),k(ue,xe),k(ue,ke),k(ke,Se),k(U,Te),k(U,Ae),vt&&vt.m(Ae,null),k(Ae,Ne),bt&&bt.m(Ae,null),k(Ae,Ie),xt&&xt.m(Ae,null),k(U,$e),k(U,Le),k(Le,Pe),k(Le,De),Et&&Et.m(Le,null),Tt(),k(F,Ue),k(F,Oe),k(Oe,_e),k(_e,Ve),k(_e,Be),$t.m(_e,null),k(Oe,je),k(Oe,Re),k(Oe,He),k(Oe,qe),Mt(),We||(ze=[C(l,"click",rt),C(l,"keydown",lt),C(g,"change",t[37]),C(b,"keydown",t[38]),C(S,"click",t[39]),C(S,"keydown",t[40]),C(B,"scroll",t[22]),C(_,"scroll",t[22]),C(se,"scroll",t[22]),C(ue,"scroll",t[22]),C(Pe,"error",t[47]),C(Pe,"click",kt),C(Pe,"keydown",St),C(_e,"click",(function(){r(t[16](t[119].id,t[119]?.title?.english))&&t[16](t[119].id,t[119]?.title?.english).apply(this,arguments)})),C(_e,"keydown",Lt),C(Re,"click",(function(){r(t[18](t[119].title))&&t[18](t[119].title).apply(this,arguments)})),C(Re,"keydown",Pt),C(qe,"click",Ct),C(qe,"keydown",Ft)],We=!0)},p(e,n){(t=e)[119].trailerID?tt||(tt=eo(),tt.c(),tt.m(l,u)):tt&&(tt.d(1),tt=null),t[119].bannerImageUrl||t[119].trailerThumbnailUrl?nt?nt.p(t,n):(nt=to(t),nt.c(),nt.m(d,null)):nt&&(nt.d(1),nt=null),1024&n[0]&&f!==(f=p("popup-header "+(t[119].trailerID?"loader":""))+" svelte-xmcaps")&&M(l,"class",f),Ge===t[120]&&Ye===t[121]||(it(),Ge=t[120],Ye=t[121],ot()),2048&n[0]&&(g.checked=t[11]),at!==(at=st(t))&&(ct&&ct.d(1),ct=at&&at(t),ct&&(ct.c(),ct.m(S,null))),t[13]?ut?ut.p(t,n):(ut=io(t),ut.c(),ut.m(h,N)):ut&&(ut.d(1),ut=null),t[119].bannerImageUrl||t[119].trailerThumbnailUrl?dt?dt.p(t,n):(dt=ro(t),dt.c(),dt.m(h,null)):dt&&(dt.d(1),dt=null),1024&n[0]&&Ke!==(Ke=(t[119]?.shownTitle||"NA")+"")&&D(j,Ke),1024&n[0]&&R!==(R=t[119].animeUrl?"noopener noreferrer":"")&&M(B,"rel",R),1024&n[0]&&H!==(H=t[119].animeUrl?"_blank":"")&&M(B,"target",H),1024&n[0]&&q!==(q=t[119].animeUrl||"javascript:void(0)")&&M(B,"href",q),1024&n[0]&&W!==(W=p(t[119]?.contentCautionColor+"-color anime-title copy")+" svelte-xmcaps")&&M(B,"class",W),1024&n[0]&&z!==(z=t[119]?.shownTitle||"")&&M(B,"copy-value",z),256&n[0]&&O(B,"overflow",t[8]?"hidden":""),1024&n[0]&&Je!==(Je=(null!=t[119].averageScore&&t[119].formattedAverageScore||"NA")+"")&&D(Z,Je),1024&n[0]&&Xe!==(Xe="/10 · "+(null!=t[119].popularity&&t[119].formattedPopularity||"NA"))&&D(te,Xe),1024&n[0]&&Qe!==(Qe=(t[119]?.recommendedRatingInfo||"")+"")&&ie.p(Qe),1024&n[0]&&re!==(re=(null!=t[119].averageScore&&t[119].formattedAverageScore||"NA")+"/10 · "+(null!=t[119].popularity&&t[119].formattedPopularity||"NA"))&&M(X,"copy-value",re),256&n[0]&&O(_,"overflow",t[8]?"hidden":""),pt===(pt=ft(t))&&mt?mt.p(t,n):(mt.d(1),mt=pt(t),mt&&(mt.c(),mt.m(se,ae))),yt===(yt=ht(t))&&wt?wt.p(t,n):(wt.d(1),wt=yt(t),wt&&(wt.c(),wt.m(se,null))),256&n[0]&&O(se,"overflow",t[8]?"hidden":""),1024&n[0]&&Ze!==(Ze=(t[119].userStatus||"NA")+"")&&D(me,Ze),1024&n[0]&&he!==(he=p(t[119].userStatusColor+"-color")+" svelte-xmcaps")&&M(pe,"class",he),null!=t[119].userScore?gt?gt.p(t,n):(gt=fo(t),gt.c(),gt.m(fe,null)):gt&&(gt.d(1),gt=null),1024&n[0]&&we!==(we=t[119].animeUrl?"noopener noreferrer":"")&&M(fe,"rel",we),1024&n[0]&&ge!==(ge=t[119].animeUrl?"_blank":"")&&M(fe,"target",ge),1024&n[0]&&ve!==(ve=t[119].animeUrl||"javascript:void(0)")&&M(fe,"href",ve),1024&n[0]&&be!==(be=(t[119].userStatus||"NA")+(null!=t[119].userScore?" · "+t[119].userScore:""))&&M(de,"copy-value",be),1024&n[0]&&et!==(et=(t[119].status||"NA")+"")&&D(Se,et),1024&n[0]&&Ee!==(Ee=t[119].status||"")&&M(ke,"copy-value",Ee),256&n[0]&&O(ue,"overflow",t[8]?"hidden":""),t[119].studios?.length?vt?vt.p(t,n):(vt=po(t),vt.c(),vt.m(Ae,Ne)):vt&&(vt.d(1),vt=null),t[119].genres.length?bt?bt.p(t,n):(bt=ho(t),bt.c(),bt.m(Ae,Ie)):bt&&(bt.d(1),bt=null),t[119]?.tags?.length?xt?xt.p(t,n):(xt=wo(t),xt.c(),xt.m(Ae,null)):xt&&(xt.d(1),xt=null),1024&n[0]&&!a(Pe.src,Ce=t[119].coverImageUrl||t[119].bannerImageUrl||t[119].trailerThumbnailUrl||"")&&M(Pe,"src",Ce),1024&n[0]&&Fe!==(Fe=(t[119]?.shownTitle||"")+(t[119].coverImageUrl?" Cover":t[119].bannerImageUrl?" Banner":" Thumbnail"))&&M(Pe,"alt",Fe),1024&n[0]&&Me!==(Me=p("coverImg"+(t[119].coverImageUrl||t[119].bannerImageUrl||t[119].trailerThumbnailUrl?"":" display-none"))+" svelte-xmcaps")&&M(Pe,"class",Me),t[119]?.description?Et?Et.p(t,n):(Et=vo(t),Et.c(),Et.m(Le,null)):Et&&(Et.d(1),Et=null),Ge===t[120]&&Ye===t[121]||(At(),Ge=t[120],Ye=t[121],Tt()),32&n[0]&&O(U,"--windowWidth",t[5]+"px"),64&n[0]&&O(U,"--windowHeight",t[6]+"px"),It===(It=Nt(t))&&$t?$t.p(t,n):($t.d(1),$t=It(t),$t&&($t.c(),$t.m(_e,null))),256&n[0]&&O(_e,"overflow",t[8]?"hidden":""),256&n[0]&&O(Re,"overflow",t[8]?"hidden":""),256&n[0]&&O(qe,"overflow",t[8]?"hidden":""),Ge===t[120]&&Ye===t[121]||(Dt(),Ge=t[120],Ye=t[121],Mt())},d(e){e&&A(n),tt&&tt.d(),nt&&nt.d(),it(),ct&&ct.d(),ut&&ut.d(),dt&&dt.d(),mt.d(),wt.d(),gt&&gt.d(),vt&&vt.d(),bt&&bt.d(),xt&&xt.d(),Et&&Et.d(),At(),$t.d(),Dt(),We=!1,i(ze)}}}function So(e){let t;return{c(){t=I("div"),t.innerHTML='<i class="popup-content-loading-icon fa-solid fa-k fa-fade svelte-xmcaps"></i>',M(t,"class","popup-content-loading svelte-xmcaps")},m(e,n){T(e,t,n)},d(e){e&&A(t)}}}function Eo(e){let t,n,o,i,r,l;return{c(){t=I("div"),n=I("div"),o=I("i"),M(o,"class","fa-solid fa-arrow-left svelte-xmcaps"),M(n,"class",i=p("go-back-grid"+(e[7]>=100?" willGoBack":""))+" svelte-xmcaps"),M(t,"class","go-back-grid-highlight svelte-xmcaps"),O(t,"--scale",Math.max(1,.01*(e[7]??1)*2)),O(t,"--position","-"+(100-(e[7]??0))+"%")},m(e,i){T(e,t,i),k(t,n),k(n,o),l=!0},p(e,o){(!l||128&o[0]&&i!==(i=p("go-back-grid"+(e[7]>=100?" willGoBack":""))+" svelte-xmcaps"))&&M(n,"class",i),128&o[0]&&O(t,"--scale",Math.max(1,.01*(e[7]??1)*2)),128&o[0]&&O(t,"--position","-"+(100-(e[7]??0))+"%")},i(e){l||(r&&r.end(1),l=!0)},o(e){r=we(t,Ht,{x:-176,duration:1e3}),l=!1},d(e){e&&A(t),e&&r&&r.end()}}}function To(e){let t,n,o,r,l,s,a,c;return{c(){t=I("div"),n=I("div"),o=I("div"),r=I("div"),M(r,"tabindex","0"),M(r,"class","fullPopupDescription svelte-xmcaps"),M(o,"class","fullPopupDescriptionWrapper svelte-xmcaps"),M(n,"class","fullPopup svelte-xmcaps"),M(n,"id","fullPopup"),M(t,"class","fullPopupWrapper svelte-xmcaps")},m(i,l){T(i,t,l),k(t,n),k(n,o),k(o,r),r.innerHTML=e[1],s=!0,a||(c=[C(r,"keydown",e[61]),C(r,"scroll",e[27]),C(t,"click",e[62]),C(t,"keydown",e[63]),C(t,"touchstart",e[28],{passive:!0}),C(t,"touchend",e[29],{passive:!0}),C(t,"touchcancel",e[30],{passive:!0})],a=!0)},p(e,t){(!s||2&t[0])&&(r.innerHTML=e[1])},i(e){s||(ne((()=>{s&&(l||(l=ge(r,Ht,{y:20,duration:200},!0)),l.run(1))})),s=!0)},o(e){l||(l=ge(r,Ht,{y:20,duration:200},!1)),l.run(0),s=!1},d(e){e&&A(t),e&&l&&l.end(),a=!1,i(c)}}}function Ao(e){let t,n,o,r,l,s,c,u;return{c(){t=I("div"),n=I("div"),o=I("img"),M(o,"tabindex","0"),M(o,"class","fullPopupImage svelte-xmcaps"),M(o,"loading","lazy"),a(o.src,r=e[0])||M(o,"src",r),M(o,"alt","Full View"),M(n,"class","fullPopup svelte-xmcaps"),M(n,"id","fullPopup"),M(t,"class","fullPopupWrapper svelte-xmcaps")},m(i,r){T(i,t,r),k(t,n),k(n,o),s=!0,c||(u=[C(o,"keydown",e[64]),C(o,"error",e[65]),C(t,"click",e[66]),C(t,"keydown",e[67]),C(t,"touchstart",e[28],{passive:!0}),C(t,"touchend",e[29],{passive:!0}),C(t,"touchcancel",e[30],{passive:!0})],c=!0)},p(e,t){(!s||1&t[0]&&!a(o.src,r=e[0]))&&M(o,"src",r)},i(e){s||(ne((()=>{s&&(l||(l=ge(o,Ht,{y:20,duration:200},!0)),l.run(1))})),s=!0)},o(e){l||(l=ge(o,Ht,{y:20,duration:200},!1)),l.run(0),s=!1},d(e){e&&A(t),e&&l&&l.end(),c=!1,i(u)}}}function No(e){let t,n,o,r,l,s,a,c,u,d=e[10]?.length&&Zn(e),f=e[9]&&e[8]&&Eo(e),p=e[1]&&To(e),m=e[0]&&Ao(e);return{c(){t=I("div"),n=I("div"),d&&d.c(),o=L(),f&&f.c(),r=L(),p&&p.c(),l=L(),m&&m.c(),s=P(),M(n,"id","popup-container"),M(n,"class","popup-container hide svelte-xmcaps"),O(n,"--translateX",e[5]+"px"),O(n,"--translateY",e[6]+"px"),M(t,"id","popup-wrapper"),M(t,"class","popup-wrapper svelte-xmcaps")},m(i,h){T(i,t,h),k(t,n),d&&d.m(n,null),e[58](n),e[60](t),T(i,o,h),f&&f.m(i,h),T(i,r,h),p&&p.m(i,h),T(i,l,h),m&&m.m(i,h),T(i,s,h),a=!0,c||(u=[C(n,"touchstart",e[23],{passive:!0}),C(n,"touchmove",e[24],{passive:!0}),C(n,"touchend",e[25],{passive:!0}),C(n,"touchcancel",e[26],{passive:!0}),C(n,"scroll",e[21]),C(t,"click",e[15]),C(t,"keydown",e[59])],c=!0)},p(e,t){e[10]?.length?d?d.p(e,t):(d=Zn(e),d.c(),d.m(n,null)):d&&(d.d(1),d=null),32&t[0]&&O(n,"--translateX",e[5]+"px"),64&t[0]&&O(n,"--translateY",e[6]+"px"),e[9]&&e[8]?f?(f.p(e,t),768&t[0]&&me(f,1)):(f=Eo(e),f.c(),me(f,1),f.m(r.parentNode,r)):f&&(fe(),he(f,1,1,(()=>{f=null})),pe()),e[1]?p?(p.p(e,t),2&t[0]&&me(p,1)):(p=To(e),p.c(),me(p,1),p.m(l.parentNode,l)):p&&(fe(),he(p,1,1,(()=>{p=null})),pe()),e[0]?m?(m.p(e,t),1&t[0]&&me(m,1)):(m=Ao(e),m.c(),me(m,1),m.m(s.parentNode,s)):m&&(fe(),he(m,1,1,(()=>{m=null})),pe())},i(e){a||(me(f),me(p),me(m),a=!0)},o(e){he(f),he(p),he(m),a=!1},d(n){n&&A(t),d&&d.d(),e[58](null),e[60](null),n&&A(o),f&&f.d(n),n&&A(r),p&&p.d(n),n&&A(l),m&&m.d(n),n&&A(s),c=!1,i(u)}}}function Io(e){"string"==typeof e&&""!==e&&window.open(e,"_blank")}function $o(e){let t=document.createElement("span");t.innerHTML=e;let n=t.querySelectorAll("a");return Array.from(n).forEach((e=>{e?.setAttribute("rel","noopener noreferrer"),e?.setAttribute("target","_blank")})),t.innerHTML}function Lo(e,t,n){let o,i,r,l,s,a,c,u,f,p,h,y,w,g,v,b,x,k,S,E;d(e,We,(e=>n(31,o=e))),d(e,$t,(e=>n(8,i=e))),d(e,Tt,(e=>n(9,r=e))),d(e,tt,(e=>n(96,l=e))),d(e,dt,(e=>n(97,s=e))),d(e,Ot,(e=>n(98,a=e))),d(e,Ze,(e=>n(10,c=e))),d(e,pt,(e=>n(99,u=e))),d(e,ft,(e=>n(11,f=e))),d(e,ze,(e=>n(100,p=e))),d(e,bt,(e=>n(101,h=e))),d(e,Je,(e=>n(12,y=e))),d(e,vt,(e=>n(102,w=e))),d(e,et,(e=>n(103,g=e))),d(e,It,(e=>n(13,v=e))),d(e,xt,(e=>n(104,b=e))),d(e,yt,(e=>n(105,x=e))),d(e,At,(e=>n(106,k=e))),d(e,ht,(e=>n(107,S=e))),d(e,gt,(e=>n(14,E=e)));let T,A,N,I,$,L,P,C,F,M,D,U,O=window.navigator.onLine,_=new Date,V=Math.max(window.visualViewport.width,window.innerWidth),B=Math.max(window.visualViewport.height,window.innerHeight),j={},R=!o&&matchMedia("(hover:hover)").matches?50:100;function H(e){let t=e.target;t.classList.contains("popup-container")||t.closest(".popup-container")||m(Tt,r=!1,r)}async function q(e,t){t=t?`<b>${t}</b>`:"this anime",y[e]?await b(`Are you sure you want to show ${t} in your recommendation list?`)&&S().then((()=>{delete y[e],Je.set(y),c.length&&g instanceof Worker&&g?.postMessage?.({removeID:e})})).catch((()=>{b({isAlert:!0,title:"Something went wrong",text:"Showing anime has failed, please try again."})})):await b(`Are you sure you want to hide ${t} in your recommendation list?`)&&S().then((()=>{m(Je,y[e]=!0,y),c.length&&g instanceof Worker&&g?.postMessage?.({removeID:e})})).catch((()=>{b({isAlert:!0,title:"Something went wrong",text:"Hiding anime has failed, please try again."})}))}async function W(e){let t;Pe(e)?t=e?.romaji||e?.userPreferred||e?.english||e?.native:"string"==typeof e&&(t=e),"string"==typeof t&&""!==t&&await b({title:"See Related Videos",text:"Are you sure you want see more related videos in YouTube?"})&&z(t)}async function z(e){let t;Pe(e)?t=e?.romaji||e?.userPreferred||e?.english||e?.native:"string"==typeof e&&(t=e),"string"==typeof t&&""!==t&&window.open(`https://www.youtube.com/results?search_query=${t} Anime`,"_blank")}async function Y(){if(!r)return;await te();let e,t=A?.querySelector?.(".trailer"),n=Me(A?.closest?.(".popup-content"))??-1;if(D&&clearTimeout(D),D=setTimeout((()=>{if(!r)return;let e=c?.[n]?.gridElement||T.children?.[n];r&&e instanceof Element&&!function(e,t,n=0){try{var o=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=getComputedStyle(e).overflowX,l=getComputedStyle(e).overflowY;if("auto"===r||"scroll"===r||"auto"===l||"scroll"===l){var s=e.scrollLeft,a=e.scrollTop,c=o.top>=i.top&&o.left>=i.left&&o.bottom<=i.bottom&&o.right<=i.right;if(c||(c=(Math.max(o.top,i.top)-Math.min(o.bottom,i.bottom))*(Math.max(o.left,i.left)-Math.min(o.right,i.right))/(Math.min(o.height,window.innerHeight)*Math.min(o.width,window.innerWidth))>=n),!c)return!1;o={top:o.top-i.top+a,left:o.left-i.left+s,bottom:o.bottom-i.top+a,right:o.right-i.left+s,height:o.height,width:o.width}}var u=window.innerHeight||document.documentElement.clientHeight,d=window.innerWidth||document.documentElement.clientWidth;return o.top>=0&&o.left>=0&&o.bottom<=u&&o.right<=d}catch(e){return}}(T,e,.5)&&(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow="",T.style.overflow="hidden",T.style.overflow="",e.scrollIntoView({behavior:"smooth",block:"nearest"}))}),300),t instanceof Element&&(e=s?.some((({ytPlayer:e})=>e.g===t))),e){if(n>=0){N=n;let e=[[c?.[n+1],n+1],[c?.[n-1],n-1]];U&&clearTimeout(U),U=setTimeout((async()=>{r&&e.forEach((([e,t])=>{e&&Q(e,t)}))}),300)}for(let e=0;e<s.length;e++)if(s[e].ytPlayer.g===t&&1!==s[e].ytPlayer?.getPlayerState?.())if(await te(),r&&p&&(f||2===s[e].ytPlayer?.getPlayerState?.()))Z(s[e].ytPlayer),s[e].ytPlayer?.playVideo?.();else{if(!f){let t=s?.[e]?.ytPlayer,n=t?.g;if(n&&null!=t?.getPlayerState?.()&&-1!==t?.getPlayerState?.()){let e=n?.parentElement,t=e?.querySelector?.(".popup-img");Ve(t,"fade-out"),Be(e,"loader"),Be(n,"display-none"),setTimeout((()=>{Ve(t,"display-none"),Be(t,"fade-out")}),200)}}s[e].ytPlayer?.pauseVideo?.()}else if(s[e].ytPlayer.g!==t){if(!f){let t=s?.[e]?.ytPlayer,n=t?.g;if(n&&null!=t?.getPlayerState?.()&&-1!==t?.getPlayerState?.()){let e=n?.parentElement,t=e?.querySelector?.(".popup-img");Ve(t,"fade-out"),Be(e,"loader"),Be(n,"display-none"),setTimeout((()=>{Ve(t,"display-none"),Be(t,"fade-out")}),200)}}s[e].ytPlayer?.pauseVideo?.()}}else if(s?.forEach((({ytPlayer:e})=>e?.pauseVideo?.())),n>=0){N=n;let e=[[c?.[n],n],[c?.[n+1],n+1],[c?.[n-1],n-1]];U&&clearTimeout(U),U=setTimeout((async()=>{r&&e.forEach((([e,t])=>{e&&Q(e,t)}))}),300)}}(async()=>{R=await Yn("savedYtVolume")||R})(),wt.subscribe((async e=>{if(r&&null!=e&&e>=0){await te();let t=P?.children?.[e];t instanceof Element&&P instanceof Element&&De(P,t,"top")}})),Je.subscribe((async e=>{Pe(e)&&await Gn(e,"hiddenEntries")})),Tt.subscribe((async e=>{if(L instanceof Element&&P instanceof Element)if(!0===e){V>=641?P.style.setProperty("--translateY",B+"px"):(P.style.setProperty("--translateX",V+"px"),$.style.setProperty("--translateX","-"+V+"px"));let e=P?.children[k??N??0];if(e instanceof Element){Ve(P,"noSmoothScroll"),De(P,e,"top","instant"),Be(P,"noSmoothScroll"),requestAnimationFrame((()=>{Ve($,"willChange"),Ve(L,"willChange"),Ve(P,"willChange"),Ve(L,"visible"),Ve(P,"show"),Ve($,"hide"),setTimeout((()=>{Be($,"willChange"),Be(L,"willChange"),Be(P,"willChange")}),200)})),N=k;let t,n=[[c[k],k],[c[k+1],k+1],[c[k-1],k-1]],o=n[0][0]?.popupHeader?.querySelector?.(".trailer")||P?.children?.[k]?.querySelector?.(".trailer");for(let e=0;e<s.length;e++)if(s[e].ytPlayer.g===o&&(t=!0,p&&f)){await te(),Z(s[e].ytPlayer),s[e].ytPlayer?.playVideo?.();break}n.forEach((([e,n],o)=>{t&&e&&0===o||e&&Q(e,n)})),m(At,k=null,k)}else requestAnimationFrame((()=>{Ve($,"willChange"),Ve(L,"willChange"),Ve(P,"willChange"),Ve(L,"visible"),Ve(P,"show"),Ve($,"hide"),setTimeout((()=>{Be($,"willChange"),Be(L,"willChange"),Be(P,"willChange")}),200)}))}else!1===e&&requestAnimationFrame((()=>{Ve($,"willChange"),Ve(L,"willChange"),Ve(P,"willChange"),Be(P,"show"),Be($,"hide"),setTimeout((()=>{s.forEach((({ytPlayer:e})=>{e?.pauseVideo?.()})),Be(L,"visible"),Be($,"willChange"),Be(P,"willChange"),setTimeout((()=>{Be(L,"willChange")}),200)}),200)}))})),Ze.subscribe((async e=>{if(e instanceof Array&&e.length){C&&(C?.disconnect?.(),C=null),await te(),C=new IntersectionObserver((()=>{if(!r)return;let e=Fe(P,".popup-header",B>360?.5:0)||Fe(P,".popup-content",0)?.getElementsByClassName("popup-header")?.[0];A=e,Y()}),{root:null,rootMargin:"100%",threshold:[.5,0]}),e.forEach((async(e,t)=>{let n=e.popupHeader||P.children?.[t]?.querySelector?.(".popup-header");n instanceof Element&&C?.observe?.(n)}));let t=c[c.length-1].popupContent||P.children?.[c.length-1];x&&t instanceof Element&&x.observe(t),Y()}else e instanceof Array&&e.length<1&&m(Tt,r=!1,r)})),ft.subscribe((async e=>{if("boolean"==typeof e&&(await Gn(e,"autoPlay"),!0===e)){await te();let e=A?.querySelector?.(".trailer");for(let t=0;t<s.length;t++)s[t].ytPlayer.g===e&&p?(Z(s[t].ytPlayer),s[t].ytPlayer?.playVideo?.()):s[t].ytPlayer?.pauseVideo?.()}})),G((()=>{setInterval((()=>{n(2,_=new Date)}),1e3),n(3,L=L||document.getElementById("popup-wrapper")),$=document.getElementById("main-home"),n(4,P=P||L.querySelector("#popup-container")),T=document.getElementById("anime-grid"),window.addEventListener("resize",(()=>{document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement||(n(5,V=Math.max(window.visualViewport.width,window.innerWidth)),n(6,B=Math.max(window.visualViewport.height,window.innerHeight)))})),document.addEventListener("keydown",(async e=>{if("Escape"!==e.key||document.fullscreenElement||(e.preventDefault(),window.backPressed?.())," "===e.key&&r){e.preventDefault();let t=A?.querySelector?.(".trailer"),n=s?.some((({ytPlayer:e})=>t===e.g&&1===e?.getPlayerState?.()));if(s.forEach((({ytPlayer:e})=>{e?.pauseVideo?.()})),!n){await te();for(let e=0;e<s.length;e++)if(s[e].ytPlayer.g===t&&p){Z(s[e].ytPlayer),s[e].ytPlayer?.playVideo?.();break}}}else e.ctrlKey&&"x"===e.key?.toLowerCase?.()?(e.preventDefault(),m(Tt,r=!r,r)):e.ctrlKey&&"k"===e.key?.toLowerCase?.()&&(e.preventDefault(),m(ft,f=!f,f))}))}));let J,X={};function Q(e,t){let n=e?.popupHeader||P.children?.[t]?.querySelector(".popup-header"),o=n?.querySelector?.(".trailer")||n?.querySelector?.(".trailer"),i=e?.trailerID;if(o instanceof Element&&i&&"undefined"!=typeof YT){if(s.some((({ytPlayer:e})=>e.g===o)))return;Ve(n,"loader");let e=n?.querySelector?.(".popup-img");if(s.length>=3){let t=0,i=-1/0;s.forEach(((e,n)=>{if(-1===e.headerIdx)return;let o=Math.abs(e.headerIdx-N);o>i&&(i=o,t=n)}));let r=s?.splice?.(t,1)?.[0]?.ytPlayer,l=r?.g?.closest?.(".popup-header");r?.destroy?.();let a=l?.querySelector?.(".popup-img");a instanceof Element&&Be(a,"display-none");let c=document.createElement("div");c.className="trailer",Ve(o,"display-none"),Be(e,"display-none"),n.replaceChild(c,o),Ve(o,"display-none"),o=n.querySelector(".trailer")}else Ve(o,"display-none");Be(e,"display-none"),o.setAttribute("id","yt-player"+Date.now()+Math.random());let l=new YT.Player(o,{playerVars:{cc_lang_pref:"en",cc_load_policy:1,enablejsapi:1,modestbranding:1,playsinline:1,playlist:i,rel:0},events:{onReady:e=>{!async function(e){let t=e.target,n=t?.g,o=n?.parentElement,i=o?.closest?.(".popup-content"),r=c?.[Me(i)??-1];if(-1!==t.getPlayerState()&&"IFRAME"===n.tagName&&O){if(n?.setAttribute?.("loading","lazy"),!f){let e=o?.querySelector?.(".popup-img");Ve(e,"fade-out"),Be(o,"loader"),Be(n,"display-none"),setTimeout((()=>{Ve(e,"display-none"),Be(e,"fade-out")}),200)}Y(),r?.id&&delete X[r.id]}else{r?.id&&(X[r.id]=!0),m(dt,s=s.filter((e=>e.ytPlayer!==t)),s),t.destroy(),Ve(n,"display-none"),Be(o,"loader");let e=o?.querySelector?.(".popup-img");Be(e,"display-none")}}(e)},onStateChange:e=>{!function(e){let t=e.target;if(!t||!t?.getPlayerState)return;let n=t?.g,o=n?.parentElement,i=o?.querySelector?.(".popup-img"),l=o?.closest?.(".popup-content"),a=c?.[Me(l)??-1]?.id;0===t?.getPlayerState?.()?null!=a&&(j[a]&&(clearTimeout(j[a]),j[a]=null),j[a]=setTimeout((()=>{t?.stopVideo?.(),setTimeout((()=>{A===o&&5===t?.getPlayerState?.()&&t.g&&p&&r&&f&&t?.playVideo?.()}),5e3)}),7e3)):j[a]&&(clearTimeout(j[a]),j[a]=null);1!==t?.getPlayerState?.()||!n?.classList?.contains?.("display-none")&&i?.classList?.contains?.("display-none")||(s?.forEach((({ytPlayer:e})=>e?.g!==t?.g&&e?.pauseVideo?.())),I=t,Ve(i,"fade-out"),Be(o,"loader"),Be(n,"display-none"),setTimeout((()=>{Ve(i,"display-none"),Be(i,"fade-out")}),200))}(e)},onError:e=>{!function(e){let t=e.target,n=t?.g,o=n?.parentElement,i=o?.querySelector?.(".popup-img");m(dt,s=s.filter((e=>e.ytPlayer!==t)),s),t.destroy(),Ve(n,"display-none"),Be(o,"loader"),Be(i,"display-none")}(e)}}}),a=`https://www.youtube.com/embed/${i}`;o.setAttribute("src",a),s.push({ytPlayer:l,headerIdx:t})}else{let e=n?.querySelector?.(".popup-img");Be(n,"loader"),Be(e,"display-none")}}function Z(e){if(I?.isMuted&&I?.getVolume){let t=I?.isMuted?.(),n=I?.getVolume?.();"boolean"==typeof t&&(t?e?.mute?.():e?.unMute?.()),"number"==typeof n&&(R!==n&&(R=n,Gn(R,"savedYtVolume")),e?.setVolume?.(R))}}async function ee(e){if(await b({title:"List update is available",text:"Are you sure you want to refresh the list?"})){let t,n=e.target,o=n.classList;t=o.contains("list-update-container")?n.querySelector?.(".list-update-icon"):n?.closest(".list-update-container")?.querySelector?.(".list-update-icon"),J&&clearTimeout(J),Ve(t,"fa-spin"),g&&(g.terminate(),m(et,g=null,g)),Sn().then((async e=>{m(It,v=!1,v),J=setTimeout((()=>{Be(t,"fa-spin")}),200),m(et,g=e.animeLoaderWorker,g),m(vt,w="",w),e?.isNew&&(m(Ze,c=e.finalAnimeList,c),m(Je,y=e.hiddenEntries,y),m(bt,h=e.numberOfNextLoadedGrid,h)),m(tt,l=null,l)})).catch((e=>{throw e}))}}function ne(e,t){const n=864e5,o=7*n,i=e=>e.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit",hour12:!0});return t>o?`${Ce(t,1)}, ${(e=>e.toLocaleDateString(void 0,{month:"short"}))(e)} ${(e=>e.toLocaleDateString(void 0,{day:"numeric"}))(e)} ${(e=>e.toLocaleDateString(void 0,{year:"numeric"}))(e)}`:t<=o&&t>n?`${Ce(t,1)}, ${(e=>e.toLocaleDateString(void 0,{weekday:"short"}))(e)}, ${i(e).toLowerCase()}`:`${Ce(t,2)}, ${i(e).toLowerCase()}`}let oe,ie,re,le,se,ae,ce,ue,de,fe,pe,me,he,ye,we,ge=!1;function ve(){new Promise((e=>{let t=document.getElementById("www-widgetapi-script");t&&t.parentElement.removeChild(t);let n=document.createElement("script");n.src="https://www.youtube.com/iframe_api?v=16",n.onerror=()=>{e()},n.onload=()=>{window?.onYouTubeIframeAPIReady?.(),e()};let o=document.getElementsByTagName("script")[0];o.parentElement.insertBefore(n,o)})).then((()=>{m(dt,s=s.filter((({ytPlayer:e})=>{if("function"!=typeof e?.playVideo||-1===e.getPlayerState()||isNaN(e.getPlayerState())){e.destroy();let t=e?.g?.closest?.(".popup-header")?.querySelector?.(".popup-img");return t instanceof Element&&Be(t,"display-none"),!1}return!0})),s),Y()}))}function be(){ue=!0,clearTimeout(de),de=setTimeout((()=>{ue=!1}),50)}function xe(){fe=pe=me=he=ye=we=!1}window.returnedAppIsVisible=e=>{if(!o)return;if(m(ze,p=e,p),!r||u)return;let t=A?.querySelector?.(".trailer");if(t)if(p)for(let e=0;e<s.length;e++)s[e]?.ytPlayer.g===t&&(f||2===s[e]?.ytPlayer?.getPlayerState?.()&&ge)?(Z(s[e]?.ytPlayer),s[e]?.ytPlayer?.playVideo?.()):s[e]?.ytPlayer?.pauseVideo?.();else{ge=!1;for(let e=0;e<s.length;e++)s[e]?.ytPlayer.g===t&&1===s[e]?.ytPlayer?.getPlayerState?.()&&(ge=!0),s[e]?.ytPlayer?.pauseVideo?.()}},document.addEventListener("visibilitychange",(()=>{if(o)return;if(m(ze,p="visible"===document.visibilityState,p),!r||u)return;let e=A?.querySelector?.(".trailer");if(e)if(p)for(let t=0;t<s.length;t++)s[t]?.ytPlayer.g===e&&(f||2===s[t]?.ytPlayer?.getPlayerState?.()&&ge)?(Z(s[t]?.ytPlayer),s[t]?.ytPlayer?.playVideo?.()):s[t]?.ytPlayer?.pauseVideo?.();else{ge=!1;for(let t=0;t<s.length;t++)s[t]?.ytPlayer.g===e&&1===s[t]?.ytPlayer?.getPlayerState?.()&&(ge=!0),s[t]?.ytPlayer?.pauseVideo?.()}})),window.addEventListener("online",(()=>{if(o)try{JSBridge.isOnline(!0)}catch(e){}m(tt,l="Reconnected Successfully",l),u&&m(pt,u=!1,u),c?.length||m(Ot,a=!a,a),O=!0,document.querySelectorAll("script")?.forEach((e=>{e.src&&"https://www.youtube.com/iframe_api?v=16"!==e.src&&(e.src=e.src)})),document.querySelectorAll("img")?.forEach((e=>{e.naturalHeight||(e.src=e.src)})),ve()})),window.reloadYoutube=ve,window.addEventListener("offline",(()=>{if(o)try{JSBridge.isOnline(!1)}catch(e){}m(tt,l="Currently Offline...",l),O=!1})),window.checkOpenFullScreenItem=()=>F||M,window.closeFullScreenItem=()=>{F?n(0,F=null):n(1,M=null)};return e.$$.update=()=>{3&e.$$.dirty[0]|1&e.$$.dirty[1]&&(!o&&matchMedia("(hover:hover)").matches||(M||F?Ve(document.documentElement,"overflow-hidden"):Be(document.documentElement,"overflow-hidden")))},[F,M,_,L,P,V,B,ce,i,r,c,f,y,v,E,H,q,W,z,ee,function({episodes:e,nextAiringEpisode:t}){let n,o,i,r;return"number"==typeof t?.episode&&"number"==typeof t?.airingAt&&(r=new Date(1e3*t?.airingAt),i=t?.episode,r instanceof Date&&!isNaN(r)&&(o=r.getTime()-(new Date).getTime())),o>0&&"number"==typeof i&&e>i?n=` · <span style="color:rgb(61, 180, 242);">${i}/${e} in ${ne(r,o)}</span>`:o>0&&"number"==typeof i?n=` · <span style="color:rgb(61, 180, 242);">Ep ${i} in ${ne(r,o)}</span>`:o<=0&&"number"==typeof i&&e>i?n=` · ${i}/${e}`:e>0&&(n=` · ${e}`),n},function(){be(),m($t,i=!1,i),n(7,ce=0)},be,function(e){if(ue)return;re=e.touches[0].clientX,se=e.touches[0].clientY,oe=e.touches[0].identifier;let t=e.target,n=!1;for(;t&&t!==document.body;){if(t.scrollWidth>t.clientWidth&&t.scrollLeft>0){n="popup-container"!==t.id;break}t=t.parentElement}n||(ie=!0)},function(e){if(ie){ie=!1,le=e.touches[0].clientX,ae=e.touches[0].clientY;const t=le-re,n=ae-se;Math.abs(t)>Math.abs(n)&&t>0&&m($t,i=!0,i)}else if(i){le=e.touches[0].clientX;const t=le-re;n(7,ce=t>0?Math.min(t/48*100,100):0)}},function(e){if(i){if(le=Array.from(e.changedTouches)?.find((e=>e.identifier===oe))?.clientX,"number"==typeof le){i&&le-re>=48&&m(Tt,r=!1,r)}oe=null,m($t,i=!1,i),n(7,ce=0)}else oe=null,m($t,i=!1,i),n(7,ce=0)},function(){oe=null,m($t,i=!1,i),n(7,ce=0)},function(){he=!0},function(e){if(!P)return;let t=e.target,n=t;for(;n&&n!==document.body;){if(ye=t.scrollTop<1,we=Math.abs(t.scrollHeight-t.clientHeight-t.scrollTop)<1,ye||we)break;n=n?.parentElement}fe=e?.touches?.[0]?.identifier,pe=e?.touches?.[0]?.clientY,me=e?.touches?.[0]?.clientX},function(e){if(!he){let t=Array.from(e?.changedTouches||[])?.find((e=>e?.identifier===fe))?.clientY,o=Array.from(e?.changedTouches||[])?.find((e=>e?.identifier===fe))?.clientX,i=t-pe,r=o-me;if("number"==typeof i&&!isNaN(i)&&"number"==typeof r&&!isNaN(r)){(Math.abs(r)>Math.abs(i)||i<0&&we||i>0&&ye)&&n(1,M=n(0,F=null))}}xe()},xe,o,e=>{Be(e.target,"fade-out"),Ve(e.target,"fade-in")},e=>{Be(e.target,"fade-in"),Ve(e.target,"fade-out"),Ve(e.target,"display-none")},function(e,t,n){K[e?"unshift":"push"]((()=>{t[n].popupHeader=e}))},e=>W(e.title),(e,t)=>"Enter"===t.key&&W(e.title),function(){f=this.checked,ft.set(f)},e=>"Enter"===e.key&&m(ft,f=!f,f),()=>{m(ft,f=!f,f)},e=>{"Enter"===e.key&&m(ft,f=!f,f)},e=>"Enter"===e.key&&ee(e),e=>{window.setShouldGoBack(!1),n(0,F=e.bannerImageUrl||e.trailerThumbnailUrl),n(1,M=null)},(e,t)=>{"Enter"===t.key&&(window.setShouldGoBack(!1),n(0,F=e.bannerImageUrl||e.trailerThumbnailUrl),n(1,M=null))},(e,t,n,o)=>{if(!e?.hasStudioDragScroll){let e=o?.target?.closest?.(".info")||o?.target;e&&(m(Ze,t[n].hasStudioDragScroll=!0,c),Oe(e,"x"))}},(e,t,n,o)=>{if(!e?.hasGenreDragScroll){let e=o?.target?.closest?.(".info")||o?.target;e&&(m(Ze,t[n].hasGenreDragScroll=!0,c),Oe(e,"x"))}},(e,t,n,o)=>{if(!e?.hasTagDragScroll){let e=o?.target?.closest?.(".info")||o?.target;e&&(m(Ze,t[n].hasTagDragScroll=!0,c),Oe(e,"x"))}},e=>{Ve(e.target,"display-none")},e=>{window.setShouldGoBack(!1),n(0,F=e.coverImageUrl),n(1,M=null)},(e,t)=>{window.setShouldGoBack(!1),"Enter"===t.key&&(n(0,F=e.coverImageUrl),n(1,M=null))},e=>{window.setShouldGoBack(!1),n(1,M=$o(e?.description)),n(0,F=null)},(e,t)=>{window.setShouldGoBack(!1),"Enter"===t.key&&(n(1,M=$o(e?.description)),n(0,F=null))},function(e,t,n){K[e?"unshift":"push"]((()=>{t[n].popupInfo=e}))},(e,t)=>"Enter"===t.key&&q(e.id,e?.title?.english),(e,t)=>"Enter"===t.key&&z(e.title),e=>{Io(e.animeUrl)},(e,t)=>"Enter"===t.key&&Io(e.animeUrl),function(e,t,n){K[e?"unshift":"push"]((()=>{t[n].popupContent=e}))},function(e){K[e?"unshift":"push"]((()=>{P=e,n(4,P)}))},e=>"Enter"===e.key&&H(e),function(e){K[e?"unshift":"push"]((()=>{L=e,n(3,L)}))},e=>"Enter"===e.key&&n(1,M=n(0,F=null)),()=>n(1,M=n(0,F=null)),e=>"Enter"===e.key&&n(1,M=n(0,F=null)),e=>"Enter"===e.key&&n(1,M=n(0,F=null)),e=>{Ve(e.target,"display-none")},()=>n(1,M=n(0,F=null)),e=>"Enter"===e.key&&n(1,M=n(0,F=null))]}function Po(t){let n,o,l,s,a,c,u,d,f,p,m,h,y,w,g,v,b,x,S,E,N,P,F,U,O=(t[4][t[1]]?"Show":"Hide")+" Anime";return{c(){n=I("div"),o=I("div"),l=I("div"),s=I("span"),a=I("h1"),c=$(t[0]),u=L(),d=I("div"),d.textContent="×",f=L(),p=I("span"),p.innerHTML='<h2 class="option-title svelte-h3vt5f">Information</h2>',m=L(),h=I("span"),h.innerHTML='<h2 class="option-title svelte-h3vt5f">Open in Anilist</h2>',y=L(),w=I("span"),w.innerHTML='<h2 class="option-title svelte-h3vt5f">Open in YouTube</h2>',g=L(),v=I("span"),v.innerHTML='<h2 class="option-title svelte-h3vt5f">Copy Title</h2>',b=L(),x=I("span"),S=I("h2"),E=$(O),M(a,"class","svelte-h3vt5f"),M(s,"class","anime-title svelte-h3vt5f"),M(d,"class","closing-x svelte-h3vt5f"),M(d,"tabindex","0"),M(l,"class","option-header svelte-h3vt5f"),M(p,"class","anime-option svelte-h3vt5f"),M(h,"class","anime-option svelte-h3vt5f"),M(w,"class","anime-option svelte-h3vt5f"),M(v,"class","anime-option svelte-h3vt5f"),M(S,"class","option-title svelte-h3vt5f"),M(x,"class","anime-option svelte-h3vt5f"),M(o,"class","anime-options-container svelte-h3vt5f"),M(n,"class","anime-options svelte-h3vt5f")},m(i,A){var N;T(i,n,A),k(n,o),k(o,l),k(l,s),k(s,a),k(a,c),k(l,u),k(l,d),k(o,f),k(o,p),k(o,m),k(o,h),k(o,y),k(o,w),k(o,g),k(o,v),k(o,b),k(o,x),k(x,S),k(S,E),P=!0,F||(U=[C(d,"click",t[7]),C(d,"keydown",t[14]),C(p,"click",t[8]),C(p,"keydown",t[15]),C(h,"click",t[9]),C(h,"keydown",t[16]),C(w,"click",t[10]),C(w,"keydown",t[17]),C(v,"click",t[11]),C(v,"keydown",t[18]),C(x,"click",t[12]),C(x,"keydown",t[19]),(N=t[13].call(null,n),N&&r(N.destroy)?N.destroy:e),C(n,"click",t[7]),C(n,"touchend",t[6],{passive:!0}),C(n,"keydown",t[20])],F=!0)},p(e,t){(!P||1&t[0])&&D(c,e[0]),(!P||18&t[0])&&O!==(O=(e[4][e[1]]?"Show":"Hide")+" Anime")&&D(E,O)},i(e){P||(ne((()=>{P&&(N||(N=ge(o,Ht,{y:20,duration:100},!0)),N.run(1))})),P=!0)},o(e){N||(N=ge(o,Ht,{y:20,duration:100},!1)),N.run(0),P=!1},d(e){e&&A(n),e&&N&&N.end(),F=!1,i(U)}}}function Co(e){let t,n,o=e[2]&&!e[5]&&e[3]&&Po(e);return{c(){o&&o.c(),t=P()},m(e,i){o&&o.m(e,i),T(e,t,i),n=!0},p(e,n){e[2]&&!e[5]&&e[3]?o?(o.p(e,n),44&n[0]&&me(o,1)):(o=Po(e),o.c(),me(o,1),o.m(t.parentNode,t)):o&&(fe(),he(o,1,1,(()=>{o=null})),pe())},i(e){n||(me(o),n=!0)},o(e){he(o),n=!1},d(e){o&&o.d(e),e&&A(t)}}}function Fo(e,t,n){let o,i,r,l,s,a,c,u,f,p,h,y,w,g,v;d(e,St,(e=>n(2,o=e))),d(e,Et,(e=>n(26,i=e))),d(e,Ze,(e=>n(3,r=e))),d(e,xt,(e=>n(27,l=e))),d(e,et,(e=>n(28,s=e))),d(e,Je,(e=>n(4,a=e))),d(e,ht,(e=>n(29,c=e))),d(e,We,(e=>n(30,u=e))),d(e,Tt,(e=>n(5,f=e))),d(e,At,(e=>n(31,p=e)));let b,x=!0;function k(e){if(x&&"keydown"!==e.type)return;let t=e.target,n=t.classList;(n.contains("closing-x")||!t.closest(".anime-options-container")&&!n.contains("anime-options-container"))&&m(St,o=!1,o)}function S(e){x&&"keydown"!==e.type||(m(At,p=v,p),m(Tt,f=!0,f),m(St,o=!1,o))}function E(e){x&&"keydown"!==e.type||"string"==typeof g&&""!==g&&window.open(g,"_blank")}async function T(e){x&&"keydown"!==e.type||"string"==typeof y&&""!==y&&window.open(`https://www.youtube.com/results?search_query=${y} Anime`,"_blank")}function A(e){if((!x||"keydown"===e.type)&&h){if(u)try{JSBridge.copyToClipBoard(h)}catch(e){}else navigator?.clipboard?.writeText?.(h);m(St,o=!1,o)}}async function N(e){if(x&&"keydown"!==e.type)return;let t=h?`<b>${h}</b>`:"this anime";a[w]?await l(`Are you sure you want to show ${t} in your recommendation list?`)&&(c().then((()=>{delete a[w],Je.set(a),r.length&&s instanceof Worker&&s?.postMessage?.({removeID:w})})).catch((()=>{l({isAlert:!0,title:"Something went wrong",text:"Showing anime has failed, please try again."})})),m(St,o=!1,o)):await l(`Are you sure you want to hide ${t} in your recommendation list?`)&&(c().then((()=>{m(Je,a[w]=!0,a),r.length&&s instanceof Worker&&s?.postMessage?.({removeID:w})})).catch((()=>{l({isAlert:!0,title:"Something went wrong",text:"Hiding anime has failed, please try again."})})),m(St,o=!1,o))}function I(){let e=r?.[i??-1];e?(n(0,h=e?.title?.english||e?.title?.userPreferred||e?.title?.romaji||e?.title?.native),y=e?.title?.romaji||e?.title?.userPreferred||e?.title?.english||e?.title?.native,n(1,w=e.id),g=e.animeUrl,v=i):m(St,o=!1,o)}St.subscribe((e=>{!0===e?(x=!0,b=setTimeout((()=>{x=!1}),100)):(b&&clearTimeout(b),x=!1)})),Ze.subscribe((()=>{o&&I()}));return[h,w,o,r,a,f,function(e){if(x)return;let t=e.target,n=t.classList;t.closest(".anime-options-container")||n.contains("anime-options-container")||m(St,o=!1,o)},k,S,E,T,A,N,I,e=>"Enter"===e.key&&k(e),e=>"Enter"===e.key&&S(e),e=>"Enter"===e.key&&E(e),e=>"Enter"===e.key&&T(e),e=>"Enter"===e.key&&A(e),e=>"Enter"===e.key&&N(e),e=>"Enter"===e.key&&k(e)]}function Mo(t){let n,o,r,l,s,c,u,d,f,m,h,y,w,g,v,b,x,S=(t[0]||"Your Anilist Username")+"";return{c(){n=I("div"),o=I("nav"),r=I("div"),l=I("i"),s=L(),c=I("div"),u=I("input"),d=L(),f=I("div"),m=$(S),h=L(),y=I("div"),w=I("img"),M(l,"class",p("goback fa-solid fa-arrow-left")+" svelte-ggiq0b"),M(l,"tabindex","0"),M(r,"class","go-back-container svelte-ggiq0b"),M(u,"id","usernameInput"),M(u,"type","search"),M(u,"enterkeyhint","search"),M(u,"autocomplete","off"),M(u,"placeholder","Your Anilist Username"),M(u,"class","svelte-ggiq0b"),M(f,"class",p("usernameText")+" svelte-ggiq0b"),M(c,"class","input-search svelte-ggiq0b"),M(w,"class","logo-icon svelte-ggiq0b"),a(w.src,g="./images/Kanshi-Logo.webp")||M(w,"src","./images/Kanshi-Logo.webp"),M(w,"alt","Kanshi Logo"),M(w,"tabindex","0"),M(w,"width","30px"),M(w,"height","30px"),M(y,"class","logo-icon-container svelte-ggiq0b"),M(o,"id","nav"),M(o,"class",v=p("nav "+(t[3]||t[4]?"popupvisible":t[1]===document?.activeElement?"inputfocused":""))+" svelte-ggiq0b"),M(n,"class","nav-container svelte-ggiq0b")},m(e,i){T(e,n,i),k(n,o),k(o,r),k(r,l),k(o,s),k(o,c),k(c,u),U(u,t[0]),t[15](u),k(c,d),k(c,f),k(f,m),k(o,h),k(o,y),k(y,w),t[18](o),b||(x=[C(l,"keydown",t[12]),C(r,"click",t[8]),C(u,"keydown",t[13]),C(u,"focusin",t[11]),C(u,"focusout",t[11]),C(u,"input",t[14]),C(f,"click",t[7]),C(f,"keydown",t[16]),C(w,"keydown",t[17]),C(y,"pointerdown",t[9]),C(y,"pointerup",t[10]),C(y,"pointercancel",t[10]),C(n,"keydown",t[19]),C(n,"click",t[6])],b=!0)},p(e,t){1&t[0]&&u.value!==e[0]&&U(u,e[0]),1&t[0]&&S!==(S=(e[0]||"Your Anilist Username")+"")&&D(m,S),26&t[0]&&v!==(v=p("nav "+(e[3]||e[4]?"popupvisible":e[1]===document?.activeElement?"inputfocused":""))+" svelte-ggiq0b")&&M(o,"class",v)},i:e,o:e,d(e){e&&A(n),t[15](null),t[18](null),b=!1,i(x)}}}function Do(e,t,n){let o,i,r,l,s,a,c,u,f;d(e,xt,(e=>n(25,o=e))),d(e,mt,(e=>n(26,i=e))),d(e,Tt,(e=>n(3,r=e))),d(e,kt,(e=>n(4,l=e))),d(e,tt,(e=>n(27,s=e))),d(e,Ke,(e=>n(28,a=e))),d(e,ot,(e=>n(29,c=e))),d(e,Ze,(e=>n(30,u=e))),d(e,pt,(e=>n(31,f=e)));let p,h,y,w,g,v,b=[],x="",k=!1;async function S(e){if(f)return await async function(){return await o({isAlert:!0,title:"Initializing resources",text:"Please wait a moment..."})}(),void T();let t=e.target,i=t.classList;if("Enter"===e.key||"click"===e.type&&(i.contains("searchBtn")||t?.closest?.(".searchBtn"))){if(!x)return;if(x!==a){if(!navigator.onLine)return o({isAlert:!0,title:"Currently Offline",text:"It seems that you're currently offline and unable to update."});(async()=>{a?await o(`Currently connected to ${a}, do you want to change account?`)?(m(kt,l=!1,l),r||(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow="",window?.scrollTo?.({top:-9999,behavior:"smooth"}),m(Ze,u=null,u)),m(tt,s="Getting User Entries",s),m(ot,c=!0,c),Cn({username:x}).then((({newusername:e})=>{m(ot,c=!1,c),e&&(He("username",e),n(0,x=m(Ke,a=e||"",a)),Dt.update((e=>!e)))})).catch((e=>{m(tt,s="Something went wrong...",s),console.error(e)}))):T():await o(`Are you sure you want to connect to ${x}?`)?(m(kt,l=!1,l),r||(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow="",window?.scrollTo?.({top:-9999,behavior:"smooth"}),m(Ze,u=null,u)),m(tt,s="Getting User Entries",s),m(ot,c=!0,c),await Cn({username:x}).then((({newusername:e})=>{m(ot,c=!1,c),e&&(He("username",e),n(0,x=m(Ke,a=e||"",a))),Dt.update((e=>!e))})).catch((e=>{m(tt,s="Something went wrong...",s),console.error(e)}))):T()})()}else w?.blur?.(),k=!1}}function E(e){if(v)return void(v=!1);let t=e.target.classList;return t.contains("nav")||t.contains("logo-icon")?k&&!t.contains("logo-icon")?(w?.blur?.(),void(k=!1)):void m(kt,l=!l,l):void 0}async function T(){w?.focus?.()}function A(){w===document.activeElement||k?(w?.blur?.(),k=!1):l?m(kt,l=!l,l):r&&m(Tt,r=!1,r)}var N;G((()=>{n(2,y=y||document?.getElementById("nav")),n(1,w=w||document?.getElementById("usernameInput")),p=p||document?.getElementById("anime-grid"),h=h||document?.getElementById("popup-container"),b.push(Ke.subscribe((e=>{n(0,x=e||"")})))})),N=()=>{b.forEach((e=>e()))},z().$$.on_destroy.push(N);return e.$$.update=()=>{3&e.$$.dirty[0]&&x&&w?.setCustomValidity?.("")},[x,w,y,r,l,S,E,T,A,function(){g&&clearTimeout(g),g=setTimeout((()=>{v=!0,r?(h.style.overflow="hidden",h.style.overflow="",h?.children?.[0]?.scrollIntoView?.({container:h,behavior:"smooth",block:"start",inline:"nearest"})):i?(p.style.overflow="hidden",p.style.overflow="",p?.children?.[0]?.scrollIntoView?.({container:p,behavior:"smooth",block:"nearest",inline:"start"})):(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow="",window.scrollTo({top:-9999,behavior:"smooth"}))}),500)},function(){g&&clearTimeout(g),v&&(g=setTimeout((()=>{v=!1}),50))},function(e){"focusin"===e.type?(k=!0,Ve(y,"inputfocused")):setTimeout((()=>{Be(y,"inputfocused"),k=!1}),100)},e=>"Enter"===e.key&&A(),e=>"Enter"===e.key&&S(e),function(){x=this.value,n(0,x)},function(e){K[e?"unshift":"push"]((()=>{w=e,n(1,w)}))},e=>"Enter"===e.key&&T(),e=>{"Enter"===e.key?(e.stopPropagation(),m(kt,l=!l,l)):"Escape"!==e.key&&e.stopPropagation()},function(e){K[e?"unshift":"push"]((()=>{y=e,n(2,y)}))},e=>"Enter"===e.key&&E(e)]}function Uo(e){let t,n,o,r,l,s,a,c,u,d,f,m,h,y,w,g,v,b,x,S,E,N,P,F,D,U,O,_,V,B,j=e[1]&&Oo(e),R=e[1]&&_o(e),H=e[1]&&Vo(e);return{c(){t=I("div"),n=I("div"),o=I("button"),o.textContent="Update List",l=L(),s=I("button"),s.textContent="Show All Hidden Entries",c=L(),u=I("button"),u.textContent="Import Data",f=L(),m=I("button"),m.textContent="Export Data",y=L(),j&&j.c(),w=L(),g=I("button"),v=$("Auto Update"),S=L(),R&&R.c(),E=L(),N=I("button"),N.textContent="Create an Anilist Account",F=L(),H&&H.c(),D=L(),U=I("button"),U.textContent="Reload",M(o,"class","button svelte-kn0y4f"),M(s,"class","button svelte-kn0y4f"),M(u,"class","button svelte-kn0y4f"),M(m,"class","button svelte-kn0y4f"),M(g,"class",b=p("button "+(e[5]?"selected":""))+" svelte-kn0y4f"),M(N,"class","button svelte-kn0y4f"),M(U,"class","button svelte-kn0y4f"),M(n,"class","menu svelte-kn0y4f"),M(t,"class","menu-container svelte-kn0y4f")},m(i,r){T(i,t,r),k(t,n),k(n,o),k(n,l),k(n,s),k(n,c),k(n,u),k(n,f),k(n,m),k(n,y),j&&j.m(n,null),k(n,w),k(n,g),k(g,v),k(n,S),R&&R.m(n,null),k(n,E),k(n,N),k(n,F),H&&H.m(n,null),k(n,D),k(n,U),_=!0,V||(B=[C(o,"click",e[9]),C(o,"keydown",e[23]),C(s,"click",e[14]),C(s,"keydown",e[24]),C(u,"click",e[6]),C(u,"keydown",e[25]),C(m,"click",e[8]),C(m,"keydown",e[26]),C(g,"click",e[10]),C(g,"keydown",e[28]),C(N,"click",e[15]),C(N,"keydown",e[30]),C(U,"keydown",e[36]),C(U,"click",e[19]),C(t,"click",e[12]),C(t,"touchend",e[13],{passive:!0}),C(t,"keydown",e[37])],V=!0)},p(e,t){e[1]?j?(j.p(e,t),2&t[0]&&me(j,1)):(j=Oo(e),j.c(),me(j,1),j.m(n,w)):j&&(fe(),he(j,1,1,(()=>{j=null})),pe()),(!_||32&t[0]&&b!==(b=p("button "+(e[5]?"selected":""))+" svelte-kn0y4f"))&&M(g,"class",b),e[1]?R?(R.p(e,t),2&t[0]&&me(R,1)):(R=_o(e),R.c(),me(R,1),R.m(n,E)):R&&(fe(),he(R,1,1,(()=>{R=null})),pe()),e[1]?H?(H.p(e,t),2&t[0]&&me(H,1)):(H=Vo(e),H.c(),me(H,1),H.m(n,D)):H&&(fe(),he(H,1,1,(()=>{H=null})),pe())},i(e){_||(ne((()=>{_&&(r||(r=ge(o,Ht,{x:50,duration:200},!0)),r.run(1))})),ne((()=>{_&&(a||(a=ge(s,Ht,{x:50,duration:200},!0)),a.run(1))})),ne((()=>{_&&(d||(d=ge(u,Ht,{x:50,duration:200},!0)),d.run(1))})),ne((()=>{_&&(h||(h=ge(m,Ht,{x:50,duration:200},!0)),h.run(1))})),me(j),ne((()=>{_&&(x||(x=ge(g,Ht,{x:50,duration:200},!0)),x.run(1))})),me(R),ne((()=>{_&&(P||(P=ge(N,Ht,{x:50,duration:200},!0)),P.run(1))})),me(H),ne((()=>{_&&(O||(O=ge(U,Ht,{x:50,duration:200},!0)),O.run(1))})),_=!0)},o(e){r||(r=ge(o,Ht,{x:50,duration:200},!1)),r.run(0),a||(a=ge(s,Ht,{x:50,duration:200},!1)),a.run(0),d||(d=ge(u,Ht,{x:50,duration:200},!1)),d.run(0),h||(h=ge(m,Ht,{x:50,duration:200},!1)),h.run(0),he(j),x||(x=ge(g,Ht,{x:50,duration:200},!1)),x.run(0),he(R),P||(P=ge(N,Ht,{x:50,duration:200},!1)),P.run(0),he(H),O||(O=ge(U,Ht,{x:50,duration:200},!1)),O.run(0),_=!1},d(e){e&&A(t),e&&r&&r.end(),e&&a&&a.end(),e&&d&&d.end(),e&&h&&h.end(),j&&j.d(),e&&x&&x.end(),R&&R.d(),e&&P&&P.end(),H&&H.d(),e&&O&&O.end(),V=!1,i(B)}}}function Oo(e){let t,n,o,r,l,s,a=(e[4]?"Change":"Set")+" Export Folder";return{c(){t=I("button"),n=$(a),M(t,"class","button svelte-kn0y4f")},m(o,i){T(o,t,i),k(t,n),r=!0,l||(s=[C(t,"click",jo),C(t,"keydown",e[27])],l=!0)},p(e,t){(!r||16&t[0])&&a!==(a=(e[4]?"Change":"Set")+" Export Folder")&&D(n,a)},i(e){r||(ne((()=>{r&&(o||(o=ge(t,Ht,{x:50,duration:200},!0)),o.run(1))})),r=!0)},o(e){o||(o=ge(t,Ht,{x:50,duration:200},!1)),o.run(0),r=!1},d(e){e&&A(t),e&&o&&o.end(),l=!1,i(s)}}}function _o(e){let t,n,o,r,l,s,a;return{c(){t=I("button"),n=$("Auto Export"),M(t,"class",o=p("button "+(e[3]?"selected":""))+" svelte-kn0y4f")},m(o,i){T(o,t,i),k(t,n),l=!0,s||(a=[C(t,"click",e[11]),C(t,"keydown",e[29])],s=!0)},p(e,n){(!l||8&n[0]&&o!==(o=p("button "+(e[3]?"selected":""))+" svelte-kn0y4f"))&&M(t,"class",o)},i(e){l||(ne((()=>{l&&(r||(r=ge(t,Ht,{x:50,duration:200},!0)),r.run(1))})),l=!0)},o(e){r||(r=ge(t,Ht,{x:50,duration:200},!1)),r.run(0),l=!1},d(e){e&&A(t),e&&r&&r.end(),s=!1,i(a)}}}function Vo(t){let n,o,r,l,s,a,c,u,d,f,p,m,h,y,w,g=!window.location.protocol.startsWith("file:"),v=g&&function(t){let n,o,r,l,s;return{c(){n=I("button"),n.textContent="Check for Updates",M(n,"class","button svelte-kn0y4f")},m(e,o){T(e,n,o),r=!0,l||(s=[C(n,"keydown",t[32]),C(n,"click",t[18])],l=!0)},p:e,i(e){r||(ne((()=>{r&&(o||(o=ge(n,Ht,{x:50,duration:200},!0)),o.run(1))})),r=!0)},o(e){o||(o=ge(n,Ht,{x:50,duration:200},!1)),o.run(0),r=!1},d(e){e&&A(n),e&&o&&o.end(),l=!1,i(s)}}}(t);return{c(){n=I("button"),n.textContent="Show Recent Releases",r=L(),v&&v.c(),l=L(),s=I("button"),s.textContent="Switch App Mode",c=L(),u=I("button"),u.textContent="Clear Cache",f=L(),p=I("button"),p.textContent="Refresh",M(n,"class","button svelte-kn0y4f"),M(s,"class","button svelte-kn0y4f"),M(u,"class","button svelte-kn0y4f"),M(p,"class","button svelte-kn0y4f")},m(e,o){T(e,n,o),T(e,r,o),v&&v.m(e,o),T(e,l,o),T(e,s,o),T(e,c,o),T(e,u,o),T(e,f,o),T(e,p,o),h=!0,y||(w=[C(n,"keydown",t[31]),C(n,"click",t[16]),C(s,"keydown",t[33]),C(s,"click",t[17]),C(u,"keydown",t[34]),C(u,"click",t[21]),C(p,"keydown",t[35]),C(p,"click",t[20])],y=!0)},p(e,t){g&&v.p(e,t)},i(e){h||(ne((()=>{h&&(o||(o=ge(n,Ht,{x:50,duration:200},!0)),o.run(1))})),me(v),ne((()=>{h&&(a||(a=ge(s,Ht,{x:50,duration:200},!0)),a.run(1))})),ne((()=>{h&&(d||(d=ge(u,Ht,{x:50,duration:200},!0)),d.run(1))})),ne((()=>{h&&(m||(m=ge(p,Ht,{x:50,duration:200},!0)),m.run(1))})),h=!0)},o(e){o||(o=ge(n,Ht,{x:50,duration:200},!1)),o.run(0),he(v),a||(a=ge(s,Ht,{x:50,duration:200},!1)),a.run(0),d||(d=ge(u,Ht,{x:50,duration:200},!1)),d.run(0),m||(m=ge(p,Ht,{x:50,duration:200},!1)),m.run(0),h=!1},d(e){e&&A(n),e&&o&&o.end(),e&&A(r),v&&v.d(e),e&&A(l),e&&A(s),e&&a&&a.end(),e&&A(c),e&&A(u),e&&d&&d.end(),e&&A(f),e&&A(p),e&&m&&m.end(),y=!1,i(w)}}}function Bo(e){let t,n,o,i,r,l,s=e[2]&&Uo(e);return{c(){t=I("input"),n=L(),s&&s.c(),o=P(),M(t,"type","file"),M(t,"accept",".json"),O(t,"display","none")},m(a,c){T(a,t,c),e[22](t),T(a,n,c),s&&s.m(a,c),T(a,o,c),i=!0,r||(l=C(t,"change",e[7]),r=!0)},p(e,t){e[2]?s?(s.p(e,t),4&t[0]&&me(s,1)):(s=Uo(e),s.c(),me(s,1),s.m(o.parentNode,o)):s&&(fe(),he(s,1,1,(()=>{s=null})),pe())},i(e){i||(me(s),i=!0)},o(e){he(s),i=!1},d(i){i&&A(t),e[22](null),i&&A(n),s&&s.d(i),i&&A(o),r=!1,l()}}}function jo(){try{JSBridge.chooseExportFolder()}catch(e){}}function Ro(e,t,n){let o,i,r,l,s,a,c,f,p,h,y,w,g,v,b,x;async function k(){return w?U():x instanceof Element?void(await o({text:"Are you sure you want to import your Data?"})&&x.click()):m(tt,c="Something went wrong...",c)}async function S(){return w?U():!v&&i?jo():void(await o("Are you sure you want to export your data?")&&(m(kt,a=!1,a),Mt.update((e=>!e))))}async function E(){return w?U():navigator.onLine?void(await o("Are you sure you want to update your list?")&&(m(kt,a=!1,a),Ft.update((e=>!e)))):o({isAlert:!0,title:"Currently offline",text:"It seems that you're currently offline and unable to update."})}async function T(){await o(`Are you sure you want to ${b?"disable":"enable"} auto-update?`)&&m(it,b=!b,b)}async function A(){if(!v&&i)return jo();await o(`Are you sure you want to ${g?"disable":"enable"} auto-export?`)&&m(at,g=!g,g)}function N(e){let t=e.target.classList;t.contains("button")||!matchMedia("(pointer:fine)").matches&&t.contains("menu-container")||m(kt,a=!a,a)}async function I(){if(w)return U();if((e=>{for(const t in e)return!1;return!0})(y))o({isAlert:!0,text:"There is currently no hidden entries."});else if(await o("Are you sure you want to show all hidden anime entries?")){h&&(h.terminate(),m(et,h=null,h)),p||m(Ze,f=null,f),m(tt,c="Updating List",c),m(kt,a=!1,a);let e=s?.filterSelection?.findIndex?.((({filterSelectionName:e})=>"Anime Filter"===e)),t=s?.filterSelection?.[e??-1]?.filters?.Checkbox?.findIndex?.((({filName:e})=>"hidden anime"===e));e>=0&&t>=0&&m(Xe,s.filterSelection[e??-1].filters.Checkbox[t??-1].isSelected=!1,s),l?.["Anime Filter"]&&m(Qe,l["Anime Filter"]=l["Anime Filter"].filter((({optionName:e,filterType:t})=>"hidden"!==e&&"checkbox"!==t)),l),await Gn(s,"filterOptions"),await Gn(l,"activeTagFilters"),await Gn({},"hiddenEntries"),Ut.update((e=>!e))}}async function $(){await o("Are you sure want to sign-up an anilist account?")&&window.open("https://anilist.co/signup","_blank")}function L(){if(i)try{JSBridge.showRecentReleases()}catch(e){}}function P(){if(i)try{JSBridge.switchApp()}catch(e){}}function C(){if(!navigator.onLine)return o({isAlert:!0,title:"Currently offline",text:"It seems that you're currently offline and unable to check for updates."});if(i)try{JSBridge.checkAppID(r,!0)}catch(e){}}async function F(){await o("Are you sure want to reload the resources?")&&(document.querySelectorAll("script")?.forEach((e=>{e.src&&"https://www.youtube.com/iframe_api?v=16"!==e.src&&(e.src=e.src)})),document.querySelectorAll("img")?.forEach((e=>{e.naturalHeight||(e.src=e.src)})),window.reloadYoutube?.())}async function M(){if(i&&await o("Are you sure want to refresh the app?"))try{JSBridge.refreshWeb()}catch(e){}}async function D(){if(i&&await o("Are you sure want to clear the cache?"))try{JSBridge.clearCache()}catch(e){}}function U(){o({isAlert:!0,title:"Initializing resources",text:"Please wait a moment..."})}d(e,xt,(e=>n(38,o=e))),d(e,We,(e=>n(1,i=e))),d(e,qe,(e=>n(39,r=e))),d(e,Qe,(e=>n(40,l=e))),d(e,Xe,(e=>n(41,s=e))),d(e,kt,(e=>n(2,a=e))),d(e,tt,(e=>n(42,c=e))),d(e,Ze,(e=>n(43,f=e))),d(e,Tt,(e=>n(44,p=e))),d(e,et,(e=>n(45,h=e))),d(e,Je,(e=>n(46,y=e))),d(e,pt,(e=>n(47,w=e))),d(e,at,(e=>n(3,g=e))),d(e,st,(e=>n(4,v=e))),d(e,it,(e=>n(5,b=e))),window.setExportPathAvailability=async(e=!0)=>{m(st,v=e,v),He("exportPathIsAvailable",e),await Gn(e,"exportPathIsAvailable")};return[x,i,a,g,v,b,k,async function(){if(!(x instanceof Element))return m(tt,c="Something went wrong...",c);let e=x.files?.[0];if(e){let i=e.name;await o(`File ${i?"named ["+i+"] ":""}has been detected, do you want to continue the import?`)?(await Gn(!0,"shouldProcessRecommendation"),m(kt,a=!1,a),p||(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow="",window?.scrollTo?.({top:-9999,behavior:"smooth"}),m(Ze,f=null,f)),(t={importedFile:e},new Promise(((e,n)=>{if(!u(pt)){if(kn)return;Wn(),nt.set(!0)}Un&&Un.terminate(),Ge.set(0),yn("./webapi/worker/importUserData.js").then((o=>{Un=new Worker(o),Dn&&clearTimeout(Dn),Un.postMessage(t),Un.onmessage=({data:t})=>{t?.hasOwnProperty("progress")?t?.progress>=0&&t?.progress<=100&&Ge.set(t.progress):void 0!==t?.error?(nt.set(!1),Vt.update((e=>!e)),window.confirmPromise?.({isAlert:!0,title:"Import Failed",text:"File has not been imported, please ensure that file is in a supported format (e.g., .json)"}),Ge.set(100),n(t?.error||"Something went wrong...")):t?.hasOwnProperty("status")?(xn=!0,tt.set(t.status)):"string"==typeof t?.importedUsername?Ke.set(t.importedUsername):Pe(t?.importedHiddenEntries)?Je.set(t?.importedHiddenEntries):t?.importedlastRunnedAutoUpdateDate instanceof Date&&!isNaN(t?.importedlastRunnedAutoUpdateDate)?lt.set(t.importedlastRunnedAutoUpdateDate):t?.importedlastRunnedAutoExportDate instanceof Date&&!isNaN(t?.importedlastRunnedAutoExportDate)?ut.set(t.importedlastRunnedAutoExportDate):void 0!==t?.updateFilters?(nt.set(!1),qn().then((e=>{Qe.set(e.activeTagFilters),Xe.set(e.filterOptions)}))):void 0!==t?.updateRecommendationList?(nt.set(!1),Dt.update((e=>!e))):(nt.set(!1),Ft.update((e=>!e)),xn=!1,Dn=setTimeout((()=>{Un.terminate()}),bn),Ge.set(100),e(t))},Un.onerror=e=>{nt.set(!1),window.confirmPromise?.({isAlert:!0,title:"Import Failed",text:"File has not been imported, please ensure that file is in a supported format (e.g., .json)"}),Vt.update((e=>!e)),Ge.set(100),n(e||"Something went wrong...")}})).catch((e=>{Ge.set(100),nt.set(!1),Vt.update((e=>!e)),zn(),n(e)}))}))).then((()=>{x instanceof Element&&n(0,x.value=null,x)})).catch((e=>{m(tt,c=e||"Something went wrong...",c),n(0,x.value=null,x),Dt.update((e=>!e))}))):x instanceof Element&&n(0,x.value=null,x)}else x instanceof Element&&n(0,x.value=null,x);var t},S,E,T,A,N,function(e){let t=e.target.classList;t?.contains?.("menu-container")&&m(kt,a=!a,a)},I,$,L,P,C,F,M,D,function(e){K[e?"unshift":"push"]((()=>{x=e,n(0,x)}))},e=>"Enter"===e.key&&E(),e=>"Enter"===e.key&&I(),e=>"Enter"===e.key&&k(),e=>"Enter"===e.key&&S(),e=>"Enter"===e.key&&jo(),e=>"Enter"===e.key&&T(),e=>"Enter"===e.key&&A(),e=>"Enter"===e.key&&$(),e=>"Enter"===e.key&&L(),e=>"Enter"===e.key&&C(),e=>"Enter"===e.key&&P(),e=>"Enter"===e.key&&D(),e=>"Enter"===e.key&&M(),e=>"Enter"===e.key&&F(),e=>"Enter"===e.key&&N(e)]}function Ho(e,t,n){const o=e.slice();return o[98]=t[n].sortName,o[100]=n,o}function qo(e,t,n){const o=e.slice();return o[101]=t[n].optionName,o[102]=t[n].optionIdx,o[103]=t[n].selected,o[104]=t[n].changeType,o[105]=t[n].filterType,o[106]=t[n].categIdx,o[107]=t[n].optionValue,o[108]=t[n].optionType,o}function Wo(e,t,n){const o=e.slice();return o[125]=t[n],o}function zo(e,t,n){const o=e.slice();return o[111]=t[n],o[112]=t,o[113]=n,o}function Go(e,t,n){const o=e.slice();return o[114]=t[n],o[116]=n,o}function Yo(e,t,n){const o=e.slice();return o[117]=t[n],o[118]=t,o[119]=n,o}function Ko(e,t,n){const o=e.slice();return o[120]=t[n],o[121]=t,o[122]=n,o}function Jo(e,t,n){const o=e.slice();return o[123]=t[n],o[102]=n,o}function Xo(e,t,n){const o=e.slice();return o[128]=t[n].filterSelectionName,o[129]=t[n].isSelected,o}function Qo(t){let n;return{c(){n=I("div"),M(n,"class","skeleton shimmer svelte-1wvd7r2")},m(e,t){T(e,n,t)},p:e,d(e){e&&A(n)}}}function Zo(e){let t,n,o,i=(e[8]?.filterSelection?.filter?.(Vi)?.[0]?.filterSelectionName||"")+"";return{c(){t=I("span"),n=I("h2"),o=$(i),M(n,"class","svelte-1wvd7r2"),M(t,"class","svelte-1wvd7r2")},m(e,i){T(e,t,i),k(t,n),k(n,o)},p(e,t){256&t[0]&&i!==(i=(e[8]?.filterSelection?.filter?.(Vi)?.[0]?.filterSelectionName||"")+"")&&D(o,i)},d(e){e&&A(t)}}}function ei(e){let t,n,o,i;function r(e,t){return e[12]?oi:e[14]||e[10]?ti:ni}let l=r(e),s=l(e);return{c(){t=I("span"),n=I("h2"),s.c(),M(n,"class","svelte-1wvd7r2"),M(t,"class","data-status svelte-1wvd7r2")},m(e,o){T(e,t,o),k(t,n),s.m(n,null),i=!0},p(e,t){l===(l=r(e))&&s?s.p(e,t):(s.d(1),s=l(e),s&&(s.c(),s.m(n,null)))},i(e){i||(o&&o.end(1),i=!0)},o(e){o=we(t,Rt,{duration:200}),i=!1},d(e){e&&A(t),s.d(),e&&o&&o.end()}}}function ti(t){let n;return{c(){n=$("")},m(e,t){T(e,n,t)},p:e,d(e){e&&A(n)}}}function ni(t){let n;return{c(){n=$("No Anilist Username Found")},m(e,t){T(e,n,t)},p:e,d(e){e&&A(n)}}}function oi(e){let t;return{c(){t=$(e[12])},m(e,n){T(e,t,n)},p(e,n){4096&n[0]&&D(t,e[12])},d(e){e&&A(t)}}}function ii(e){let t,n,o,r,l,s,a,c,u,d,f,m,h=[],y=new Map,w=e[8]?.filterSelection||[];const g=e=>e[128];for(let t=0;t<w.length;t+=1){let n=Xo(e,w,t),o=g(n);y.set(o,h[t]=ri(o,n))}return{c(){t=I("div"),n=I("div"),o=I("h2"),o.textContent="Filters",r=L(),l=I("div"),s=$("×"),c=L(),u=I("div");for(let e=0;e<h.length;e+=1)h[e].c();M(o,"class","svelte-1wvd7r2"),M(l,"class","closing-x svelte-1wvd7r2"),M(l,"tabindex",a=e[3]&&e[1]<=425?"0":""),M(n,"class","header svelte-1wvd7r2"),M(u,"class","options svelte-1wvd7r2"),M(t,"class",d=p("options-wrap-filter-info "+(e[3]?"":"hide"))+" svelte-1wvd7r2")},m(i,a){T(i,t,a),k(t,n),k(n,o),k(n,r),k(n,l),k(l,s),k(t,c),k(t,u);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(u,null);f||(m=[C(l,"keydown",e[40]),C(l,"click",e[19])],f=!0)},p(e,n){10&n[0]&&a!==(a=e[3]&&e[1]<=425?"0":"")&&M(l,"tabindex",a),262400&n[0]&&(w=e[8]?.filterSelection||[],h=xe(h,n,g,1,e,w,y,u,ve,ri,null,Xo)),8&n[0]&&d!==(d=p("options-wrap-filter-info "+(e[3]?"":"hide"))+" svelte-1wvd7r2")&&M(t,"class",d)},d(e){e&&A(t);for(let e=0;e<h.length;e+=1)h[e].d();f=!1,i(m)}}}function ri(e,t){let n,o,l,s,a,c,u=(t[128]||"")+"";function d(...e){return t[41](t[128],...e)}return{key:e,first:null,c(){n=I("div"),o=I("h3"),l=$(u),s=L(),M(o,"class","svelte-1wvd7r2"),O(o,"color",t[129]?"#3db4f2":"inherit"),M(n,"class","option svelte-1wvd7r2"),this.first=n},m(e,i){T(e,n,i),k(n,o),k(o,l),k(n,s),a||(c=[C(n,"click",(function(){r(t[18](t[128]))&&t[18](t[128]).apply(this,arguments)})),C(n,"keydown",d)],a=!0)},p(e,n){t=e,256&n[0]&&u!==(u=(t[128]||"")+"")&&D(l,u),256&n[0]&&O(o,"color",t[129]?"#3db4f2":"inherit")},d(e){e&&A(n),a=!1,i(c)}}}function li(t){let n,o=Array(10),i=[];for(let e=0;e<o.length;e+=1)i[e]=ai(Wo(t,o,e));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();n=P()},m(e,t){for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(e,t);T(e,n,t)},p:e,d(e){N(i,e),e&&A(n)}}}function si(e){let t,n=[],o=new Map,i=e[8]?.filterSelection||[];const r=e=>e[111].filterSelectionName;for(let t=0;t<i.length;t+=1){let l=zo(e,i,t),s=r(l);o.set(s,n[t]=Ti(s,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=P()},m(e,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,o);T(e,t,o)},p(e,l){32638279&l[0]|8&l[1]&&(i=e[8]?.filterSelection||[],n=xe(n,l,r,1,e,i,o,t.parentNode,ve,Ti,t,zo))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&A(t)}}}function ai(t){let n;return{c(){n=I("div"),n.innerHTML='<div class="filter-name skeleton shimmer svelte-1wvd7r2"></div> \n                    <div class="select skeleton shimmer svelte-1wvd7r2"></div> \n                ',M(n,"class","filter-select svelte-1wvd7r2")},m(e,t){T(e,n,t)},p:e,d(e){e&&A(n)}}}function ci(t){let n;return{c(){n=I("i"),M(n,"class","icon fa-solid fa-angle-down svelte-1wvd7r2")},m(e,t){T(e,n,t)},p:e,d(e){e&&A(n)}}}function ui(e){let t,n,o;function l(...t){return e[44](e[122],...t)}return{c(){t=I("i"),M(t,"class","icon fa-solid fa-angle-up svelte-1wvd7r2")},m(i,s){T(i,t,s),n||(o=[C(t,"keydown",l),C(t,"click",(function(){r(e[21](e[122]))&&e[21](e[122]).apply(this,arguments)}))],n=!0)},p(t,n){e=t},d(e){e&&A(t),n=!1,i(o)}}}function di(t){let n;return{c(){n=I("div"),n.innerHTML='<h3 class="svelte-1wvd7r2">No Results</h3>',M(n,"class","option svelte-1wvd7r2")},m(e,t){T(e,n,t)},p:e,d(e){e&&A(n)}}}function fi(e){let t,n=[],o=new Map,i=e[120].options||[];const r=e=>e[111].filterSelectionName+e[120].filName+e[123].optionName;for(let t=0;t<i.length;t+=1){let l=Jo(e,i,t),s=r(l);o.set(s,n[t]=wi(s,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=P()},m(e,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,o);T(e,t,o)},p(e,l){4194560&l[0]&&(i=e[120].options||[],n=xe(n,l,r,1,e,i,o,t.parentNode,ve,wi,t,Jo))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&A(t)}}}function pi(t){let n;return{c(){n=I("i"),M(n,"class","fa-regular fa-circle-xmark async-element svelte-1wvd7r2"),O(n,"--optionColor","#e85d75")},m(e,t){T(e,n,t)},p:e,d(e){e&&A(n)}}}function mi(e){let t;function n(e,t){return"Content Caution"===e[111].filterSelectionName?yi:hi}let o=n(e),i=o(e);return{c(){i.c(),t=P()},m(e,n){i.m(e,n),T(e,t,n)},p(e,r){o!==(o=n(e))&&(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&A(t)}}}function hi(e){let t;return{c(){t=I("i"),M(t,"class","fa-regular fa-circle-check async-element svelte-1wvd7r2"),O(t,"--optionColor","#5f9ea0")},m(e,n){T(e,t,n)},d(e){e&&A(t)}}}function yi(e){let t;return{c(){t=I("i"),M(t,"class","fa-regular fa-circle-xmark async-element svelte-1wvd7r2"),O(t,"--optionColor","#5f9ea0")},m(e,n){T(e,t,n)},d(e){e&&A(t)}}}function wi(e,t){let n,o,l,s,a,c,u,d=(t[123].optionName||"")+"";function f(e,t){return"included"===e[123].selected?mi:"excluded"===e[123].selected&&"read"!==e[120].changeType?pi:void 0}let m=f(t),h=m&&m(t);function y(...e){return t[49](t[123],t[120],t[102],t[122],t[111],...e)}return{key:e,first:null,c(){n=I("div"),o=I("h3"),l=$(d),s=L(),h&&h.c(),M(o,"class","svelte-1wvd7r2"),M(n,"class",a=p("option "+(Oi(t[123].optionName,t[120].optKeyword)?"":"disable-interaction"))+" svelte-1wvd7r2"),this.first=n},m(e,i){T(e,n,i),k(n,o),k(o,l),k(n,s),h&&h.m(n,null),c||(u=[C(n,"click",(function(){r(t[22](t[123].optionName,t[120].filName,t[102],t[122],t[120].changeType,t[111].filterSelectionName))&&t[22](t[123].optionName,t[120].filName,t[102],t[122],t[120].changeType,t[111].filterSelectionName).apply(this,arguments)})),C(n,"keydown",y)],c=!0)},p(e,o){t=e,256&o[0]&&d!==(d=(t[123].optionName||"")+"")&&D(l,d),m===(m=f(t))&&h?h.p(t,o):(h&&h.d(1),h=m&&m(t),h&&(h.c(),h.m(n,null))),256&o[0]&&a!==(a=p("option "+(Oi(t[123].optionName,t[120].optKeyword)?"":"disable-interaction"))+" svelte-1wvd7r2")&&M(n,"class",a)},d(e){e&&A(n),h&&h.d(),c=!1,i(u)}}}function gi(e,t){let n,o,l,s,a,c,u,d,f,m,h,y,w,g,v,b,x,S,E,N,P,_,V,B,j,R,H,q,W,z,G,Y,K=(t[120].filName||"")+"",J=t[120].filName+"",X=`${t[2]}px`;function Q(...e){return t[37](t[120],...e)}function Z(){t[43].call(d,t[113],t[122])}function ee(e,t){return e[120].selected&&e[120].options.length&&!e[0]?ui:ci}let te=ee(t),ne=te(t);function oe(...e){return t[45](t[122],...e)}function ie(...e){return t[46](t[122],...e)}function re(...e){return t[47](t[122],...e)}function le(){t[48].call(V,t[113],t[122])}function se(e,t){return 256&t[0]&&(H=null),null==H&&(H=!!e[120].options?.filter?.(Q)?.length),H?fi:di}let ae=se(t,[-1,-1,-1,-1,-1]),ce=ae(t);return{key:e,first:null,c(){n=I("div"),o=I("div"),l=I("h2"),s=$(K),a=L(),c=I("div"),u=I("div"),d=I("input"),m=L(),ne.c(),y=L(),w=I("div"),g=I("div"),v=I("div"),b=I("h2"),x=$(J),S=L(),E=I("div"),N=$("×"),_=L(),V=I("input"),j=L(),R=I("div"),ce.c(),M(l,"class","svelte-1wvd7r2"),M(o,"class","filter-name svelte-1wvd7r2"),M(d,"placeholder","Any"),M(d,"type","search"),M(d,"enterkeyhint","search"),M(d,"autocomplete","off"),M(d,"class","value-input svelte-1wvd7r2"),d.disabled=f=!t[6]||t[1]<=425||!t[111].isSelected,M(u,"class","value-wrap svelte-1wvd7r2"),M(c,"class","select svelte-1wvd7r2"),M(c,"tabindex",h=t[6]&&t[1]<=425&&t[111].isSelected?"0":""),M(b,"class","svelte-1wvd7r2"),M(E,"class","closing-x svelte-1wvd7r2"),M(E,"tabindex",P=t[6]&&t[120].selected?"0":""),M(v,"class","header svelte-1wvd7r2"),M(V,"placeholder","Any"),M(V,"type","search"),M(V,"enterkeyhint","search"),M(V,"autocomplete","off"),V.disabled=B=!t[6]||!t[111].isSelected||!t[120].selected,M(V,"class","svelte-1wvd7r2"),M(R,"class","options svelte-1wvd7r2"),M(g,"class",q=p("options-wrap-filter-info "+(t[120].options.length&&!0===t[120].selected&&!t[0]?"":"hide"))+" svelte-1wvd7r2"),M(w,"class",W=p("options-wrap "+(t[120].options.length&&!0===t[120].selected&&!t[0]?"":"disable-interaction hide"))+" svelte-1wvd7r2"),O(w,"--maxFilterSelectionHeight",X),M(n,"class",z=p("filter-select "+(t[111].isSelected?"":"disable-interaction"))+" svelte-1wvd7r2"),this.first=n},m(e,i){T(e,n,i),k(n,o),k(o,l),k(l,s),k(n,a),k(n,c),k(c,u),k(u,d),U(d,t[8].filterSelection[t[113]].filters.Dropdown[t[122]].optKeyword),k(c,m),ne.m(c,null),k(n,y),k(n,w),k(w,g),k(g,v),k(v,b),k(b,x),k(v,S),k(v,E),k(E,N),k(g,_),k(g,V),U(V,t[8].filterSelection[t[113]].filters.Dropdown[t[122]].optKeyword),k(g,j),k(g,R),ce.m(R,null),G||(Y=[C(d,"input",Z),C(c,"keydown",oe),C(c,"click",ie),C(E,"keydown",re),C(E,"click",(function(){r(t[21](t[122]))&&t[21](t[122]).apply(this,arguments)})),C(V,"input",le),C(R,"wheel",F(Bi),{passive:!0}),C(w,"wheel",F(ji),{passive:!0})],G=!0)},p(e,o){t=e,256&o[0]&&K!==(K=(t[120].filName||"")+"")&&D(s,K),322&o[0]&&f!==(f=!t[6]||t[1]<=425||!t[111].isSelected)&&(d.disabled=f),256&o[0]&&d.value!==t[8].filterSelection[t[113]].filters.Dropdown[t[122]].optKeyword&&U(d,t[8].filterSelection[t[113]].filters.Dropdown[t[122]].optKeyword),te===(te=ee(t))&&ne?ne.p(t,o):(ne.d(1),ne=te(t),ne&&(ne.c(),ne.m(c,null))),322&o[0]&&h!==(h=t[6]&&t[1]<=425&&t[111].isSelected?"0":"")&&M(c,"tabindex",h),256&o[0]&&J!==(J=t[120].filName+"")&&D(x,J),320&o[0]&&P!==(P=t[6]&&t[120].selected?"0":"")&&M(E,"tabindex",P),320&o[0]&&B!==(B=!t[6]||!t[111].isSelected||!t[120].selected)&&(V.disabled=B),256&o[0]&&V.value!==t[8].filterSelection[t[113]].filters.Dropdown[t[122]].optKeyword&&U(V,t[8].filterSelection[t[113]].filters.Dropdown[t[122]].optKeyword),ae===(ae=se(t,o))&&ce?ce.p(t,o):(ce.d(1),ce=ae(t),ce&&(ce.c(),ce.m(R,null))),257&o[0]&&q!==(q=p("options-wrap-filter-info "+(t[120].options.length&&!0===t[120].selected&&!t[0]?"":"hide"))+" svelte-1wvd7r2")&&M(g,"class",q),257&o[0]&&W!==(W=p("options-wrap "+(t[120].options.length&&!0===t[120].selected&&!t[0]?"":"disable-interaction hide"))+" svelte-1wvd7r2")&&M(w,"class",W),4&o[0]&&X!==(X=`${t[2]}px`)&&O(w,"--maxFilterSelectionHeight",X),256&o[0]&&z!==(z=p("filter-select "+(t[111].isSelected?"":"disable-interaction"))+" svelte-1wvd7r2")&&M(n,"class",z)},d(e){e&&A(n),ne.d(),ce.d(),G=!1,i(Y)}}}function vi(e){let t,n,o,r,l,s,a,c,u,d=(e[117].filName||"")+"";function f(e,t){return e[10]?xi:bi}let p=f(e),m=p(e);function h(...t){return e[53](e[117],e[119],e[111],...t)}function y(...t){return e[54](e[117],e[119],e[111],...t)}return{c(){t=I("div"),n=I("div"),o=L(),r=I("div"),m.c(),l=L(),s=I("div"),a=$(d),M(n,"class","svelte-1wvd7r2"),O(n,"visibility","none"),M(s,"class","checkbox-label svelte-1wvd7r2"),M(r,"class","checkbox-wrap svelte-1wvd7r2"),M(t,"class","filter-checkbox svelte-1wvd7r2")},m(e,i){T(e,t,i),k(t,n),k(t,o),k(t,r),m.m(r,null),k(r,l),k(r,s),k(s,a),c||(u=[C(r,"click",h),C(r,"keydown",y)],c=!0)},p(t,n){p===(p=f(e=t))&&m?m.p(e,n):(m.d(1),m=p(e),m&&(m.c(),m.m(r,l))),256&n[0]&&d!==(d=(e[117].filName||"")+"")&&D(a,d)},d(e){e&&A(t),m.d(),c=!1,i(u)}}}function bi(e){let t,n,o,r;function l(...t){return e[51](e[117],e[119],e[111],...t)}function s(){e[52].call(t,e[118],e[119])}return{c(){t=I("input"),M(t,"type","checkbox"),M(t,"class","checkbox svelte-1wvd7r2"),t.disabled=n=!e[6]},m(n,i){T(n,t,i),t.checked=e[117].isSelected,o||(r=[C(t,"change",l),C(t,"change",s)],o=!0)},p(o,i){e=o,64&i[0]&&n!==(n=!e[6])&&(t.disabled=n),256&i[0]&&(t.checked=e[117].isSelected)},d(e){e&&A(t),o=!1,i(r)}}}function xi(e){let t,n,o,i,r;return{c(){t=I("input"),M(t,"type","checkbox"),M(t,"class","checkbox svelte-1wvd7r2"),t.checked=n=e[117].isSelected,t.disabled=o=!e[6]},m(n,o){T(n,t,o),i||(r=C(t,"change",e[50]),i=!0)},p(e,i){256&i[0]&&n!==(n=e[117].isSelected)&&(t.checked=n),64&i[0]&&o!==(o=!e[6])&&(t.disabled=o)},d(e){e&&A(t),i=!1,r()}}}function ki(e,t){let n,o,i=t[111].isSelected&&vi(t);return{key:e,first:null,c(){n=P(),i&&i.c(),o=P(),this.first=n},m(e,t){T(e,n,t),i&&i.m(e,t),T(e,o,t)},p(e,n){(t=e)[111].isSelected?i?i.p(t,n):(i=vi(t),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(e){e&&A(n),i&&i.d(e),e&&A(o)}}}function Si(e){let t,n,o,i,r,l,s,a,c,u,d,f,p,m=(e[114].filName||"")+"";function h(...t){return e[55](e[116],e[114],e[111],...t)}return{c(){t=I("div"),n=I("div"),o=I("h2"),i=$(m),r=L(),l=I("div"),s=I("input"),d=L(),M(o,"class","svelte-1wvd7r2"),M(n,"class","filter-input-number-name svelte-1wvd7r2"),M(s,"class","value-input-number svelte-1wvd7r2"),M(s,"type","text"),M(s,"placeholder",a="scoring system"===e[114].filName?"Default: User Scoring":e[17].includes(e[114].filName)?">123 or 123":null!==e[114].defaultValue?"Default: "+e[114].defaultValue:"123"),s.value=c=e[114].numberValue||"",s.disabled=u=!e[6],M(l,"class","value-input-number-wrap svelte-1wvd7r2"),M(t,"class","filter-input-number svelte-1wvd7r2"),O(t,"display",e[111].isSelected?"":"none")},m(e,a){T(e,t,a),k(t,n),k(n,o),k(o,i),k(t,r),k(t,l),k(l,s),k(t,d),f||(p=C(s,"input",h),f=!0)},p(n,o){e=n,256&o[0]&&m!==(m=(e[114].filName||"")+"")&&D(i,m),256&o[0]&&a!==(a="scoring system"===e[114].filName?"Default: User Scoring":e[17].includes(e[114].filName)?">123 or 123":null!==e[114].defaultValue?"Default: "+e[114].defaultValue:"123")&&M(s,"placeholder",a),256&o[0]&&c!==(c=e[114].numberValue||"")&&s.value!==c&&(s.value=c),64&o[0]&&u!==(u=!e[6])&&(s.disabled=u),256&o[0]&&O(t,"display",e[111].isSelected?"":"none")},d(e){e&&A(t),f=!1,p()}}}function Ei(e,t){let n,o,i=t[111].isSelected&&Si(t);return{key:e,first:null,c(){n=P(),i&&i.c(),o=P(),this.first=n},m(e,t){T(e,n,t),i&&i.m(e,t),T(e,o,t)},p(e,n){(t=e)[111].isSelected?i?i.p(t,n):(i=Si(t),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(e){e&&A(n),i&&i.d(e),e&&A(o)}}}function Ti(e,t){let n,o,i,r,l=[],s=new Map,a=[],c=new Map,u=[],d=new Map,f=t[111].filters.Dropdown||[];const p=e=>e[111].filterSelectionName+e[120].filName;for(let e=0;e<f.length;e+=1){let n=Ko(t,f,e),o=p(n);s.set(o,l[e]=gi(o,n))}let m=t[111].filters.Checkbox||[];const h=e=>e[111].filterSelectionName+e[117].filName;for(let e=0;e<m.length;e+=1){let n=Yo(t,m,e),o=h(n);c.set(o,a[e]=ki(o,n))}let y=t[111].filters["Input Number"]||[];const w=e=>e[111].filterSelectionName+e[114].filName;for(let e=0;e<y.length;e+=1){let n=Go(t,y,e),o=w(n);d.set(o,u[e]=Ei(o,n))}return{key:e,first:null,c(){n=P();for(let e=0;e<l.length;e+=1)l[e].c();o=L();for(let e=0;e<a.length;e+=1)a[e].c();i=L();for(let e=0;e<u.length;e+=1)u[e].c();r=P(),this.first=n},m(e,t){T(e,n,t);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,t);T(e,o,t);for(let n=0;n<a.length;n+=1)a[n]&&a[n].m(e,t);T(e,i,t);for(let n=0;n<u.length;n+=1)u[n]&&u[n].m(e,t);T(e,r,t)},p(e,n){t=e,7340359&n[0]&&(f=t[111].filters.Dropdown||[],l=xe(l,n,p,1,t,f,s,o.parentNode,ve,gi,o,Ko)),8389952&n[0]|8&n[1]&&(m=t[111].filters.Checkbox||[],a=xe(a,n,h,1,t,m,c,i.parentNode,ve,ki,i,Yo)),16908608&n[0]&&(y=t[111].filters["Input Number"]||[],u=xe(u,n,w,1,t,y,d,r.parentNode,ve,Ei,r,Go))},d(e){e&&A(n);for(let t=0;t<l.length;t+=1)l[t].d(e);e&&A(o);for(let t=0;t<a.length;t+=1)a[t].d(e);e&&A(i);for(let t=0;t<u.length;t+=1)u[t].d(e);e&&A(r)}}}function Ai(t){let n,o,r;return{c(){n=I("div"),n.innerHTML='<i class="fa-solid fa-ban svelte-1wvd7r2"></i>',M(n,"tabindex","0"),M(n,"class","empty-tagFilter svelte-1wvd7r2"),M(n,"title","Remove Filters")},m(e,i){T(e,n,i),o||(r=[C(n,"click",t[27]),C(n,"keydown",t[57])],o=!0)},p:e,d(e){e&&A(n),o=!1,i(r)}}}function Ni(t){let n,o,r;return{c(){n=I("div"),n.innerHTML='<i class="fa-solid fa-ban svelte-1wvd7r2"></i>',M(n,"tabindex","0"),M(n,"class","empty-tagFilter svelte-1wvd7r2"),M(n,"title","Remove Filters")},m(e,i){T(e,n,i),o||(r=[C(n,"click",t[27]),C(n,"keydown",t[58])],o=!0)},p:e,d(e){e&&A(n),o=!1,i(r)}}}function Ii(e){let t,n,o=(e[101]||"")+"";return{c(){t=I("h3"),n=$(o),M(t,"class","svelte-1wvd7r2")},m(e,o){T(e,t,o),k(t,n)},p(e,t){2304&t[0]&&o!==(o=(e[101]||"")+"")&&D(n,o)},d(e){e&&A(t)}}}function $i(e){let t,n,o=(e[108]+": "+e[101]||"")+"";return{c(){t=I("h3"),n=$(o),M(t,"class","svelte-1wvd7r2")},m(e,o){T(e,t,o),k(t,n)},p(e,t){2304&t[0]&&o!==(o=(e[108]+": "+e[101]||"")+"")&&D(n,o)},d(e){e&&A(t)}}}function Li(e){let t,n,o=(e[101]+": "+e[107]||"")+"";return{c(){t=I("h3"),n=$(o),M(t,"class","svelte-1wvd7r2")},m(e,o){T(e,t,o),k(t,n)},p(e,t){2304&t[0]&&o!==(o=(e[101]+": "+e[107]||"")+"")&&D(n,o)},d(e){e&&A(t)}}}function Pi(e,t){let n,o,r,l,s,a,c,u;function d(e,t){return"input number"===e[105]?Li:e[108]?$i:Ii}let f=d(t),p=f(t);function m(...e){return t[59](t[102],t[101],t[105],t[106],t[108],...e)}function h(...e){return t[60](t[102],t[101],t[105],t[106],t[108],...e)}function y(...e){return t[61](t[102],t[101],t[105],t[106],t[104],t[108],t[107],...e)}function w(...e){return t[62](t[102],t[101],t[105],t[106],t[104],t[108],t[107],...e)}return{key:e,first:null,c(){n=I("div"),p.c(),o=L(),r=I("i"),l=L(),M(r,"class","fa-solid fa-xmark svelte-1wvd7r2"),M(r,"tabindex","0"),M(n,"class","activeTagFilter svelte-1wvd7r2"),M(n,"tabindex","0"),O(n,"--activeTagFilterColor","included"===t[103]?"#5f9ea0":"read"===t[104]?"#000":"#e85d75"),this.first=n},m(e,t){var i;T(e,n,t),p.m(n,null),k(n,o),k(n,r),k(n,l),a=!0,c||(u=[C(r,"click",(i=m,function(e){return e.preventDefault(),i.call(this,e)})),C(r,"keydown",h),C(n,"click",y),C(n,"keydown",w)],c=!0)},p(e,i){f===(f=d(t=e))&&p?p.p(t,i):(p.d(1),p=f(t),p&&(p.c(),p.m(n,o))),2304&i[0]&&O(n,"--activeTagFilterColor","included"===t[103]?"#5f9ea0":"read"===t[104]?"#000":"#e85d75")},i(e){a||(ne((()=>{a&&(s||(s=ge(n,Ht,{x:-10,duration:200},!0)),s.run(1))})),a=!0)},o(e){s||(s=ge(n,Ht,{x:-10,duration:200},!1)),s.run(0),a=!1},d(e){e&&A(n),p.d(),e&&s&&s.end(),c=!1,i(u)}}}function Ci(e){let t,n,o,r,l,s,a,c;return{c(){t=I("div"),n=I("div"),o=I("i"),l=L(),s=I("div"),M(o,"class",r=p("icon fa-solid fa-arrows-"+(e[9]??Re("gridFullView")??!e[16]?"up-down":"left-right"))+" svelte-1wvd7r2"),M(n,"tabindex","0"),M(n,"class","changeGridView svelte-1wvd7r2"),M(s,"class","sortFilter skeleton shimmer svelte-1wvd7r2"),M(t,"class","last-filter-option svelte-1wvd7r2")},m(i,r){T(i,t,r),k(t,n),k(n,o),k(t,l),k(t,s),a||(c=[C(n,"click",e[31]),C(n,"keydown",e[69])],a=!0)},p(e,t){66048&t[0]&&r!==(r=p("icon fa-solid fa-arrows-"+(e[9]??Re("gridFullView")??!e[16]?"up-down":"left-right"))+" svelte-1wvd7r2")&&M(o,"class",r)},d(e){e&&A(t),a=!1,i(c)}}}function Fi(e){let t,n,o,r,l,s,a,c,u,d,f,m,h,y,w,g,v,b,x,S,E,N,P,F,U,_,V,B,j=(e[8]?.sortFilter?.[e[8]?.sortFilter.findIndex(qi)]?.sortName||"")+"",R=[],H=new Map,q=`${e[2]}px`,W=e[8]?.sortFilter||[];const z=e=>e[98]+e[100];for(let t=0;t<W.length;t+=1){let n=Ho(e,W,t),o=z(n);H.set(o,R[t]=Di(o,n))}return{c(){t=I("div"),n=I("div"),o=I("i"),l=L(),s=I("div"),a=I("i"),d=L(),f=I("h2"),m=$(j),y=L(),w=I("div"),g=I("div"),v=I("div"),b=I("h2"),b.textContent="Sort By",x=L(),S=I("div"),E=$("×"),P=L(),F=I("div");for(let e=0;e<R.length;e+=1)R[e].c();M(o,"class",r=p("icon fa-solid fa-arrows-"+(e[9]??Re("gridFullView")??!e[16]?"up-down":"left-right"))+" svelte-1wvd7r2"),M(n,"tabindex","0"),M(n,"class","changeGridView svelte-1wvd7r2"),M(a,"tabindex",c=e[4]?"":"0"),M(a,"class",u=p("fa-duotone fa-sort-"+("asc"===e[8]?.sortFilter?.[e[8]?.sortFilter?.findIndex(Hi)]?.sortType?"up":"down"))+" svelte-1wvd7r2"),M(f,"tabindex",h=e[4]?"":"0"),M(f,"class","svelte-1wvd7r2"),M(b,"class","svelte-1wvd7r2"),M(S,"class","closing-x svelte-1wvd7r2"),M(S,"tabindex",N=e[4]&&e[1]<=425?"0":""),M(v,"class","header svelte-1wvd7r2"),M(F,"class","options svelte-1wvd7r2"),M(g,"class",U=p("options-wrap-filter-info "+(e[4]?"":"hide"))+" svelte-1wvd7r2"),M(w,"class",_=p("options-wrap "+(e[4]?"":"disable-interaction hide"))+" svelte-1wvd7r2"),O(w,"--maxFilterSelectionHeight",q),M(s,"class","sortFilter svelte-1wvd7r2"),M(t,"class","last-filter-option svelte-1wvd7r2")},m(i,r){T(i,t,r),k(t,n),k(n,o),k(t,l),k(t,s),k(s,a),k(s,d),k(s,f),k(f,m),k(s,y),k(s,w),k(w,g),k(g,v),k(v,b),k(v,x),k(v,S),k(S,E),k(g,P),k(g,F);for(let e=0;e<R.length;e+=1)R[e]&&R[e].m(F,null);V||(B=[C(n,"click",e[31]),C(n,"keydown",e[64]),C(a,"click",e[30]),C(a,"keydown",e[65]),C(f,"click",e[28]),C(f,"keydown",e[66]),C(S,"keydown",e[67]),C(S,"click",e[28])],V=!0)},p(e,t){66048&t[0]&&r!==(r=p("icon fa-solid fa-arrows-"+(e[9]??Re("gridFullView")??!e[16]?"up-down":"left-right"))+" svelte-1wvd7r2")&&M(o,"class",r),16&t[0]&&c!==(c=e[4]?"":"0")&&M(a,"tabindex",c),256&t[0]&&u!==(u=p("fa-duotone fa-sort-"+("asc"===e[8]?.sortFilter?.[e[8]?.sortFilter?.findIndex(Hi)]?.sortType?"up":"down"))+" svelte-1wvd7r2")&&M(a,"class",u),256&t[0]&&j!==(j=(e[8]?.sortFilter?.[e[8]?.sortFilter.findIndex(qi)]?.sortName||"")+"")&&D(m,j),16&t[0]&&h!==(h=e[4]?"":"0")&&M(f,"tabindex",h),18&t[0]&&N!==(N=e[4]&&e[1]<=425?"0":"")&&M(S,"tabindex",N),536871168&t[0]&&(W=e[8]?.sortFilter||[],R=xe(R,t,z,1,e,W,H,F,ve,Di,null,Ho)),16&t[0]&&U!==(U=p("options-wrap-filter-info "+(e[4]?"":"hide"))+" svelte-1wvd7r2")&&M(g,"class",U),16&t[0]&&_!==(_=p("options-wrap "+(e[4]?"":"disable-interaction hide"))+" svelte-1wvd7r2")&&M(w,"class",_),4&t[0]&&q!==(q=`${e[2]}px`)&&O(w,"--maxFilterSelectionHeight",q)},d(e){e&&A(t);for(let e=0;e<R.length;e+=1)R[e].d();V=!1,i(B)}}}function Mi(e){let t,n;return{c(){t=I("i"),M(t,"class",n=p("fa-duotone fa-sort-"+("asc"===e[8]?.sortFilter?.[e[8]?.sortFilter?.findIndex(Wi)].sortType?"up":"down"))+" svelte-1wvd7r2")},m(e,n){T(e,t,n)},p(e,o){256&o[0]&&n!==(n=p("fa-duotone fa-sort-"+("asc"===e[8]?.sortFilter?.[e[8]?.sortFilter?.findIndex(Wi)].sortType?"up":"down"))+" svelte-1wvd7r2")&&M(t,"class",n)},d(e){e&&A(t)}}}function Di(e,t){let n,o,l,s,a,c,u,d=(t[98]||"")+"",f=t[8]?.sortFilter?.[t[8]?.sortFilter?.findIndex(_i)].sortName===t[98]&&t[98],p=f&&Mi(t);function m(...e){return t[68](t[98],...e)}return{key:e,first:null,c(){n=I("div"),o=I("h3"),l=$(d),s=L(),p&&p.c(),a=L(),M(o,"class","svelte-1wvd7r2"),M(n,"class","option svelte-1wvd7r2"),this.first=n},m(e,i){T(e,n,i),k(n,o),k(o,l),k(n,s),p&&p.m(n,null),k(n,a),c||(u=[C(n,"click",(function(){r(t[29](t[98]))&&t[29](t[98]).apply(this,arguments)})),C(n,"keydown",m)],c=!0)},p(e,o){t=e,256&o[0]&&d!==(d=(t[98]||"")+"")&&D(l,d),256&o[0]&&(f=t[8]?.sortFilter?.[t[8]?.sortFilter?.findIndex(_i)].sortName===t[98]&&t[98]),f?p?p.p(t,o):(p=Mi(t),p.c(),p.m(n,a)):p&&(p.d(1),p=null)},d(e){e&&A(n),p&&p.d(),c=!1,i(u)}}}function Ui(e){let t,n,o,r,l,s,a,c,u,d,m,h,y,w,g,v,b,x,S,E,N,$,P,F,D,_,V,B,j,R,H,q,W,z,G=`${e[2]}px`,Y=[],K=new Map;function J(e,t){return e[8]?Zo:Qo}let X=J(e),Q=X(e),Z=(e[12]||!e[14])&&ei(e),ee=e[8]&&ii(e);function te(e,t){return e[8]?si:li}let ne=te(e),oe=ne(e),ie=!e[5]&&Ai(e),re=e[5]&&Ni(e),le=e[11]?.[e[8]?.filterSelection?.[e[8]?.filterSelection?.findIndex(Ri)]?.filterSelectionName]||[];const se=e=>e[101]+e[102]+(e[108]??"");for(let t=0;t<le.length;t+=1){let n=qo(e,le,t),o=se(n);K.set(o,Y[t]=Pi(o,n))}function ae(e,t){return e[8]?Fi:Ci}let ce=ae(e),ue=ce(e);const de=e[36].default,ye=function(e,t,n,o){if(e){const i=f(e,t,n,o);return e[0](i)}}(de,e,e[35],null);return{c(){t=I("main"),n=I("div"),Q.c(),o=L(),Z&&Z.c(),r=L(),l=I("div"),s=I("input"),a=L(),c=I("div"),u=I("i"),m=L(),h=I("div"),ee&&ee.c(),w=L(),g=I("div"),v=I("i"),b=L(),x=I("div"),oe.c(),E=L(),N=I("div"),ie&&ie.c(),$=L(),P=I("div"),re&&re.c(),F=L();for(let e=0;e<Y.length;e+=1)Y[e].c();D=L(),_=I("div"),V=I("i"),R=L(),ue.c(),H=L(),ye&&ye.c(),M(n,"class","home-status svelte-1wvd7r2"),M(s,"id","input-search"),M(s,"class","input-search svelte-1wvd7r2"),M(s,"type","search"),M(s,"enterkeyhint","search"),M(s,"autocomplete","off"),M(s,"placeholder","Search"),M(u,"class","input-search-wrap-icon fa-solid fa-sliders svelte-1wvd7r2"),M(u,"tabindex",d=e[3]?"":"0"),M(h,"class",y=p("options-wrap "+(e[3]?"":"disable-interaction hide"))+" svelte-1wvd7r2"),O(h,"--maxFilterSelectionHeight",G),M(c,"class","filterType svelte-1wvd7r2"),M(v,"class",p("showFilterOptions fa-solid fa-filter")+" svelte-1wvd7r2"),M(v,"tabindex","0"),M(g,"class","showFilterOptions-container svelte-1wvd7r2"),M(l,"class","input-search-wrap svelte-1wvd7r2"),M(x,"class",S=p("filters "+(e[6]?"":"disable-interaction")+(e[15]?" hasWheel":""))+" svelte-1wvd7r2"),M(x,"id","filters"),O(x,"--maxPaddingHeight",e[2]+65+"px"),M(P,"id","tagFilters"),M(P,"class","tagFilters svelte-1wvd7r2"),O(P,"max-height",e[5]?"200px":"30px"),M(V,"class",B=p("icon fa-solid fa-angle-"+(e[5]?"up":"down"))+" svelte-1wvd7r2"),M(_,"tabindex","0"),M(_,"class","showHideActiveFilters svelte-1wvd7r2"),M(N,"class",j=p("activeFilters"+(e[5]?" seenMore":""))+" svelte-1wvd7r2"),M(t,"id","main-home"),M(t,"class","svelte-1wvd7r2"),O(t,"--filters-space",e[6]?"80px":"")},m(i,d){T(i,t,d),k(t,n),Q.m(n,null),k(n,o),Z&&Z.m(n,null),k(t,r),k(t,l),k(l,s),U(s,e[13]),k(l,a),k(l,c),k(c,u),k(c,m),k(c,h),ee&&ee.m(h,null),k(l,w),k(l,g),k(g,v),k(t,b),k(t,x),oe.m(x,null),k(t,E),k(t,N),ie&&ie.m(N,null),k(N,$),k(N,P),re&&re.m(P,null),k(P,F);for(let e=0;e<Y.length;e+=1)Y[e]&&Y[e].m(P,null);k(N,D),k(N,_),k(_,V),k(t,R),ue.m(t,null),k(t,H),ye&&ye.m(t,null),q=!0,W||(z=[C(s,"input",e[38]),C(u,"click",e[19]),C(u,"keydown",e[39]),C(v,"click",e[32]),C(v,"keydown",e[42]),C(x,"wheel",e[56]),C(_,"click",e[33]),C(_,"keydown",e[63])],W=!0)},p(e,i){X===(X=J(e))&&Q?Q.p(e,i):(Q.d(1),Q=X(e),Q&&(Q.c(),Q.m(n,o))),e[12]||!e[14]?Z?(Z.p(e,i),20480&i[0]&&me(Z,1)):(Z=ei(e),Z.c(),me(Z,1),Z.m(n,null)):Z&&(fe(),he(Z,1,1,(()=>{Z=null})),pe()),8192&i[0]&&s.value!==e[13]&&U(s,e[13]),(!q||8&i[0]&&d!==(d=e[3]?"":"0"))&&M(u,"tabindex",d),e[8]?ee?ee.p(e,i):(ee=ii(e),ee.c(),ee.m(h,null)):ee&&(ee.d(1),ee=null),(!q||8&i[0]&&y!==(y=p("options-wrap "+(e[3]?"":"disable-interaction hide"))+" svelte-1wvd7r2"))&&M(h,"class",y),4&i[0]&&G!==(G=`${e[2]}px`)&&O(h,"--maxFilterSelectionHeight",G),ne===(ne=te(e))&&oe?oe.p(e,i):(oe.d(1),oe=ne(e),oe&&(oe.c(),oe.m(x,null))),(!q||32832&i[0]&&S!==(S=p("filters "+(e[6]?"":"disable-interaction")+(e[15]?" hasWheel":""))+" svelte-1wvd7r2"))&&M(x,"class",S),4&i[0]&&O(x,"--maxPaddingHeight",e[2]+65+"px"),e[5]?ie&&(ie.d(1),ie=null):ie?ie.p(e,i):(ie=Ai(e),ie.c(),ie.m(N,$)),e[5]?re?re.p(e,i):(re=Ni(e),re.c(),re.m(P,F)):re&&(re.d(1),re=null),100665600&i[0]&&(le=e[11]?.[e[8]?.filterSelection?.[e[8]?.filterSelection?.findIndex(Ri)]?.filterSelectionName]||[],fe(),Y=xe(Y,i,se,1,e,le,K,P,be,Pi,null,qo),pe()),32&i[0]&&O(P,"max-height",e[5]?"200px":"30px"),(!q||32&i[0]&&B!==(B=p("icon fa-solid fa-angle-"+(e[5]?"up":"down"))+" svelte-1wvd7r2"))&&M(V,"class",B),(!q||32&i[0]&&j!==(j=p("activeFilters"+(e[5]?" seenMore":""))+" svelte-1wvd7r2"))&&M(N,"class",j),ce===(ce=ae(e))&&ue?ue.p(e,i):(ue.d(1),ue=ce(e),ue&&(ue.c(),ue.m(t,H))),ye&&ye.p&&(!q||16&i[1])&&function(e,t,n,o,i,r){if(i){const l=f(t,n,o,r);e.p(l,i)}}(ye,de,e,e[35],q?function(e,t,n,o){if(e[2]&&o){const i=e[2](o(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|i[o];return e}return t.dirty|i}return t.dirty}(de,e[35],i,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[35]),null),64&i[0]&&O(t,"--filters-space",e[6]?"80px":"")},i(e){if(!q){me(Z);for(let e=0;e<le.length;e+=1)me(Y[e]);me(ye,e),q=!0}},o(e){he(Z);for(let e=0;e<Y.length;e+=1)he(Y[e]);he(ye,e),q=!1},d(e){e&&A(t),Q.d(),Z&&Z.d(),ee&&ee.d(),oe.d(),ie&&ie.d(),re&&re.d();for(let e=0;e<Y.length;e+=1)Y[e].d();ue.d(),ye&&ye.d(e),W=!1,i(z)}}}function Oi(e,t){if("string"==typeof e&&"string"==typeof t)return e.toLowerCase().includes(t.trim().toLowerCase())}const _i=({sortType:e})=>"none"!==e,Vi=({isSelected:e})=>e,Bi=()=>{},ji=()=>{},Ri=({isSelected:e})=>e,Hi=({sortType:e})=>"none"!==e,qi=({sortType:e})=>"none"!==e,Wi=({sortType:e})=>"none"!==e;function zi(e,t,n){let o,i,r,l,s,a,c,u,f,p,h,y,w,g,v,b;d(e,xt,(e=>n(78,o=e))),d(e,Xe,(e=>n(8,i=e))),d(e,et,(e=>n(79,r=e))),d(e,Ze,(e=>n(80,l=e))),d(e,ht,(e=>n(81,s=e))),d(e,mt,(e=>n(9,a=e))),d(e,pt,(e=>n(10,c=e))),d(e,Qe,(e=>n(11,u=e))),d(e,tt,(e=>n(12,f=e))),d(e,bt,(e=>n(82,p=e))),d(e,Je,(e=>n(83,h=e))),d(e,vt,(e=>n(13,y=e))),d(e,nt,(e=>n(84,w=e))),d(e,Ke,(e=>n(14,g=e))),d(e,Ye,(e=>n(15,v=e))),d(e,We,(e=>n(16,b=e)));let x,k,S,E,T,A,N,I,{$$slots:$={},$$scope:L}=t,P=!0,C=Math.max(window.visualViewport.width,window.innerWidth),F=Math.max(window.visualViewport.height,window.innerHeight),M=.3*F,D=!1,U=!1,O=["Algorithm Filter"],_=["sort","Anime Filter","Content Caution"],V=["weighted score","score","average score","user score","popularity"],B=!1,j=!1;async function R(e){c||(O.includes(e)?(B=!0,m(tt,f="Updating List",f),async function(){await Gn(!0,"shouldProcessRecommendation"),An({filterOptions:i,activeTagFilters:u}).then((async()=>{await Gn(!1,"shouldProcessRecommendation"),_t.update((e=>!e)),H()})).catch((e=>{throw H(),e}))}()):_.includes(e)?(j=!0,m(tt,f="Updating List",f),H()):j||B||w||(await Gn(i,"filterOptions"),await Gn(u,"activeTagFilters")))}function H(){r&&(r.terminate(),m(et,r=null,r)),Sn({filterOptions:i,activeTagFilters:u}).then((async e=>{B=j=!1,m(et,r=e.animeLoaderWorker,r),m(vt,y="",y),e?.isNew&&(m(Ze,l=e.finalAnimeList,l),m(Je,h=e.hiddenEntries,h),m(bt,p=e.numberOfNextLoadedGrid,p)),m(tt,f=null,f)})).catch((e=>{throw e}))}async function q(){let e=document.getElementById("tagFilters");await te(),e instanceof Element&&(e.scrollTop=0)}function W(){F=Math.max(window.visualViewport.height,window.innerHeight),n(2,M=.3*F),n(1,C=Math.max(window.visualViewport.width,window.innerWidth))}async function z(e){if(c)return me();let t=i?.filterSelection.findIndex((({isSelected:e})=>e)),o=i?.filterSelection?.[t].filterSelectionName;if(o!==e){n(4,S=!1),l?.length>36&&!a&&await pe(),i?.filterSelection?.[t].filters.Dropdown.forEach((e=>{e.selected=!1})),m(Xe,i.filterSelection[t]=i?.filterSelection?.[t],i),k=null,m(Xe,i.filterSelection[t].isSelected=!1,i);let o=i?.filterSelection?.findIndex((({filterSelectionName:t})=>t===e));m(Xe,i.filterSelection[o].isSelected=!0,i),async function(){let e=document.getElementById("filters");await te(),e instanceof Element&&(e.scrollLeft=0)}(),q(),R()}E instanceof Element&&E.closest(".filterType")&&(Be(E,"highlight"),E=null),n(3,x=!1)}function Y(e){if(c&&(i?.filterSelection?.length??0)<1)return me();let t=e.target,o=t.classList,r=t.closest(".filterType"),l=t.closest(".options-wrap");!o.contains("filterType")&&!r||x?l&&!o.contains("closing-x")||o.contains("options-wrap")||(E instanceof Element&&E.closest(".filterType")&&(Be(E,"highlight"),E=null),n(3,x=!1)):n(3,x=!0)}function K(){T&&clearTimeout(T),A=!0,T=setTimeout((()=>{A=!1}),300)}function J(e,t){if(A&&"mouse"===e.pointerType)return;let o=e.target,r=o.closest(".filter-select");if(r===k)return;let l=i?.filterSelection?.findIndex((({isSelected:e})=>e));if(k instanceof Element){let e=Array.from(k.parentElement.children).filter((e=>!e.classList.contains("disable-interaction"))).indexOf(k);if(o.classList.contains("icon")&&!o.classList.contains("fa-angle-down")&&i?.filterSelection?.[l].filters.Dropdown[e].selected)return;m(Xe,i.filterSelection[l].filters.Dropdown[e].selected=!1,i)}P&&n(0,P=!1),E instanceof Element&&E.closest(".filter-select")&&(Be(E,"highlight"),E=null),m(Xe,i.filterSelection[l].filters.Dropdown[t].selected=!0,i),k=r}function X(e){let t=i?.filterSelection?.findIndex((({isSelected:e})=>e));m(Xe,i.filterSelection[t].filters.Dropdown[e].selected=!1,i),E instanceof Element&&E.closest(".filter-select")&&(Be(E,"highlight"),E=null),k=null}async function Q(e){if(i?.filterSelection?.length<1||!i)return;let t=e.target,o=t.classList;if(o.contains("options-wrap")&&"fixed"===getComputedStyle(t).position){E instanceof Element&&(Be(E,"highlight"),E=null),n(3,x=!1),n(4,S=!1);let e=i?.filterSelection?.findIndex((({isSelected:e})=>e));i?.filterSelection?.[e].filters.Dropdown.forEach((e=>{e.selected=!1})),m(Xe,i.filterSelection[e]=i?.filterSelection?.[e],i),k=null}else if(!o.contains("options-wrap")&&!t.closest(".options-wrap")&&!o.contains("async-element")){let e=t.closest(".filterType");o.contains("filterType")||e||(E instanceof Element&&E.closest(".filterType")&&(Be(E,"highlight"),E=null),n(3,x=!1));let r=t.closest(".sortFilter");o.contains("sortFilter")||r||(E instanceof Element&&E.closest(".sortFilter")&&(Be(E,"highlight"),E=null),n(4,S=!1));let l=t.closest(".select");if(!o.contains("select")&&!o.contains("fa-angle-down")&&!l){E instanceof Element&&E.closest(".filter-select")&&(Be(E,"highlight"),E=null);let e=i?.filterSelection?.findIndex((({isSelected:e})=>e));i?.filterSelection?.[e].filters.Dropdown.forEach((e=>{e.selected=!1})),m(Xe,i.filterSelection[e]=i?.filterSelection?.[e],i),k=null}}}function Z(e,t,n,o,r,l){if(c)return me();let s=i?.filterSelection?.findIndex((({isSelected:e})=>e)),a=i?.filterSelection?.[s].filterSelectionName,d=i?.filterSelection?.[s].filters.Dropdown[o].options[n].selected;"none"===d||!0===d||"read"===r&&"included"!==d?(m(Xe,i.filterSelection[s].filters.Dropdown[o].options[n].selected="included",i),m(Qe,u[a]=u[a].filter((o=>o.optionName+o.optionIdx+o.optionType!==e+n+t)),u),u[a].unshift({optionName:e,optionType:t,optionIdx:n,categIdx:o,selected:"included",changeType:r,filterType:"dropdown"}),Qe.set(u)):"included"===d?"read"===r?(m(Xe,i.filterSelection[s].filters.Dropdown[o].options[n].selected="none",i),m(Qe,u[a]=u[a].filter((i=>!(i.optionIdx===n&&i.optionName===e&&"dropdown"===i.filterType&&i.categIdx===o&&(!i.optionType||i.optionType===t)))),u)):(m(Xe,i.filterSelection[s].filters.Dropdown[o].options[n].selected="excluded",i),m(Qe,u[a]=u[a].map((i=>(i.optionIdx===n&&i.optionName===e&&"dropdown"===i.filterType&&i.categIdx===o&&"included"===i.selected&&i.optionType===t&&(i.selected="excluded"),i))),u)):(m(Xe,i.filterSelection[s].filters.Dropdown[o].options[n].selected="none",i),m(Qe,u[a]=u[a].filter((i=>!(i.optionIdx===n&&i.optionName===e&&"dropdown"===i.filterType&&i.categIdx===o&&i.optionType===t))),u)),R(l)}function ee(e,t,n,o){let r=e.target.classList,l=e.which||e.keyCode||0;if(r.contains("checkbox")&&"click"===e.type||r.contains("checkbox")&&13!==l&&"keydown"===e.type||A&&"mouse"===e.pointerType)return;if(c)return void(r.contains("checkbox")||me());let s=i?.filterSelection?.findIndex((({isSelected:e})=>e)),a=i?.filterSelection?.[s].filterSelectionName,d=i?.filterSelection?.[s].filters.Checkbox[n].isSelected;d?m(Qe,u[a]=u[a].filter((e=>!(e.optionIdx===n&&e.optionName===t&&"checkbox"===e.filterType&&"included"===e.selected))),u):(m(Qe,u[a]=u[a].filter((e=>e.optionName+e.optionIdx!==t+n)),u),u[a].unshift({optionName:t,optionIdx:n,filterType:"checkbox",selected:"included",changeType:"read"}),Qe.set(u)),m(Xe,i.filterSelection[s].filters.Checkbox[n].isSelected=!i?.filterSelection?.[s].filters.Checkbox[n].isSelected,i),R(o)}function ne(e,t,n,o,r,l,s){if(c)return me();let a=i?.filterSelection?.findIndex((({isSelected:e})=>e)),d=i?.filterSelection?.[a].filterSelectionName,f=i?.filterSelection?.[a].filters["Input Number"][n].numberValue;if(V.includes(o)&&/^(>=|<=|<|>).*($)/.test(t)){let c=t.split(/(<=|>=|<|>)/).filter((e=>e));if(t!==f&&c.length<=2){let p,h,y=t.split(/(<=|>=|<|>)/).filter((e=>e));if(c[0].includes(">")||c[0].includes("<")?(p=c[0],h=c[1]):(p=c[1],h=c[0]),y[0].includes(">")||y[0].includes("<")?(y[0],y[1]):(y[1],y[0]),t!==f&&(!isNaN(h)&&(parseFloat(h)>=l||"number"!=typeof l)&&(parseFloat(h)<=r||"number"!=typeof r)||!h)){if(h){let e=u[d].findIndex((e=>e.optionName===o&&e.optionValue===f&&e.optionIdx===n&&"input number"===e.filterType));-1===e?(m(Qe,u[d]=u[d].filter((e=>e.optionName+e.optionIdx!==o+n)),u),u[d].unshift({optionName:o,optionValue:t,CMPoperator:p,CMPNumber:h,optionIdx:n,filterType:"input number",selected:"included",changeType:"read"})):(u[d].splice(e,1),m(Qe,u[d]=u[d].filter((e=>e.optionName+e.optionIdx!==o+n)),u),u[d].unshift({optionName:o,optionValue:t,CMPoperator:p,CMPNumber:h,optionIdx:n,filterType:"input number",selected:"included",changeType:"read"})),Qe.set(u)}else m(Qe,u[d]=u[d].filter((e=>!(e.optionIdx===n&&e.optionName===o&&e.optionValue===f&&"input number"===e.filterType))),u);m(Xe,i.filterSelection[a].filters["Input Number"][n].numberValue=t,i),R(s)}else Ue(e.target,f)}else{let t=u[d].findIndex((e=>e.optionName===o&&e.optionValue===f&&e.optionIdx===n&&"input number"===e.filterType));t>=0&&m(Qe,u[d][t].selected="included",u),Ue(e.target,f)}}else if(t!==f&&(!isNaN(t)&&(parseFloat(t)>=l||"number"!=typeof l)&&(parseFloat(t)<=r||"number"!=typeof r)||""===t)){if(""===t)m(Qe,u[d]=u[d].filter((e=>!(e.optionIdx===n&&e.optionName===o&&e.optionValue===f&&"input number"===e.filterType))),u);else{let e=u[d].findIndex((e=>e.optionName===o&&e.optionValue===f&&e.optionIdx===n&&"input number"===e.filterType));-1===e?(m(Qe,u[d]=u[d].filter((e=>e.optionName+e.optionIdx!==o+n)),u),u[d].unshift({optionName:o,optionValue:t,optionIdx:n,filterType:"input number",selected:"included",changeType:"read"})):(u[d].splice(e,1),m(Qe,u[d]=u[d].filter((e=>e.optionName+e.optionIdx!==o+n)),u),u[d].unshift({optionName:o,optionValue:t,optionIdx:n,filterType:"input number",selected:"included",changeType:"read"})),Qe.set(u)}m(Xe,i.filterSelection[a].filters["Input Number"][n].numberValue=t,i),R(s)}else elementIdx>=0&&m(Qe,u[d][elementIdx].selected="included",u),Ue(e.target,f)}function oe(e,t,n,o,r,l,s,a){if(c)return me();let d=i?.filterSelection?.findIndex((({isSelected:e})=>e)),f=i?.filterSelection?.[d].filterSelectionName;if("input number"===o){let e=u[f].findIndex((e=>e.optionName===n&&e.optionValue===a&&e.optionIdx===t&&"input number"===e.filterType));if(e>=0){let t=u[f][e].selected;m(Qe,u[f][e].selected="included"===t?"excluded":"included",u)}}else if("checkbox"===o){let e=u[f].findIndex((e=>e.optionIdx===t&&e.optionName===n&&e.filterType===o)),r=u?.[f]?.[e]?.selected;"included"===r?(m(Qe,u[f][e].selected="excluded",u),m(Xe,i.filterSelection[d].filters.Checkbox[t].isSelected=!1,i)):"excluded"===r&&(m(Qe,u[f][e].selected="included",u),m(Xe,i.filterSelection[d].filters.Checkbox[t].isSelected=!0,i))}else if("dropdown"===o){let e=i?.filterSelection?.[d].filters.Dropdown[r].options[t].selected;"included"===e?(m(Xe,i.filterSelection[d].filters.Dropdown[r].options[t].selected="excluded",i),m(Qe,u[f]=u[f].map((e=>(e.optionIdx!==t||e.optionName!==n||"included"!==e.selected||e.optionType&&e.optionType!==s||(e.selected="excluded"),e))),u)):"excluded"===e&&(m(Xe,i.filterSelection[d].filters.Dropdown[r].options[t].selected="included",i),m(Qe,u[f]=u[f].map((e=>(e.optionIdx!==t||e.optionName!==n||"excluded"!==e.selected||e.optionType&&e.optionType!==s||(e.selected="included"),e))),u))}R(f)}function ie(e,t,n,o,r,l){if(c)return me();let s=i?.filterSelection?.findIndex((({isSelected:e})=>e)),a=i?.filterSelection?.[s].filterSelectionName;m(Xe,"checkbox"===o?i.filterSelection[s].filters.Checkbox[t].isSelected=!1:"input number"===o?i.filterSelection[s].filters["Input Number"][t].numberValue="":i.filterSelection[s].filters.Dropdown[r].options[t].selected="none",i),m(Qe,u[a]=u[a].filter((e=>!(e.optionName===n&&e.optionIdx===t&&e.filterType===o&&(!e.optionType||e.optionType===l)))),u),R(a)}async function re(e){if(c)return me();let t=i?.filterSelection?.findIndex((({isSelected:e})=>e)),n=i?.filterSelection?.[t].filterSelectionName,r=u?.[n]?.length;r&&await o("Do you want to remove all filters?")&&(i?.filterSelection?.[t].filters["Input Number"].forEach((e=>{e.numberValue=""})),i?.filterSelection?.[t].filters.Checkbox.forEach((e=>{e.isSelected=!1})),i?.filterSelection?.[t].filters.Dropdown.forEach((({options:e},n)=>{e.forEach((({selected:e},o)=>{m(Xe,i.filterSelection[t].filters.Dropdown[n].options[o].selected="none",i)}))})),m(Xe,i.filterSelection[t]=i?.filterSelection?.[t],i),m(Qe,u[n]=[],u),R(n))}function le(e){let t=e.target,o=t.classList,i=t.closest(".sortFilter"),r=t.closest(".options-wrap");!o.contains("sortFilter")&&!i||S?r&&!o.contains("closing-x")||o.contains("options-wrap")||(E instanceof Element&&E.closest(".sortFilter")&&(Be(E,"highlight"),E=null),n(4,S=!1)):n(4,S=!0)}function se(e){if(c)return me();let{sortName:t,sortType:o}=i?.sortFilter?.filter((({sortType:e})=>"none"!==e))[0],r=i?.sortFilter?.findIndex((({sortType:e})=>"none"!==e));if(t===e){let e="desc"===o?"asc":"desc";m(Xe,i.sortFilter[r].sortType=e,i)}else if(t!==e){m(Xe,i.sortFilter[r].sortType="none",i);let t=i?.sortFilter?.findIndex((({sortName:t})=>t===e));m(Xe,i.sortFilter[t].sortType="desc",i)}R("sort"),E instanceof Element&&E.closest(".sortFilter")&&(Be(E,"highlight"),E=null),n(4,S=!1)}function ae(){if(c)return me();let{sortType:e}=i?.sortFilter?.filter((({sortType:e})=>"none"!==e))[0],t=i?.sortFilter?.findIndex((({sortType:e})=>"none"!==e));m(Xe,i.sortFilter[t].sortType="desc"===e?"asc":"desc",i),R("sort")}function ce(e){let t=e.which||e.keyCode||0;if(38==t||40==t){var o=Array.from(document.getElementsByClassName("options-wrap")||[]).find((e=>!e.classList.contains("disable-interaction")));if(o?.closest?.(".filterType")||o?.closest?.(".sortFilter")||o?.closest?.(".filter-select"))if(e.preventDefault(),E instanceof Element&&E?.closest?.(".options")?.children?.length){let e,n,o,i,r=E.closest(".options"),l=Array.from(r.querySelectorAll(".option")),s=l.indexOf(E);for(let r=0;r<l.length;r++)if(!l[r].classList.contains("disable-interaction"))if(38===t){if(i=l[r],r<s)n=l[r];else if(n){e=n;break}}else if(o||(o=l[r]),r>s){e=l[r];break}let a=!1;e instanceof Element||(o instanceof Element?(e=o,a=!0):i instanceof Element&&(e=i,a=!0)),e instanceof Element&&(Be(E,"highlight"),E=e,Ve(E,"highlight"),E.scrollIntoView({behavior:a?"auto":"smooth",container:r,block:"center",inline:"nearest"}))}else{let e=o.querySelectorAll(".option:not(.disable-interaction)");E=e[0],E instanceof Element&&(Ve(E,"highlight"),E.scrollIntoView({behavior:"smooth",container:parent,block:"center",inline:"nearest"}))}}else if(13===t){if(E instanceof Element){let e=new KeyboardEvent("keydown",{key:"Enter"});E.dispatchEvent(e)}}else{o=Array.from(document.getElementsByClassName("options-wrap")||[]).find((e=>!e.classList.contains("disable-interaction")));if(o?.closest?.(".filter-select")&&9!==t||o instanceof Element&&"fixed"===getComputedStyle(o).position)return;let e=i?.filterSelection?.findIndex((({isSelected:e})=>e));n(3,x=null),n(4,S=null),i?.filterSelection?.length>0&&(i?.filterSelection?.[e].filters.Dropdown.forEach((e=>{e.selected=!1})),m(Xe,i.filterSelection[e]=i?.filterSelection?.[e],i)),k=null,E instanceof Element&&(Be(E,"highlight"),E=null)}}async function ue(){m(mt,a=!a,a),_n(a,"gridFullView")}async function de(e=null){l?.length>36&&!a&&await pe(),n(6,U="boolean"==typeof e?e:!U)}async function fe(e=null){l?.length>36&&!a&&await pe(),n(5,D="boolean"==typeof e?e:!D),q()}function pe(){return new Promise((e=>{r instanceof Worker&&s().then((()=>{m(Ze,l=null,l),r?.postMessage?.({reload:!0})})).catch((()=>{o({isAlert:!0,title:"Something went wrong",text:"Action failed, please try again."})})),N={resolve:e}}))}function me(){o({isAlert:!0,title:"Initializing resources",text:"Please wait a moment..."})}Ct.subscribe((e=>{"boolean"==typeof e&&N?.resolve?.()})),window.checkOpenDropdown=()=>(k||x||S)&&Math.max(window.visualViewport.width,window.innerWidth)<=425,window.closeDropdown=function(){E instanceof Element&&(Be(E,"highlight"),E=null),n(3,x=!1),n(4,S=!1);let e=i?.filterSelection?.findIndex((({isSelected:e})=>e));i?.filterSelection?.[e].filters.Dropdown.forEach((e=>{e.selected=!1})),m(Xe,i.filterSelection[e]=i?.filterSelection?.[e],i),k=null},G((()=>{let e=document.getElementById("filters");e.addEventListener("scroll",K),Oe(e,"x"),document.addEventListener("keydown",ce),window.addEventListener("resize",W),window.addEventListener("click",Q)}));return e.$$set=e=>{"$$scope"in e&&n(35,L=e.$$scope)},[P,C,M,x,S,D,U,I,i,a,c,u,f,y,g,v,b,V,z,Y,J,X,Z,ee,ne,oe,ie,re,le,se,ae,ue,de,fe,me,L,$,(e,{optionName:t})=>Oi(t,e.optKeyword)||""===e.optKeyword,function(){y=this.value,vt.set(y)},e=>"Enter"===e.key&&Y(e),e=>"Enter"===e.key&&Y(e),(e,t)=>"Enter"===t.key&&z(e),e=>"Enter"===e.key&&de(e),function(e,t){i.filterSelection[e].filters.Dropdown[t].optKeyword=this.value,Xe.set(i)},(e,t)=>"Enter"===t.key&&X(e),(e,t)=>("Enter"===t.key||"ArrowDown"===t.key||"ArrowUp"===t.key)&&J(t,e),(e,t)=>J(t,e),(e,t)=>"Enter"===t.key&&X(e),function(e,t){i.filterSelection[e].filters.Dropdown[t].optKeyword=this.value,Xe.set(i)},(e,t,n,o,i,r)=>"Enter"===r.key&&Z(e.optionName,t.filName,n,o,t.changeType,i.filterSelectionName),e=>{e.target.checked=!1,me()},(e,t,n,o)=>ee(o,e.filName,t,n.filterSelectionName),function(e,t){e[t].isSelected=this.checked},(e,t,n,o)=>ee(o,e.filName,t,n.filterSelectionName),(e,t,n,o)=>"Enter"===o.key&&ee(o,e.filName,t,n.filterSelectionName),(e,t,n,o)=>ne(o,o.target.value,e,t.filName,t.maxValue,t.minValue,n.filterSelectionName),e=>{if(function(e,t){let n=e.target;n.classList.contains(t)||(n=n.closest("."+t)),n.scrollWidth<=n.clientWidth||0!==e.deltaY&&0===e.deltaX&&(e.preventDefault(),e.stopPropagation(),n.scrollLeft=Math.max(0,n.scrollLeft+e.deltaY))}(e,"filters"),(a??Re("gridFullView")??!b)&&!I&&e.deltaY<0){n(7,I=!0);let e=0;document.documentElement.scrollTop=e,n(7,I=!1)}},e=>"Enter"===e.key&&re(),e=>"Enter"===e.key&&re(),(e,t,n,o,i,r)=>ie(0,e,t,n,o,i),(e,t,n,o,i,r)=>"Enter"===r.key&&ie(0,e,t,n,o,i),(e,t,n,o,i,r,l,s)=>oe(0,e,t,n,o,0,r,l),(e,t,n,o,i,r,l,s)=>"Enter"===s.key&&oe(0,e,t,n,o,0,r,l),e=>"Enter"===e.key&&fe(),e=>"Enter"===e.key&&ue(),e=>"Enter"===e.key&&ae(),e=>"Enter"===e.key&&le(e),e=>"Enter"===e.key&&le(e),(e,t)=>"Enter"===t.key&&se(e),e=>"Enter"===e.key&&ue()]}function Gi(e){let t,n,o,r,l,s,a,c,u,d,f,p,m,h,y,w,g,v=!e[1]&&Yi(e);return{c(){t=I("div"),n=I("div"),o=I("div"),r=I("div"),l=I("h2"),s=$(e[2]),a=L(),c=I("h2"),u=L(),d=I("div"),v&&v.c(),f=L(),p=I("button"),m=$(e[4]),M(l,"class","confirm-title svelte-1mystf5"),M(c,"class","confirm-text svelte-1mystf5"),M(r,"class","confirm-info-container svelte-1mystf5"),M(p,"class","button svelte-1mystf5"),M(d,"class","confirm-button-container svelte-1mystf5"),M(o,"class","confirm-container svelte-1mystf5"),M(n,"class","confirm-wrapper svelte-1mystf5"),O(n,"--height",e[7]?"calc(100% + 1px)":"100%"),M(t,"class","confirm svelte-1mystf5")},m(i,h){T(i,t,h),k(t,n),k(n,o),k(o,r),k(r,l),k(l,s),k(r,a),k(r,c),c.innerHTML=e[3],k(o,u),k(o,d),v&&v.m(d,null),k(d,f),k(d,p),k(p,m),e[12](p),y=!0,w||(g=[C(p,"click",e[8]),C(p,"keydown",e[13]),C(t,"click",e[10]),C(t,"touchend",e[10],{passive:!0}),C(t,"keydown",e[14])],w=!0)},p(e,t){(!y||4&t)&&D(s,e[2]),(!y||8&t)&&(c.innerHTML=e[3]),e[1]?v&&(v.d(1),v=null):v?v.p(e,t):(v=Yi(e),v.c(),v.m(d,f)),(!y||16&t)&&D(m,e[4]),128&t&&O(n,"--height",e[7]?"calc(100% + 1px)":"100%")},i(e){y||(ne((()=>{y&&(h||(h=ge(o,Ht,{y:20,duration:200},!0)),h.run(1))})),y=!0)},o(e){h||(h=ge(o,Ht,{y:20,duration:200},!1)),h.run(0),y=!1},d(n){n&&A(t),v&&v.d(),e[12](null),n&&h&&h.end(),w=!1,i(g)}}}function Yi(e){let t,n,o,r;return{c(){t=I("button"),n=$(e[5]),M(t,"class","button svelte-1mystf5")},m(i,l){T(i,t,l),k(t,n),o||(r=[C(t,"click",e[9]),C(t,"keydown",e[11])],o=!0)},p(e,t){32&t&&D(n,e[5])},d(e){e&&A(t),o=!1,i(r)}}}function Ki(e){let t,n,o=e[0]&&Gi(e);return{c(){o&&o.c(),t=P()},m(e,i){o&&o.m(e,i),T(e,t,i),n=!0},p(e,[n]){e[0]?o?(o.p(e,n),1&n&&me(o,1)):(o=Gi(e),o.c(),me(o,1),o.m(t.parentNode,t)):o&&(fe(),he(o,1,1,(()=>{o=null})),pe())},i(e){n||(me(o),n=!0)},o(e){he(o),n=!1},d(e){o&&o.d(e),e&&A(t)}}}function Ji(e,t,n){let o;d(e,Tt,(e=>n(7,o=e)));const i=function(){const e=z();return(t,n,{cancelable:o=!1}={})=>{const i=e.$$.callbacks[t];if(i){const r=_(t,n,{cancelable:o});return i.slice().forEach((t=>{t.call(e,r)})),!r.defaultPrevented}return!0}}();let r,l,{showConfirm:s=!1}=t,{isAlert:a=!1}=t,{confirmTitle:c="Confirmation"}=t,{confirmText:u="Do you want to continue?"}=t,{confirmLabel:f="OK"}=t,{cancelLabel:p="CANCEL"}=t,m=!1;function h(e){m&&"keydown"!==e.type||(n(0,s=!1),i("confirmed"))}function y(e){m&&"keydown"!==e.type||(n(0,s=!1),i("cancelled"))}function w(e){if(m&&"keydown"!==e.type)return;let t=e.target,n=t.classList;t.closest(".confirm-container")||n.contains("confirm-container")||y(e)}var g;g=()=>{s?(m=!0,l=setTimeout((()=>{m=!1}),200),r?.focus?.()):(l&&clearTimeout(l),m=!1)},z().$$.after_update.push(g);return e.$$set=e=>{"showConfirm"in e&&n(0,s=e.showConfirm),"isAlert"in e&&n(1,a=e.isAlert),"confirmTitle"in e&&n(2,c=e.confirmTitle),"confirmText"in e&&n(3,u=e.confirmText),"confirmLabel"in e&&n(4,f=e.confirmLabel),"cancelLabel"in e&&n(5,p=e.cancelLabel)},[s,a,c,u,f,p,r,o,h,y,w,e=>"Enter"===e.key&&y(e),function(e){K[e?"unshift":"push"]((()=>{r=e,n(6,r)}))},e=>"Enter"===e.key&&h(e),e=>"Enter"===e.key&&w(e)]}var Xi={Fixed:{Navigator:class extends Ae{constructor(e){super(),Te(this,e,Do,Mo,l,{},null,[-1,-1])}},Menu:class extends Ae{constructor(e){super(),Te(this,e,Ro,Bo,l,{},null,[-1,-1])}}},Anime:{AnimeGrid:class extends Ae{constructor(e){super(),Te(this,e,mn,dn,l,{},null,[-1,-1])}},Fixed:{AnimePopup:class extends Ae{constructor(e){super(),Te(this,e,Lo,No,l,{},null,[-1,-1,-1,-1,-1])}},AnimeOptionsPopup:class extends Ae{constructor(e){super(),Te(this,e,Fo,Co,l,{},null,[-1,-1])}}}},Others:{Search:class extends Ae{constructor(e){super(),Te(this,e,zi,Ui,l,{},null,[-1,-1,-1,-1,-1])}},Confirm:class extends Ae{constructor(e){super(),Te(this,e,Ji,Ki,l,{showConfirm:0,isAlert:1,confirmTitle:2,confirmText:3,confirmLabel:4,cancelLabel:5})}}}},Qi="@vercel/analytics",Zi="1.0.1",er=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function tr(e="auto"){window.vam="auto"!==e?e:function(){try{const e=process.env.NODE_ENV;if("development"===e||"test"===e)return"development"}catch(e){}return"production"}()}function nr(){return"development"===(window.vam||"production")}function or(e={debug:!0}){var t;if("undefined"==typeof window)return;tr(e.mode),er(),e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend));const n=nr()?"https://va.vercel-scripts.com/v1/script.debug.js":"/_vercel/insights/script.js";if(document.head.querySelector(`script[src*="${n}"]`))return;const o=document.createElement("script");o.src=n,o.defer=!0,o.setAttribute("data-sdkn",Qi),o.setAttribute("data-sdkv",Zi),nr()&&!1===e.debug&&o.setAttribute("data-debug","false"),document.head.appendChild(o)}function ir(e){let t,n,o,i,r;return{c(){t=I("div"),M(t,"class","progress svelte-1jnkk2b"),O(t,"--progress","-"+(100-e[6])+"%")},m(e,n){T(e,t,n),o=!0,i||(r=C(t,"outrostart",ar),i=!0)},p(e,n){64&n[0]&&O(t,"--progress","-"+(100-e[6])+"%")},i(e){o||(n&&n.end(1),o=!0)},o(e){n=we(t,Rt,{duration:0,delay:400}),o=!1},d(e){e&&A(t),e&&n&&n.end(),i=!1,r()}}}function rr(e){let t,n;return t=new Xi.Anime.AnimeGrid({}),{c(){ke(t.$$.fragment)},m(e,o){Se(t,e,o),n=!0},i(e){n||(me(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){Ee(t,e)}}}function lr(t){let n,o,r,l,s;return{c(){n=I("div"),n.innerHTML='<i class="list-update-icon fa-solid fa-arrows-rotate svelte-1jnkk2b"></i> \n\t\t\t<h3 class="list-update-label svelte-1jnkk2b">List Update</h3>',M(n,"class","list-update-container svelte-1jnkk2b"),M(n,"tabindex","0")},m(e,o){T(e,n,o),r=!0,l||(s=[C(n,"click",t[10]),C(n,"keydown",t[11])],l=!0)},p:e,i(e){r||(ne((()=>{r&&(o||(o=ge(n,Ht,{x:50,duration:200},!0)),o.run(1))})),r=!0)},o(e){o||(o=ge(n,Ht,{x:50,duration:200},!1)),o.run(0),r=!1},d(e){e&&A(n),e&&o&&o.end(),l=!1,i(s)}}}function sr(e){let t,n,o,i,r,l,s,a,c,u,d,f,p,m,h,y,w=e[6]>0&&e[6]<100&&ir(e);o=new Xi.Fixed.Navigator({}),r=new Xi.Fixed.Menu({}),a=new Xi.Others.Search({props:{$$slots:{default:[rr]},$$scope:{ctx:e}}}),u=new Xi.Anime.Fixed.AnimePopup({}),f=new Xi.Anime.Fixed.AnimeOptionsPopup({}),m=new Xi.Others.Confirm({props:{showConfirm:e[0],isAlert:e[1],confirmTitle:e[2],confirmText:e[3],confirmLabel:e[4],cancelLabel:e[5]}}),m.$on("confirmed",e[8]),m.$on("cancelled",e[9]);let g=e[7]&&lr(e);return{c(){t=I("main"),w&&w.c(),n=L(),ke(o.$$.fragment),i=L(),ke(r.$$.fragment),l=L(),s=I("div"),ke(a.$$.fragment),c=L(),ke(u.$$.fragment),d=L(),ke(f.$$.fragment),p=L(),ke(m.$$.fragment),h=L(),g&&g.c(),M(s,"class","home svelte-1jnkk2b"),M(s,"id","home"),M(t,"class","svelte-1jnkk2b")},m(e,v){T(e,t,v),w&&w.m(t,null),k(t,n),Se(o,t,null),k(t,i),Se(r,t,null),k(t,l),k(t,s),Se(a,s,null),k(s,c),Se(u,s,null),k(t,d),Se(f,t,null),k(t,p),Se(m,t,null),k(t,h),g&&g.m(t,null),y=!0},p(e,o){e[6]>0&&e[6]<100?w?(w.p(e,o),64&o[0]&&me(w,1)):(w=ir(e),w.c(),me(w,1),w.m(t,n)):w&&(fe(),he(w,1,1,(()=>{w=null})),pe());const i={};2&o[2]&&(i.$$scope={dirty:o,ctx:e}),a.$set(i);const r={};1&o[0]&&(r.showConfirm=e[0]),2&o[0]&&(r.isAlert=e[1]),4&o[0]&&(r.confirmTitle=e[2]),8&o[0]&&(r.confirmText=e[3]),16&o[0]&&(r.confirmLabel=e[4]),32&o[0]&&(r.cancelLabel=e[5]),m.$set(r),e[7]?g?(g.p(e,o),128&o[0]&&me(g,1)):(g=lr(e),g.c(),me(g,1),g.m(t,null)):g&&(fe(),he(g,1,1,(()=>{g=null})),pe())},i(e){y||(me(w),me(o.$$.fragment,e),me(r.$$.fragment,e),me(a.$$.fragment,e),me(u.$$.fragment,e),me(f.$$.fragment,e),me(m.$$.fragment,e),me(g),y=!0)},o(e){he(w),he(o.$$.fragment,e),he(r.$$.fragment,e),he(a.$$.fragment,e),he(u.$$.fragment,e),he(f.$$.fragment,e),he(m.$$.fragment,e),he(g),y=!1},d(e){e&&A(t),w&&w.d(),Ee(o),Ee(r),Ee(a),Ee(u),Ee(f),Ee(m),g&&g.d()}}}const ar=e=>{e.target.style.setProperty("--progress","0%")};function cr(e,t,n){let o,i,r,l,s,a,c,u,f,p,h,y,w,g,v,b,x,k,S,E,T,A,N,I,$,L,P,C,F,M,D,U,O;d(e,xt,(e=>n(24,o=e))),d(e,tt,(e=>n(25,i=e))),d(e,bt,(e=>n(26,r=e))),d(e,Je,(e=>n(27,l=e))),d(e,Ze,(e=>n(28,s=e))),d(e,vt,(e=>n(29,a=e))),d(e,et,(e=>n(30,c=e))),d(e,It,(e=>n(7,u=e))),d(e,Lt,(e=>n(31,f=e))),d(e,We,(e=>n(32,p=e))),d(e,Nt,(e=>n(33,h=e))),d(e,mt,(e=>n(34,y=e))),d(e,St,(e=>n(35,w=e))),d(e,Tt,(e=>n(36,g=e))),d(e,kt,(e=>n(37,v=e))),d(e,ot,(e=>n(38,b=e))),d(e,rt,(e=>n(39,x=e))),d(e,ct,(e=>n(40,k=e))),d(e,pt,(e=>n(41,S=e))),d(e,Ye,(e=>n(42,E=e))),d(e,it,(e=>n(43,T=e))),d(e,at,(e=>n(44,A=e))),d(e,Pt,(e=>n(45,N=e))),d(e,ut,(e=>n(46,I=e))),d(e,lt,(e=>n(47,$=e))),d(e,ft,(e=>n(48,L=e))),d(e,Xe,(e=>n(49,P=e))),d(e,Qe,(e=>n(50,C=e))),d(e,Ke,(e=>n(51,F=e))),d(e,st,(e=>n(52,M=e))),d(e,qe,(e=>n(53,D=e))),m(We,p=(()=>{try{return JSBridge.exportJSON,!0}catch(e){return!1}})(),p),or(),window.onload=()=>{function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),"https://kanshi.vercel.app"===window.location.origin?e("config","G-F5E8XNQS20"):e("config","G-PPMY92TJCE")};const _=new Function;window.onYouTubeIframeAPIReady=_;let V=[];m(tt,i="Getting Existing Data",i);let B=setInterval((()=>{i||m(tt,i="Please Wait...",i)}),200);function j(e=!1){e||q()&&T?(m(ot,b=!0,b),Cn().then((()=>{m(ot,b=!1,b),$n().finally((()=>{R()}))})).catch((e=>{R(),m(ot,b=!1,b),m(tt,i="Something went wrong...",i),console.error(e)}))):R()}function R(){A&&W()&&Mn()}new Promise((async e=>{if(m(qe,D=await Ie(),D),p&&navigator.onLine)try{D&&JSBridge.checkAppID(D,!1)}catch(e){window.updateAppAlert?.()}let t=await Yn("gridFullView")??!p;"boolean"==typeof t&&(He("gridFullView",t),m(mt,y=t,y)),e()})).then((()=>{p||(async()=>{m(st,M=await Yn("exportPathIsAvailable"),M),"boolean"==typeof M&&He("exportPathIsAvailable",M)})(),V.push(new Promise((async(e,t)=>{let n=await Yn("lastAnimeUpdate"),o=!(n instanceof Date&&!isNaN(n));if(!o){await Yn("animeEntriesIsEmpty")&&(o=!0)}var i;o?(m(Ze,s=null,s),new Promise(((e,t)=>{Bn=setInterval((()=>{tt.set("Getting Anime Entries")}),300),Ge.set(0),yn("./webapi/worker/getAnimeEntries.js").then((n=>{Ge.set(25),Bn&&(clearInterval(Bn),Bn=null);let o=new Worker(n);Vn&&clearTimeout(Vn),o.postMessage(i),o.onmessage=({data:t})=>{t?.hasOwnProperty("status")?(xn=!0,tt.set(t.status)):(Ge.set(100),xn=!1,Ot.update((e=>!e)),Vn=setTimeout((()=>{o.terminate()}),bn),e(t))},o.onerror=e=>{Ge.set(100),t(e)}})).catch((e=>{Ge.set(100),Bn&&(clearInterval(Bn),Bn=null),tt.set(null),zn(),t(e)}))})).then((()=>{e()})).catch((async()=>{t()}))):e()}))),V.push(new Promise((async e=>{let t=await Yn("username");t&&(He("username",t),m(Ke,F=t,F)),e()}))),V.push(new Promise((async e=>{qn().then((t=>{m(Qe,C=t.activeTagFilters,C),m(Xe,P=t.filterOptions,P),e()})).catch((()=>{reject()}))}))),V.push(new Promise((async e=>{let t=await Yn("autoPlay");"boolean"==typeof t&&(He("autoPlay",t),m(ft,L=t,L)),m(lt,$=await Yn("lastRunnedAutoUpdateDate"),$),m(ut,I=await Yn("lastRunnedAutoExportDate"),I),m(it,T=await Yn("autoUpdate")??!1,T),He("autoUpdate",T),m(at,A=await Yn("autoExport")??!1,A),He("autoExport",A),e()}))),Promise.all(V).then((async()=>{let e=await Yn("shouldProcessRecommendation");if(!e){await Yn("recommendedAnimeListLength")<1&&(e=!0)}new Promise((async t=>{e?An().then((async()=>{await Gn(!1,"shouldProcessRecommendation"),t(!1)})).catch((e=>{throw e})):t(!0)})).then((e=>{Sn({loadSaved:e}).then((async e=>{m(et,c=e.animeLoaderWorker,c),m(vt,a="",a),e?.isNew&&(m(Ze,s=e.finalAnimeList,s),m(Je,l=e.hiddenEntries,l),m(bt,r=e.numberOfNextLoadedGrid,r),m(tt,i=null,i),j(!0),m(pt,S=!1,S))})).catch((e=>{throw e}))}))})).catch((async e=>{j(!0),m(pt,S=!1,S),m(tt,i="Something went wrong...",i),o?.(p?{isAlert:!0,title:"Something Went Wrong",text:"App may not be working properly, you may want to restart and make sure you're running the latest version."}:{isAlert:!0,title:"Something Went Wrong",text:"App may not be working properly, you may want to refresh the page, or if not clear the cookies but backup your data first."}),console.error(e)}))})),pt.subscribe((async e=>{!1===e&&clearInterval(B)})),Ze.subscribe((async e=>{S&&e?.length>0&&!1!==S&&m(pt,S=!1,S)})),Ut.subscribe((async e=>{"boolean"!=typeof e||S||(m(It,u=!1,u),c&&(c.terminate(),m(et,c=null,c)),Sn().then((async e=>{m(et,c=e.animeLoaderWorker,c),m(vt,a="",a),e?.isNew&&(m(Ze,s=e.finalAnimeList,s),m(Je,l=e.hiddenEntries,l),m(bt,r=e.numberOfNextLoadedGrid,r)),m(tt,i=null,i)})).catch((e=>{throw e})))})),Dt.subscribe((async e=>{"boolean"!=typeof e||S||(await Gn(!0,"shouldProcessRecommendation"),m(It,u=!1,u),An().then((async()=>{await Gn(!1,"shouldProcessRecommendation"),_t.update((e=>!e)),Ut.update((e=>!e))})).catch((e=>{throw Ut.update((e=>!e)),e})))})),Ot.subscribe((async e=>{"boolean"!=typeof e||S||(await Gn(!0,"shouldProcessRecommendation"),An().then((async()=>{await Gn(!1,"shouldProcessRecommendation"),_t.update((e=>!e)),Vt.update((e=>!e))})).catch((e=>{throw Vt.update((e=>!e)),e})))})),Vt.subscribe((async e=>{"boolean"!=typeof e||S||((g||(y?O.scrollLeft>500:document.documentElement.scrollTop>Math.max(0,O?.offsetTop-55)))&&s?.length?m(It,u=!0,u):(c&&(c.terminate(),m(et,c=null,c)),Sn().then((async e=>{m(et,c=e.animeLoaderWorker,c),m(vt,a="",a),e?.isNew&&(m(Ze,s=e.finalAnimeList,s),m(Je,l=e.hiddenEntries,l),m(bt,r=e.numberOfNextLoadedGrid,r)),m(tt,i=null,i)})).catch((e=>{throw e}))))})),_t.subscribe((async e=>{"boolean"!=typeof e||S||qn()}));let H=36e5;function q(){let e=!1;return $?$ instanceof Date&&!isNaN($)&&(new Date).getTime()-$.getTime()>H&&(e=!0):e=!0,e}function W(){let e=!1;return I?I instanceof Date&&!isNaN(I)&&(new Date).getTime()-I.getTime()>H&&(e=!0):e=!0,e}it.subscribe((async e=>{if(!0===e)if(Gn(!0,"autoUpdate"),q())j(),x&&clearInterval(x),m(rt,x=setInterval((()=>{T&&j()}),H),x);else{let e=H-((new Date).getTime()-$?.getTime())||0;setTimeout((()=>{!1!==T&&(j(),x&&clearInterval(x),m(rt,x=setInterval((()=>{T&&j()}),H),x))}),e)}else!1===e&&(x&&clearInterval(x),Gn(!1,"autoUpdate"))})),Ft.subscribe((e=>{"boolean"==typeof e&&!S&&navigator.onLine&&(m(ot,b=!0,b),Cn().then((()=>{m(ot,b=!1,b),$n()})).catch((e=>{m(ot,b=!1,b),m(tt,i="Something went wrong...",i),console.error(e)})))})),at.subscribe((async e=>{if(!0===e)if(Gn(!0,"autoExport"),W())j(),k&&clearInterval(k),m(ct,k=setInterval((()=>{A&&j()}),H),k);else{let e=H-((new Date).getTime()-I?.getTime())||0;setTimeout((()=>{!1!==A&&(j(),k&&clearInterval(k),m(ct,k=setInterval((()=>{A&&j()}),H),k))}),e)}else!1===e&&(k&&clearInterval(k),Gn(!1,"autoExport"))})),Mt.subscribe((e=>{"boolean"!=typeof e||S||Mn()})),Bt.subscribe((e=>{"boolean"==typeof e&&(f||m(Lt,f=!0,f),N&&clearTimeout(N),m(Pt,N=setTimeout((()=>{m(Lt,f=!1,f)}),500),N))})),document.addEventListener("visibilitychange",(()=>{S||p||"visible"!==document.visibilityState||(b&&(q()||W())?(j(),A&&!k&&at.update((e=>e)),T&&!x&&it.update((e=>e))):b||(m(ot,b=!0,b),Cn({visibilityChange:!0}).then((()=>m(ot,b=!1,b)))))}));let z=!1;"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");let Y=()=>{m(Ye,E=!0,E),window.removeEventListener("wheel",Y,{passive:!0})};window.addEventListener("wheel",Y,{passive:!0}),window.checkEntries=()=>{S||(b&&(q()||W())?(j(),k||at.update((e=>e)),x||it.update((e=>e))):b||(m(ot,b=!0,b),Cn({visibilityChange:!0}).then((()=>m(ot,b=!1,b)))))},window.addEventListener("popstate",(()=>{window.backPressed()}));let K,J,X,Q,Z=!1;window.backPressed=()=>{if(h&&!p)window.history.go(-1);else{if(p||window.history.pushState("visited",""),z)return ce(),n(0,z=!1),void(Z=!1);if(U&&U===document?.activeElement&&Math.max(window.visualViewport.width,window.innerWidth)<=750)return U?.focus?.(),U?.blur?.(),void(Z=!1);if(v)return m(kt,v=!1,v),void(Z=!1);if(window.checkOpenFullScreenItem?.())return window.closeFullScreenItem?.(),void(Z=!1);if(g)return m(Tt,g=!1,g),void(Z=!1);if(w)return m(St,w=!1,w),void(Z=!1);if(window.checkOpenDropdown?.())return window.closeDropdown?.(),void(Z=!1);if(!Z)return Z=!0,void(y?(O.style.overflow="hidden",O.style.overflow="",O?.children?.[0]?.scrollIntoView?.({container:O,behavior:"smooth",block:"nearest",inline:"start"})):(!p&&matchMedia("(hover:hover)").matches||(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow=""),window.scrollTo({top:-9999,behavior:"smooth"})));y?(O.style.overflow="hidden",O.scrollLeft=0,clearTimeout(K),K=setTimeout((()=>{O.style.overflow=""}),100)):(!p&&matchMedia("(hover:hover)").matches||(document.documentElement.style.overflow="hidden"),document.documentElement.scrollTop=0,document.body.scrollTop=0,window.scrollY=0,!p&&matchMedia("(hover:hover)").matches||(clearTimeout(K),K=setTimeout((()=>{document.documentElement.style.overflow=""}),100)));try{JSBridge.willExit()}catch(e){}window.setShouldGoBack(!0),Z=!1}},mt.subscribe((async e=>{await te(),e?O?.scrollLeft>500&&window.setShouldGoBack(!1):document.documentElement.scrollTop>Math.max(0,O?.offsetTop-55)&&window.setShouldGoBack(!1)})),Tt.subscribe((e=>{!0===e&&window.setShouldGoBack(!1)})),kt.subscribe((e=>{!0===e&&window.setShouldGoBack(!1)})),window.addEventListener("scroll",(()=>{document.documentElement.scrollTop>Math.max(0,O?.offsetTop-55)&&!Z&&window.setShouldGoBack(!1),Bt.update((e=>!e))})),G((()=>{U=document.getElementById("usernameInput"),O=document.getElementById("anime-grid"),O?.addEventListener("scroll",(()=>{O.scrollLeft>Math.max(0,O?.offsetTop-55)&&!Z&&window.setShouldGoBack(!1),y&&Bt.update((e=>!e))})),document.getElementById("popup-container").addEventListener("scroll",(()=>{Bt.update((e=>!e))}))})),window.setShouldGoBack=e=>{if(e||(Z=!1),p)try{JSBridge.setShouldGoBack(e)}catch(e){}else"visited"!==window.history.state&&window.history.pushState("visited",""),m(Nt,h=e,h)},window.copyToClipBoard=e=>{if(p)try{JSBridge.copyToClipBoard(e)}catch(e){}else navigator?.clipboard?.writeText?.(e)},$t.subscribe((()=>{clearTimeout(X),J=!0,X=setTimeout((()=>{J=!1}),500)}));let ee,ne,oe,ie,re,le,se,ae=!1;function ce(){le?.resolve?.(!1),le=n(1,ee=n(2,ne=n(3,oe=n(4,ie=n(5,re=void 0))))),n(0,z=!1)}async function ue(e){if(await o({title:"List update is available",text:"Are you sure you want to refresh the list?"})){let t,n=e.target,o=n.classList;t=o.contains("list-update-container")?n.querySelector?.(".list-update-icon"):n?.closest(".list-update-container")?.querySelector?.(".list-update-icon"),se&&clearTimeout(se),Ve(t,"fa-spin"),c&&(c.terminate(),m(et,c=null,c)),Sn().then((async e=>{m(It,u=!1,u),se=setTimeout((()=>{Be(t,"fa-spin")}),200),m(et,c=e.animeLoaderWorker,c),m(vt,a="",a),e?.isNew&&(m(Ze,s=e.finalAnimeList,s),m(Je,l=e.hiddenEntries,l),m(bt,r=e.numberOfNextLoadedGrid,r)),m(tt,i=null,i)})).catch((e=>{throw e}))}}document.addEventListener("pointerdown",(e=>{if("mouse"===e.pointerType)return;let t=e.target;t.classList.contains("copy")||(t=t.closest(".copy")),t&&(ae=!0,Q&&clearTimeout(Q),Q=setTimeout((()=>{let e=t.getAttribute("copy-value");e&&!f&&ae&&!J&&(t.style.pointerEvents="none",setTimeout((()=>{t.style.pointerEvents=""}),500),window.copyToClipBoard(e))}),500))})),document.addEventListener("pointerup",(e=>{if("mouse"===e.pointerType)return;let t=e.target;t.classList.contains("copy")||(t=t.closest(".copy")),t&&(ae=!1,Q&&clearTimeout(Q))})),document.addEventListener("pointercancel",(e=>{if("mouse"===e.pointerType)return;let t=e.target;t.classList.contains("copy")||(t=t.closest(".copy")),t&&(ae=!1,Q&&clearTimeout(Q))})),m(xt,o=window.confirmPromise=async e=>new Promise((t=>{n(1,ee=e?.isAlert||!1),n(2,ne=e?.title||(ee?"Heads Up":"Confirmation")),n(3,oe=("string"==typeof e?e:e?.text)||"Are you sure you want to continue"),n(4,ie=e?.confirmLabel||"OK"),n(5,re=e?.cancelLabel||"CANCEL"),n(0,z=!0),le={resolve:t}})),o),window.updateAppAlert=async()=>{if(await(o?.({title:"New updates are available",text:"You may want to download the new version.",confirmLabel:"DOWNLOAD"})))try{JSBridge.downloadUpdate()}catch(e){window.open("https://github.com/u-Kuro/Kanshi.Anime-Recommendation/raw/main/Kanshi.apk","_blank")}};let de,fe=0,pe=performance.now();Ge.subscribe((e=>{(e>=100||e<=0||performance.now()-pe>300)&&(cancelAnimationFrame(de),de=requestAnimationFrame((()=>{n(6,fe=e)})),pe=performance.now())}));return[z,ee,ne,oe,ie,re,fe,u,function(){le?.resolve?.(!0),le=n(1,ee=n(2,ne=n(3,oe=n(4,ie=n(5,re=void 0))))),n(0,z=!1)},ce,ue,e=>"Enter"===e.key&&ue(e)]}var ur="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};window.FontAwesomeKitConfig={asyncLoading:{enabled:!1},autoA11y:{enabled:!0},baseUrl:"https://ka-f.fontawesome.com",baseUrlKit:"https://kit.fontawesome.com",detectConflictsUntil:null,iconUploads:{},id:76794169,license:"free",method:"css",minify:{enabled:!0},token:"5a5fa257cb",v4FontFaceShim:{enabled:!0},v4shim:{enabled:!0},v5FontFaceShim:{enabled:!0},version:"6.2.0"},function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)),o}function n(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){var n,i;n=e,i=o[t],t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){var n=t&&t.addOn||"",o=(n=t&&t.baseFilename||e.license+n,t&&t.minify?".min":""),i=t&&t.fileSuffix||e.method;return t=t&&t.subdir||e.method,e.baseUrl+"/releases/"+("latest"===e.version?"latest":"v".concat(e.version))+"/"+t+"/"+n+o+"."+i}function r(e,t){t="."+Array.prototype.join.call(t||["fa"],",."),t=e.querySelectorAll(t),Array.prototype.forEach.call(t,(function(t){var n=t.getAttribute("title"),o=(t.setAttribute("aria-hidden","true"),!t.nextElementSibling||!t.nextElementSibling.classList.contains("sr-only"));n&&o&&((o=e.createElement("span")).innerHTML=n,o.classList.add("sr-only"),t.parentNode.insertBefore(o,t.nextSibling))}))}function l(){}var s,a=void 0!==ur&&void 0!==ur.process&&"function"==typeof ur.process.emit,c="undefined"==typeof setImmediate?setTimeout:setImmediate,u=[];function d(){for(var e=0;e<u.length;e++)u[e][0](u[e][1]);s=!(u=[])}function f(e,t){u.push([e,t]),s||(s=!0,c(d,0))}function p(e){var t=(n=e.owner)._state,n=n._data,o=e[t],i=e.then;if("function"==typeof o){t="fulfilled";try{n=o(n)}catch(e){w(i,e)}}m(i,n)||("fulfilled"===t&&h(i,n),"rejected"===t&&w(i,n))}function m(t,n){var o;try{if(t===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"===e(n))){var i=n.then;if("function"==typeof i)return i.call(n,(function(e){o||(o=!0,(n===e?y:h)(t,e))}),(function(e){o||(o=!0,w(t,e))})),1}}catch(i){return o||w(t,i),1}}function h(e,t){e!==t&&m(e,t)||y(e,t)}function y(e,t){"pending"===e._state&&(e._state="settled",e._data=t,f(v,e))}function w(e,t){"pending"===e._state&&(e._state="settled",e._data=t,f(b,e))}function g(e){e._then=e._then.forEach(p)}function v(e){e._state="fulfilled",g(e)}function b(e){e._state="rejected",g(e),!e._handled&&a&&ur.process.emit("unhandledRejection",e._data,e)}function x(e){ur.process.emit("rejectionHandled",e)}function k(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof k==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[];var t=e,n=this;function o(e){w(n,e)}try{t((function(e){h(n,e)}),o)}catch(t){o(t)}}k.prototype={constructor:k,_state:"pending",_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(l),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,"rejected"===this._state&&a&&f(x,this)),"fulfilled"===this._state||"rejected"===this._state?f(p,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},k.all=function(e){if(Array.isArray(e))return new k((function(t,n){for(var o,i=[],r=0,l=0;l<e.length;l++)(o=e[l])&&"function"==typeof o.then?o.then(function(e){return r++,function(n){i[e]=n,--r||t(i)}}(l),n):i[l]=o;r||t(i)}));throw new TypeError("You must pass an array to Promise.all().")},k.race=function(e){if(Array.isArray(e))return new k((function(t,n){for(var o,i=0;i<e.length;i++)(o=e[i])&&"function"==typeof o.then?o.then(t,n):t(o)}));throw new TypeError("You must pass an array to Promise.race().")},k.resolve=function(t){return t&&"object"===e(t)&&t.constructor===k?t:new k((function(e){e(t)}))},k.reject=function(e){return new k((function(t,n){n(e)}))};var S,E,T,A,N="function"==typeof Promise?Promise:k;function I(e,t){var n=t.fetch,o=t.XMLHttpRequest,i=(t=t.token,e);return"URLSearchParams"in window?(i=new URL(e)).searchParams.set("token",t):i=i+"?token="+encodeURIComponent(t),i=i.toString(),new N((function(e,t){var r;"function"==typeof n?n(i,{mode:"cors",cache:"default"}).then((function(e){if(e.ok)return e.text();throw new Error("")})).then((function(t){e(t)})).catch(t):"function"==typeof o?((r=new o).addEventListener("loadend",(function(){this.responseText?e(this.responseText):t(new Error(""))})),["abort","error","timeout"].map((function(e){r.addEventListener(e,(function(){t(new Error(""))}))})),r.open("GET",i),r.send()):t(new Error(""))}))}function $(e,t,n){var i=e;return[[/(url\("?)\.\.\/\.\.\/\.\./g,function(e,n){return"".concat(n).concat(t)}],[/(url\("?)\.\.\/webfonts/g,function(e,o){return"".concat(o).concat(t,"/releases/v").concat(n,"/webfonts")}],[/(url\("?)https:\/\/kit-free([^.])*\.fontawesome\.com/g,function(e,n){return"".concat(n).concat(t)}]].forEach((function(e){t=2,e=function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,i=!1,r=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw r}}return n}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?o(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var t=e[0];e=e[1],i=i.replace(t,e)})),i}function L(e,t,o){o=2<arguments.length&&void 0!==o?o:function(){};var l=t.document||l,s=(l=r.bind(r,l,["fa","fab","fas","far","fal","fad","fak"]),0<Object.keys(e.iconUploads||{}).length);return e.autoA11y.enabled&&o(l),o=[{id:"fa-main",addOn:void 0}],e.v4shim&&e.v4shim.enabled&&o.push({id:"fa-v4-shims",addOn:"-v4-shims"}),e.v5FontFaceShim&&e.v5FontFaceShim.enabled&&o.push({id:"fa-v5-font-face",addOn:"-v5-font-face"}),e.v4FontFaceShim&&e.v4FontFaceShim.enabled&&o.push({id:"fa-v4-font-face",addOn:"-v4-font-face"}),s&&o.push({id:"fa-kit-upload",customCss:!0}),l=o.map((function(o){return new N((function(r,l){I(o.customCss?e.baseUrlKit+"/"+e.token+"/"+e.id+"/kit-upload.css":i(e,{addOn:o.addOn,minify:e.minify.enabled}),t).then((function(i){var l,s,a;r((l=n(n({},t),{},{baseUrl:e.baseUrl,version:e.version,id:o.id,contentFilter:function(e,t){return $(e,t.baseUrl,t.version)}}),s=l.contentFilter||function(e,t){return e},a=document.createElement("style"),s=document.createTextNode(s(i,l)),a.appendChild(s),a.media="all",l.id&&a.setAttribute("id",l.id),l&&l.detectingConflicts&&l.detectionIgnoreAttr&&a.setAttributeNode(document.createAttribute(l.detectionIgnoreAttr)),a))})).catch(l)}))})),N.all(l)}function P(e,t){t.autoA11y=e.autoA11y.enabled,"pro"===e.license&&(t.autoFetchSvg=!0,t.fetchSvgFrom=e.baseUrl+"/releases/"+("latest"===e.version?"latest":"v".concat(e.version))+"/svgs",t.fetchUploadedSvgFrom=e.uploadsUrl);var o=[];return e.v4shim.enabled&&o.push(new N((function(o,r){I(i(e,{addOn:"-v4-shims",minify:e.minify.enabled}),t).then((function(e){o(C(e,n(n({},t),{},{id:"fa-v4-shims"})))})).catch(r)}))),o.push(new N((function(o,r){I(i(e,{minify:e.minify.enabled}),t).then((function(e){var i,r,l;e=C(e,n(n({},t),{},{id:"fa-main"})),o((r=(i=t)&&void 0!==i.autoFetchSvg?i.autoFetchSvg:void 0,void 0!==(l=i&&void 0!==i.autoA11y?i.autoA11y:void 0)&&e.setAttribute("data-auto-a11y",l?"true":"false"),r&&(e.setAttributeNode(document.createAttribute("data-auto-fetch-svg")),e.setAttribute("data-fetch-svg-from",i.fetchSvgFrom),e.setAttribute("data-fetch-uploaded-svg-from",i.fetchUploadedSvgFrom)),e))})).catch(r)}))),N.all(o)}function C(e,t){var n=document.createElement("SCRIPT");return e=document.createTextNode(e),n.appendChild(e),n.referrerPolicy="strict-origin",t.id&&n.setAttribute("id",t.id),t&&t.detectingConflicts&&t.detectionIgnoreAttr&&n.setAttributeNode(document.createAttribute(t.detectionIgnoreAttr)),n}function F(e){var t,n=[],o=document,i=(o.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(o.readyState);i||o.addEventListener("DOMContentLoaded",t=function(){for(o.removeEventListener("DOMContentLoaded",t),i=1;t=n.shift();)t()}),i?setTimeout(e,0):n.push(e)}try{window.FontAwesomeKitConfig&&(S=window.FontAwesomeKitConfig,E={detectingConflicts:S.detectConflictsUntil&&new Date<=new Date(S.detectConflictsUntil),detectionIgnoreAttr:"data-fa-detection-ignore",fetch:window.fetch,token:S.token,XMLHttpRequest:window.XMLHttpRequest,document:document},T=document.currentScript,A=T?T.parentElement:document.head,function(e,t){return t=1<arguments.length&&void 0!==t?t:{},"js"===(e=0<arguments.length&&void 0!==e?e:{}).method?P(e,t):"css"===e.method?L(e,t,(function(e){F(e),"undefined"!=typeof MutationObserver&&new MutationObserver(e).observe(document,{childList:!0,subtree:!0})})):void 0}(S,E).then((function(e){e.map((function(e){try{A.insertBefore(e,T?T.nextSibling:null)}catch(t){A.appendChild(e)}})),E.detectingConflicts&&T&&F((function(){T.setAttributeNode(document.createAttribute(E.detectionIgnoreAttr)),e=S,n=E,t=document.createElement("script"),n.detectionIgnoreAttr&&t.setAttributeNode(document.createAttribute(n.detectionIgnoreAttr)),t.src=i(e,{baseFilename:"conflict-detection",fileSuffix:"js",subdir:"js",minify:e.minify.enabled});var e,t,n=t;document.body.appendChild(n)}))})).catch((function(e){console.error("".concat("Font Awesome Kit:"," ").concat(e))})))}catch(e){console.error("".concat("Font Awesome Kit:"," ").concat(e))}}();return new class extends Ae{constructor(e){super(),Te(this,e,cr,sr,l,{},null,[-1,-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
